<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="Content-Style-Type" content="text/css">
	<title>kaavio readme</title>
	<link rel=stylesheet href="./default.css">
</head>
<body>
<div class='toc_button_top'><a href='#3DDQkfdwVQl'>
<svg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 200 200'>
<defs><g id='line'>
  <circle cx='45' cy='50' r='15' fill='white' stroke='none' stroke-width='1' />
  <polyline fill='none' stroke='white' stroke-width='20' points=' 75.0,50.0 170.0,50.0' />
</g></defs>
<rect x='0' y='0' width='200' height='200' rx='30' ry='30' fill='lightgray' stroke='none' stroke-width='1' />
<use xlink:href='#line' x='0' y='0' />
<use xlink:href='#line' x='0' y='50' />
<use xlink:href='#line' x='0' y='100' />
</svg>
</a></div>
<!-- config:write-comment -->
<!-- config:header-numbering 2 5 -->
<!-- config:entity-numbering-depth 1 -->
<!-- <!-- config:term-link-in-header -->
<!-- define: BLANK_PARAGRAPH = '　　' -->
<!-- define: TODO = '@((background:red;color:white;)(ToDo : %1))' -->
<!-- define: B = '@((font-weight:bold;)(%1))' -->
<!-- define: I = '@((font-style:oblique;)(%1))' -->
<!-- define: SYNTAX = "**Syntax:**" -->
<!-- define: ARGS_AND_VALS = "**Arguments and Values:**" -->
<!-- define: DESCRIPTION = "**Description:**" -->
<!-- define: EXAMPLES = "**Examples:**" -->
<!-- define: SEE_ALSO = "**See Also:**" -->
<!-- define: NO_SEE_ALSO = "**See Also:** None." -->
<!-- define: NOTES = "**Notes:**" -->
<!-- define: NO_NOTES = "**Notes:** None." -->
<!-- define: OPTIONAL = '@((color:navy;)(&optional))' -->
<!-- define: KEY = '@((color:navy;)(&key))' -->
<!-- define: REST = '@((color:navy;)(&rest))' -->
<!-- define: BODY = '@((color:navy;)(&body))' -->
<h1><a name='dzm2At0of45'></a>README - kaavio</h1>
<p>　この文書は、 <strong>kaavio</strong> のマニュアル文書です。</p>
<a name='3DDQkfdwVQl'></a>
<h2>Table of contents</h2>
<details class='tocx' open>
<summary class='tocx'><a href='#cWuZL5pQm2F'>1 kaavio とは</a></summary>
<blockquote class='tocx'>
<li class='tocx'><a href='#jmXRzUWYW1r'>1.1 インストール</a></li>
<li class='tocx'><a href='#5drwLE4mm0i'>1.2 実行可能バイナリの作成</a></li>
<li class='tocx'><a href='#iUKFrISKmaN'>1.3 sandbox mode</a></li>
</blockquote>
</details>
<li class='tocx'><a href='#9LLncE6hWlx'>2 簡単なサンプル</a></li>
<details class='tocx' open>
<summary class='tocx'><a href='#2msfXdtEc6a'>3 基本的な図形</a></summary>
<blockquote class='tocx'>
<li class='tocx'><a href='#kJonRG8GtHF'>3.1 四角形</a></li>
<li class='tocx'><a href='#8UQowBxrcaE'>3.2 正円</a></li>
<li class='tocx'><a href='#7YzIcjhyGKN'>3.3 楕円</a></li>
<li class='tocx'><a href='#6eeF43U3xPh'>3.4 正多角形</a></li>
<li class='tocx'><a href='#5vGRm9AMypB'>3.5 多角形</a></li>
<li class='tocx'><a href='#fv4OUML78x4'>3.6 直線</a></li>
<li class='tocx'><a href='#cp2F91gKG7W'>3.7 円弧</a></li>
<li class='tocx'><a href='#cTdCvBeU6ZJ'>3.8 テキスト</a></li>
<li class='tocx'><a href='#4dFMjynUMYw'>3.9 ひし形</a></li>
<li class='tocx'><a href='#8YR8CiywoW8'>3.10 平行四辺形</a></li>
<li class='tocx'><a href='#iTkYd8KXLYO'>3.11 二次ベジェ曲線</a></li>
<li class='tocx'><a href='#8PFAoBpi4A9'>3.12 三次ベジェ曲線</a></li>
</blockquote>
</details>
<details class='tocx' open>
<summary class='tocx'><a href='#1s5LsvBYupX'>4 一般的な図形</a></summary>
<blockquote class='tocx'>
<li class='tocx'><a href='#eFhVs4WwYUG'>4.1 コネクタ</a></li>
<li class='tocx'><a href='#4WyMTv59pvw'>4.2 パラグラフ</a></li>
<li class='tocx'><a href='#e7hkC2YUaKe'>4.3 テキストボックス</a></li>
<li class='tocx'><a href='#jRjILbbJATV'>4.4 ドキュメント</a></li>
<li class='tocx'><a href='#5ZT843xJDiq'>4.5 フォルダ</a></li>
<li class='tocx'><a href='#03WwbeGq0eH'>4.6 人物</a></li>
<li class='tocx'><a href='#5IHcv4bxjLU'>4.7 吹き出し</a></li>
<li class='tocx'><a href='#0AVJhEKnK1M'>4.8 メモ</a></li>
<li class='tocx'><a href='#hja1QJC0Ivb'>4.9 キューブ</a></li>
<li class='tocx'><a href='#5ME1Xv0K4sM'>4.10 円柱</a></li>
<li class='tocx'><a href='#hjZ26isLw42'>4.11 爆発</a></li>
<li class='tocx'><a href='#4cZRWkwhYNO'>4.12 十字</a></li>
<li class='tocx'><a href='#49KKf97828b'>4.13 ブロック矢印</a></li>
<li class='tocx'><a href='#lBS33hNe32a'>4.14 波括弧</a></li>
<li class='tocx'><a href='#g6xjP526KX7'>4.15 テーブル</a></li>
</blockquote>
</details>
<details class='tocx' open>
<summary class='tocx'><a href='#gz7soCOOkJW'>5 その他の図形要素</a></summary>
<blockquote class='tocx'>
<li class='tocx'><a href='#4qgt62QVDZl'>5.1 パス</a></li>
<li class='tocx'><a href='#kSyxpJZzQjY'>5.2 画像ファイルの埋め込み</a></li>
<li class='tocx'><a href='#cNmjD3OiTOH'>5.3 生の SVG コード片の挿入</a></li>
</blockquote>
</details>
<li class='tocx'><a href='#h1RNMQY1C0b'>6 座標と位置</a></li>
<li class='tocx'><a href='#kgs1vf3AbTN'>7 サブキャンバス</a></li>
<li class='tocx'><a href='#8VfZIeFiMsb'>8 クリッピング</a></li>
<li class='tocx'><a href='#hwRhCz9Gn9t'>9 定義と再使用</a></li>
<details class='tocx' open>
<summary class='tocx'><a href='#kfrwaPRQE9I'>10 パターンとグラデーション</a></summary>
<blockquote class='tocx'>
<li class='tocx'><a href='#dmYFJAv81Kl'>10.1 パターン</a></li>
<li class='tocx'><a href='#4p1J7EWjD3m'>10.2 グラデーション</a></li>
</blockquote>
</details>
<details class='tocx' open>
<summary class='tocx'><a href='#4z8VHZK3CSo'>11 テーマ</a></summary>
<blockquote class='tocx'>
<li class='tocx'><a href='#fg1xJPCiXVU'>11.1 利用できるテーマ</a></li>
<li class='tocx'><a href='#dY1SXtflNNS'>11.2 新しいテーマの作成</a></li>
<li class='tocx'><a href='#fgQNJlpxlTm'>11.3 テーマのカスタマイズ</a></li>
</blockquote>
</details>
<details class='tocx' open>
<summary class='tocx'><a href='#2QhgoP1QBEQ'>12 パラメータの詳細</a></summary>
<blockquote class='tocx'>
<li class='tocx'><a href='#1rpUB3fre67'>12.1 色の指定</a></li>
<li class='tocx'><a href='#4HFjqmTuIU6'>12.2 ストローク</a></li>
<li class='tocx'><a href='#dBUd7L4C3dx'>12.3 フィル</a></li>
<li class='tocx'><a href='#3kZ9FkounyK'>12.4 フォント</a></li>
<li class='tocx'><a href='#iu9Ovm00KHn'>12.5 IDと参照</a></li>
<li class='tocx'><a href='#heEi5Lc5BX9'>12.6 回転</a></li>
<li class='tocx'><a href='#gPGlqSbIfdL'>12.7 フィルタ</a></li>
<li class='tocx'><a href='#1ovJxG7Ie9O'>12.8 レイヤー</a></li>
<li class='tocx'><a href='#fbLcMRTVXac'>12.9 リンク</a></li>
<li class='tocx'><a href='#9MB3lirlqL9'>12.10 終端マーク</a></li>
<li class='tocx'><a href='#lpCVEZ9kMoP'>12.11 ラベル</a></li>
<li class='tocx'><a href='#2tO36YvJCgK'>12.12 補助線</a></li>
</blockquote>
</details>
<details class='tocx' open>
<summary class='tocx'><a href='#2CSYEsoWlWE'>13 UML</a></summary>
<blockquote class='tocx'>
<li class='tocx'><a href='#8ya1jqc5cZQ'>13.1 アクティビティ図</a></li>
<li class='tocx'><a href='#khgkJB6xK95'>13.2 クラス図</a></li>
<li class='tocx'><a href='#evUs70Itwyp'>13.3 コンポーネント図</a></li>
<li class='tocx'><a href='#la7Xa1OTF3W'>13.4 パッケージ図</a></li>
<li class='tocx'><a href='#kYsauEETY6n'>13.5 状態マシン図</a></li>
<li class='tocx'><a href='#e57rLpXY8ah'>13.6 ユースケース図</a></li>
<li class='tocx'><a href='#6DAfYJjISDb'>13.7 配置図</a></li>
<li class='tocx'><a href='#cyQMjgm73rg'>13.8 UML のダイアグラム要素</a></li>
</blockquote>
</details>
<details class='tocx' open>
<summary class='tocx'><a href='#7TyOD7TaDM2'>14 リファレンス</a></summary>
<blockquote class='tocx'>
<li class='tocx'><a href='#gKJ1gWcMPT8'>14.1 関数とマクロ</a></li>
<li class='tocx'><a href='#dR01Jh257Q6'>14.2 色の名前</a></li>
</blockquote>
</details>
<li class='tocx'><a href='#dGdSPnvay5N'>15 更新履歴</a></li>
<li class='tocx'><a href='#1iQ3KRF8uJQ'>16 図表一覧</a></li>
<li class='tocx'><a href='#1ewHzjI62xn'>17 索引</a></li>
<hr>
<p>　　</p>
<h2><a name='cWuZL5pQm2F'></a>1 kaavio とは</h2>
<p>　kaavio<sup><a name='footnote_ref1' href='#footnote1'>1</a></sup> は、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>ベースの作図ツールです。<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>形式のデータファイルを入力として、SVG 形式<sup><a name='footnote_ref2' href='#footnote2'>2</a></sup>の画像ファイルを生成します。</p>
<p>　kaavio の入力データの記述方法には違和感を感じるかもしれません。これは、kaavio が Common Lisp 言語で実装されており、入力データも Common Lisp 上に作成された DSL(domain specific language) で記述するためです。しかし、このツールを使ってみたいからといって、知りもしない言語のお勉強から始めたいとは思わないでしょう。そのため、このマニュアルではサンプルをたくさん提示し、Common Lisp の詳細には極力立ち入らないようにします<sup><a name='footnote_ref3' href='#footnote3'>3</a></sup>。</p>
<a name='l10jSaJeUDk'></a>
<p>　kaavio は、O'Reilly の「<a href='https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=&cad=rja&uact=8&ved=2ahUKEwjxstvtvKL6AhUNUd4KHbdhCmAQFnoECA0QAQ&url=https%3A%2F%2Fwww.oreilly.co.jp%2Fbooks%2F9784873117973%2F&usg=AOvVaw0qe65qVh3tZyCnBnhoaC-V'>SVG エッセンシャルズ 第二版</a>」を読んで作られています（この書籍に言及する時は「<a class='autolink' href='#l10jSaJeUDk'>SVG本</a>」と呼ぶことにします）。SVG 規格にあたることも時々ありますが、基本的にほとんどの情報はこの書籍から得ています。電子版もありますので興味のある方は手に取ってみてください。</p>
<h3><a name='jmXRzUWYW1r'></a>1.1 インストール</h3>
<p>　kaavio プロジェクトを git clone して、ASDF から <code>src/kaavio.asd</code> を利用できるように設定してください。kaavio をロードすれば、あとは <code>kaavio:diagram</code> マクロで始まる図面データを実行することで SVG 図面を生成することができます。図面データ作成の詳細については後述します。</p>
<h3><a name='5drwLE4mm0i'></a>1.2 実行可能バイナリの作成</h3>
<p>　kaavio は実行可能バイナリの作成を想定して作られています。kaavio が Common Lisp 処理系で使えるように設定されている環境であれば、 <code>misc/</code> ディレクトリ配下で <code>make</code> と言うだけで実行可能バイナリを作成できます。SBCL だけがインストールされている環境であれば、<code>make bare-build</code> と言うことでも実行可能バイナリを作成できます。ただし、これらの方法は現状 SBCL でしか試しておらず、他の処理系では <code>misc/</code> 配下のファイルを少し変更する必要があると思います。</p>
<h3><a name='iUKFrISKmaN'></a>1.3 sandbox mode</h3>
<p>　<code>--sandbox</code> を指定して 実行可能バイナリを起動すれば、sandbox mode を利用することができます。</p>
<pre>
$ kaavio --sandbox
IN  : ./sandbox.lisp
OUT : ./sandbox.html

</pre>
<p>　sandbox mode では、kaavio は 0.1 杪間隔で入力ファイル（上記の例では <code>sandbox.lisp</code> ）を監視し続け、ファイルが更新されたらそれを入力として SVG 画像を生成して出力ファイル（上記の例では <code>sandbox.html</code> ）に保存します。この出力ファイルは SVG データを埋め込んだ HTML 形式ファイルで、ブラウザで開くと 2 杪間隔で自身をリロードするようになっています。kaavio を sandbox mode で起動し、入力ファイルを<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>エディタで、出力ファイルをブラウザで開いて並べることで、出力を（ほぼ）リアルタイムで確認しながらkaavio のデータを編集することができます。</p>
<p>　なお、sandbox mode を終了する場合は Ctrl+C を押下してください。</p>
<h2><a name='9LLncE6hWlx'></a>2 簡単なサンプル</h2>
<p>　簡単なサンプルから始めましょう。以下のような入力を kaavio に与えると、</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (rect   '( 50  50) 80 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:powderblue</span> <span class='keyword3'>:id</span> <span class='keyword3'>:x</span>)
  (circle '(250 100) 40    <span class='keyword3'>:fill</span> <span class='keyword3'>:moccasin</span>   <span class='keyword3'>:id</span> <span class='keyword3'>:y</span>)
  (connect <span class='keyword3'>:x</span> <span class='keyword3'>:y</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>))
</pre>
<p>　　</p>
<p>　以下のような画像が生成されます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- x : rectangle -->
	<rect id='x' x='10' y='20' width='80' height='60' fill='powderblue' stroke='black' stroke-width='1' />
	<!-- y : circle -->
	<circle id='y' cx='250' cy='100' r='40' fill='moccasin' stroke='black' stroke-width='1' />
	<!-- connector from x to y -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 90.0,60.0 211.1943,90.29858' />
	<polyline fill='none' stroke='black' stroke-width='1' points='196.77277,94.42401 211.1943,90.29858 200.4108,79.87188' />

</svg>
</div>

<p class='fig_title'><a name='euwIyAjslFq'></a>Figure.2-1 簡単なサンプル</p>
<p>　「入力を kaavio に与える」というのは、具体的には入力データを記述したファイルの名前をパラメータとして kaavio を起動することを意味します。作成される SVG 画像は標準出力に書き出されるので、ファイルにリダイレクトしてください。以下のように。</p>
<pre class='code'>
kaavio ./input.digram &gt; ./output.svg
</pre>
<p>　入力ファイル名が与えられない場合、kaavio は標準入力からデータを読み取ろうとします。そのため、以下のように書くこともできます。</p>
<pre class='code'>
cat ./input.digram | kaavio &gt; ./output.svg
</pre>
<p>　余談ですが、SVG 画像には gzip 圧縮した svgz という形式もあります。以下のように出力を gzip に通してやれば作成できます。</p>
<pre class='code'>
cat ./input.digram | kaavio | gzip &gt; ./output.svgz
</pre>
<p>　では、先ほどの入力データをもう一度みてみましょう。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (rect   '( 50  50) 80 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:powderblue</span> <span class='keyword3'>:id</span> <span class='keyword3'>:x</span>)
  (circle '(250 100) 40    <span class='keyword3'>:fill</span> <span class='keyword3'>:moccasin</span>   <span class='keyword3'>:id</span> <span class='keyword3'>:y</span>)
  (connect <span class='keyword3'>:x</span> <span class='keyword3'>:y</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>))
</pre>
<p>　初めての kaavio データなので、順番に内容をみていきましょう。まずは雰囲気で理解してください。</p>
<ul>
<li><code>diagram</code> で「幅 300、高さ 150」の画像を作成</li>
<li><code>grid</code> で背景にグリッド線を描画</li>
<li><code>rect</code> で<a class='autolink' href='#kJonRG8GtHF'>四角形</a>を作成 - 位置は左上から (50, 50)、大きさは幅 80、高さ 60
<ul>
<li><code>:fill</code> で<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>の色を powderblue に指定</li>
<li><code>:id</code> でこれに x という ID を設定</li>
</ul>
</li>
<li><code>circle</code> で円を作成 - 位置は左上から (250, 100)、半径は 40
<ul>
<li><code>:fill</code> で<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>の色を moccasin に指定</li>
<li><code>:id</code> でこれに y という ID を設定</li>
</ul>
</li>
<li><code>connect</code> で、x から y に向かって接続線を描画
<ul>
<li><code>:end2</code> で終端の形状を arrow に設定</li>
</ul>
</li>
</ul>
<p>　　</p>
<p>　では、ここで<a class='autolink' href='#kJonRG8GtHF'>四角形</a>を描画した行に注目してみましょう。</p>
<pre class='code'>
(rect  '(50 50) 80 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:powderblue</span> <span class='keyword3'>:id</span> <span class='keyword3'>:x</span>)
</pre>
<p>　全体を括る括弧の中にいくつかのデータが書かれていて、最初は rect で始まっています。この最初の rect が「<a class='autolink' href='#kJonRG8GtHF'>四角形</a>を描画せよ」という指示で、残りは何処にどのような<a class='autolink' href='#kJonRG8GtHF'>四角形</a>を描くかの指示です。続く <code>'(50 50) 80 60</code> は位置（座標）、幅、高さの指定です。 <code>'(50 50)</code> という表記は、位置を即値（具体的な値）で記述する時のお約束だと（今は）理解しておいてください。座標の指定方法には色々ありますが、のちほど順番に説明します。</p>
<p>　その後ろに続く <code>:fill :powderblue</code> や <code>:id :x</code> といったものは、全て「名前付きパラメータ<sup><a name='footnote_ref4' href='#footnote4'>4</a></sup>」です。kaavio では多くのパラメータが省略可能で、それらの省略可能パラメータを指定する場合はパラメータ名も書いてあげる必要があります。なお、 <code>:fill</code> のようにコロンで始まる名前は「キーワード」と呼ばれるもので、省略可能パラメータの名前はキーワードで指定します。</p>
<p>　では、この rect の省略可能なパラメータにはどんなものがあるのでしょうか。以下に rect の全体を示します。</p>
<pre class='code'>
(<span class='keyword1'>defmacro</span> <span class='keyword5'>rect</span> (position width height
                         <span class='keyword2'>&amp;key</span> pivot rx ry fill stroke rotate
                              link layer id filter contents) ...)
</pre>
<p>　先頭の <code>defmacro</code> はひとまず気にしないでください。rect に続く括弧の中がパラメータの全体で、 <code>position width height</code> が必須パラメータ、 <code>&amp;key</code> 以降の全てが省略可能なパラメータです。 <code>:fill</code> と <code>:id</code> はもう使いました。その他のパラメータについてはまた別のところで説明します。</p>
<p>　　</p>
<p>　次のサンプルはもう少し複雑です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='450' height='150'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- app : textbox -->
	<g id='app'>
		<rect x='191.6' y='75' width='66.8' height='40' fill='cornsilk' stroke='black' stroke-width='1' filter='url(#drop-shadow)' />
		<text x='225.0' y='101' text-anchor='middle' font-size='12pt' fill='black' >kaavio</text>
	</g>
	<!-- in : document -->
	<g id='in'>
		<path fill='skyblue' fill-opacity='0.3' stroke='navy' stroke-width='2' d='M 10 65 L 10 125 A 26.666666 20 0 0 0 50 125 A 26.666666 20 1 0 1 90 125 L 90 65 Z' filter='url(#drop-shadow)' />
		<g text-anchor='middle' font-size='12pt' fill='black' >
			<text x='50' y='94' >input</text>
			<text x='50' y='108' >file</text>
		</g>
	</g>
	<!-- out : document -->
	<g id='out'>
		<path fill='skyblue' fill-opacity='0.3' stroke='navy' stroke-width='2' d='M 360 65 L 360 125 A 26.666666 20 0 0 0 400 125 A 26.666666 20 1 0 1 440 125 L 440 65 Z' filter='url(#drop-shadow)' />
		<g text-anchor='middle' font-size='12pt' fill='black' >
			<text x='400' y='94' >svg</text>
			<text x='400' y='108' >image</text>
		</g>
	</g>
	<!-- block-arrow -->
	<polygon fill='white' stroke='black' stroke-width='1' points='100.0,102.5 100.0,87.5 151.6,87.5 151.6,80.0 181.6,95.0 151.6,110.0 151.6,102.5' filter='url(#drop-shadow)' />
	<!-- block-arrow -->
	<polygon fill='white' stroke='black' stroke-width='1' points='268.4,102.5 268.4,87.5 320.0,87.5 320.0,80.0 350.0,95.0 320.0,110.0 320.0,102.5' filter='url(#drop-shadow)' />
	<!-- balloon -->
	<path fill='white' stroke='black' stroke-width='1' d='M 276.5 19 L 393.5 19 A 10 10 1 0 1 403.5 29 L 403.5 41 A 10 10 1 0 1 393.5 51 L 312.16666 51 L 258.4 75 L 276.5 51 A 10 10 1 0 1 266.5 41 L 266.5 29 A 10 10 1 0 1 276.5 19 Z' filter='url(#drop-shadow)' />
	<text x='335.0' y='41' text-anchor='middle' font-size='12pt' fill='black' >Made with LISP.</text>

</svg>
</div>

<p class='fig_title'><a name='aw36ReN8sMQ'></a>Figure.2-2 簡単なサンプル-2</p>
<p>　このサンプルは、以下のコードで生成されています。</p>
<pre class='code'>
(diagram (450 150)
  (grid)
  (drop-shadow)
  (with-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
    (textbox (y+ canvas.center 20) <span class='literal'>"kaavio"</span> <span class='keyword3'>:height</span> 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:cornsilk</span> <span class='keyword3'>:id</span> <span class='keyword3'>:app</span>)
    (with-options (<span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:width</span> 2)
                   <span class='keyword3'>:fill</span>   '(<span class='keyword3'>:color</span> <span class='keyword3'>:skyblue</span> <span class='keyword3'>:opacity</span> 0.3))
      (document (x+ app.center -175) 80 60 <span class='literal'>"input~%file"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:in</span>)
      (document (x+ app.center  175) 80 60 <span class='literal'>"svg~%image"</span>  <span class='keyword3'>:id</span> <span class='keyword3'>:out</span>))
    (with-options (<span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
      (block-arrow1  in.right app.left 15 <span class='keyword3'>:margin</span> 10)
      (block-arrow1 app.right out.left 15 <span class='keyword3'>:margin</span> 10)
      (balloon (xy+ app.center 110 -60) <span class='literal'>"Made with LISP."</span> app.topright))))
</pre>
<p>　こちらも、ざっくりした説明をしておきます。</p>
<ul>
<li>diagram と grid は先程と同じなので省略</li>
<li>drop-shadow という種類の「<a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>」の使用を宣言</li>
<li>with-options でデフォルトの<a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を drop-shadow に設定
<ul>
<li>textbox で<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>を描画 : 場所は画像の中心（canvas.center）から y 軸方向に 20、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>は "kaavio"、これに app という ID を設定</li>
<li>with-options で、デフォルトの線を太さ 2 の <code>navy</code> に、デフォルトの塗りつぶしを不透明度 0.3 の <code>skyblue</code> にそれぞれ設定
<ul>
<li>document で<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>を描画 : 場所は app の中心（app.center）から x 軸方向に -175、幅と高さは 80 60、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>は "input~%file"、これに in という ID を設定</li>
<li>上記と同じ要領で out という ID の<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>を描画</li>
</ul>
</li>
<li>with-options で、デフォルトの塗りつぶしを <code>white</code> に設定
<ul>
<li>block-arrow1 で in と app の間に<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>を描画</li>
<li>上記と同じ要領で app と out の間に<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>を描画</li>
<li>balloon で app の右上付近に<a class='autolink' href='#5IHcv4bxjLU'>吹き出し</a>を描画 : <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>は "Made with LISP."、接続点は app の右上端（app.topright）</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>　　</p>
<p>　この 2 つめのサンプルには、新しいポイントがいくつかあります。もう少し詳しく説明します。</p>
<ul>
<li><code>drop-shadow</code> で宣言し、 <code>with-options</code> でデフォルトを設定しているのを「<a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>」といいます。<a class='autolink' href='#kJonRG8GtHF'>四角形</a>や円に表示されている影が drop shadow です。</li>
<li><code>with-options</code> を使って、デフォルトの<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>や線を指定しています。 <code>:stroke</code> や <code>:fill</code> を毎回指定する必要がなくなります。
<ul>
<li><code>:stroke</code> では線の色 <code>navy</code> の他に <code>:width</code> で線の太さを指定しています。</li>
<li><code>:fill</code> では<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>の色 <code>skyblue</code> の他に <code>:opacity</code> で不透明度を指定しています。これは、0（完全に透明）から 1 （完全に不透明）までを指定します。<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>が少し透けているのがわかると思います。</li>
</ul>
</li>
<li><code>:id</code> を使って付与した ID を使って <code>app.center</code> などと書くことで既出の要素の「中心座標」を指定できます。これは <code>'(50 50)</code> といった即値表記の代わりになります。
<ul>
<li><code>canvas</code> は特別な ID で、現在描画中の「<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>」を意味します。今の時点では、生成する画像の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>全体だと理解しておいてください。</li>
<li><code>(y+ canvas.center 20)</code> といった表記によってある位置から x 軸や y 軸に指定されただけ移動した座標を計算することができます。</li>
</ul>
</li>
<li>複数行の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を扱うことができる要素では、 <code>"input~%file"</code> のように ~% を使って改行を表します。</li>
</ul>
<p>　　</p>
<p>　サンプルは以上です。雰囲気は掴めたと思うので、続いて各種の図形要素について説明します。</p>
<h2><a name='2msfXdtEc6a'></a>3 基本的な図形</h2>
<p>　SVG 規格における基本図形（とそれに類するもの）から紹介します。以下のサンプルはそれぞれの説明項目への<a class='autolink' href='#fbLcMRTVXac'>リンク</a>になっています。</p>
<!-- define: HASH_RECT          = '[](#四角形)' -->
<!-- define: HASH_CIRCLE        = '[](#正円)' -->
<!-- define: HASH_ELLIPSE       = '[](#楕円)' -->
<!-- define: HASH_REGULAR_POLYGON = '[](#正多角形)' -->
<!-- define: HASH_POLYGON       = '[](#多角形)' -->
<!-- define: HASH_LINE          = '[](#直線)' -->
<!-- define: HASH_ARC           = '[](#円弧)' -->
<!-- define: HASH_TEXT          = '[](#テキスト)' -->
<!-- define: HASH_DIAMOND       = '[](#ひし形)' -->
<!-- define: HASH_PARALLELOGRAM = '[](#平行四辺形)' -->
<!-- define: HASH_2D_CURVE      = '[](#二次ベジェ曲線)' -->
<!-- define: HASH_3D_CURVE      = '[](#三次ベジェ曲線)' -->
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='800' height='230'>
	
	<filter id='foo-filter'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0' />
		<feGaussianBlur stdDeviation='3' result='blur' />
		<feMerge>
			<feMergeNode in='blur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- rect-grp : group-definition -->
	<defs>
		<g id='rect-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- rectangle -->
			<rect x='15' y='15' width='50' height='50' fill='skyblue' stroke='blue' stroke-width='1' />
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >四角形</text>
			
		</g>
	</defs>
	<!-- circle-grp : group-definition -->
	<defs>
		<g id='circle-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='40' cy='40' r='25' fill='bisque' stroke='brown' stroke-width='1' />
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >円</text>
			
		</g>
	</defs>
	<!-- ellipse-grp : group-definition -->
	<defs>
		<g id='ellipse-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- ellipse -->
			<ellipse cx='40' cy='40' rx='30' ry='20' fill='beige' stroke='olive' stroke-width='1' />
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >楕円</text>
			
		</g>
	</defs>
	<!-- regular-polygon-grp : group-definition -->
	<defs>
		<g id='regular-polygon-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- regular-polygon -->
			<polygon fill='gray' stroke='black' stroke-width='1' points='40.0,15.0 63.776413,32.274574 54.69463,60.225426 25.305368,60.225426 16.223587,32.274574' />
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >正多角形</text>
			
		</g>
	</defs>
	<!-- polygon-grp : group-definition -->
	<defs>
		<g id='polygon-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- polygon -->
			<polygon fill='lightpink' stroke='red' stroke-width='1' points='40.0,10.0 32.75,31.5 10.25,31.5 28.25,45.0 21.75,66.5 40.0,53.75 58.25,66.5 51.75,45.0 69.75,31.5 47.25,31.5' />
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >多角形</text>
			
		</g>
	</defs>
	<!-- line-grp : group-definition -->
	<defs>
		<g id='line-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- line -->
			<polyline fill='none' stroke='black' stroke-width='1' points=' 20.0,20.0 60.0,20.0 20.0,65.0 60.0,65.0' />
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >線</text>
			
		</g>
	</defs>
	<!-- arc-grp : group-definition -->
	<defs>
		<g id='arc-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- arc -->
			<path fill='none' stroke='navy' stroke-width='8' d='M 27.500000000000007 66.65063509461098 A 25 25 0 1 1 52.5 66.65063509461096' />
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >円弧</text>
			
		</g>
	</defs>
	<!-- text-grp : group-definition -->
	<defs>
		<g id='text-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- text -->
			<text x='40' y='55' text-anchor='middle' font-family='Times New Roman' font-size='30pt' fill='black' font-style='italic' filter='url(#foo-filter)' >Text</text>
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >テキスト</text>
			
		</g>
	</defs>
	<!-- diamond-grp : group-definition -->
	<defs>
		<g id='diamond-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- diamond -->
			<polygon fill='#CD96CD' stroke='#CD0000' stroke-width='2' points='40.0,10.0 10.0,40.0 40.0,70.0 70.0,40.0 40.0,10.0' />
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >ひし形</text>
			
		</g>
	</defs>
	<!-- parallelogram-grp : group-definition -->
	<defs>
		<g id='parallelogram-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- parallelogram -->
			<polygon fill='lightsteelblue' stroke='darkslateblue' stroke-width='2' points='25.0,20.0 5.0,60.0 55.0,60.0 75.0,20.0' />
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >平行四辺形</text>
			
		</g>
	</defs>
	<!-- 2d-curve-grp : group-definition -->
	<defs>
		<g id='2d-curve-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- 2d-curve -->
			<path fill='none' stroke='navy' stroke-width='3' d='M 10.0 60.0Q 60.0 -20.0 70.0 60.0' />
			<!-- text -->
			<text x='40' y='80' text-anchor='middle' font-size='12pt' fill='black' >二次</text>
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >ベジェ曲線</text>
			
		</g>
	</defs>
	<!-- 3d-curve-grp : group-definition -->
	<defs>
		<g id='3d-curve-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- 3d-curve -->
			<path fill='none' stroke='brown' stroke-width='3' d='M 10.0 60.0C 50.0 -40.0 30.0 120.0 70.0 10.0' />
			<!-- text -->
			<text x='40' y='80' text-anchor='middle' font-size='12pt' fill='black' >三次</text>
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >ベジェ曲線</text>
			
		</g>
	</defs>
	<!-- use -->
	<a xlink:href='#kJonRG8GtHF' target='_self'>
		<use xlink:href='#rect-grp' x='60' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#8UQowBxrcaE' target='_self'>
		<use xlink:href='#circle-grp' x='160' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#7YzIcjhyGKN' target='_self'>
		<use xlink:href='#ellipse-grp' x='260' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#6eeF43U3xPh' target='_self'>
		<use xlink:href='#regular-polygon-grp' x='360' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#5vGRm9AMypB' target='_self'>
		<use xlink:href='#polygon-grp' x='460' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#fv4OUML78x4' target='_self'>
		<use xlink:href='#line-grp' x='560' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#cp2F91gKG7W' target='_self'>
		<use xlink:href='#arc-grp' x='660' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#cTdCvBeU6ZJ' target='_self'>
		<use xlink:href='#text-grp' x='60' y='120' />
	</a>
	<!-- use -->
	<a xlink:href='#4dFMjynUMYw' target='_self'>
		<use xlink:href='#diamond-grp' x='160' y='120' />
	</a>
	<!-- use -->
	<a xlink:href='#8YR8CiywoW8' target='_self'>
		<use xlink:href='#parallelogram-grp' x='260' y='120' />
	</a>
	<!-- use -->
	<a xlink:href='#iTkYd8KXLYO' target='_self'>
		<use xlink:href='#2d-curve-grp' x='360' y='120' />
	</a>
	<!-- use -->
	<a xlink:href='#8PFAoBpi4A9' target='_self'>
		<use xlink:href='#3d-curve-grp' x='460' y='120' />
	</a>

</svg>
</div>

<h3><a name='kJonRG8GtHF'></a>3.1 四角形</h3>
<p>　<a class='autolink' href='#hxiiGsQsLt4'>rect マクロ</a>によって<a class='autolink' href='#kJonRG8GtHF'>四角形</a>を描画できます。角を丸くすることもできます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='75' y='20' width='150' height='60' rx='10' fill='skyblue' stroke='navy' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='hnnMjGYKwdS'></a>Figure.3-1 rect のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#hxiiGsQsLt4'>rect マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (rect '(150 50) 150 60 <span class='keyword3'>:rx</span> 10 <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span>))
</pre>
<p>　　</p>
<h3><a name='8UQowBxrcaE'></a>3.2 正円</h3>
<p>　<a class='autolink' href='#bZBKta7QcXj'>circle マクロ</a>によって<a class='autolink' href='#8UQowBxrcaE'>正円</a>を描画できます。<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>を描画したい場合は <a class='autolink' href='#hsg6m1zvfoj'>ellipse マクロ</a>を使用してください。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- circle -->
	<circle cx='150' cy='50' r='30' fill='bisque' stroke='brown' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='aWrJqk5Knkk'></a>Figure.3-2 circle のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#bZBKta7QcXj'>circle マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (circle '(150 50) 30 <span class='keyword3'>:stroke</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:bisque</span>))
</pre>
<p>　　</p>
<h3><a name='7YzIcjhyGKN'></a>3.3 楕円</h3>
<p>　<a class='autolink' href='#hsg6m1zvfoj'>ellipse マクロ</a>によって<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>を描画できます。<a class='autolink' href='#8UQowBxrcaE'>正円</a>を描画したい場合は <a class='autolink' href='#bZBKta7QcXj'>circle マクロ</a>を使用してください。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- ellipse -->
	<ellipse cx='150' cy='50' rx='60' ry='30' fill='beige' stroke='olive' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='hO4QoInAXK4'></a>Figure.3-3 ellipse のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#hsg6m1zvfoj'>ellipse マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (ellipse '(150 50) 60 30 <span class='keyword3'>:stroke</span> <span class='keyword3'>:olive</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:beige</span>))
</pre>
<p>　　</p>
<h3><a name='6eeF43U3xPh'></a>3.4 正多角形</h3>
<p>　<a class='autolink' href='#jLTDopnLqyT'>regular-polygon マクロ</a>によって<a class='autolink' href='#6eeF43U3xPh'>正多角形</a>、すなわち五角形や六角形などを描画できます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- regular-polygon -->
	<polygon fill='gray' stroke='black' stroke-width='1' points='70.0,10.0 108.04226,37.63932 93.51141,82.36068 46.48859,82.36068 31.957739,37.63932' />
	<!-- regular-polygon -->
	<polygon fill='gray' stroke='black' stroke-width='1' points='200.0,10.0 234.64102,30.0 234.64102,70.0 200.0,90.0 165.35898,70.0 165.35898,30.0' />
	<!-- regular-polygon -->
	<polygon fill='gray' stroke='black' stroke-width='1' points='330.0,10.0 358.28427,21.715729 370.0,50.0 358.28427,78.28427 330.0,90.0 301.71573,78.28427 290.0,50.0 301.71573,21.715729' />

</svg>
</div>

<p class='fig_title'><a name='6AEEehp4CXn'></a>Figure.3-4 regular-polygon のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#jLTDopnLqyT'>regular-polygon マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (400 100)
  (grid)
  (regular-polygon (x+ canvas.cc -130) 5 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:gray</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
  (regular-polygon (x+ canvas.cc    0) 6 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:gray</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
  (regular-polygon (x+ canvas.cc  130) 8 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:gray</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>))
</pre>
<p>　　</p>
<h3><a name='5vGRm9AMypB'></a>3.5 多角形</h3>
<p>　<a class='autolink' href='#dyrXpT32Rg1'>polygon マクロ</a>によって<a class='autolink' href='#5vGRm9AMypB'>多角形</a>、すなわち複数の<a class='autolink' href='#fv4OUML78x4'>直線</a>からなる形状を描画できます。<a class='autolink' href='#6eeF43U3xPh'>正多角形</a>を描画する場合には <a class='autolink' href='#jLTDopnLqyT'>regular-polygon マクロ</a>を使用した方が良いでしょう。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- polygon -->
	<polygon fill='lightpink' stroke='red' stroke-width='1' points='150.0,10.0 139.85,40.1 108.35,40.1 133.55,59.0 124.45,89.1 150.0,71.25 175.55,89.1 166.45,59.0 191.65,40.1 160.15,40.1' />

</svg>
</div>

<p class='fig_title'><a name='2vjK1SnIRle'></a>Figure.3-5 polygon のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#dyrXpT32Rg1'>polygon マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (polygon '((150.00 10.00) (139.85 40.10) (108.35 40.10)
             (133.55 59.00) (124.45 89.10) (150.00 71.25)
             (175.55 89.10) (166.45 59.00) (191.65 40.10)
             (160.15 40.10)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightpink</span>))
</pre>
<p>　　</p>
<h3><a name='fv4OUML78x4'></a>3.6 直線</h3>
<p>　<a class='autolink' href='#doyrJWCDQyn'>line マクロ</a>によって<a class='autolink' href='#fv4OUML78x4'>直線</a>（または複数の<a class='autolink' href='#fv4OUML78x4'>直線</a>からなる折線）を描画できます。図形要素どうしを接続したい場合は<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>を使用した方が良いでしょう。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- line -->
	<polyline fill='none' stroke='red' stroke-width='1' points=' 100.0,50.0 125.0,50.0 130.0,30.0 140.0,70.0 150.0,30.0 160.0,70.0 170.0,30.0 180.0,70.0 185.0,50.0 210.0,50.0' />

</svg>
</div>

<p class='fig_title'><a name='9sslZHcYmCd'></a>Figure.3-6 line のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#doyrJWCDQyn'>line マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (line '((100 50) (125 50)
          (130 30) (140 70)
          (150 30) (160 70)
          (170 30) (180 70)
          (185 50) (210 50)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span>))
</pre>
<p>　　</p>
<h3><a name='cp2F91gKG7W'></a>3.7 円弧</h3>
<p>　<a class='autolink' href='#7Ru23zWD1UC'>arc マクロ</a>によって<a class='autolink' href='#cp2F91gKG7W'>円弧</a>を描画できます。<a class='autolink' href='#4qgt62QVDZl'>パス</a>における <code>:arc-to</code> の機能を単独の図形要素にしたものです。端点に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>をつけることもできます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- arc -->
	<path fill='none' stroke='navy' stroke-width='8' d='M 171.65063509461098 67.5 A 25 25 0 1 1 162.5 33.34936490538904' />

</svg>
</div>

<p class='fig_title'><a name='lt4PUsUrfps'></a>Figure.3-7 arc のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (arc '(150 55) 25 25 0 30 300 <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:width</span> 8)))
</pre>
<p>　パラメータの詳細については <a class='autolink' href='#7Ru23zWD1UC'>arc マクロ</a>を参照してください。ここでは、必須パラメータに限定して簡単に説明します。 <code>(arc center rx ry x-axis-rotation degree1 degree2)</code> とした場合、 <code>center</code> を中心とした x 半径 <code>rx</code> 、y 半径 <code>ry</code> の<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>を <code>x-axis-rotation</code> だけ<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたものの上で、角度 <code>degree1</code> から（時計回りに） <code>degree2</code> までの部分弧を描きます。</p>
<p>　以下に例を示します。 <code>(100 50)</code> を中心とした <code>rx=40, ry=30</code> の<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>を 45 度<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたものをベースとします。これはライトグレーの太い<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>で描画されています。このうち、0 度から 90 度までの部分を<a class='autolink' href='#cp2F91gKG7W'>円弧</a>として（赤い線で）描画しています。つまり、これは <code>(arc '(100 50) 40 30 45 0 90)</code> による描画となります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- line -->
	<polyline fill='none' stroke='lightgray' stroke-width='1' points=' 50.0,0.0 150.0,100.0' />
	<!-- line -->
	<polyline fill='none' stroke='lightgray' stroke-width='1' points=' 150.0,0.0 50.0,100.0' />
	<!-- circle -->
	<circle cx='100' cy='50' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- ellipse -->
	<g transform='rotate(45,100,50)'>
		<ellipse cx='100' cy='50' rx='40' ry='30' fill='none' stroke='lightgray' stroke-width='8' stroke-opacity='0.4' />
	</g>
	<!-- arc -->
	<path fill='none' stroke='red' stroke-width='2' d='M 128.2842712474619 78.2842712474619 A 40 30 45 0 1 78.78679656440357 71.21320343559643' />

</svg>
</div>

<p class='fig_title'><a name='bSd48Y8N0w0'></a>Figure.3-8 arc のサンプル - 2</p>
<p>　<a class='autolink' href='#8UQowBxrcaE'>正円</a>をベースとした<a class='autolink' href='#cp2F91gKG7W'>円弧</a>を描画したい場合、 <code>rx</code> と <code>ry</code> を同じ値に指定します。この場合、<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させることに意味はないので、 <code>x-axis-rotation</code> は 0 にしてください。</p>
<p>　marcro arc を使用した<a class='autolink' href='#cp2F91gKG7W'>円弧</a>の描画は、「中心と角度」が明らかな場合に使用します。そうではなく、<a class='autolink' href='#cp2F91gKG7W'>円弧</a>の開始点と終了点が明らかな場合は、<a class='autolink' href='#akKCr0fEV12'>path マクロ</a>を使用した方が良いでしょう。</p>
<p>　　</p>
<p>　<a class='autolink' href='#2tO36YvJCgK'>補助線</a>を表示する場合のサンプルを以下に示します。 <code>debug</code> パラメータにキーワードで色名を与えると、<a class='autolink' href='#cp2F91gKG7W'>円弧</a>のベースとなる<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の中心と、<a class='autolink' href='#cp2F91gKG7W'>円弧</a>の始点・終点を結ぶ<a class='autolink' href='#fv4OUML78x4'>直線</a>を明示します。 <code>:debug t</code> とすればデフォルトの赤色が使用されます。調整の際に使用すると便利です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='200'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- arc -->
	<g transform='rotate(20,200,100)'>
	<ellipse cx='200' cy='100' rx='150' ry='60' fill='none' stroke='red' stroke-width='1' stroke-dasharray='1 4 ' />
	</g>
	<path fill='none' stroke='navy' stroke-width='2' d='M 340.95389311788625 151.3030214988503 A 150 60 20 0 1 179.47879140045987 156.3815572471545' />
	<polyline fill='none' stroke='navy' stroke-width='2' points='194.2509,153.77684 179.47879,156.38156 189.1206,167.87222' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='4 3 ' points='200.0,100.0 340.9539,151.30302' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='4 3 ' points='200.0,100.0 179.47879,156.38156' />
	<circle cx='340.9539' cy='151.30302' r='3' stroke='none' fill='red' />
	<circle cx='179.47879' cy='156.38156' r='3' stroke='none' fill='red' />
	<circle cx='200' cy='100' r='3' stroke='none' fill='red' />

</svg>
</div>

<p class='fig_title'><a name='4DiBfZ1gVHn'></a>Figure.3-9 arc における補助線のサンプル</p>
<details>
<summary>　※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (400 200)
  (grid)
  (arc canvas.center 150 60 20 0 90 <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>
       <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:width</span> 2) <span class='keyword3'>:debug</span> <span class='keyword3'>:red</span>))
</pre>
</details>
<p>　　</p>
<p>　最後に、arc で<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>を使用する場合の注意点について説明します。<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>はその端点の向きにあわせて描画されますが、<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>そのものの形状は考慮されません。その結果として、arc が描く曲線の端点付近のカーブが急な場合、望ましくない結果になる場合があります。以下の例では、横長の<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>ベースで 0° から 90° の<a class='autolink' href='#cp2F91gKG7W'>円弧</a>を描いて <code>:triangle</code> 指定の<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>を付加していますが、始点側の<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>は矢印に見えない状態になってしまっています。現状では、これは注意が必要ではあるものの仕様として扱われます。arc で<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>を使用する場合は注意してください。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- ellipse -->
	<ellipse cx='100' cy='50' rx='80' ry='30' fill='none' stroke='lightgray' stroke-width='8' />
	<!-- arc -->
	<path fill='none' stroke='red' stroke-width='1' d='M 180.0 50.0 A 80 30 0 0 1 100.0 80.0' />
	<path fill='red' stroke='red' stroke-width='1' d='M 180.0 50.0 l -4.2261825 9.063078 l 8.452365 -0.0000000000000017763568 z' />
	<path fill='red' stroke='red' stroke-width='1' d='M 100.0 80.0 l 9.063078 4.2261825 l -0.0000000000000017763568 -8.452365 z' />

</svg>
</div>

<p class='fig_title'><a name='0gIWVS7WQn6'></a>Figure.3-10 arc における終端マークの例</p>
<p>　　</p>
<h3><a name='cTdCvBeU6ZJ'></a>3.8 テキスト</h3>
<p>　<a class='autolink' href='#cSks5rQ0qHz'>text マクロ</a>によって<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を描画できます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- text -->
	<text x='150' y='70' text-anchor='middle' font-family='Times New Roman' font-size='48pt' fill='green' font-style='italic' font-weight='bold' >Text</text>

</svg>
</div>

<p class='fig_title'><a name='7uvPIQqWhZy'></a>Figure.3-11 text のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#cSks5rQ0qHz'>text マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (text '(150 70) <span class='literal'>"Text"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>
        <span class='keyword3'>:font</span> '(<span class='keyword3'>:family</span> <span class='literal'>"Times New Roman"</span>
                <span class='keyword3'>:size</span> 48 <span class='keyword3'>:weight</span> <span class='keyword3'>:bold</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:green</span> <span class='keyword3'>:style</span> <span class='keyword3'>:italic</span>)))
</pre>
<p>　　</p>
<p>　position と align の関係を以下に示します。以下において、赤い点が position で、align 指定は<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>で示されています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- circle -->
	<circle cx='150' cy='30' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='150' y='30' text-anchor='start' font-size='12pt' fill='black' >align :left</text>
	<!-- circle -->
	<circle cx='150' cy='60' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='150' y='60' text-anchor='middle' font-size='12pt' fill='black' >align :center</text>
	<!-- circle -->
	<circle cx='150' cy='90' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='150' y='90' text-anchor='end' font-size='12pt' fill='black' >align :right </text>

</svg>
</div>

<p class='fig_title'><a name='5BXk9aTPHsl'></a>Figure.3-12 テキストの position とアライメント指定の関係</p>
<p>　　</p>
<h3><a name='4dFMjynUMYw'></a>3.9 ひし形</h3>
<p>　<a class='autolink' href='#dhcYablOIIY'>diamond マクロ</a>によって<a class='autolink' href='#4dFMjynUMYw'>ひし形</a>を描画できます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- diamond -->
	<polygon fill='#CD96CD' stroke='#CD0000' stroke-width='2' points='150.0,20.0 75.0,50.0 150.0,80.0 225.0,50.0 150.0,20.0' />

</svg>
</div>

<p class='fig_title'><a name='2sQudXmWdXy'></a>Figure.3-13 diamond のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#dhcYablOIIY'>diamond マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (diamond '(150 50) 150 60 <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:red3</span> <span class='keyword3'>:width</span> 2) <span class='keyword3'>:fill</span> <span class='keyword3'>:plum3</span>))
</pre>
<p>　　</p>
<h3><a name='8YR8CiywoW8'></a>3.10 平行四辺形</h3>
<p>　<a class='autolink' href='#4ol8IRIe1gI'>parallelogram マクロ</a>によって<a class='autolink' href='#8YR8CiywoW8'>平行四辺形</a>を描画できます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- parallelogram -->
	<polygon fill='lightsteelblue' stroke='darkslateblue' stroke-width='2' points='65.0,20.0 25.0,80.0 135.0,80.0 175.0,20.0' />

</svg>
</div>

<p class='fig_title'><a name='by41YHJgt3q'></a>Figure.3-14 parallelogram のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#4ol8IRIe1gI'>parallelogram マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (parallelogram canvas.center 150 60 <span class='keyword3'>:h</span> 40
                 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightsteelblue</span>
                 <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:darkslateblue</span> <span class='keyword3'>:width</span> 2)))
</pre>
<p>　　</p>
<p>　<code>direction</code> および <code>offset</code> パラメータについて説明します。 <code>direction</code> が <code>:H</code> の場合、上側の角を右または左方向に押して変形させたような形になります。その長さを指定するのが <code>offset</code> です。 <code>offset</code> が０以上の場合は左上の角を右方向に、負数の場合は右上の角を左方向に押すイメージです。 <code>direction</code> が <code>:V</code> の場合は、同じ要領で左側の角を上または下に押すイメージになります。以下のように。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='280'>
	
	<rect x='0' y='0' width='400' height='280' fill='white' stroke='none' />
	<!-- r1 : rectangle -->
	<rect id='r1' x='20' y='30' width='160' height='80' fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 2 ' />
	<!-- r2 : rectangle -->
	<rect id='r2' x='220' y='30' width='160' height='80' fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 2 ' />
	<!-- r3 : rectangle -->
	<rect id='r3' x='20' y='140' width='160' height='120' fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 2 ' />
	<!-- r4 : rectangle -->
	<rect id='r4' x='220' y='140' width='160' height='120' fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 2 ' />
	<!-- parallelogram -->
	<polygon fill='lightcyan' stroke='navy' stroke-width='1' points='60.0,30.0 20.0,110.0 140.0,110.0 180.0,30.0' />
	<!-- block-arrow -->
	<polygon fill='red' stroke='none' stroke-width='1' points='20.0,32.5 20.0,27.5 45.0,27.5 45.0,22.5 60.0,30.0 45.0,37.5 45.0,32.5' />
	<!-- paragraph -->
	<g text-anchor='middle' font-size='10pt' fill='black' >
		<text x='100' y='69' >direction = :H</text>
		<text x='100' y='81' >0 &lt;= offset</text>
	</g>
	<!-- parallelogram -->
	<polygon fill='lightcyan' stroke='navy' stroke-width='1' points='220.0,30.0 260.0,110.0 380.0,110.0 340.0,30.0' />
	<!-- block-arrow -->
	<polygon fill='red' stroke='none' stroke-width='1' points='380.0,27.5 380.0,32.5 355.0,32.5 355.0,37.5 340.0,30.0 355.0,22.5 355.0,27.5' />
	<!-- paragraph -->
	<g text-anchor='middle' font-size='10pt' fill='black' >
		<text x='300' y='69' >direction = :H</text>
		<text x='300' y='81' >offset &lt; 0</text>
	</g>
	<!-- parallelogram -->
	<polygon fill='lightcyan' stroke='navy' stroke-width='1' points='20.0,180.0 20.0,260.0 180.0,220.0 180.0,140.0' />
	<!-- block-arrow -->
	<polygon fill='red' stroke='none' stroke-width='1' points='17.5,140.0 22.5,140.0 22.5,165.0 27.5,165.0 20.0,180.0 12.5,165.0 17.5,165.0' />
	<!-- paragraph -->
	<g text-anchor='middle' font-size='10pt' fill='black' >
		<text x='100' y='199' >direction = :V</text>
		<text x='100' y='211' >0 &lt;= offset</text>
	</g>
	<!-- parallelogram -->
	<polygon fill='lightcyan' stroke='navy' stroke-width='1' points='220.0,140.0 220.0,220.0 380.0,260.0 380.0,180.0' />
	<!-- block-arrow -->
	<polygon fill='red' stroke='none' stroke-width='1' points='222.5,260.0 217.5,260.0 217.5,235.0 212.5,235.0 220.0,220.0 227.5,235.0 222.5,235.0' />
	<!-- paragraph -->
	<g text-anchor='middle' font-size='10pt' fill='black' >
		<text x='300' y='199' >direction = :V</text>
		<text x='300' y='211' >offset &lt; 0</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='67lJneaqrLn'></a>Figure.3-15 parallelogram における direction と offset</p>
<p>　ただし、 <code>width / height</code> で指定されたサイズはあくまで赤い点線の矩形であることに注意してください。また、<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>や<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>による接続点は現状では赤い点線の矩形ベースで計算されますが、この挙動は将来変更される可能性があります。</p>
<p>　　</p>
<h3><a name='iTkYd8KXLYO'></a>3.11 二次ベジェ曲線</h3>
<p>　<a class='autolink' href='#kdlPtqqvFfP'>2d-curve マクロ</a>によって<a class='autolink' href='#iTkYd8KXLYO'>二次ベジェ曲線</a>を描画できます。<a class='autolink' href='#4qgt62QVDZl'>パス</a>における <code>:2d-curve-to</code> の機能を単独の図形要素にしたものです。端点に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>をつけることもできます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- 2d-curve -->
	<path fill='none' stroke='slateblue' stroke-width='4' d='M 60.0 90.0Q 0.0 20.0 280.0 20.0' />
	<polyline fill='none' stroke='slateblue' stroke-width='4' points='45.851547,85.01791 60,90 57.240395,75.256035' />
	<polyline fill='none' stroke='slateblue' stroke-width='4' points='267.0096,27.5 280,20 267.0096,12.5' />

</svg>
</div>

<p class='fig_title'><a name='9ykZFla1Nux'></a>Figure.3-16 2d-curve のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#kdlPtqqvFfP'>2d-curve マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (<span class='keyword1'>let</span> ((pt1 '( 60 90))
        (ptC '(  0 20))
        (pt2 '(280 20)))
    (2d-curve `(,pt1 ,ptC ,pt2)
              <span class='keyword3'>:end1</span> <span class='keyword3'>:arrow</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>
              <span class='keyword3'>:debug</span> nil <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:slateblue</span> <span class='keyword3'>:width</span> 4))))
</pre>
<p>　　</p>
<p>　<a class='autolink' href='#2tO36YvJCgK'>補助線</a>を表示する場合のサンプルを以下に示します。 <code>debug</code> パラメータにキーワードで色名を与えると、<a class='autolink' href='#iTkYd8KXLYO'>二次ベジェ曲線</a>を構成する点とそれらを結ぶ<a class='autolink' href='#fv4OUML78x4'>直線</a>を明示します。 <code>:debug t</code> とすればデフォルトの赤色が使用されます。通常は目に見えない制御点も可視化されるので、調整の際に使用すると便利です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='500' height='250'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- 2d-curve -->
	<path fill='none' stroke='darkslategray' stroke-width='3' d='M 50.0 150.0Q 100.0 30.0 150.0 130.0T 250.0 180.0T 450.0 130.0' />
	<path fill='darkslategray' stroke='darkslategray' stroke-width='3' d='M 40.192307 154.03847 L 45.96154 140.1923 L 59.807693 145.96153 L 54.03846 159.8077 z' />
	<path fill='darkslategray' stroke='darkslategray' stroke-width='3' d='M 450 130 l -13.594617 -6.339274 l 0.0000000000000017763568 12.678548 z' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='50.0,150.0 100.0,30.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='100.0,30.0 150.0,130.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='150.0,130.0 200.0,230.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='200.0,230.0 250.0,180.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='250.0,180.0 300.0,130.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='300.0,130.0 450.0,130.0' />
	<circle cx='50' cy='150' r='3' stroke='none' fill='red' />
	<circle cx='100' cy='30' r='3' stroke='none' fill='red' />
	<circle cx='150' cy='130' r='3' stroke='none' fill='red' />
	<circle cx='200' cy='230' r='3' stroke='none' fill='red' />
	<circle cx='250' cy='180' r='3' stroke='none' fill='red' />
	<circle cx='300' cy='130' r='3' stroke='none' fill='red' />
	<circle cx='450' cy='130' r='3' stroke='none' fill='red' />

</svg>
</div>

<p class='fig_title'><a name='56m7PNYG5Ij'></a>Figure.3-17 2d-curve における補助線のサンプル</p>
<details>
<summary>　※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (500 250)
  (grid)
  (<span class='keyword1'>let</span> ((pt1 '( 50 150))
        (ptC '(100  30))
        (pt2 '(150 130))
        (pt3 '(250 180))
        (pt4 '(450 130)))
    (2d-curve `(,pt1 ,ptC ,pt2 ,pt3 ,pt4)
              <span class='keyword3'>:end1</span> <span class='keyword3'>:rect</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:triangle</span>
              <span class='keyword3'>:debug</span> t <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:darkslategray</span> <span class='keyword3'>:width</span> 3))))
</pre>
</details>
<p>　　</p>
<h3><a name='8PFAoBpi4A9'></a>3.12 三次ベジェ曲線</h3>
<p>　<a class='autolink' href='#96OcmgsUNzD'>3d-curve マクロ</a>によって<a class='autolink' href='#8PFAoBpi4A9'>三次ベジェ曲線</a>を描画できます。<a class='autolink' href='#4qgt62QVDZl'>パス</a>における <code>:3d-curve-to</code> の機能を単独の図形要素にしたものです。端点に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>をつけることもできます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- 3d-curve -->
	<path fill='none' stroke='slateblue' stroke-width='4' d='M 20.0 90.0C 150.0 -50.0 150.0 150.0 280.0 10.0' />
	<polyline fill='none' stroke='slateblue' stroke-width='4' points='23.343369,75.37735 20,90 34.33527,85.584114' />
	<polyline fill='none' stroke='slateblue' stroke-width='4' points='276.65665,24.62265 280,10 265.66473,14.415884' />

</svg>
</div>

<p class='fig_title'><a name='ctB3IKZPSD2'></a>Figure.3-18 3d-curve のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#96OcmgsUNzD'>3d-curve マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (<span class='keyword1'>let</span> ((p1 '( 20  90))
        (c1 '(150 -50))
        (c2 '(150 150))
        (p2 '(280  10)))
    (3d-curve `(,p1 ,c1 ,c2 ,p2)
              <span class='keyword3'>:end1</span> <span class='keyword3'>:arrow</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>
              <span class='keyword3'>:debug</span> nil <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:slateblue</span> <span class='keyword3'>:width</span> 4))))
</pre>
<p>　　</p>
<p>　<a class='autolink' href='#2tO36YvJCgK'>補助線</a>を表示する場合のサンプルを以下に示します。 <code>debug</code> パラメータにキーワードで色名を与えると、<a class='autolink' href='#8PFAoBpi4A9'>三次ベジェ曲線</a>を構成する点とそれらを結ぶ<a class='autolink' href='#fv4OUML78x4'>直線</a>を明示します。 <code>:debug t</code> とすればデフォルトの赤色が使用されます。通常は目に見えない制御点も可視化されるので、調整の際に使用すると便利です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='220'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- 3d-curve -->
	<path fill='none' stroke='slateblue' stroke-width='4' d='M 30.0 130.0C 80.0 10.0 130.0 70.0 130.0 110.0S 130.0 210.0 230.0 110.0S 180.0 130.0 380.0 130.0' />
	<path fill='slateblue' stroke='slateblue' stroke-width='4' d='M 20.192308 134.03847 L 25.961538 120.19231 L 39.807693 125.96154 L 34.03846 139.8077 z' />
	<path fill='slateblue' stroke='slateblue' stroke-width='4' d='M 380 130 l -13.594617 -6.339274 l 0.0000000000000017763568 12.678548 z' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='30.0,130.0 80.0,10.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='130.0,70.0 130.0,110.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='130.0,110.0 130.0,150.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='130.0,210.0 230.0,110.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='230.0,110.0 330.0,10.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='180.0,130.0 380.0,130.0' />
	<circle cx='30' cy='130' r='3' stroke='none' fill='red' />
	<circle cx='80' cy='10' r='3' stroke='none' fill='red' />
	<circle cx='130' cy='70' r='3' stroke='none' fill='red' />
	<circle cx='130' cy='110' r='3' stroke='none' fill='red' />
	<circle cx='130' cy='150' r='3' stroke='none' fill='red' />
	<circle cx='130' cy='210' r='3' stroke='none' fill='red' />
	<circle cx='230' cy='110' r='3' stroke='none' fill='red' />
	<circle cx='330' cy='10' r='3' stroke='none' fill='red' />
	<circle cx='180' cy='130' r='3' stroke='none' fill='red' />
	<circle cx='380' cy='130' r='3' stroke='none' fill='red' />

</svg>
</div>

<p class='fig_title'><a name='eyqtgpABguK'></a>Figure.3-19 3d-curve における補助線の サンプル</p>
<details>
<summary>　※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (400 220)
    (grid)
    (<span class='keyword1'>let</span> ((pt1  '( 30 130))
          (ptC1 '( 80  10))
          (ptC2 '(130  70))
          (pt2  '(130 110))
          (ptC3 '(130 210))
          (pt3  '(230 110))
          (ptC4 '(180 130))
          (pt4  '(380 130)))
      (3d-curve `(,pt1 ,ptC1 ,ptC2 ,pt2 ,ptC3 ,pt3 ,ptC4 ,pt4)
                <span class='keyword3'>:end1</span> <span class='keyword3'>:rect</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:triangle</span>
                <span class='keyword3'>:debug</span> t <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:slateblue</span> <span class='keyword3'>:width</span> 4))))
</pre>
</details>
<p>　　</p>
<h2><a name='1s5LsvBYupX'></a>4 一般的な図形</h2>
<p>　基本的な図形を組み合わせて作成される、複合的な図形を紹介します。以下のサンプルはそれぞれの説明項目への<a class='autolink' href='#fbLcMRTVXac'>リンク</a>になっています。</p>
<!-- define: HASH_CONNECTOR  = '[](#コネクタ)' -->
<!-- define: HASH_PARAGRAPH  = '[](#パラグラフ)' -->
<!-- define: HASH_TEXTBOX    = '[](#テキストボックス)' -->
<!-- define: HASH_DOCUMENT   = '[](#ドキュメント)' -->
<!-- define: HASH_FOLDER     = '[](#フォルダ)' -->
<!-- define: HASH_BALLOON    = '[](#吹き出し)' -->
<!-- define: HASH_PERSON     = '[](#人物)' -->
<!-- define: HASH_MEMO       = '[](#メモ)' -->
<!-- define: HASH_CUBE       = '[](#キューブ)' -->
<!-- define: HASH_CYLINDER   = '[](#円柱)' -->
<!-- define: HASH_EXPLOSION  = '[](#爆発)' -->
<!-- define: HASH_CROSS      = '[](#十字)' -->
<!-- define: HASH_BLOCKARROW = '[](#ブロック矢印)' -->
<!-- define: HASH_BRACE      = '[](#波括弧)' -->
<!-- define: HASH_TABLE      = '[](#テーブル)' -->
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='800' height='360'>
	
	<!-- connect-grp : group-definition -->
	<defs>
		<g id='connect-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- r1 : rectangle -->
			<rect id='r1' x='10' y='10' width='20' height='20' fill='white' stroke='black' stroke-width='1' />
			<!-- r2 : circle -->
			<circle id='r2' cx='80' cy='60' r='10' fill='white' stroke='black' stroke-width='1' />
			<!-- connector from r1 to r2 -->
			<polyline fill='none' stroke='black' stroke-width='1' points=' 30.0,26.666666 71.6795,54.453' />
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >コネクタ</text>
			
		</g>
	</defs>
	<!-- paragraph-grp : group-definition -->
	<defs>
		<g id='paragraph-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- paragraph -->
			<g text-anchor='middle' font-size='16pt' fill='black' >
				<text x='50' y='31' >this is</text>
				<text x='50' y='49' >multi line</text>
				<text x='50' y='67' >text.</text>
			</g>
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >パラグラフ</text>
			
		</g>
	</defs>
	<!-- textbox-grp : group-definition -->
	<defs>
		<g id='textbox-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- textbox -->
			<rect x='8.800003' y='17' width='82.399994' height='46' rx='5' fill='white' stroke='black' stroke-width='1' />
			<g text-anchor='middle' font-size='12pt' fill='black' >
				<text x='50.0' y='39' >this is</text>
				<text x='50.0' y='53' >textbox.</text>
			</g>
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >テキストボックス</text>
			
		</g>
	</defs>
	<!-- document-grp : group-definition -->
	<defs>
		<g id='document-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- document -->
			<path fill='skyblue' stroke='navy' stroke-width='1' d='M 10 10 L 10 70 A 26.666666 20 0 0 0 50 70 A 26.666666 20 1 0 1 90 70 L 90 10 Z' />
			<g text-anchor='middle' font-size='12pt' fill='black' >
				<text x='50' y='39' >this is</text>
				<text x='50' y='53' >document.</text>
			</g>
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >ドキュメント</text>
			
		</g>
	</defs>
	<!-- folder-grp : group-definition -->
	<defs>
		<g id='folder-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- folder -->
			<g fill='cornsilk' stroke='darkkhaki' stroke-width='1' >
				<polygon points='12.700001,20.0 12.700001,70.0 87.3,70.0 87.3,30.0 77.3,20.0 62.7,20.0 52.7,10.0 22.7,10.0 12.700001,20.0' />
				<polygon points='12.700001,20.0 22.7,30.0 52.7,30.0 62.7,20.0 52.7,10.0 22.7,10.0 12.700001,20.0' />
			</g>
			<g text-anchor='middle' font-size='12pt' fill='black' >
				<text x='50.0' y='44' >this is</text>
				<text x='50.0' y='58' >folder.</text>
			</g>
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >フォルダ</text>
			
		</g>
	</defs>
	<!-- person-grp : group-definition -->
	<defs>
		<g id='person-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- person -->
			<path fill='oldlace' stroke='brown' stroke-width='1' d='M 32.5 75 A 17.5 35 0 1 1 67.5 75 L 32.5 75 M 50 40 A 17.5 17.5 0 0 1 50 5 A 17.5 17.5 0 0 1 50 40' />
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >人物</text>
			
		</g>
	</defs>
	<!-- balloon-grp : group-definition -->
	<defs>
		<g id='balloon-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- balloon -->
			<path fill='honeydew' stroke='forestgreen' stroke-width='1' d='M 18.800003 12 L 81.2 12 A 10 10 1 0 1 91.2 22 L 91.2 48 A 10 10 1 0 1 81.2 58 L 36.26667 58 L 10.0 75 L 18.800003 58 A 10 10 1 0 1 8.800003 48 L 8.800003 22 A 10 10 1 0 1 18.800003 12 Z' />
			<g text-anchor='middle' font-size='12pt' fill='black' >
				<text x='50.0' y='34' >this is</text>
				<text x='50.0' y='48' >balloon.</text>
			</g>
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >吹き出し</text>
			
		</g>
	</defs>
	<!-- memo-grp : group-definition -->
	<defs>
		<g id='memo-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- memo -->
			<g stroke='none' >
				<polygon fill='lavenderblush' points='10.0,5.0 10.0,65.0 70.0,65.0 76.666664,51.666668 90.0,55.0 90.0,5.0' />
				<polygon fill='lightpink' points='70.0,65.0 90.0,55.0 76.666664,51.666668' />
				<g fill='none' stroke='red' stroke-width='1' >
					<polyline fill='none' points=' 10.0,35.0 10.0,5.0 90.0,5.0 90.0,55.0 70.0,65.0 10.0,65.0 10.0,35.0' />
					<polyline fill='none' points=' 90.0,55.0 76.666664,51.666668 70.0,65.0' />
				</g>
			</g>
			<g text-anchor='start' font-size='12pt' fill='black' >
				<text x='20' y='27' >this is</text>
				<text x='20' y='41' >memo.</text>
			</g>
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >メモ</text>
			
		</g>
	</defs>
	<!-- cube-grp : group-definition -->
	<defs>
		<g id='cube-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- cube -->
			<g stroke='none' >
				<polygon fill='darkgray' points='17.5,16.0 29.5,4.0 88.5,4.0 88.5,58.0 76.5,70.0 76.5,16.0' />
				<rect x='17.5' y='16' width='59' height='54' fill='lightgray' />
				<path fill='none' stroke='black' stroke-width='1' d='M 17.5 16 L 76.5 16 L 76.5 70 L 17.5 70 L 17.5 16 L 29.5 4 L 88.5 4 L 88.5 58 L 76.5 70 M 76.5 16 L 88.5 4' />
			</g>
			<g text-anchor='middle' font-size='12pt' fill='black' >
				<text x='47' y='42' >this is</text>
				<text x='47' y='56' >cube.</text>
			</g>
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >キューブ</text>
			
		</g>
	</defs>
	<!-- cylinder-grp : group-definition -->
	<defs>
		<g id='cylinder-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- cylinder -->
			<g stroke='darkgray' stroke-width='1' >
				<path fill='lightgray' d='M 17.5 10 L 17.5 70 A 32.5 6 0 0 0 82.5 70 L 82.5 10 A 32.5 6 0 0 0 17.5 10' />
				<path fill='none' d='M 17.5 10 A 32.5 6 0 0 0 82.5 10' />
			</g>
			<g text-anchor='middle' font-size='12pt' fill='black' >
				<text x='50' y='39' >this is</text>
				<text x='50' y='53' >cylinder.</text>
			</g>
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >円柱</text>
			
		</g>
	</defs>
	<!-- explosion-grp : group-definition -->
	<defs>
		<g id='explosion-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- explosion -->
			<polygon fill='lightpink' stroke='red' stroke-width='1' points='6.8,8.0 24.8,28.0 5.9,31.199999 21.2,43.2 5.9,53.600002 29.300001,52.0 25.7,64.0 37.4,58.4 40.1,79.2 49.100002,55.2 60.8,72.8 64.4,53.600002 80.6,66.4 75.2,47.199997 94.1,48.800003 77.9,39.2 93.200005,30.4 74.299995,27.2 81.5,16.8 63.499996,20.0 65.3,0.0 50.0,21.6 40.1,9.599999 35.6,23.199999' />
			<text x='50' y='46' text-anchor='middle' font-size='12pt' fill='black' >bomb!!</text>
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >爆発</text>
			
		</g>
	</defs>
	<!-- cross-grp : group-definition -->
	<defs>
		<g id='cross-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- cross -->
			<path fill='plum' stroke='purple' stroke-width='1' d='M 40 5 V 30 H 15 V 50 H 40 V 75 H 60 V 50 H 85 V 30 H 60 V 5 z' />
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >十字</text>
			
		</g>
	</defs>
	<!-- blockarrow-grp : group-definition -->
	<defs>
		<g id='blockarrow-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- block-arrow -->
			<polygon fill='burlywood' stroke='brown' stroke-width='1' points='5.0,50.0 5.0,30.0 55.0,30.0 55.0,20.0 95.0,40.0 55.0,60.0 55.0,50.0' />
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >ブロック矢印</text>
			
		</g>
	</defs>
	<!-- brace-grp : group-definition -->
	<defs>
		<g id='brace-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- brace -->
			<path fill='none' stroke='navy' stroke-width='1' d='M 10 15 A 10 15 0 0 0 20 30 L 40 30 A 10 15 1 0 1 50 45 A 10 15 1 0 1 60 30 L 80 30 A 10 15 0 0 0 90 15' />
			<text x='50' y='62' text-anchor='middle' font-size='12pt' fill='black' >this is brace.</text>
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >波括弧</text>
			
		</g>
	</defs>
	<!-- table-grp : group-definition -->
	<defs>
		<g id='table-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='100' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- table -->
			<g stroke='none'>
				<rect x='10' y='20' width='80' height='40' fill='white' />
				<rect x='10' y='20' width='80' height='10' fill='skyblue' />
			</g>
			<g stroke='navy' stroke-width='1'  fill='none'>
				<rect x='10' y='20' width='80' height='40' />
				<polyline points=' 10.0,30.0 90.0,30.0' />
				<polyline points=' 10.0,40.0 90.0,40.0' />
				<polyline points=' 10.0,50.0 90.0,50.0' />
				<polyline points=' 30.0,20.0 30.0,60.0' />
				<polyline points=' 50.0,20.0 50.0,60.0' />
				<polyline points=' 70.0,20.0 70.0,60.0' />
			</g>
			<!-- text -->
			<text x='50' y='95' text-anchor='middle' font-size='12pt' fill='black' >テーブル</text>
			
		</g>
	</defs>
	<!-- use -->
	<a xlink:href='#eFhVs4WwYUG' target='_self'>
		<use xlink:href='#connect-grp' x='20' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#4WyMTv59pvw' target='_self'>
		<use xlink:href='#paragraph-grp' x='150' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#e7hkC2YUaKe' target='_self'>
		<use xlink:href='#textbox-grp' x='280' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#jRjILbbJATV' target='_self'>
		<use xlink:href='#document-grp' x='410' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#5ZT843xJDiq' target='_self'>
		<use xlink:href='#folder-grp' x='540' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#03WwbeGq0eH' target='_self'>
		<use xlink:href='#person-grp' x='670' y='10' />
	</a>
	<!-- use -->
	<a xlink:href='#5IHcv4bxjLU' target='_self'>
		<use xlink:href='#balloon-grp' x='20' y='130' />
	</a>
	<!-- use -->
	<a xlink:href='#0AVJhEKnK1M' target='_self'>
		<use xlink:href='#memo-grp' x='150' y='130' />
	</a>
	<!-- use -->
	<a xlink:href='#hja1QJC0Ivb' target='_self'>
		<use xlink:href='#cube-grp' x='280' y='130' />
	</a>
	<!-- use -->
	<a xlink:href='#5ME1Xv0K4sM' target='_self'>
		<use xlink:href='#cylinder-grp' x='410' y='130' />
	</a>
	<!-- use -->
	<a xlink:href='#hjZ26isLw42' target='_self'>
		<use xlink:href='#explosion-grp' x='540' y='130' />
	</a>
	<!-- use -->
	<a xlink:href='#4cZRWkwhYNO' target='_self'>
		<use xlink:href='#cross-grp' x='670' y='130' />
	</a>
	<!-- use -->
	<a xlink:href='#49KKf97828b' target='_self'>
		<use xlink:href='#blockarrow-grp' x='20' y='250' />
	</a>
	<!-- use -->
	<a xlink:href='#lBS33hNe32a' target='_self'>
		<use xlink:href='#brace-grp' x='150' y='250' />
	</a>
	<!-- use -->
	<a xlink:href='#g6xjP526KX7' target='_self'>
		<use xlink:href='#table-grp' x='280' y='250' />
	</a>

</svg>
</div>

<h3><a name='eFhVs4WwYUG'></a>4.1 コネクタ</h3>
<p>　<a class='autolink' href='#dUJMfsL520O'>connect マクロ</a>によって図形要素どうしを接続することができます。また、終端に矢印などのマークをつけたり、<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>を付与することもできます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- r1 : textbox -->
	<g id='r1'>
		<rect x='80' y='20' width='40' height='40' fill='skyblue' stroke='navy' stroke-width='1' />
		<text x='100' y='46' text-anchor='middle' font-size='12pt' fill='black' >:R1</text>
	</g>
	<!-- r2 : textbox -->
	<g id='r2'>
		<rect x='180' y='90' width='40' height='40' fill='skyblue' stroke='navy' stroke-width='1' />
		<text x='200' y='116' text-anchor='middle' font-size='12pt' fill='black' >:R2</text>
	</g>
	<!-- r3 : textbox -->
	<g id='r3'>
		<rect x='280' y='55' width='40' height='40' fill='skyblue' stroke='navy' stroke-width='1' />
		<text x='300' y='81' text-anchor='middle' font-size='12pt' fill='black' >:R3</text>
	</g>
	<!-- connector from r1 to r2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,60.0 100.0,110.0 180.0,110.0' />
	<!-- connector from r1 to r3 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 120.0,40.0 350.0,40.0 350.0,75.0 320.0,75.0' />
	<text x='247.5' y='35.0' text-anchor='middle' font-size='12pt' fill='black' >label</text>
	<!-- connector from r2 to r3 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 220.0,103.0 280.0,82.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='270.21655,93.370316 280,82.0 265.2613,79.21244' />

</svg>
</div>

<p class='fig_title'><a name='4gGy4q3tl7a'></a>Figure.4-1 コネクタのサンプル</p>
<p>　上記サンプルのソースは以下の通りです。</p>
<pre class='code'>
(diagram (400 150)
  (grid)
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span>)
    (textbox '(100  40) <span class='literal'>":R1"</span> <span class='keyword3'>:width</span> 40 <span class='keyword3'>:height</span> 40 <span class='keyword3'>:id</span> <span class='keyword3'>:r1</span>)
    (textbox '(200 110) <span class='literal'>":R2"</span> <span class='keyword3'>:width</span> 40 <span class='keyword3'>:height</span> 40 <span class='keyword3'>:id</span> <span class='keyword3'>:r2</span>)
    (textbox '(300  75) <span class='literal'>":R3"</span> <span class='keyword3'>:width</span> 40 <span class='keyword3'>:height</span> 40 <span class='keyword3'>:id</span> <span class='keyword3'>:r3</span>))
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
    (connect <span class='keyword3'>:r1</span> <span class='keyword3'>:r2</span> <span class='keyword3'>:style</span> <span class='keyword3'>:BL</span>)
    (connect <span class='keyword3'>:r1</span> <span class='keyword3'>:r3</span> <span class='keyword3'>:style</span> <span class='keyword3'>:RR</span> <span class='keyword3'>:label</span> '(<span class='literal'>"label"</span> <span class='keyword3'>:offset</span> (-20 -5)))
    (connect <span class='keyword3'>:r2</span> <span class='keyword3'>:r3</span> <span class='keyword3'>:style</span> <span class='keyword3'>:CC</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>)))
</pre>
<p>　　</p>
<p>　パラメータの詳細については <a class='autolink' href='#dUJMfsL520O'>connect マクロ</a>を参照してください。ここでは、 <code>:style</code> パラメータについて説明します。まず、 <code>:style</code> のデフォルト値でもある <code>:CC</code> は「Center to Center」という意味で、対象図形の中心どうしを結ぶような一本の<a class='autolink' href='#fv4OUML78x4'>直線</a>で接続をします。これは <a href='#4gGy4q3tl7a'>Figure.4-1</a> における R2 と R3 の接続のイメージです。</p>
<p>　<code>:CC</code> 以外の接続方法は、 <code>T B L R</code> のいずれか 2 つを使って接続位置を指定する方法になります。これはそれぞれ <code>Top Bottom Left Right</code> の頭文字で、たとえば <code>:BL</code> であれば「Bottom to Left」という意味になり、これは from 側の下端と to 側の左端を接続する、ということを意味します。これは <a href='#4gGy4q3tl7a'>Figure.4-1</a> における R1 と R2 の接続のイメージです。</p>
<p>　さらに細かく接続位置を制御したい場合、それぞれの <code>T B L R</code> の後ろに 1 ～ 3 のインデックスを指定することができます。先程の <code>:BL</code> という指定は、実は <code>:B2L2</code> の省略記法です。インデックスと実際の接続位置の関係を以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='160'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='90' y='20' width='120' height='120' fill='white' stroke='gray' stroke-width='1' />
	<!-- circle -->
	<circle cx='120' cy='20' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='120' y='15' text-anchor='middle' font-size='10pt' fill='red' >T1</text>
	<!-- circle -->
	<circle cx='150' cy='20' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='150' y='15' text-anchor='middle' font-size='10pt' fill='red' >T2</text>
	<!-- circle -->
	<circle cx='180' cy='20' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='180' y='15' text-anchor='middle' font-size='10pt' fill='red' >T3</text>
	<!-- circle -->
	<circle cx='120' cy='140' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='120' y='155' text-anchor='middle' font-size='10pt' fill='red' >B1</text>
	<!-- circle -->
	<circle cx='150' cy='140' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='150' y='155' text-anchor='middle' font-size='10pt' fill='red' >B2</text>
	<!-- circle -->
	<circle cx='180' cy='140' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='180' y='155' text-anchor='middle' font-size='10pt' fill='red' >B3</text>
	<!-- circle -->
	<circle cx='90' cy='50' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='85' y='55' text-anchor='end' font-size='10pt' fill='red' >L1</text>
	<!-- circle -->
	<circle cx='90' cy='80' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='85' y='85' text-anchor='end' font-size='10pt' fill='red' >L2</text>
	<!-- circle -->
	<circle cx='90' cy='110' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='85' y='115' text-anchor='end' font-size='10pt' fill='red' >L3</text>
	<!-- circle -->
	<circle cx='210' cy='50' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='215' y='55' text-anchor='start' font-size='10pt' fill='red' >R1</text>
	<!-- circle -->
	<circle cx='210' cy='80' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='215' y='85' text-anchor='start' font-size='10pt' fill='red' >R2</text>
	<!-- circle -->
	<circle cx='210' cy='110' r='2' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='215' y='115' text-anchor='start' font-size='10pt' fill='red' >R3</text>

</svg>
</div>

<p class='fig_title'><a name='iS4fHSfl5nF'></a>Figure.4-2 コネクタにおける接続点の指定</p>
<p>　なお、上記は接続対象として図形要素の ID を指定した場合の話です。ID でなく point 値を指定した場合、指定位置に「大きさが（ほぼ）ゼロの<a class='autolink' href='#kJonRG8GtHF'>四角形</a>」があるかのように処理されます。</p>
<p>　<code>:style</code> パラメータを使って <code>:CC</code> 以外の接続を指定すると、<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>は接続対象の図形要素の位置関係を調べて適切な折れ線を描画します。たとえば、以下は <code>:style :LR</code> で接続しています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='120'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- r1 : rectangle -->
	<rect id='r1' x='80' y='10' width='40' height='40' fill='skyblue' stroke='navy' stroke-width='1' />
	<!-- r2 : rectangle -->
	<rect id='r2' x='180' y='70' width='40' height='40' fill='skyblue' stroke='navy' stroke-width='1' />
	<!-- connector from r1 to r2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,30.0 50.0,30.0 50.0,60.0 250.0,60.0 250.0,90.0 220.0,90.0' />

</svg>
</div>

<p class='fig_title'><a name='5cNBVVOciY7'></a>Figure.4-3 コネクタによる接続経路決定</p>
<p>　この、位置関係を考慮した接続線の自動決定は、接続対象でない他の図形要素の位置を「考慮しない」ことに注意してください。以下のように、先程の接続経路上に他の要素があったとしても、それを迂回するほどには賢くありません。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='120'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- r1 : rectangle -->
	<rect id='r1' x='80' y='10' width='40' height='40' fill='skyblue' stroke='navy' stroke-width='1' />
	<!-- r2 : rectangle -->
	<rect id='r2' x='180' y='70' width='40' height='40' fill='skyblue' stroke='navy' stroke-width='1' />
	<!-- rectangle -->
	<rect x='135' y='45' width='30' height='30' fill='lightpink' stroke='red' stroke-width='1' />
	<!-- connector from r1 to r2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,30.0 50.0,30.0 50.0,60.0 250.0,60.0 250.0,90.0 220.0,90.0' />

</svg>
</div>

<p class='fig_title'><a name='kui5wtIKl5y'></a>Figure.4-4 コネクタによる接続経路決定は他の要素を迂回しない</p>
<p>　上記のような場合に役に立つ（かもしれない）のが <code>:spacing</code> パラメータです。これは、2 回以上折れ曲がる接続線において、「自由な線分の調整を行う」ものです。<a href='#kui5wtIKl5y'>Figure.4-4</a> の接続線を見てください。4 回折れ曲がっていて、5 本の線分でできています。このうち、接続対象に直接触れている線分は（ <code>:style :LR</code> 指定のため）動かせませんが、残り 3 つの線分はそれぞれ x 軸方向または y 軸方向に移動させられそうなことがわかるでしょう。つまり、以下で赤くした部分です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='120'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- r1 : rectangle -->
	<rect id='r1' x='80' y='10' width='40' height='40' fill='skyblue' stroke='navy' stroke-width='1' />
	<!-- r2 : rectangle -->
	<rect id='r2' x='180' y='70' width='40' height='40' fill='skyblue' stroke='navy' stroke-width='1' />
	<!-- connector from r1 to r2 -->
	<polyline fill='none' stroke='gray' stroke-width='1' points=' 80.0,30.0 50.0,30.0 50.0,60.0 250.0,60.0 250.0,90.0 220.0,90.0' />
	<!-- path -->
	<path fill='none' stroke='red' stroke-width='3' d='M 50 30 L 50 60 L 250 60 L 250 90' />
	<!-- block-arrow -->
	<polygon fill='brown' fill-opacity='0.4' stroke='none' stroke-width='1' points='30.0,45.0 40.0,40.0 40.0,42.5 60.0,42.5 60.0,40.0 70.0,45.0 60.0,50.0 60.0,47.5 40.0,47.5 40.0,50.0' />
	<!-- block-arrow -->
	<polygon fill='brown' fill-opacity='0.4' stroke='none' stroke-width='1' points='150.0,40.0 156.0,50.0 152.5,50.0 152.5,70.0 156.0,70.0 150.0,80.0 144.0,70.0 147.5,70.0 147.5,50.0 144.0,50.0' />
	<!-- block-arrow -->
	<polygon fill='brown' fill-opacity='0.4' stroke='none' stroke-width='1' points='230.0,75.0 240.0,70.0 240.0,72.5 260.0,72.5 260.0,70.0 270.0,75.0 260.0,80.0 260.0,77.5 240.0,77.5 240.0,80.0' />

</svg>
</div>

<p class='fig_title'><a name='hHTLHAEc9Gs'></a>Figure.4-5 コネクタの接続経路における「自由な線分」</p>
<p>　<code>:spacing</code> パラメータでは、上記のような「自由な線分」それぞれについて、どれだけズラすかを指定できます。from 側から順番にどれだけズラすかの値を並べたリストで指定します（ズラす方向が x 軸方向なのか y 軸方向なのかは線分毎に自動的に決まります）。ここでは、自由な線分のうち 2 番目の長い線分を下方向に思い切りズラしてしまいましょう。つまり、 <code>:spacing '(0 60 0)</code> と指定します。すると、以下のようになります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='140'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- r1 : rectangle -->
	<rect id='r1' x='80' y='20' width='40' height='40' fill='skyblue' stroke='navy' stroke-width='1' />
	<!-- r2 : rectangle -->
	<rect id='r2' x='180' y='80' width='40' height='40' fill='skyblue' stroke='navy' stroke-width='1' />
	<!-- rectangle -->
	<rect x='135' y='55' width='30' height='30' fill='lightpink' stroke='red' stroke-width='1' />
	<!-- connector from r1 to r2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,40.0 50.0,40.0 50.0,130.0 250.0,130.0 250.0,100.0 220.0,100.0' />

</svg>
</div>

<p class='fig_title'><a name='23eQZDKkLDn'></a>Figure.4-6 spacing パラメータによるコネクタ接続経路の調整</p>
<p>　<code>:spacing</code> パラメータは、最初の自由な線分を指定するだけの場合にはリストでなくてもかまいません。その場合は、 <code>:spacing 30</code> のように数値で指定できます。なお、 <code>:spacing</code> パラメータは「<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>による自動的な経路の決定結果を調整する」ものなので、たとえば接続対象の位置関係が大きく変化した場合などには、都度再調整が必要になることに注意してください。</p>
<h3><a name='4WyMTv59pvw'></a>4.2 パラグラフ</h3>
<p>　<a class='autolink' href='#cVVbsretg1q'>paragraph マクロ</a>によって複数行に渡る<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を描画できます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- paragraph -->
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='100' y='49' >This is paragraph.</text>
		<text x='100' y='63' >Multi line OK.</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='8WHetxNhOq8'></a>Figure.4-7 パラグラフのサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#cVVbsretg1q'>paragraph マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (paragraph canvas.center <span class='literal'>"This is paragraph.~%Multi line OK."</span>
             <span class='keyword3'>:align</span> <span class='keyword3'>:center</span> <span class='keyword3'>:valign</span> <span class='keyword3'>:center</span>))
</pre>
<p>　　</p>
<p>　<code>position</code> と <code>align</code> および <code>valign</code> の関係を以下に示します。以下において、赤い点が <code>position</code> で、アライメント指定は<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>で示されています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='500' height='180'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- paragraph -->
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='250' y='36' >align = :CENTER</text>
		<text x='250' y='50' >valign = :BOTTOM</text>
	</g>
	<!-- circle -->
	<circle cx='250' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- paragraph -->
	<g text-anchor='end' font-size='12pt' fill='black' >
		<text x='160' y='36' >align = :RIGHT</text>
		<text x='160' y='50' >valign = :BOTTOM</text>
	</g>
	<!-- circle -->
	<circle cx='160' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- paragraph -->
	<g text-anchor='start' font-size='12pt' fill='black' >
		<text x='340' y='36' >align = :LEFT</text>
		<text x='340' y='50' >valign = :BOTTOM</text>
	</g>
	<!-- circle -->
	<circle cx='340' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- paragraph -->
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='250' y='89' >align = :CENTER</text>
		<text x='250' y='103' >valign = :CENTER</text>
	</g>
	<!-- circle -->
	<circle cx='250' cy='90' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- paragraph -->
	<g text-anchor='end' font-size='12pt' fill='black' >
		<text x='160' y='89' >align = :RIGHT</text>
		<text x='160' y='103' >valign = :CENTER</text>
	</g>
	<!-- circle -->
	<circle cx='160' cy='90' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- paragraph -->
	<g text-anchor='start' font-size='12pt' fill='black' >
		<text x='340' y='89' >align = :LEFT</text>
		<text x='340' y='103' >valign = :CENTER</text>
	</g>
	<!-- circle -->
	<circle cx='340' cy='90' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- paragraph -->
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='250' y='142' >align = :CENTER</text>
		<text x='250' y='156' >valign = :TOP</text>
	</g>
	<!-- circle -->
	<circle cx='250' cy='130' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- paragraph -->
	<g text-anchor='end' font-size='12pt' fill='black' >
		<text x='160' y='142' >align = :RIGHT</text>
		<text x='160' y='156' >valign = :TOP</text>
	</g>
	<!-- circle -->
	<circle cx='160' cy='130' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- paragraph -->
	<g text-anchor='start' font-size='12pt' fill='black' >
		<text x='340' y='142' >align = :LEFT</text>
		<text x='340' y='156' >valign = :TOP</text>
	</g>
	<!-- circle -->
	<circle cx='340' cy='130' r='3' fill='red' stroke='none' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='4qhyBjYZYlG'></a>Figure.4-8 パラグラフの position とアライメント指定の関係</p>
<p>　　</p>
<h3><a name='e7hkC2YUaKe'></a>4.3 テキストボックス</h3>
<p>　<a class='autolink' href='#hmTTSZjUX3S'>textbox マクロ</a>によって<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>を描画できます。<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>は<a href='#kJonRG8GtHF'>四角形</a> と <a href='#4WyMTv59pvw'>パラグラフ</a> を組み合わせたようなものです。<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>からサイズを自動決定しますが、明示的にボックスのサイズを指定することも可能です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- textbox -->
	<rect x='47.100002' y='27' width='105.799995' height='46' rx='10' fill='white' stroke='black' stroke-width='1' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='100.0' y='49' >test text.</text>
		<text x='100.0' y='63' >multi line.</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='4NTtjXsX7EZ'></a>Figure.4-9 テキストボックスのサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#hmTTSZjUX3S'>textbox マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (textbox '(100 50) <span class='literal'>"test text.~%multi line."</span>
                     <span class='keyword3'>:rx</span> 10 <span class='keyword3'>:ry</span> 10 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>))
</pre>
<p>　　</p>
<p>　<code>align</code> と <code>valign</code> の効果を以下に示します。以下のように、<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>の内部で水平方向、および垂直方向にそれぞれどう寄せるかが変化します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='550' height='220'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- textbox -->
	<rect x='190' y='10' width='170' height='60' fill='white' stroke='black' stroke-width='1' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='275' y='46' >align = :CENTER</text>
		<text x='275' y='60' >valign = :BOTTOM</text>
	</g>
	<!-- textbox -->
	<rect x='10' y='10' width='170' height='60' fill='white' stroke='black' stroke-width='1' />
	<g text-anchor='end' font-size='12pt' fill='black' >
		<text x='170' y='46' >align = :RIGHT</text>
		<text x='170' y='60' >valign = :BOTTOM</text>
	</g>
	<!-- textbox -->
	<rect x='370' y='10' width='170' height='60' fill='white' stroke='black' stroke-width='1' />
	<g text-anchor='start' font-size='12pt' fill='black' >
		<text x='380' y='46' >align = :LEFT</text>
		<text x='380' y='60' >valign = :BOTTOM</text>
	</g>
	<!-- textbox -->
	<rect x='190' y='80' width='170' height='60' fill='white' stroke='black' stroke-width='1' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='275' y='109' >align = :CENTER</text>
		<text x='275' y='123' >valign = :CENTER</text>
	</g>
	<!-- textbox -->
	<rect x='10' y='80' width='170' height='60' fill='white' stroke='black' stroke-width='1' />
	<g text-anchor='end' font-size='12pt' fill='black' >
		<text x='170' y='109' >align = :RIGHT</text>
		<text x='170' y='123' >valign = :CENTER</text>
	</g>
	<!-- textbox -->
	<rect x='370' y='80' width='170' height='60' fill='white' stroke='black' stroke-width='1' />
	<g text-anchor='start' font-size='12pt' fill='black' >
		<text x='380' y='109' >align = :LEFT</text>
		<text x='380' y='123' >valign = :CENTER</text>
	</g>
	<!-- textbox -->
	<rect x='190' y='150' width='170' height='60' fill='white' stroke='black' stroke-width='1' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='275' y='172' >align = :CENTER</text>
		<text x='275' y='186' >valign = :TOP</text>
	</g>
	<!-- textbox -->
	<rect x='10' y='150' width='170' height='60' fill='white' stroke='black' stroke-width='1' />
	<g text-anchor='end' font-size='12pt' fill='black' >
		<text x='170' y='172' >align = :RIGHT</text>
		<text x='170' y='186' >valign = :TOP</text>
	</g>
	<!-- textbox -->
	<rect x='370' y='150' width='170' height='60' fill='white' stroke='black' stroke-width='1' />
	<g text-anchor='start' font-size='12pt' fill='black' >
		<text x='380' y='172' >align = :LEFT</text>
		<text x='380' y='186' >valign = :TOP</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='96V371pW4hW'></a>Figure.4-10 テキストボックスにおける align と valign</p>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#5oL7bKJkowz'>with-textbox-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (with-textbox-options (<span class='keyword3'>:rx</span> 5 <span class='keyword3'>:ry</span> 5 <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:azure</span>)
    (textbox '( 50 50) <span class='literal'>"first~%textbox"</span>)
    (textbox '(150 50) <span class='literal'>"second~%textbox"</span>)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- textbox -->
	<rect x='12.700001' y='27' width='74.6' height='46' rx='5' fill='azure' stroke='navy' stroke-width='1' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='50.0' y='49' >first</text>
		<text x='50.0' y='63' >textbox</text>
	</g>
	<!-- textbox -->
	<rect x='112.7' y='27' width='74.6' height='46' rx='5' fill='azure' stroke='navy' stroke-width='1' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='150.0' y='49' >second</text>
		<text x='150.0' y='63' >textbox</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='fIT9kBEu2gr'></a>Figure.4-11 with-textbox-options のサンプル</p>
<h3><a name='jRjILbbJATV'></a>4.4 ドキュメント</h3>
<p>　<a class='autolink' href='#8otKibFY5LC'>document マクロ</a>によって<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>を描画できます。<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>は<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>と良く似ていますが、サイズは自動計算されないため、幅と高さを指定する必要があります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- document -->
	<path fill='skyblue' stroke='navy' stroke-width='1' d='M 50 15 L 50 85 A 33.333332 23.333334 0 0 0 100 85 A 33.333332 23.333334 1 0 1 150 85 L 150 15 Z' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='100' y='49' >document</text>
		<text x='100' y='63' >name</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='dvJBi2mFjs2'></a>Figure.4-12 ドキュメントのサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#8otKibFY5LC'>document マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (document '(100 50) 100 70 <span class='literal'>"document~%name"</span>
                    <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span>))
</pre>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#7UW0pe7NluY'>with-document-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (240 100)
  (grid)
  (drop-shadow)
  (with-document-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:darkgreen</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:mintcream</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
    (document '( 60 50) 100 70 <span class='literal'>"first~%document"</span>)
    (document '(180 50) 100 70 <span class='literal'>"second~%document"</span>)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- document -->
	<path fill='mintcream' stroke='darkgreen' stroke-width='1' d='M 10 15 L 10 85 A 33.333332 23.333334 0 0 0 60 85 A 33.333332 23.333334 1 0 1 110 85 L 110 15 Z' filter='url(#drop-shadow)' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='60' y='49' >first</text>
		<text x='60' y='63' >document</text>
	</g>
	<!-- document -->
	<path fill='mintcream' stroke='darkgreen' stroke-width='1' d='M 130 15 L 130 85 A 33.333332 23.333334 0 0 0 180 85 A 33.333332 23.333334 1 0 1 230 85 L 230 15 Z' filter='url(#drop-shadow)' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='180' y='49' >second</text>
		<text x='180' y='63' >document</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='47EMqNZNXWt'></a>Figure.4-13 with-document-options のサンプル</p>
<h3><a name='5ZT843xJDiq'></a>4.5 フォルダ</h3>
<p>　<a class='autolink' href='#jYqT4ybxQgU'>folder マクロ</a>によって<a class='autolink' href='#5ZT843xJDiq'>フォルダ</a>を描画できます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- folder -->
	<g fill='cornsilk' stroke='darkkhaki' stroke-width='1' >
		<polygon points='50.0,20.0 50.0,80.0 150.0,80.0 150.0,30.0 140.0,20.0 100.0,20.0 90.0,10.0 60.0,10.0 50.0,20.0' />
		<polygon points='50.0,20.0 60.0,30.0 90.0,30.0 100.0,20.0 90.0,10.0 60.0,10.0 50.0,20.0' />
	</g>
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='100' y='49' >folder.</text>
		<text x='100' y='63' >multi line.</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='bB2F9DVM9ic'></a>Figure.4-14 フォルダのサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#jYqT4ybxQgU'>folder マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (folder '(100 50) <span class='literal'>"folder.~%multi line."</span>
                    <span class='keyword3'>:width</span> 100 <span class='keyword3'>:height</span> 60
                    <span class='keyword3'>:stroke</span> <span class='keyword3'>:darkkhaki</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:cornsilk</span>))
</pre>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#5ZT843xJDiq'>フォルダ</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#hbg0Di1qYwi'>with-folder-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#5ZT843xJDiq'>フォルダ</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (240 100)
  (grid)
  (drop-shadow)
  (with-folder-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:maroon</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:linen</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
    (folder '( 60 50) <span class='literal'>"first~%folder"</span>  <span class='keyword3'>:width</span> 100 <span class='keyword3'>:height</span> 70)
    (folder '(180 50) <span class='literal'>"second~%folder"</span> <span class='keyword3'>:width</span> 100 <span class='keyword3'>:height</span> 70)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- folder -->
	<g fill='linen' stroke='maroon' stroke-width='1' >
		<polygon points='10.0,15.0 10.0,85.0 110.0,85.0 110.0,25.0 100.0,15.0 60.0,15.0 50.0,5.0 20.0,5.0 10.0,15.0' filter='url(#drop-shadow)' />
		<polygon points='10.0,15.0 20.0,25.0 50.0,25.0 60.0,15.0 50.0,5.0 20.0,5.0 10.0,15.0' />
	</g>
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='60' y='49' >first</text>
		<text x='60' y='63' >folder</text>
	</g>
	<!-- folder -->
	<g fill='linen' stroke='maroon' stroke-width='1' >
		<polygon points='130.0,15.0 130.0,85.0 230.0,85.0 230.0,25.0 220.0,15.0 180.0,15.0 170.0,5.0 140.0,5.0 130.0,15.0' filter='url(#drop-shadow)' />
		<polygon points='130.0,15.0 140.0,25.0 170.0,25.0 180.0,15.0 170.0,5.0 140.0,5.0 130.0,15.0' />
	</g>
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='180' y='49' >second</text>
		<text x='180' y='63' >folder</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='0MavWGofA5A'></a>Figure.4-15 with-folder-options のサンプル</p>
<h3><a name='03WwbeGq0eH'></a>4.6 人物</h3>
<p>　<a class='autolink' href='#jsvIhwcwkMd'>person マクロ</a>を使うと、<a class='autolink' href='#03WwbeGq0eH'>人物</a>の形を描画することができます。縦横比は一定のため座標とサイズを指定する必要があり、<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>を添えることができます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='120'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- person -->
	<path fill='oldlace' stroke='brown' stroke-width='1' d='M 30 90 A 20 40 0 1 1 70 90 L 30 90 M 50 50 A 20 20 0 0 1 50 10 A 20 20 0 0 1 50 50' />
	<text x='50' y='104' text-anchor='middle' font-size='12pt' fill='black' >sales</text>
	<!-- person -->
	<path fill='oldlace' stroke='brown' stroke-width='1' d='M 130 90 A 20 40 0 1 1 170 90 L 130 90 M 150 50 A 20 20 0 0 1 150 10 A 20 20 0 0 1 150 50' />
	<text x='150' y='104' text-anchor='middle' font-size='12pt' fill='black' >engineer</text>

</svg>
</div>

<p class='fig_title'><a name='hhPIA8JVdPh'></a>Figure.4-16 人物のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#jsvIhwcwkMd'>person マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (200 120)
  (grid)
  (person '( 50 50) 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:oldlace</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:label</span> <span class='keyword3'>:sales</span>)
  (person '(150 50) 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:oldlace</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:label</span> <span class='keyword3'>:engineer</span>))
</pre>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#03WwbeGq0eH'>人物</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#kLuOHuyuzKQ'>with-person-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#03WwbeGq0eH'>人物</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (drop-shadow)
  (with-person-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>
                        <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:width</span> 2)
                        <span class='keyword3'>:fill</span>   '(<span class='keyword3'>:color</span> <span class='keyword3'>:wheat</span> <span class='keyword3'>:opacity</span> 0.5))
    (person '( 50 50) 40)
    (person '(150 50) 40)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- person -->
	<path fill='wheat' fill-opacity='0.5' stroke='brown' stroke-width='2' d='M 30 90 A 20 40 0 1 1 70 90 L 30 90 M 50 50 A 20 20 0 0 1 50 10 A 20 20 0 0 1 50 50' filter='url(#drop-shadow)' />
	<!-- person -->
	<path fill='wheat' fill-opacity='0.5' stroke='brown' stroke-width='2' d='M 130 90 A 20 40 0 1 1 170 90 L 130 90 M 150 50 A 20 20 0 0 1 150 10 A 20 20 0 0 1 150 50' filter='url(#drop-shadow)' />

</svg>
</div>

<p class='fig_title'><a name='lnnHMVYKIVe'></a>Figure.4-17 with-person-options のサンプル</p>
<h3><a name='5IHcv4bxjLU'></a>4.7 吹き出し</h3>
<p>　<a class='autolink' href='#cpOh7beESsS'>balloon マクロ</a>によって<a class='autolink' href='#5IHcv4bxjLU'>吹き出し</a>を描画できます。<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>と良く似ていますが、指定した位置への引き出し線が描画されます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- r : rectangle -->
	<rect id='r' x='15' y='55' width='30' height='30' fill='gray' stroke='black' stroke-width='1' />
	<!-- balloon -->
	<path fill='skyblue' stroke='navy' stroke-width='1' d='M 79.3 27 L 180.7 27 A 10 10 1 0 1 190.7 37 L 190.7 63 A 10 10 1 0 1 180.7 73 L 79.3 73 A 10 10 1 0 1 69.3 63 L 45.0 70 L 69.3 50 L 69.3 37 A 10 10 1 0 1 79.3 27 Z' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='130.0' y='49' >balloon text.</text>
		<text x='130.0' y='63' >multi line.</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='bnZSVtbTzuH'></a>Figure.4-18 吹き出しのサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#cpOh7beESsS'>balloon マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (rect '(30 70) 30 30 <span class='keyword3'>:fill</span> <span class='keyword3'>:gray</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:id</span> <span class='keyword3'>:r</span>)
  (balloon '(130 50) <span class='literal'>"balloon text.~%multi line."</span> r.right
                                   <span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span>))
</pre>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#5IHcv4bxjLU'>吹き出し</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#5wbX4fvnNyO'>with-balloon-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#5IHcv4bxjLU'>吹き出し</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (drop-shadow)
  (with-balloon-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:olive</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lemonchiffon</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
    (rect canvas.center 20 20 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
    (balloon '( 60 60) <span class='literal'>"first~%balloon"</span>  $1.left  <span class='keyword3'>:width</span> 90)
    (balloon '(240 40) <span class='literal'>"second~%balloon"</span> $2.right <span class='keyword3'>:width</span> 90)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='140' y='40' width='20' height='20' fill='white' stroke='black' stroke-width='1' />
	<!-- balloon -->
	<path fill='lemonchiffon' stroke='olive' stroke-width='1' d='M 25 37 L 95 37 A 10 10 1 0 1 105 47 L 140 50 L 105 60 L 105 73 A 10 10 1 0 1 95 83 L 25 83 A 10 10 1 0 1 15 73 L 15 47 A 10 10 1 0 1 25 37 Z' filter='url(#drop-shadow)' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='60' y='59' >first</text>
		<text x='60' y='73' >balloon</text>
	</g>
	<!-- balloon -->
	<path fill='lemonchiffon' stroke='olive' stroke-width='1' d='M 205 17 L 275 17 A 10 10 1 0 1 285 27 L 285 53 A 10 10 1 0 1 275 63 L 205 63 A 10 10 1 0 1 195 53 L 160 50 L 195 40 L 195 27 A 10 10 1 0 1 205 17 Z' filter='url(#drop-shadow)' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='240' y='39' >second</text>
		<text x='240' y='53' >balloon</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='loJcJRs9CQ6'></a>Figure.4-19 with-balloon-options のサンプル</p>
<h3><a name='0AVJhEKnK1M'></a>4.8 メモ</h3>
<p>　<a class='autolink' href='#0Bkt6LtbRAO'>memo マクロ</a>によって<a class='autolink' href='#0AVJhEKnK1M'>メモ</a>を描画できます。<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>と良く似ていますが、右下に折り目が描画されます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- memo -->
	<g stroke='none' >
		<polygon fill='lavenderblush' points='25.0,10.0 25.0,90.0 145.0,90.0 155.0,70.0 175.0,75.0 175.0,10.0' />
		<polygon fill='lightpink' points='145.0,90.0 175.0,75.0 155.0,70.0' />
		<g fill='none' stroke='red' stroke-width='1' >
			<polyline fill='none' points=' 25.0,50.0 25.0,10.0 175.0,10.0 175.0,75.0 145.0,90.0 25.0,90.0 25.0,50.0' />
			<polyline fill='none' points=' 175.0,75.0 155.0,70.0 145.0,90.0' />
		</g>
	</g>
	<g text-anchor='start' font-size='12pt' fill='black' >
		<text x='35' y='32' >memo text.</text>
		<text x='35' y='46' >multi line.</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='2VCrzOuGHtM'></a>Figure.4-20 メモのサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#0Bkt6LtbRAO'>memo マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (memo '(100 50) <span class='literal'>"memo text.~%multi line."</span> <span class='keyword3'>:width</span> 150 <span class='keyword3'>:height</span> 80
                  <span class='keyword3'>:crease</span> 30 <span class='keyword3'>:align</span> <span class='keyword3'>:left</span> <span class='keyword3'>:valign</span> <span class='keyword3'>:top</span> 
                  <span class='keyword3'>:fill</span> <span class='keyword3'>:lavenderblush</span> <span class='keyword3'>:fill2</span> <span class='keyword3'>:lightpink</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span>))
</pre>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#0AVJhEKnK1M'>メモ</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#3Z6ItFChKPn'>with-memo-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#0AVJhEKnK1M'>メモ</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (240 100)
  (grid)
  (drop-shadow)
  (with-memo-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lavenderblush</span>
                      <span class='keyword3'>:fill2</span> <span class='keyword3'>:lightpink</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
    (memo '( 60 50) <span class='literal'>"first~%memo"</span>  <span class='keyword3'>:width</span> 80 <span class='keyword3'>:height</span> 60)
    (memo '(180 50) <span class='literal'>"second~%memo"</span> <span class='keyword3'>:width</span> 80 <span class='keyword3'>:height</span> 60)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- memo -->
	<g stroke='none' filter='url(#drop-shadow)' >
		<polygon fill='lavenderblush' points='20.0,20.0 20.0,80.0 80.0,80.0 86.666664,66.66667 100.0,70.0 100.0,20.0' />
		<polygon fill='lightpink' points='80.0,80.0 100.0,70.0 86.666664,66.66667' />
		<g fill='none' stroke='red' stroke-width='1' >
			<polyline fill='none' points=' 20.0,50.0 20.0,20.0 100.0,20.0 100.0,70.0 80.0,80.0 20.0,80.0 20.0,50.0' />
			<polyline fill='none' points=' 100.0,70.0 86.666664,66.66667 80.0,80.0' />
		</g>
	</g>
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='60' y='49' >first</text>
		<text x='60' y='63' >memo</text>
	</g>
	<!-- memo -->
	<g stroke='none' filter='url(#drop-shadow)' >
		<polygon fill='lavenderblush' points='140.0,20.0 140.0,80.0 200.0,80.0 206.66666,66.66667 220.0,70.0 220.0,20.0' />
		<polygon fill='lightpink' points='200.0,80.0 220.0,70.0 206.66666,66.66667' />
		<g fill='none' stroke='red' stroke-width='1' >
			<polyline fill='none' points=' 140.0,50.0 140.0,20.0 220.0,20.0 220.0,70.0 200.0,80.0 140.0,80.0 140.0,50.0' />
			<polyline fill='none' points=' 220.0,70.0 206.66666,66.66667 200.0,80.0' />
		</g>
	</g>
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='180' y='49' >second</text>
		<text x='180' y='63' >memo</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='85PzRyM9ubb'></a>Figure.4-21 with-memo-options のサンプル</p>
<h3><a name='hja1QJC0Ivb'></a>4.9 キューブ</h3>
<p>　<a class='autolink' href='#eBspaEdxwbc'>cube マクロ</a>によって<a class='autolink' href='#hja1QJC0Ivb'>キューブ</a>を描画できます。<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>とは異なり、サイズは自動計算されないため、幅と高さを指定する必要があります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- cube -->
	<g stroke='none' >
		<polygon fill='darkgray' points='60.0,26.0 72.0,14.0 146.0,14.0 146.0,68.0 134.0,80.0 134.0,26.0' />
		<rect x='60' y='26' width='74' height='54' fill='lightgray' />
		<path fill='none' stroke='black' stroke-width='1' d='M 60 26 L 134 26 L 134 80 L 60 80 L 60 26 L 72 14 L 146 14 L 146 68 L 134 80 M 134 26 L 146 14' />
	</g>
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='97' y='52' >cube</text>
		<text x='97' y='66' >text</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='j4GYjsfbdqP'></a>Figure.4-22 キューブのサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#eBspaEdxwbc'>cube マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (cube canvas.center 80 60 <span class='literal'>"cube~%text"</span>
              <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span> <span class='keyword3'>:fill2</span> <span class='keyword3'>:darkgray</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>))
</pre>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#hja1QJC0Ivb'>キューブ</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#gj4u2NRMqLq'>with-cube-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#hja1QJC0Ivb'>キューブ</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (240 100)
  (grid)
  (drop-shadow)
  (with-cube-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:slateblue4</span>
                      <span class='keyword3'>:fill</span>   <span class='keyword3'>:lightsteelblue1</span>
                      <span class='keyword3'>:fill2</span>  <span class='keyword3'>:lightsteelblue2</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
    (cube '( 60 50) 80 60 <span class='literal'>"first~%cube"</span> )
    (cube '(180 50) 80 60 <span class='literal'>"second~%cube"</span>)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- cube -->
	<g stroke='none' filter='url(#drop-shadow)' >
		<polygon fill='#BCD2EE' points='20.0,26.0 32.0,14.0 106.0,14.0 106.0,68.0 94.0,80.0 94.0,26.0' />
		<rect x='20' y='26' width='74' height='54' fill='#CAE1FF' />
		<path fill='none' stroke='#473C8B' stroke-width='1' d='M 20 26 L 94 26 L 94 80 L 20 80 L 20 26 L 32 14 L 106 14 L 106 68 L 94 80 M 94 26 L 106 14' />
	</g>
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='57' y='52' >first</text>
		<text x='57' y='66' >cube</text>
	</g>
	<!-- cube -->
	<g stroke='none' filter='url(#drop-shadow)' >
		<polygon fill='#BCD2EE' points='140.0,26.0 152.0,14.0 226.0,14.0 226.0,68.0 214.0,80.0 214.0,26.0' />
		<rect x='140' y='26' width='74' height='54' fill='#CAE1FF' />
		<path fill='none' stroke='#473C8B' stroke-width='1' d='M 140 26 L 214 26 L 214 80 L 140 80 L 140 26 L 152 14 L 226 14 L 226 68 L 214 80 M 214 26 L 226 14' />
	</g>
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='177' y='52' >second</text>
		<text x='177' y='66' >cube</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='3SJFdpOYlvc'></a>Figure.4-23 with-cube-options のサンプル</p>
<h3><a name='5ME1Xv0K4sM'></a>4.10 円柱</h3>
<p>　<a class='autolink' href='#0kdw9fTRleF'>cylinder マクロ</a>によって<a class='autolink' href='#5ME1Xv0K4sM'>円柱</a>を描画できます。<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>とは異なり、サイズは自動計算されないため、幅と高さを指定する必要があります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- cylinder -->
	<g stroke='forestgreen' stroke-width='1' >
		<path fill='honeydew' d='M 60 20 L 60 80 A 40 6 0 0 0 140 80 L 140 20 A 40 6 0 0 0 60 20' />
		<path fill='none' d='M 60 20 A 40 6 0 0 0 140 20' />
	</g>
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='100' y='49' >cylinder</text>
		<text x='100' y='63' >text</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='c33W6fj0jlH'></a>Figure.4-24 円柱のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#0kdw9fTRleF'>cylinder マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (cylinder canvas.center 80 60 <span class='literal'>"cylinder~%text"</span>
                                   <span class='keyword3'>:fill</span> <span class='keyword3'>:honeydew</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:forestgreen</span>))
</pre>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#5ME1Xv0K4sM'>円柱</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#0EzzPQAHjpS'>with-cylinder-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#5ME1Xv0K4sM'>円柱</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (240 100)
  (grid)
  (drop-shadow)
  (with-cylinder-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:slateblue4</span>
                          <span class='keyword3'>:fill</span>   <span class='keyword3'>:lightsteelblue1</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
    (cylinder '( 60 50) 80 60 <span class='literal'>"first~%cylinder"</span> )
    (cylinder '(180 50) 80 60 <span class='literal'>"second~%cylinder"</span>)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- cylinder -->
	<g stroke='#473C8B' stroke-width='1' >
		<path fill='#CAE1FF' d='M 20 20 L 20 80 A 40 6 0 0 0 100 80 L 100 20 A 40 6 0 0 0 20 20' filter='url(#drop-shadow)' />
		<path fill='none' d='M 20 20 A 40 6 0 0 0 100 20' />
	</g>
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='60' y='49' >first</text>
		<text x='60' y='63' >cylinder</text>
	</g>
	<!-- cylinder -->
	<g stroke='#473C8B' stroke-width='1' >
		<path fill='#CAE1FF' d='M 140 20 L 140 80 A 40 6 0 0 0 220 80 L 220 20 A 40 6 0 0 0 140 20' filter='url(#drop-shadow)' />
		<path fill='none' d='M 140 20 A 40 6 0 0 0 220 20' />
	</g>
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='180' y='49' >second</text>
		<text x='180' y='63' >cylinder</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='6qpOLVQEU9p'></a>Figure.4-25 with-cylinder-options のサンプル</p>
<h3><a name='hjZ26isLw42'></a>4.11 爆発</h3>
<p>　<a class='autolink' href='#b1mSpvnCg7y'>explosion1 マクロ</a>および <a class='autolink' href='#gIBWNJYTozi'>explosion2 マクロ</a>によって<a class='autolink' href='#hjZ26isLw42'>爆発</a>を描画できます。<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>とは異なり、サイズは自動計算されないため、幅と高さを指定する必要があります<sup><a name='footnote_ref5' href='#footnote5'>5</a></sup>。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='350' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- explosion -->
	<polygon fill='pink' stroke='red' stroke-width='1' points='32.8,27.0 60.8,57.0 31.4,61.8 55.2,79.8 31.4,95.4 67.8,93.0 62.2,111.0 80.4,102.600006 84.6,133.8 98.6,97.8 116.8,124.200005 122.4,95.4 147.6,114.6 139.2,85.799995 168.6,88.200005 143.4,73.8 167.2,60.6 137.79999,55.8 149.0,40.199997 121.0,45.0 123.8,15.0 100.0,47.4 84.6,29.4 77.600006,49.8' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='100' y='74' >explosion</text>
		<text x='100' y='88' >type1</text>
	</g>
	<!-- explosion -->
	<polygon fill='pink' stroke='red' stroke-width='1' points='209.4,35.4 215.0,58.2 187.0,60.6 205.2,79.8 180.0,85.799995 201.0,100.2 188.4,113.4 210.8,115.799995 212.2,135.0 229.0,114.6 236.0,124.200005 244.4,111.0 255.6,119.4 258.4,102.600006 276.6,111.0 275.2,94.200005 301.8,101.4 286.4,83.4 299.0,77.399994 289.2,67.8 320.0,52.2 286.4,51.0 296.2,31.8 273.8,47.4 275.2,15.0 254.2,39.0 243.0,25.8 236.0,51.0' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='250' y='74' >explosion</text>
		<text x='250' y='88' >type2</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='alxN8u8h3HH'></a>Figure.4-26 爆発のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#b1mSpvnCg7y'>explosion1 マクロ</a>または<a class='autolink' href='#gIBWNJYTozi'>explosion2 マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (350 150)
  (grid)
  (explosion1 '(100 75) 140 120 <span class='literal'>"explosion~%type1"</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:pink</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span>)
  (explosion2 '(250 75) 140 120 <span class='literal'>"explosion~%type2"</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:pink</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span>))
</pre>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#hjZ26isLw42'>爆発</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#2N1LVsx5TAj'>with-explosion-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#hjZ26isLw42'>爆発</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (drop-shadow)
  (with-explosion-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:orangered3</span>
                           <span class='keyword3'>:fill</span>   <span class='keyword3'>:thistle1</span>   <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
    (explosion1 '( 80 50) 140 100 <span class='literal'>"first~%explosion"</span> )
    (explosion2 '(220 50) 140 100 <span class='literal'>"second~%explosion"</span>)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- explosion -->
	<polygon fill='#FFE1FF' stroke='#CD3700' stroke-width='1' points='12.8,10.0 40.8,35.0 11.4,39.0 35.2,54.000004 11.4,67.0 47.800003,65.0 42.2,80.0 60.4,73.0 64.6,99.0 78.6,69.0 96.8,91.0 102.4,67.0 127.6,83.0 119.2,58.999996 148.6,61.0 123.4,49.0 147.2,38.0 117.799995,34.0 129.0,21.0 101.0,25.0 103.8,0.0 80.0,27.000002 64.6,12.0 57.600002,29.0' filter='url(#drop-shadow)' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='80' y='49' >first</text>
		<text x='80' y='63' >explosion</text>
	</g>
	<!-- explosion -->
	<polygon fill='#FFE1FF' stroke='#CD3700' stroke-width='1' points='179.4,17.0 185.0,36.0 157.0,38.0 175.2,54.000004 150.0,58.999996 171.0,71.0 158.4,82.0 180.8,84.0 182.2,100.0 199.0,83.0 206.0,91.0 214.4,80.0 225.6,87.0 228.4,73.0 246.6,80.0 245.20001,66.0 271.8,72.0 256.4,57.0 269.0,52.0 259.2,44.0 290.0,31.0 256.4,30.000002 266.2,14.0 243.8,27.000002 245.20001,0.0 224.2,20.0 213.0,9.0 206.0,30.000002' filter='url(#drop-shadow)' />
	<g text-anchor='middle' font-size='12pt' fill='black' >
		<text x='220' y='49' >second</text>
		<text x='220' y='63' >explosion</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='6vhSWl4Z51P'></a>Figure.4-27 with-explosion-options のサンプル</p>
<h3><a name='4cZRWkwhYNO'></a>4.12 十字</h3>
<p>　<a class='autolink' href='#3B5moS1yMrX'>cross マクロ</a>によって<a class='autolink' href='#4cZRWkwhYNO'>十字</a>を描画できます。幅と高さ、太さを指定でき、<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させれば×印にもなります。また、縦横で太さを変えたり、交差する位置をズラすこともできます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- cross -->
	<path fill='pink' stroke='red' stroke-width='1' d='M 70 10 V 40 H 40 V 60 H 70 V 90 H 90 V 60 H 120 V 40 H 90 V 10 z' />
	<!-- cross -->
	<g transform='rotate(45,200,50)'>
		<path fill='pink' stroke='red' stroke-width='1' d='M 190 10 V 40 H 160 V 60 H 190 V 90 H 210 V 60 H 240 V 40 H 210 V 10 z' />
	</g>
	<!-- cross -->
	<path fill='pink' stroke='red' stroke-width='1' d='M 302.5 10 V 30 H 280 V 40 H 302.5 V 90 H 317.5 V 40 H 360 V 30 H 317.5 V 10 z' />

</svg>
</div>

<p class='fig_title'><a name='i6ogP2K90yF'></a>Figure.4-28 十字のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#3B5moS1yMrX'>cross マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (400 100)
  (grid)
  (cross '( 80 50) 80 80 20 <span class='keyword3'>:fill</span> <span class='keyword3'>:pink</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span>)
  (cross '(200 50) 80 80 20 <span class='keyword3'>:fill</span> <span class='keyword3'>:pink</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span> <span class='keyword3'>:rotate</span> 45)
  (cross '(320 50) 80 80 10 <span class='keyword3'>:fill</span> <span class='keyword3'>:pink</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span> <span class='keyword3'>:intersection</span> '(-10 -15) <span class='keyword3'>:size-v</span> 15))
</pre>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#4cZRWkwhYNO'>十字</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#hUUF8VmJZqf'>with-cross-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#4cZRWkwhYNO'>十字</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (drop-shadow)
  (with-cross-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:purple</span>
                       <span class='keyword3'>:fill</span>   <span class='keyword3'>:plum</span>   <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
    (cross '( 80 50) 80 80 20)
    (cross '(220 50) 80 80 20 <span class='keyword3'>:rotate</span> 45)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- cross -->
	<path fill='plum' stroke='purple' stroke-width='1' d='M 70 10 V 40 H 40 V 60 H 70 V 90 H 90 V 60 H 120 V 40 H 90 V 10 z' filter='url(#drop-shadow)' />
	<!-- cross -->
	<g transform='rotate(45,220,50)'>
		<path fill='plum' stroke='purple' stroke-width='1' d='M 210 10 V 40 H 180 V 60 H 210 V 90 H 230 V 60 H 260 V 40 H 230 V 10 z' filter='url(#drop-shadow)' />
	</g>

</svg>
</div>

<p class='fig_title'><a name='aRp5j4797s7'></a>Figure.4-29 with-cross-options のサンプル</p>
<h3><a name='49KKf97828b'></a>4.13 ブロック矢印</h3>
<p>　<a class='autolink' href='#fPXJtSPEV1e'>block-arrow1 マクロ</a>および <a class='autolink' href='#lwcwjW0h2Fi'>block-arrow2 マクロ</a>により、指定した２点を結ぶ大きな矢印を描画できます。block-arrow1 は終端側だけに矢印が描画されますが、block-arrow2 を使えば双方向の矢印になります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- block-arrow -->
	<polygon fill='skyblue' stroke='navy' stroke-width='2' points='50.0,50.0 50.0,30.0 210.0,30.0 210.0,20.0 250.0,40.0 210.0,60.0 210.0,50.0' />
	<!-- block-arrow -->
	<polygon fill='skyblue' stroke='navy' stroke-width='2' points='50.0,110.0 90.0,90.0 90.0,100.0 210.0,100.0 210.0,90.0 250.0,110.0 210.0,130.0 210.0,120.0 90.0,120.0 90.0,130.0' />

</svg>
</div>

<p class='fig_title'><a name='eIwQ5AwuV7t'></a>Figure.4-30 ブロック矢印のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#fPXJtSPEV1e'>block-arrow1 マクロ</a>および <a class='autolink' href='#lwcwjW0h2Fi'>block-arrow2 マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (with-options (<span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span>
                 <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:width</span> 2))
    (block-arrow1 '(50  40) '(250  40) 20)
    (block-arrow2 '(50 110) '(250 110) 20)))
</pre>
<p>　　</p>
<p>　いくつかのパラメータは直感的に判りにくいため、以下で説明します。<code>(block-arrow1 pt1 pt2 width :length length :size size :margin margin)</code> とした場合、それぞれのパラメータは以下のように使用されます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='120'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- circle -->
	<circle cx='50' cy='50' r='4' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='350' cy='50' r='4' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='50' y='65' text-anchor='middle' font-size='10pt' fill='red' >pt1</text>
	<!-- text -->
	<text x='350' y='65' text-anchor='middle' font-size='10pt' fill='red' >pt2</text>
	<!-- line -->
	<polyline fill='none' stroke='red' stroke-width='0.5' stroke-dasharray='4 4 ' points=' 50.0,50.0 350.0,50.0' />
	<!-- block-arrow -->
	<polygon fill='skyblue' fill-opacity='0.3' stroke='navy' stroke-width='1' points='80.0,65.0 80.0,35.0 250.0,35.0 250.0,20.0 320.0,50.0 250.0,80.0 250.0,65.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 50.0,50.0 50.0,20.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 350.0,50.0 350.0,20.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 320.0,50.0 320.0,20.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 250.0,20.0 220.0,20.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 250.0,80.0 220.0,80.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 250.0,80.0 250.0,100.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 320.0,50.0 320.0,100.0' />
	<!-- line -->
	<polyline fill='none' stroke='brown' stroke-width='1' points=' 230.0,20.0 230.0,80.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='235.0,28.660254 230,20 225.0,28.660254' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='225.0,71.339745 230,80 235.0,71.339745' />
	<!-- line -->
	<polyline fill='none' stroke='brown' stroke-width='1' points=' 150.0,35.0 150.0,65.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='155.0,43.660255 150,35 145.0,43.660255' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='145.0,56.339745 150,65 155.0,56.339745' />
	<!-- line -->
	<polyline fill='none' stroke='brown' stroke-width='1' points=' 250.0,90.0 320.0,90.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='258.66025,85.0 250,90 258.66025,95.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='311.33975,95.0 320,90 311.33975,85.0' />
	<!-- line -->
	<polyline fill='none' stroke='brown' stroke-width='1' points=' 50.0,35.0 80.0,35.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='58.660255,30.0 50,35 58.660255,40.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='71.339745,40.0 80,35 71.339745,30.0' />
	<!-- line -->
	<polyline fill='none' stroke='brown' stroke-width='1' points=' 320.0,30.0 350.0,30.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='328.66025,25.0 320,30 328.66025,35.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='341.33975,35.0 350,30 341.33975,25.0' />
	<!-- text -->
	<text x='150' y='30' text-anchor='middle' font-size='10pt' fill='brown' >width</text>
	<!-- text -->
	<text x='230' y='95' text-anchor='end' font-size='10pt' fill='brown' >size</text>
	<!-- text -->
	<text x='325' y='100' text-anchor='start' font-size='10pt' fill='brown' >length</text>
	<!-- text -->
	<text x='60' y='25' text-anchor='start' font-size='10pt' fill='brown' >margin</text>
	<!-- text -->
	<text x='330' y='25' text-anchor='start' font-size='10pt' fill='brown' >margin</text>

</svg>
</div>

<p class='fig_title'><a name='htsQptREwXf'></a>Figure.4-31 ブロック矢印のパラメータ</p>
<ul>
<li><code>size</code> が省略された場合、デフォルト値として <code>width</code> の２倍が使用されます</li>
<li><code>length</code> が省略された場合、デフォルト値として <code>size</code> と同じ値が使用されます</li>
<li><code>margin</code> が省略された場合、デフォルト値として 0 が使用されます</li>
</ul>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#2UcFIIIJXWw'>with-block-arrow-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (drop-shadow)
  (with-block-arrow-options (<span class='keyword3'>:fill</span>   <span class='keyword3'>:honeydew</span>
                             <span class='keyword3'>:stroke</span> <span class='keyword3'>:darkgreen</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
    (block-arrow1 '(30 25) '(170 25) 20)
    (block-arrow2 '(30 75) '(170 75) 20)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- block-arrow -->
	<polygon fill='honeydew' stroke='darkgreen' stroke-width='1' points='30.0,35.0 30.0,15.0 130.0,15.0 130.0,5.0 170.0,25.0 130.0,45.0 130.0,35.0' filter='url(#drop-shadow)' />
	<!-- block-arrow -->
	<polygon fill='honeydew' stroke='darkgreen' stroke-width='1' points='30.0,75.0 70.0,55.0 70.0,65.0 130.0,65.0 130.0,55.0 170.0,75.0 130.0,95.0 130.0,85.0 70.0,85.0 70.0,95.0' filter='url(#drop-shadow)' />

</svg>
</div>

<p class='fig_title'><a name='joIBAKcJmZU'></a>Figure.4-32 with-block-arrow-options のサンプル</p>
<h3><a name='lBS33hNe32a'></a>4.14 波括弧</h3>
<p>　<a class='autolink' href='#h2iZ4O9D92X'>brace マクロ</a>により、大きな<a class='autolink' href='#lBS33hNe32a'>波括弧</a>を描画することができます。<a class='autolink' href='#lBS33hNe32a'>波括弧</a>には<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を添えることができます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='220'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- brace -->
	<path fill='none' stroke='navy' stroke-width='2' d='M 80 10 A 10 20 0 0 0 90 30 L 220 30 A 10 20 1 0 1 230 50 A 10 20 1 0 1 240 30 L 310 30 A 10 20 0 0 0 320 10' />
	<text x='230' y='71' text-anchor='middle' font-size='16pt' fill='navy' >upper brace</text>
	<!-- brace -->
	<path fill='none' stroke='navy' stroke-width='2' d='M 80 210 A 10 20 1 0 1 90 190 L 130 190 A 10 20 0 0 0 140 170 A 10 20 0 0 0 150 190 L 310 190 A 10 20 1 0 1 320 210' />
	<text x='140' y='165' text-anchor='middle' font-size='16pt' fill='navy' >bottom brace</text>
	<!-- brace -->
	<path fill='none' stroke='navy' stroke-width='2' d='M 10 50 A 20 10 1 0 1 30 60 L 30 80 A 20 10 0 0 0 50 90 A 20 10 0 0 0 30 100 L 30 160 A 20 10 1 0 1 10 170' />
	<text x='55' y='98' text-anchor='start' font-size='16pt' fill='navy' >left brace</text>
	<!-- brace -->
	<path fill='none' stroke='navy' stroke-width='2' d='M 390 50 A 20 10 0 0 0 370 60 L 370 120 A 20 10 1 0 1 350 130 A 20 10 1 0 1 370 140 L 370 160 A 20 10 0 0 0 390 170' />
	<text x='345' y='138' text-anchor='end' font-size='16pt' fill='navy' >right brace</text>

</svg>
</div>

<p class='fig_title'><a name='jKClDFWGMjM'></a>Figure.4-33 波括弧のサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#h2iZ4O9D92X'>brace マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (400 220)
   (grid)
   (with-options (<span class='keyword3'>:font</span>   '(<span class='keyword3'>:fill</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:size</span> 16)
                  <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:width</span> 2))
       (brace '(200  30) <span class='keyword3'>:upper</span>  240  40 <span class='keyword3'>:r</span> 10 <span class='keyword3'>:point</span> 150 <span class='keyword3'>:text</span> <span class='literal'>"upper brace"</span> )
       (brace '(200 190) <span class='keyword3'>:bottom</span> 240  40 <span class='keyword3'>:r</span> 10 <span class='keyword3'>:point</span>  60 <span class='keyword3'>:text</span> <span class='literal'>"bottom brace"</span>)
       (brace '( 30 110) <span class='keyword3'>:left</span>    40 120 <span class='keyword3'>:r</span> 10 <span class='keyword3'>:point</span>  40 <span class='keyword3'>:text</span> <span class='literal'>"left brace"</span>  )
       (brace '(370 110) <span class='keyword3'>:right</span>   40 120 <span class='keyword3'>:r</span> 10 <span class='keyword3'>:point</span>  80 <span class='keyword3'>:text</span> <span class='literal'>"right brace"</span> )))
</pre>
<p>　　</p>
<p>　いくつかのパラメータは直感的に判りにくいため、以下で説明します。<code>(brace position direction width height :r r :point point)</code> とした場合、それぞれのパラメータは以下のように使用されます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- brace -->
	<path fill='none' stroke='navy' stroke-width='2' d='M 80 40 A 30 30 0 0 0 110 70 L 200 70 A 30 30 1 0 1 230 100 A 30 30 1 0 1 260 70 L 290 70 A 30 30 0 0 0 320 40' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 80.0,10.0 80.0,130.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 320.0,40.0 320.0,10.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 320.0,40.0 350.0,40.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 230.0,100.0 350.0,100.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 110.0,70.0 110.0,100.0' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='1' stroke-dasharray='QUOTE (3 3) ' points=' 230.0,100.0 230.0,130.0' />
	<!-- line -->
	<polyline fill='none' stroke='brown' stroke-width='1' points=' 80.0,20.0 320.0,20.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='88.660255,15.0 80,20 88.660255,25.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='311.33975,25.0 320,20 311.33975,15.0' />
	<!-- line -->
	<polyline fill='none' stroke='brown' stroke-width='1' points=' 340.0,40.0 340.0,100.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='345.0,48.660255 340,40 335.0,48.660255' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='335.0,91.339745 340,100 345.0,91.339745' />
	<!-- line -->
	<polyline fill='none' stroke='brown' stroke-width='1' points=' 80.0,90.0 110.0,90.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='88.660255,85.0 80,90 88.660255,95.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='101.339745,95.0 110,90 101.339745,85.0' />
	<!-- line -->
	<polyline fill='none' stroke='brown' stroke-width='1' points=' 80.0,120.0 230.0,120.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='88.660255,115.0 80,120 88.660255,125.0' />
	<polyline fill='none' stroke='brown' stroke-width='1' points='221.33975,125.0 230,120 221.33975,115.0' />
	<!-- text -->
	<text x='200' y='35' text-anchor='middle' font-size='12pt' fill='brown' >width</text>
	<!-- text -->
	<text x='345' y='75' text-anchor='start' font-size='12pt' fill='brown' >height</text>
	<!-- text -->
	<text x='95' y='105' text-anchor='middle' font-size='12pt' fill='brown' >r</text>
	<!-- text -->
	<text x='155' y='135' text-anchor='middle' font-size='12pt' fill='brown' >point</text>

</svg>
</div>

<p class='fig_title'><a name='eWywNaFqjwP'></a>Figure.4-34 波括弧のパラメータ</p>
<ul>
<li><code>r</code> が省略された場合、デフォルト値として <code>height</code> （縦向きの場合は <code>width</code> ）の 1/3 が指定されます</li>
<li><code>point</code> が省略された場合、デフォルト値として <code>width</code> （縦向きの場合は <code>height</code> ）の 1/2 が指定されます</li>
<li><code>point</code> が左右端に近過ぎる場合、 <code>r</code> が自動調整されます</li>
</ul>
<p>　　</p>
<p>　図の中で<a class='autolink' href='#lBS33hNe32a'>波括弧</a>のスタイルを統一する作業を簡単にするために、<a class='autolink' href='#fZCUOAFAdSr'>with-brace-options マクロ</a>が用意されています。これを以下のように使用することで、複数の<a class='autolink' href='#lBS33hNe32a'>波括弧</a>のスタイルを一箇所で指定することができます。</p>
<pre class='code'>
(diagram (400 220)
   (grid)
   (with-brace-options (<span class='keyword3'>:font</span>   '(<span class='keyword3'>:fill</span>  <span class='keyword3'>:brown</span> <span class='keyword3'>:size</span> 16)
                        <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:width</span> 2))
       (brace '(200  30) <span class='keyword3'>:upper</span>  240  40 <span class='keyword3'>:r</span> 10 <span class='keyword3'>:point</span> 150 <span class='keyword3'>:text</span> <span class='literal'>"upper brace"</span> )
       (brace '(200 190) <span class='keyword3'>:bottom</span> 240  40 <span class='keyword3'>:r</span> 10 <span class='keyword3'>:point</span>  60 <span class='keyword3'>:text</span> <span class='literal'>"bottom brace"</span>)
       (brace '( 30 110) <span class='keyword3'>:left</span>    40 120 <span class='keyword3'>:r</span> 10 <span class='keyword3'>:point</span>  40 <span class='keyword3'>:text</span> <span class='literal'>"left brace"</span>  )
       (brace '(370 110) <span class='keyword3'>:right</span>   40 120 <span class='keyword3'>:r</span> 10 <span class='keyword3'>:point</span>  80 <span class='keyword3'>:text</span> <span class='literal'>"right brace"</span> )))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='220'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- brace -->
	<path fill='none' stroke='brown' stroke-width='2' d='M 80 10 A 10 20 0 0 0 90 30 L 220 30 A 10 20 1 0 1 230 50 A 10 20 1 0 1 240 30 L 310 30 A 10 20 0 0 0 320 10' />
	<text x='230' y='71' text-anchor='middle' font-size='16pt' fill='brown' >upper brace</text>
	<!-- brace -->
	<path fill='none' stroke='brown' stroke-width='2' d='M 80 210 A 10 20 1 0 1 90 190 L 130 190 A 10 20 0 0 0 140 170 A 10 20 0 0 0 150 190 L 310 190 A 10 20 1 0 1 320 210' />
	<text x='140' y='165' text-anchor='middle' font-size='16pt' fill='brown' >bottom brace</text>
	<!-- brace -->
	<path fill='none' stroke='brown' stroke-width='2' d='M 10 50 A 20 10 1 0 1 30 60 L 30 80 A 20 10 0 0 0 50 90 A 20 10 0 0 0 30 100 L 30 160 A 20 10 1 0 1 10 170' />
	<text x='55' y='98' text-anchor='start' font-size='16pt' fill='brown' >left brace</text>
	<!-- brace -->
	<path fill='none' stroke='brown' stroke-width='2' d='M 390 50 A 20 10 0 0 0 370 60 L 370 120 A 20 10 1 0 1 350 130 A 20 10 1 0 1 370 140 L 370 160 A 20 10 0 0 0 390 170' />
	<text x='345' y='138' text-anchor='end' font-size='16pt' fill='brown' >right brace</text>

</svg>
</div>

<p class='fig_title'><a name='hnkBV0wrSv5'></a>Figure.4-35 with-brace-options のサンプル</p>
<h3><a name='g6xjP526KX7'></a>4.15 テーブル</h3>
<p>　<a class='autolink' href='#hqebcMypbfk'>table マクロ</a>を使うことで、表を描画することができます。以下の例では、３行４列の表を作成しています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='320' height='120'>
	
	<!-- table -->
	<g stroke='none'>
		<rect x='10' y='15' width='300' height='90' fill='white' />
		<rect x='10' y='15' width='300' height='30' fill='skyblue' />
	</g>
	<g stroke='black' stroke-width='1'  fill='none'>
		<rect x='10' y='15' width='300' height='90' />
		<polyline points=' 10.0,45.0 310.0,45.0' />
		<polyline points=' 10.0,75.0 310.0,75.0' />
		<polyline points=' 85.0,15.0 85.0,105.0' />
		<polyline points=' 160.0,15.0 160.0,105.0' />
		<polyline points=' 235.0,15.0 235.0,105.0' />
	</g>
	<g font-size='12pt' fill='black'  >
		<text x='47.5' y='36' text-anchor='middle' >FOO</text>
		<text x='122.5' y='36' text-anchor='middle' >BAR</text>
		<text x='197.5' y='36' text-anchor='middle' >BAZ</text>
		<text x='272.5' y='36' text-anchor='middle' >QUUX</text>
		<text x='79' y='66' text-anchor='end' >5</text>
		<text x='154' y='66' text-anchor='end' >6</text>
		<text x='229' y='66' text-anchor='end' >42</text>
		<text x='304' y='66' text-anchor='end' >-123</text>
		<text x='16' y='96' text-anchor='start' >asdf</text>
		<text x='91' y='96' text-anchor='start' >qwer</text>
		<text x='166' y='96' text-anchor='start' >zxcv</text>
		<text x='241' y='96' text-anchor='start' >hjkl</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='4p5NTDB8bf1'></a>Figure.4-36 テーブルのサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#hqebcMypbfk'>table マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (320 120)
   (table '(160 60) '(30 30 30) '(75 75 75 75)
          <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fills</span> '(<span class='keyword3'>:rc</span> <span class='keyword3'>:white</span> <span class='keyword3'>:r0</span> <span class='keyword3'>:skyblue</span>)
          <span class='keyword3'>:texts</span> '((<span class='keyword3'>:foo</span> <span class='keyword3'>:bar</span> <span class='keyword3'>:baz</span> <span class='keyword3'>:quux</span>)
                   (5 6 42 -123)
                   (<span class='literal'>"asdf"</span> <span class='literal'>"qwer"</span> <span class='literal'>"zxcv"</span> <span class='literal'>"hjkl"</span>))))
</pre>
<p>　　</p>
<p>　表内での<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の指定について説明します。まず、 <code>texts</code> パラメータそのものを省略した場合、すべてのセルにおいて<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>は指定されなかったものとして扱われます。指定する場合、典型的には前述の例のように「リストのリスト」として指定することになります。</p>
<pre class='code'>
  <span class='keyword3'>:texts</span> '((<span class='keyword3'>:foo</span> <span class='keyword3'>:bar</span> <span class='keyword3'>:baz</span> <span class='keyword3'>:quux</span>)
           (5 6 42 -123)
           (<span class='literal'>"asdf"</span> <span class='literal'>"qwer"</span> <span class='literal'>"zxcv"</span> <span class='literal'>"hjkl"</span>))
</pre>
<p>　この例では 3 行 x 4 列全てのセルに<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を指定していますが、空のままにしておきたいセルには <code>nil</code> を指定してください。見ての通り、 <code>:texts</code> といっても数値やシンボルも指定することができます。ただし、改行を含む複数行の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を表示させることはできません。それが必要な場合は、後述する <a href='#3qNm5uHdKTZ'>with-table-cell を使ったセル内描画</a>を利用してください。</p>
<p>　表示させる<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報やアライメントを指定したい場合、個々のデータ自体をリストで指定する必要があります。</p>
<ul>
<li>データはリストの先頭要素として指定します。</li>
<li>水平方向のアライメントは、 <code>:align</code> に続けて <code>:left, :center, :right</code> のいずれかを指定します。これを省略した場合、 <code>data</code> が数値であれば右寄せ、文字列であれば左寄せ、キーワードなどのシンボルであれば中央揃えになります。</li>
<li>垂直方向のアライメントは、 <code>:valign</code> に続けて <code>:top, :center, :bottom</code> のいずれかを指定します。デフォルトで <code>:center</code> 指定になります</li>
<li><a class='autolink' href='#3kZ9FkounyK'>フォント</a>は、 <code>:font</code> に続けて<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報を指定します。これを省略した場合、その時点でのデフォルト<a class='autolink' href='#3kZ9FkounyK'>フォント</a>が使用されます。</li>
</ul>
<p>　<code>:align</code> および <code>:valign</code> のサンプルを以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='480' height='240'>
	
	<!-- tbl : table -->
	<g id='tbl'>
		<g stroke='none'>
			<rect x='10' y='10' width='460' height='220' fill='white' />
			<rect x='10' y='10' width='460' height='40' fill='skyblue' />
			<rect x='10' y='10' width='100' height='220' fill='skyblue' />
		</g>
		<g stroke='navy' stroke-width='1'  fill='none'>
			<rect x='10' y='10' width='460' height='220' />
			<polyline points=' 10.0,50.0 470.0,50.0' />
			<polyline points=' 10.0,110.0 470.0,110.0' />
			<polyline points=' 10.0,170.0 470.0,170.0' />
			<polyline points=' 110.0,10.0 110.0,230.0' />
			<polyline points=' 230.0,10.0 230.0,230.0' />
			<polyline points=' 350.0,10.0 350.0,230.0' />
		</g>
		<g font-size='12pt' fill='black'  >
			<text x='170' y='36' text-anchor='middle' >:left</text>
			<text x='290' y='36' text-anchor='middle' >:center</text>
			<text x='410' y='36' text-anchor='middle' >:right</text>
			<text x='60' y='86' text-anchor='middle' >:top</text>
			<text x='116' y='68' text-anchor='start' >top-left</text>
			<text x='290' y='68' text-anchor='middle' >top-center</text>
			<text x='464' y='68' text-anchor='end' >top-right</text>
			<text x='60' y='146' text-anchor='middle' >:center</text>
			<text x='116' y='146' text-anchor='start' >center-left</text>
			<text x='290' y='146' text-anchor='middle' >center-center</text>
			<text x='464' y='146' text-anchor='end' >center-right</text>
			<text x='60' y='206' text-anchor='middle' >:bottom</text>
			<text x='116' y='224' text-anchor='start' >botom-left</text>
			<text x='290' y='224' text-anchor='middle' >bottom-center</text>
			<text x='464' y='224' text-anchor='end' >bottom-right</text>
		</g>
	</g>
	<!-- text -->
	<text x='59' y='28' text-anchor='start' font-size='12pt' fill='black' >:align</text>
	<!-- text -->
	<text x='13' y='45' text-anchor='start' font-size='12pt' fill='black' >:valign</text>
	<!-- line -->
	<polyline fill='none' stroke='navy' stroke-width='1' points=' 10.0,10.0 110.0,50.0' />

</svg>
</div>

<p class='fig_title'><a name='0EEfXZqu18P'></a>Figure.4-37 テーブルにおけるテキストの align と valign パラメータ</p>
<details>
<summary>　※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (480 240)
  (with-options (<span class='keyword3'>:font</span> '(<span class='keyword3'>:size</span> 12))
    (table '(240 120) '(40 60 60 60) '(100 120 120 120)
           <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:id</span> <span class='keyword3'>:tbl</span>
           <span class='keyword3'>:fills</span> '(<span class='keyword3'>:rc</span> <span class='keyword3'>:white</span> <span class='keyword3'>:r0</span> <span class='keyword3'>:skyblue</span> <span class='keyword3'>:c0</span> <span class='keyword3'>:skyblue</span>)
           <span class='keyword3'>:texts</span> `((nil        :|:left|   :|:center|   :|:right|)
                    (:|:top|    (<span class='literal'>"top-left"</span>      <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>   <span class='keyword3'>:valign</span> <span class='keyword3'>:top</span>)
                                (<span class='literal'>"top-center"</span>    <span class='keyword3'>:align</span> <span class='keyword3'>:center</span> <span class='keyword3'>:valign</span> <span class='keyword3'>:top</span>)
                                (<span class='literal'>"top-right"</span>     <span class='keyword3'>:align</span> <span class='keyword3'>:right</span>  <span class='keyword3'>:valign</span> <span class='keyword3'>:top</span>))
                    (:|:center| (<span class='literal'>"center-left"</span>   <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>   <span class='keyword3'>:valign</span> <span class='keyword3'>:center</span>)
                                (<span class='literal'>"center-center"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span> <span class='keyword3'>:valign</span> <span class='keyword3'>:center</span>)
                                (<span class='literal'>"center-right"</span>  <span class='keyword3'>:align</span> <span class='keyword3'>:right</span>  <span class='keyword3'>:valign</span> <span class='keyword3'>:center</span>))
                    (:|:bottom| (<span class='literal'>"botom-left"</span>    <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>   <span class='keyword3'>:valign</span> <span class='keyword3'>:bottom</span>)
                                (<span class='literal'>"bottom-center"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span> <span class='keyword3'>:valign</span> <span class='keyword3'>:bottom</span>)
                                (<span class='literal'>"bottom-right"</span>  <span class='keyword3'>:align</span> <span class='keyword3'>:right</span>  <span class='keyword3'>:valign</span> <span class='keyword3'>:bottom</span>))))
    (with-table-cell (<span class='keyword3'>:tbl</span> 0 0)
      (text (xy+ canvas.center -1 -2)  <span class='literal'>":align"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
      (text (xy+ canvas.left    3 15) <span class='literal'>":valign"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
      (<span class='keyword1'>let</span> ((w canvas.width)
           (h canvas.height))
        (line `((0 0) (,w ,h)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span>)))))
</pre>
</details>
<p>　データを（リストでなく）直接指定した場合でも、デフォルトの設定として数値ならば右寄せ、文字列ならば左寄せ、シンボルならば中央揃えという措置が行なわれるため、多くの場合で個別セルの<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>データ指定をリストで行なう必要は無いでしょう。キーワードを使うと全て大文字で表示されてしまいますが、 <code>:|Foo|</code> のようにバーティカルバーで括ると文字の大小を維持したまま表示されます（<a href='#0EEfXZqu18P'>Figure.4-37</a> のコードを参照）。</p>
<h4><a name='3qNm5uHdKTZ'></a>4.15.1 with-table-cell を使ったセル内描画</h4>
<p>　table の id とセルの行・列番号を指定して <a class='autolink' href='#8rELk1LL2bC'>with-table-cell マクロ</a>を使用することで、該当するセルを<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画ができます。以下の例では、2 x 2 の空の<a class='autolink' href='#g6xjP526KX7'>テーブル</a>を作成し、そのうちの２つのセル内部に図形を描画しています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='220' height='220'>
	
	<!-- tbl : table -->
	<g id='tbl'>
		<g stroke='none'>
			<rect x='10' y='10' width='200' height='200' fill='white' />
		</g>
		<g stroke='navy' stroke-width='1'  fill='none'>
			<rect x='10' y='10' width='200' height='200' />
			<polyline points=' 10.0,110.0 210.0,110.0' />
			<polyline points=' 110.0,10.0 110.0,210.0' />
		</g>
	</g>
	<!-- circle -->
	<circle cx='60' cy='160' r='30' fill='lightcyan' stroke='blue' stroke-width='1' />
	<!-- rectangle -->
	<g transform='rotate(45,160,60)'>
		<rect x='135' y='35' width='50' height='50' fill='lightpink' stroke='red' stroke-width='1' />
	</g>

</svg>
</div>

<p class='fig_title'><a name='knawwdhRtbI'></a>Figure.4-38 with-table-cell の使用例</p>
<p>　上記のサンプルは以下のコードで生成されています。</p>
<pre class='code'>
(diagram (220 220)
    (table '(110 110) '(100 100) '(100 100)
               <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fills</span> '(<span class='keyword3'>:rc</span> <span class='keyword3'>:white</span>) <span class='keyword3'>:id</span> <span class='keyword3'>:tbl</span>)
    (with-table-cell (<span class='keyword3'>:tbl</span> 1 0)
      (circle canvas.center 30 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightcyan</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:blue</span>))
    (with-table-cell (<span class='keyword3'>:tbl</span> 0 1)
      (rect canvas.center 50 50 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightpink</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span> <span class='keyword3'>:rotate</span> 45)))
</pre>
<p>　<a class='autolink' href='#8rELk1LL2bC'>with-table-cell マクロ</a>は事実上、<a class='autolink' href='#g6xjP526KX7'>テーブル</a>の単一セル領域を指定した <a class='autolink' href='#5cY34BaMQhr'>with-subcanvas マクロ</a>として機能します。そのため、 <code>canvas</code> を使ってその中心座標や幅、高さ情報にアクセスできます。</p>
<p>　　</p>
<h4><a name='2sVUYL4zgkO'></a>4.15.2 with-table-range を使った範囲取得</h4>
<p>　<a class='autolink' href='#8n9SABCEJKZ'>with-table-range マクロ</a>を使用することで、<a class='autolink' href='#g6xjP526KX7'>テーブル</a>内の指定範囲を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>として取得することができます。範囲は、 <code>fills</code> パラメータと同じ形式のキーワードで指定します。以下の例では、4 x 5 の<a class='autolink' href='#g6xjP526KX7'>テーブル</a>を作成し、その一部をマスクするために <a class='autolink' href='#8n9SABCEJKZ'>with-table-range マクロ</a>を使用しています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- tbl : table -->
	<g id='tbl'>
		<g stroke='none'>
			<rect x='10' y='10' width='200' height='80' fill='white' />
			<rect x='10' y='10' width='200' height='20' fill='skyblue' />
		</g>
		<g stroke='black' stroke-width='1'  fill='none'>
			<rect x='10' y='10' width='200' height='80' />
			<polyline points=' 10.0,30.0 210.0,30.0' />
			<polyline points=' 10.0,50.0 210.0,50.0' />
			<polyline points=' 10.0,70.0 210.0,70.0' />
			<polyline points=' 50.0,10.0 50.0,90.0' />
			<polyline points=' 90.0,10.0 90.0,90.0' />
			<polyline points=' 130.0,10.0 130.0,90.0' />
			<polyline points=' 170.0,10.0 170.0,90.0' />
		</g>
	</g>
	<!-- rectangle -->
	<rect x='90' y='50' width='120' height='40' fill='lightgray' fill-opacity='0.8' stroke='none' stroke-width='1' />
	<!-- brace -->
	<path fill='none' stroke='black' stroke-width='1' d='M 215 50 A 5 3 1 0 1 220 53 L 220 67 A 5 3 0 0 0 225 70 A 5 3 0 0 0 220 73 L 220 87 A 5 3 1 0 1 215 90' />
	<text x='230' y='76' text-anchor='start' font-size='12pt' fill='black' >masked</text>

</svg>
</div>

<p class='fig_title'><a name='jRS2A9pCmbY'></a>Figure.4-39 with-table-range の使用例</p>
<p>　上記のサンプルは以下のコードで生成されています。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (table (x+ canvas.center -40) '(20 20 20 20) '(40 40 40 40 40)
         <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fills</span> '(<span class='keyword3'>:rc</span> <span class='keyword3'>:white</span> <span class='keyword3'>:r0</span> <span class='keyword3'>:skyblue</span>) <span class='keyword3'>:id</span> <span class='keyword3'>:tbl</span>)
  (with-table-range (<span class='keyword3'>:tbl</span> <span class='keyword3'>:r2-3c2-4</span>)
    (rect canvas.center canvas.width canvas.height
          <span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:lightgray</span> <span class='keyword3'>:opacity</span> 0.8))
    (brace (x+ canvas.right 10) <span class='keyword3'>:left</span> 10 canvas.height <span class='keyword3'>:r</span> 3 <span class='keyword3'>:text</span> <span class='literal'>"masked"</span>)))
</pre>
<p>　<a class='autolink' href='#8n9SABCEJKZ'>with-table-range マクロ</a>は事実上、<a class='autolink' href='#g6xjP526KX7'>テーブル</a>の指定領域を指定した <a class='autolink' href='#5cY34BaMQhr'>with-subcanvas マクロ</a>として機能します。そのため、 <code>canvas</code> を使ってその中心座標や幅、高さ情報にアクセスできます。</p>
<h4><a name='jQfA1iRJRbN'></a>4.15.3 テーブルの罫線を細かく制御するには</h4>
<p>　基本的に、<a class='autolink' href='#g6xjP526KX7'>テーブル</a>の罫線は <code>:stroke</code> パラメータで一種類しか指定できません。外枠、縦線、横線などを細かく制御したい場合、少しコードを書いてあげる必要があります。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- tbl : table -->
	<g id='tbl'>
		<g stroke='none'>
			<rect x='20' y='20' width='360' height='60' fill='white' />
			<rect x='20' y='20' width='360' height='20' fill='skyblue' />
			<rect x='190' y='40' width='90' height='40' fill='lightpink' />
		</g>
	</g>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 20.0,40.0 380.0,40.0' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 20.0,60.0 380.0,60.0' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='0.5' stroke-dasharray='2 1 ' points=' 70.0,20.0 70.0,80.0' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='0.5' stroke-dasharray='2 1 ' points=' 150.0,20.0 150.0,80.0' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='0.5' stroke-dasharray='2 1 ' points=' 190.0,20.0 190.0,80.0' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='0.5' stroke-dasharray='2 1 ' points=' 210.0,20.0 210.0,80.0' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='0.5' stroke-dasharray='2 1 ' points=' 240.0,20.0 240.0,80.0' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='0.5' stroke-dasharray='2 1 ' points=' 280.0,20.0 280.0,80.0' />
	<!-- rectangle -->
	<rect x='20' y='20' width='360' height='60' fill='none' stroke='black' stroke-width='2' />

</svg>
</div>

<p class='fig_title'><a name='eSvvXxmJwyH'></a>Figure.4-40 テーブルの罫線を描き分けるサンプル</p>
<p>　上記サンプルのコードは以下の通りです。<a class='autolink' href='#hqebcMypbfk'>table マクロ</a>では <code>:stroke :none</code> によって罫線なしにしておき、その後 <a class='autolink' href='#8n9SABCEJKZ'>with-table-range マクロ</a>を複数回使って罫線を個別に描画しています。</p>
<pre class='code'>
(diagram (400 100)
  (grid)
  (table canvas.cc '(20 20 20) '(50 80 40 20 30 40 100) <span class='keyword3'>:id</span> <span class='keyword3'>:tbl</span>
         <span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span>
         <span class='keyword3'>:fills</span> '(<span class='keyword3'>:rc</span> <span class='keyword3'>:white</span> <span class='keyword3'>:r0</span> <span class='keyword3'>:skyblue</span> <span class='keyword3'>:r1-2c3-5</span> <span class='keyword3'>:lightpink</span>))
  (mapcar (<span class='keyword1'>lambda</span> (rng)
            (with-table-range (<span class='keyword3'>:tbl</span> rng)
              (line (list canvas.tl canvas.tr) <span class='keyword3'>:stroke</span> 1)))
          '(<span class='keyword3'>:r1</span> <span class='keyword3'>:r2</span>))
  (mapcar (<span class='keyword1'>lambda</span> (rng)
            (with-table-range (<span class='keyword3'>:tbl</span> rng)
              (line (list canvas.tl canvas.bl)
                    <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:width</span> 0.5 <span class='keyword3'>:dasharray</span> (2 1)))))
          '(<span class='keyword3'>:c1</span> <span class='keyword3'>:c2</span> <span class='keyword3'>:c3</span> <span class='keyword3'>:c4</span> <span class='keyword3'>:c5</span> <span class='keyword3'>:c6</span>))
  (with-table-range (<span class='keyword3'>:tbl</span> <span class='keyword3'>:rc</span>)
    (rect canvas.cc canvas.width canvas.height <span class='keyword3'>:stroke</span> 2)))
</pre>
<p>　　</p>
<h2><a name='gz7soCOOkJW'></a>5 その他の図形要素</h2>
<p>　ほしい図形要素がなければ、手間はかかりますが<a class='autolink' href='#4qgt62QVDZl'>パス</a>を使って実現できるかもしれません。図面の中に写真などのラスタ画像を含めることもできます。あるいは、kaavio がサポートしていない SVG の機能を利用したければ生の SVG コードを挿入することもできます<sup><a name='footnote_ref6' href='#footnote6'>6</a></sup>。</p>
<h3><a name='4qgt62QVDZl'></a>5.1 パス</h3>
<p>　<a class='autolink' href='#akKCr0fEV12'>path マクロ</a>によって<a class='autolink' href='#fv4OUML78x4'>直線</a>や曲線からなる複雑な図形を描画できます。<a class='autolink' href='#dyrXpT32Rg1'>polygon マクロ</a>は<a class='autolink' href='#fv4OUML78x4'>直線</a>からなる<a class='autolink' href='#5vGRm9AMypB'>多角形</a>でしたが、<a class='autolink' href='#4qgt62QVDZl'>パス</a>では複雑な曲線を含む図形を描画できます。ただ、その分構文も複雑です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='rosybrown' stroke='black' stroke-width='1' d='M 120 50 A 30 30 0 1 1 150 80 L 150 50 Z' />

</svg>
</div>

<p class='fig_title'><a name='1wjNTIzAXUb'></a>Figure.5-1 パスのサンプル</p>
<p>　上記サンプルのソースは以下の通りです。パラメータの詳細については <a class='autolink' href='#akKCr0fEV12'>path マクロ</a>を参照してください。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (path '((<span class='keyword3'>:move-to</span> (120 50))
          (<span class='keyword3'>:arc-to</span> 30 30 0 1 1 (150 80))
          (<span class='keyword3'>:line-to</span> (150 50)) <span class='keyword3'>:close-path</span>) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:rosybrown</span>))
</pre>
<p>　　</p>
<p>　ここでは、 <code>(path data...)</code> とした場合の <code>data</code> パラメータについて説明します。これは以下のような <strong>ディレクティブ</strong> キーワードを要素とするリストで指定します。点や値の指定を伴うディレクティブは、それ自体をリストにする必要があります。</p>
<p class='tbl_title'><a name='f7wEYjGUqWE'></a>Table.5-1 path の data で使用できるディレクティブ</p>
<table align='center'>
<tr style="font-size: 14;"><th>ディレクティブ</th><th>説明</th></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>:move-to</code></td><td align='left'>指定した点に（線を描くことなく）移動します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>:line-to</code></td><td align='left'>現在の点から指定した点に向かって（線を描きながら）移動します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>:h-line-to</code></td><td align='left'>現在の点から指定した x 座標に向かって水平線を描きながら移動します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>:v-line-to</code></td><td align='left'>現在の点から指定した y 座標に向かって垂<a class='autolink' href='#fv4OUML78x4'>直線</a>を描きながら移動します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>:arc-to</code></td><td align='left'>現在の点から指定した点に向かって<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>弧を描きながら移動します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>:2d-curve-to</code></td><td align='left'>現在の点から指定した点に向かって<a class='autolink' href='#iTkYd8KXLYO'>二次ベジェ曲線</a>を描きながら移動します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>:3d-curve-to</code></td><td align='left'>現在の点から指定した点に向かって<a class='autolink' href='#8PFAoBpi4A9'>三次ベジェ曲線</a>を描きながら移動します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>:absolute</code></td><td align='left'>後続のディレクティブを、現在の<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>に対する絶対座標として処理します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>:relative</code></td><td align='left'>後続のディレクティブを、現在の点に対する相対座標として処理します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>:close-path</code></td><td align='left'><a class='autolink' href='#4qgt62QVDZl'>パス</a>を閉じます。すなわち、現在の点から先頭の点までを結ぶ<a class='autolink' href='#fv4OUML78x4'>直線</a>を引きます。</td></tr>
</table>
<p>　　</p>
<p>　多くの場合、開始点に移動してから<a class='autolink' href='#fv4OUML78x4'>直線</a>や曲線を描いて、最後には開始点に戻ることで図形を描くことになります。たとえば、正方形を描く場合の data パラメータは以下のようなリストになるでしょう。</p>
<pre class='code'>
  '((<span class='keyword3'>:move-to</span> ( 50  50))
    (<span class='keyword3'>:line-to</span> (100  50))
    (<span class='keyword3'>:line-to</span> (100 100))
    (<span class='keyword3'>:line-to</span> ( 50 100)) <span class='keyword3'>:close-path</span>)
</pre>
<p>　以下に、各ディレクティブの詳細について説明します。</p>
<h4><a name='g0Dr3NCI4V0'></a>5.1.1 :move-to ディレクティブ</h4>
<p>　<code>(:move-to pt)</code> という記述により、線を描くことなく指定した点 pt に移動します。また、 <code>(:move-to pt1 pt2 pt3 ...)</code> のように複数の点を記述することができ、これは <code>(:move-to pt1) (:line-to pt2 pt3 ...)</code> と等価になります。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='rosybrown' stroke='black' stroke-width='1' d='M 200 10 L 230 50 L 170 50 L 200 10' />
	<!-- textbox -->
	<g text-anchor='start' font-family='Courier New' font-size='12pt' fill='black' >
		<text x='60.800003' y='79' >(:move-to (200 10) (230 50)</text>
		<text x='60.800003' y='93' xml:space='preserve' >          (170 50) (200 10))</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='b5nHW1IvOL5'></a>Figure.5-2 :move-to ディレクティブのサンプル</p>
<p>　なお、<a class='autolink' href='#g0Dr3NCI4V0'>:move-to</a> で指定する点は <a class='autolink' href='#dakC66hrAaS'>:absolute</a> および <a class='autolink' href='#9DKrZhbLEFX'>:relative</a> の影響を受けます。</p>
<h4><a name='cUdEKyCDebd'></a>5.1.2 :line-to ディレクティブ</h4>
<p>　<code>(:line-to pt)</code> という記述により、現在の点から<a class='autolink' href='#fv4OUML78x4'>直線</a>を描きながら指定した点 pt に移動します。<code>(:line-to pt1 pt2 pt3 ...)</code> のように複数の点を記述することができます。これは現在の点から順番に<a class='autolink' href='#fv4OUML78x4'>直線</a>を描きながら移動します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='rosybrown' stroke='black' stroke-width='1' d='M 200 10 L 230 50 L 170 50 L 200 10' />
	<!-- textbox -->
	<g text-anchor='start' font-family='Courier New' font-size='12pt' fill='black' >
		<text x='25.700012' y='79' >(:move-to (200 10))</text>
		<text x='25.700012' y='93' >(:line-to (230 50) (170 50) (200 10))</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='i7V67Cjuavz'></a>Figure.5-3 :line-to ディレクティブのサンプル</p>
<p>　なお、<a class='autolink' href='#cUdEKyCDebd'>:line-to</a> で指定する点は <a class='autolink' href='#dakC66hrAaS'>:absolute</a> および <a class='autolink' href='#9DKrZhbLEFX'>:relative</a> の影響を受けます。</p>
<h4><a name='4Dfw1F7JwVj'></a>5.1.3 :h-line-to ディレクティブ</h4>
<p>　<code>(:h-line-to x)</code> という記述により、現在の点から指定した x 座標まで水平線を描きながら移動します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='rosybrown' stroke='black' stroke-width='1' d='M 100 10 H 200 V 50 H 100 V 10' />
	<!-- textbox -->
	<g text-anchor='start' font-family='Courier New' font-size='12pt' fill='black' >
		<text x='60' y='78' >(:move-to (100 10))</text>
		<text x='60' y='92' >(:h-line-to 200)</text>
		<text x='60' y='106' xml:space='preserve' >(:v-line-to  50)</text>
		<text x='60' y='120' >(:h-line-to 100)</text>
		<text x='60' y='134' xml:space='preserve' >(:v-line-to  10)</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='hJ1SRWaSqTh'></a>Figure.5-4 :h-line-to ディレクティブのサンプル</p>
<p>　なお、<a class='autolink' href='#4Dfw1F7JwVj'>:h-line-to</a> で指定する点は <a class='autolink' href='#dakC66hrAaS'>:absolute</a> および <a class='autolink' href='#9DKrZhbLEFX'>:relative</a> の影響を受けます。</p>
<h4><a name='1B0JCoNzfxs'></a>5.1.4 :v-line-to ディレクティブ</h4>
<p>　<code>(:v-line-to y)</code> という記述により、現在の点から指定した y 座標まで垂<a class='autolink' href='#fv4OUML78x4'>直線</a>を描きながら移動します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='rosybrown' stroke='black' stroke-width='1' d='M 100 10 H 200 V 50 H 100 V 10' />
	<!-- textbox -->
	<g text-anchor='start' font-family='Courier New' font-size='12pt' fill='black' >
		<text x='60' y='78' >(:move-to (100 10))</text>
		<text x='60' y='92' >(:h-line-to 200)</text>
		<text x='60' y='106' xml:space='preserve' >(:v-line-to  50)</text>
		<text x='60' y='120' >(:h-line-to 100)</text>
		<text x='60' y='134' xml:space='preserve' >(:v-line-to  10)</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='aSaBFWoqy84'></a>Figure.5-5 :v-line-to ディレクティブのサンプル</p>
<p>　なお、 <a class='autolink' href='#1B0JCoNzfxs'>:v-line-to</a> で指定する点は <a class='autolink' href='#dakC66hrAaS'>:absolute</a> および <a class='autolink' href='#9DKrZhbLEFX'>:relative</a> の影響を受けます。</p>
<h4><a name='7RszlFbOHcp'></a>5.1.5 :arc-to ディレクティブ</h4>
<p>　<a class='autolink' href='#7RszlFbOHcp'>:arc-to</a> ディレクティブにより、現在の点から<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>弧を描きながら指定した点 pt に移動します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='130'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='none' stroke='black' stroke-width='2' d='M 100 50 A 30 30 0 0 1 200 80' />
	<!-- circle -->
	<circle cx='100' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='200' cy='80' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- textbox -->
	<g text-anchor='start' font-family='Courier New' font-size='12pt' fill='black' >
		<text x='3.0000076' y='109' >(:move-to (100 50))</text>
		<text x='3.0000076' y='123' >(:arc-to 30 30 0 0 1 (200 80))</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='0iNBCVKyFlO'></a>Figure.5-6 :arc-to ディレクティブのサンプル</p>
<p>　<a class='autolink' href='#7RszlFbOHcp'>:arc-to</a> は<a class='autolink' href='#cp2F91gKG7W'>円弧</a>と考え方はほぼ同じですが、指定はやや複雑です。まず、パラメータ構成は以下の通りです。</p>
<pre class='code'>
(<span class='keyword3'>:arc-to</span> rx ry x-axis-rotation large-arc-flag sweep-flag pt)
</pre>
<p>　<code>rx, ry, x-axis-rotation</code> は<a class='autolink' href='#cp2F91gKG7W'>円弧</a>での指定と同じもので、ベースとなる<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の x 半径、y 半径、および x 軸に対する<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の<a class='autolink' href='#heEi5Lc5BX9'>回転</a>角です。<a class='autolink' href='#7RszlFbOHcp'>:arc-to</a> では、この 3 つの値で決まる<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の一部を使って、「現在の点から点 <code>pt</code> に至る曲線」を描画します。</p>
<p>　以下のように、そのような<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>を使って 2 点を通る<a class='autolink' href='#cp2F91gKG7W'>円弧</a>は 4 種類描けることがわかります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='140'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='none' stroke='lightgray' stroke-width='2' d='M 150 50 A 80 40 10 1 1 250 90' />
	<!-- path -->
	<path fill='none' stroke='lightgray' stroke-width='2' d='M 150 50 A 80 40 10 0 1 250 90' />
	<!-- path -->
	<path fill='none' stroke='lightgray' stroke-width='2' d='M 150 50 A 80 40 10 1 0 250 90' />
	<!-- path -->
	<path fill='none' stroke='lightgray' stroke-width='2' d='M 150 50 A 80 40 10 0 0 250 90' />
	<!-- circle -->
	<circle cx='150' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='250' cy='90' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='140' y='45' text-anchor='end' font-size='12pt' fill='red' >pt1</text>
	<!-- text -->
	<text x='260' y='105' text-anchor='start' font-size='12pt' fill='red' >pt2</text>

</svg>
</div>

<p class='fig_title'><a name='aNyY2PIidIC'></a>Figure.5-7 :arc-to における rx, ry, x-axis-rotation</p>
<p>　この 4 種類の<a class='autolink' href='#cp2F91gKG7W'>円弧</a>のうち、どれを使うのかを指定するのが <code>large-arc-flag</code> と <code>sweep-flag</code> です。いずれも 0 または 1 を指定するもので、 <code>large-arc-flag</code> は「1 ならば大きい方の<a class='autolink' href='#cp2F91gKG7W'>円弧</a>、0 ならば小さい方の<a class='autolink' href='#cp2F91gKG7W'>円弧</a>」を使うという意味で、 <code>sweep-flag</code> は「1 ならば時計回り、0 ならば反時計回り」です。このイメージを以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='510' height='220'>
	
	<!-- back : group-definition -->
	<defs>
		<g id='back'>
			<!-- ellipse -->
			<ellipse cx='110' cy='30' rx='50' ry='20' fill='none' stroke='lightgray' stroke-width='2' />
			<!-- ellipse -->
			<ellipse cx='60' cy='50' rx='50' ry='20' fill='none' stroke='lightgray' stroke-width='2' />
			<!-- circle -->
			<circle cx='60' cy='30' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='110' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
			
		</g>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- use -->
	<use xlink:href='#back' x='10' y='10' />
	<!-- path -->
	<path fill='none' stroke='red' stroke-width='3' stroke-opacity='0.4' d='M 70 40 A 50 20 0 0 1 120 60' />
	<!-- text -->
	<text x='125' y='75' text-anchor='start' font-size='10pt' fill='black' >large-arc-flag : 0</text>
	<!-- text -->
	<text x='125' y='90' text-anchor='start' font-size='10pt' fill='black' >sweep-flag : 1</text>
	<!-- use -->
	<use xlink:href='#back' x='260' y='10' />
	<!-- path -->
	<path fill='none' stroke='red' stroke-width='3' stroke-opacity='0.4' d='M 320 40 A 50 20 0 0 0 370 60' />
	<!-- text -->
	<text x='375' y='75' text-anchor='start' font-size='10pt' fill='black' >large-arc-flag : 0</text>
	<!-- text -->
	<text x='375' y='90' text-anchor='start' font-size='10pt' fill='black' >sweep-flag : 0</text>
	<!-- use -->
	<use xlink:href='#back' x='10' y='110' />
	<!-- path -->
	<path fill='none' stroke='red' stroke-width='3' stroke-opacity='0.4' d='M 70 140 A 50 20 0 1 1 120 160' />
	<!-- text -->
	<text x='125' y='175' text-anchor='start' font-size='10pt' fill='black' >large-arc-flag : 1</text>
	<!-- text -->
	<text x='125' y='190' text-anchor='start' font-size='10pt' fill='black' >sweep-flag : 1</text>
	<!-- use -->
	<use xlink:href='#back' x='260' y='110' />
	<!-- path -->
	<path fill='none' stroke='red' stroke-width='3' stroke-opacity='0.4' d='M 320 140 A 50 20 0 1 0 370 160' />
	<!-- text -->
	<text x='375' y='175' text-anchor='start' font-size='10pt' fill='black' >large-arc-flag : 1</text>
	<!-- text -->
	<text x='375' y='190' text-anchor='start' font-size='10pt' fill='black' >sweep-flag : 0</text>

</svg>
</div>

<p class='fig_title'><a name='9yTsBifBw1F'></a>Figure.5-8 :arc-to における large-arc-flag, sweep-flag</p>
<p>　<a class='autolink' href='#4qgt62QVDZl'>パス</a>における <a class='autolink' href='#7RszlFbOHcp'>:arc-to</a> は、始点と終点が決まっている状態で指定された形状の<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>を位置あわせするようなやり方なのでわかりにくいかもしれません。<a class='autolink' href='#cp2F91gKG7W'>円弧</a>のベースとなる<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の中心点や始点・終点の角度が明らかな場合は <a class='autolink' href='#7Ru23zWD1UC'>arc マクロ</a>の使用を検討してください。</p>
<h4><a name='00Vj4Quxjg3'></a>5.1.6 :2d-curve-to ディレクティブ</h4>
<p>　<a class='autolink' href='#00Vj4Quxjg3'>:2d-curve-to</a> ディレクティブにより、現在の点から<a class='autolink' href='#iTkYd8KXLYO'>二次ベジェ曲線</a>を描きながら指定した点 pt に移動します。</p>
<p>　<a class='autolink' href='#00Vj4Quxjg3'>:2d-curve-to</a> の基本形は <code>(:2d-curve-to ptC pt2)</code> です。現在の点を <code>pt1</code> とした時に、 <code>ptC</code> を制御点として <code>pt2</code> に至る<a class='autolink' href='#iTkYd8KXLYO'>二次ベジェ曲線</a>を描きます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- line -->
	<polyline fill='none' stroke='slateblue' stroke-width='2' stroke-dasharray='3 3 ' points=' 50.0,80.0 230.0,10.0' />
	<!-- line -->
	<polyline fill='none' stroke='slateblue' stroke-width='2' stroke-dasharray='3 3 ' points=' 250.0,90.0 230.0,10.0' />
	<!-- path -->
	<path fill='none' stroke='black' stroke-width='2' d='M 50 80 Q 230 10 250 90' />
	<!-- circle -->
	<circle cx='50' cy='80' r='4' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='250' cy='90' r='4' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='230' cy='10' r='4' fill='slateblue' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='45' y='75' text-anchor='end' font-size='12pt' fill='black' >pt1</text>
	<!-- text -->
	<text x='255' y='85' text-anchor='start' font-size='12pt' fill='black' >pt2</text>
	<!-- text -->
	<text x='240' y='15' text-anchor='start' font-size='12pt' fill='black' >ptC</text>

</svg>
</div>

<p class='fig_title'><a name='bqBMR0NsHfw'></a>Figure.5-9 :2d-curve-to ディレクティブのサンプル</p>
<details>
<summary>　※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (300 100)
  (grid)
  (<span class='keyword1'>let</span> ((pt1 '( 50 80))
        (pt2 '(250 90))
        (ptC '(230 10)))
    (with-options (<span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:slateblue</span> <span class='keyword3'>:width</span> 2 <span class='keyword3'>:dasharray</span> (3 3)))
      (line `(,pt1 ,ptC))
      (line `(,pt2 ,ptC)))
    (path `((<span class='keyword3'>:move-to</span> ,pt1)
            (<span class='keyword3'>:2d-curve-to</span> ,ptC ,pt2)) <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:black</span> <span class='keyword3'>:width</span> 2))
    (with-options (<span class='keyword3'>:fill</span> <span class='keyword3'>:red</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span>)
      (circle pt1 4)
      (circle pt2 4)
      (circle ptC 4 <span class='keyword3'>:fill</span> <span class='keyword3'>:slateblue</span>))
    (text (xy+ pt1 -5 -5) <span class='literal'>"pt1"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:right</span>)
    (text (xy+ pt2  5 -5) <span class='literal'>"pt2"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
    (text (xy+ ptC 10  5) <span class='literal'>"ptC"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)))
</pre>
</details>
<p>　<a class='autolink' href='#00Vj4Quxjg3'>:2d-curve-to</a> では、任意の数の点を追加することができます。つまり、 <code>(:2d-curve-to ptC pt2 pt3 pt4...)</code> という要領で、必要な制御点は自動的に計算されます。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='200'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='none' stroke='black' stroke-width='2' d='M 30 120 Q 90 50 100 120 T 200 100 T 350 140' />
	<!-- layer controls -->
	<g id='controls' display='inline'>
		<!-- line -->
		<polyline fill='none' stroke='slateblue' stroke-width='2' stroke-dasharray='3 3 ' points=' 30.0,120.0 90.0,50.0 100.0,120.0 110.0,190.0 200.0,100.0 290.0,10.0 350.0,140.0' />
		<!-- circle -->
		<circle cx='30' cy='120' r='4' fill='red' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='100' cy='120' r='4' fill='red' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='200' cy='100' r='4' fill='red' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='350' cy='140' r='4' fill='red' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='90' cy='50' r='4' fill='slateblue' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='110' cy='190' r='4' fill='slateblue' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='290' cy='10' r='4' fill='slateblue' stroke='none' stroke-width='1' />
		<!-- text -->
		<text x='27' y='115' text-anchor='end' font-size='12pt' fill='black' >pt1</text>
		<!-- text -->
		<text x='105' y='115' text-anchor='start' font-size='12pt' fill='black' >pt2</text>
		<!-- text -->
		<text x='205' y='115' text-anchor='start' font-size='12pt' fill='black' >pt3</text>
		<!-- text -->
		<text x='355' y='145' text-anchor='start' font-size='12pt' fill='black' >pt4</text>
		<!-- text -->
		<text x='95' y='45' text-anchor='start' font-size='12pt' fill='black' >ptC</text>
		<!-- text -->
		<text x='120' y='195' text-anchor='start' font-size='12pt' fill='black' >ptC&#x27;</text>
		<!-- text -->
		<text x='300' y='17' text-anchor='start' font-size='12pt' fill='black' >ptC&#x27;&#x27;</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='8mWonS8i74W'></a>Figure.5-10 :2d-curve-to ディレクティブのサンプル - 2</p>
<details>
<summary>　※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (400 200)
  (grid)
  (layer <span class='keyword3'>:controls</span>)
  (<span class='keyword1'>let</span> ((pt1  '( 30 120))
        (pt2  '(100 120))
        (pt3  '(200 100))
        (pt4  '(350 140))
        (ptC1 '( 90  50))
        (ptC2 '(110 190))
        (ptC3 '(290  10)))
    (with-options (<span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:black</span> <span class='keyword3'>:width</span> 2))
      (path `((<span class='keyword3'>:move-to</span> ,pt1) (<span class='keyword3'>:2d-curve-to</span> ,ptC1 ,pt2 ,pt3 ,pt4))))
    (with-options (<span class='keyword3'>:layer</span> <span class='keyword3'>:controls</span>)
      (line `(,pt1 ,ptC1 ,pt2 ,ptC2 ,pt3 ,ptC3 ,pt4)
            <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:slateblue</span> <span class='keyword3'>:width</span> 2 <span class='keyword3'>:dasharray</span> (3 3)))
      (with-options (<span class='keyword3'>:fill</span> <span class='keyword3'>:red</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span>)
        (mapcar (<span class='keyword1'>lambda</span> (p) (circle p 4)) `(,pt1 ,pt2 ,pt3 ,pt4))
        (mapcar (<span class='keyword1'>lambda</span> (p) (circle p 4 <span class='keyword3'>:fill</span> <span class='keyword3'>:slateblue</span>)) `(,ptC1 ,ptC2 ,ptC3)))
      (text (xy+ pt1  -3 -5) <span class='literal'>"pt1"</span>   <span class='keyword3'>:align</span> <span class='keyword3'>:right</span>)
      (text (xy+ pt2   5 -5) <span class='literal'>"pt2"</span>   <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
      (text (xy+ pt3   5 15) <span class='literal'>"pt3"</span>   <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
      (text (xy+ pt4   5  5) <span class='literal'>"pt4"</span>   <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
      (text (xy+ ptC1  5 -5) <span class='literal'>"ptC"</span>   <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
      (text (xy+ ptC2 10  5) <span class='literal'>"ptC'"</span>  <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
      (text (xy+ ptC3 10  7) <span class='literal'>"ptC''"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>))))
</pre>
</details>
<p>　上の例では追加で２つの点（pt3, pt4）を指定しており、そのために必要な制御点 ptC' と ptC'' は自動的に計算されています。具体的には、「直前の制御点を、直前の点に対して鏡映した点」が次の制御点になります。上の例であれば ptC' は ptC を pt2 に対して鏡映した点です。</p>
<h4><a name='ewUXtISm3SD'></a>5.1.7 :3d-curve-to ディレクティブ</h4>
<p>　<a class='autolink' href='#ewUXtISm3SD'>:3d-curve-to</a> ディレクティブにより、現在の点から<a class='autolink' href='#8PFAoBpi4A9'>三次ベジェ曲線</a>を描きながら指定した点 pt に移動します。</p>
<p>　<a class='autolink' href='#ewUXtISm3SD'>:3d-curve-to</a> の基本形は <code>(:3d-curve-to ptC1 ptC2 pt2)</code> です。現在の点を <code>pt1</code> とした時に、 <code>ptC1</code> および <code>ptC2</code> を制御点として <code>pt2</code> に至る<a class='autolink' href='#8PFAoBpi4A9'>三次ベジェ曲線</a>を描きます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='160'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- line -->
	<polyline fill='none' stroke='slateblue' stroke-width='2' stroke-dasharray='3 3 ' points=' 50.0,80.0 100.0,10.0' />
	<!-- line -->
	<polyline fill='none' stroke='slateblue' stroke-width='2' stroke-dasharray='3 3 ' points=' 250.0,80.0 200.0,150.0' />
	<!-- path -->
	<path fill='none' stroke='black' stroke-width='2' d='M 50 80 C 100 10 200 150 250 80' />
	<!-- circle -->
	<circle cx='50' cy='80' r='4' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='250' cy='80' r='4' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='100' cy='10' r='4' fill='slateblue' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='200' cy='150' r='4' fill='slateblue' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='45' y='75' text-anchor='end' font-size='12pt' fill='black' >pt1</text>
	<!-- text -->
	<text x='255' y='75' text-anchor='start' font-size='12pt' fill='black' >pt2</text>
	<!-- text -->
	<text x='110' y='15' text-anchor='start' font-size='12pt' fill='black' >ptC1</text>
	<!-- text -->
	<text x='210' y='155' text-anchor='start' font-size='12pt' fill='black' >ptC2</text>

</svg>
</div>

<p class='fig_title'><a name='ce2nwKyFetY'></a>Figure.5-11 :3d-curve-to ディレクティブのサンプル</p>
<details>
<summary>　※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (300 160)
  (grid)
  (<span class='keyword1'>let</span> ((pt1  '( 50  80))
        (pt2  '(250  80))
        (ptC1 '(100  10))
        (ptC2 '(200 150)))
    (with-options (<span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:slateblue</span> <span class='keyword3'>:width</span> 2 <span class='keyword3'>:dasharray</span> (3 3)))
      (line `(,pt1 ,ptC1))
      (line `(,pt2 ,ptC2)))
    (path `((<span class='keyword3'>:move-to</span> ,pt1)
            (<span class='keyword3'>:3d-curve-to</span> ,ptC1 ,ptC2 ,pt2)) <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:black</span> <span class='keyword3'>:width</span> 2))
    (with-options (<span class='keyword3'>:fill</span> <span class='keyword3'>:red</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span>)
      (circle pt1 4)
      (circle pt2 4)
      (circle ptC1 4 <span class='keyword3'>:fill</span> <span class='keyword3'>:slateblue</span>)
      (circle ptC2 4 <span class='keyword3'>:fill</span> <span class='keyword3'>:slateblue</span>))
    (text (xy+ pt1  -5 -5) <span class='literal'>"pt1"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:right</span>)
    (text (xy+ pt2   5 -5) <span class='literal'>"pt2"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
    (text (xy+ ptC1 10  5) <span class='literal'>"ptC1"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
    (text (xy+ ptC2 10  5) <span class='literal'>"ptC2"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)))
</pre>
</details>
<p>　<a class='autolink' href='#00Vj4Quxjg3'>:2d-curve-to</a> と比較すると、<a class='autolink' href='#ewUXtISm3SD'>:3d-curve-to</a> は複雑な曲線を描くことができます。<a class='autolink' href='#l10jSaJeUDk'>SVG本</a>のサンプルと同じものを以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='450' height='200'>
	
	<!-- sample1 : group-definition -->
	<defs>
		<g id='sample1'>
			<!-- path -->
			<path fill='none' stroke='black' stroke-width='2' d='M 40 70 C 10 30 140 30 110 70' />
			<!-- circle -->
			<circle cx='40' cy='70' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='110' cy='70' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='10' cy='30' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='140' cy='30' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 10.0,30.0 40.0,70.0' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 140.0,30.0 110.0,70.0' />
			
		</g>
	</defs>
	<!-- sample2 : group-definition -->
	<defs>
		<g id='sample2'>
			<!-- path -->
			<path fill='none' stroke='black' stroke-width='2' d='M 40 70 C 60 30 90 30 110 70' />
			<!-- circle -->
			<circle cx='40' cy='70' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='110' cy='70' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='60' cy='30' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='90' cy='30' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 60.0,30.0 40.0,70.0' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 90.0,30.0 110.0,70.0' />
			
		</g>
	</defs>
	<!-- sample3 : group-definition -->
	<defs>
		<g id='sample3'>
			<!-- path -->
			<path fill='none' stroke='black' stroke-width='2' d='M 40 70 C 110 30 40 30 110 70' />
			<!-- circle -->
			<circle cx='40' cy='70' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='110' cy='70' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='110' cy='30' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='40' cy='30' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 110.0,30.0 40.0,70.0' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 40.0,30.0 110.0,70.0' />
			
		</g>
	</defs>
	<!-- sample4 : group-definition -->
	<defs>
		<g id='sample4'>
			<!-- path -->
			<path fill='none' stroke='black' stroke-width='2' d='M 40 50 C 10 10 140 90 110 50' />
			<!-- circle -->
			<circle cx='40' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='110' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='10' cy='10' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='140' cy='90' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 10.0,10.0 40.0,50.0' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 140.0,90.0 110.0,50.0' />
			
		</g>
	</defs>
	<!-- sample5 : group-definition -->
	<defs>
		<g id='sample5'>
			<!-- path -->
			<path fill='none' stroke='black' stroke-width='2' d='M 40 50 C 60 10 90 90 110 50' />
			<!-- circle -->
			<circle cx='40' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='110' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='60' cy='10' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='90' cy='90' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 60.0,10.0 40.0,50.0' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 90.0,90.0 110.0,50.0' />
			
		</g>
	</defs>
	<!-- sample6 : group-definition -->
	<defs>
		<g id='sample6'>
			<!-- path -->
			<path fill='none' stroke='black' stroke-width='2' d='M 40 50 C 110 10 40 90 110 50' />
			<!-- circle -->
			<circle cx='40' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='110' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='110' cy='10' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- circle -->
			<circle cx='40' cy='90' r='3' fill='slateblue' stroke='none' stroke-width='1' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 110.0,10.0 40.0,50.0' />
			<!-- line -->
			<polyline fill='none' stroke='slateblue' stroke-width='1' points=' 40.0,90.0 110.0,50.0' />
			
		</g>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- use -->
	<use xlink:href='#sample1' x='0' y='0' />
	<!-- use -->
	<use xlink:href='#sample2' x='150' y='0' />
	<!-- use -->
	<use xlink:href='#sample3' x='300' y='0' />
	<!-- use -->
	<use xlink:href='#sample4' x='0' y='100' />
	<!-- use -->
	<use xlink:href='#sample5' x='150' y='100' />
	<!-- use -->
	<use xlink:href='#sample6' x='300' y='100' />

</svg>
</div>

<p class='fig_title'><a name='4LyqhFSeu8o'></a>Figure.5-12 :3d-curve-to ディレクティブのサンプル -2</p>
<details>
<summary>　※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (450 200)
  (grid)
  (<span class='keyword1'>labels</span> ((defgrp-impl (id p1 p2 c1 c2)
             (defgroup (150 100 id)
               (path `((<span class='keyword3'>:move-to</span> ,p1)
                       (<span class='keyword3'>:3d-curve-to</span> ,c1 ,c2 ,p2))
                     <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:black</span> <span class='keyword3'>:width</span> 2))
               (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:red</span>)
                 (circle p1 3)
                 (circle p2 3)
                 (circle c1 3 <span class='keyword3'>:fill</span> <span class='keyword3'>:slateblue</span>)
                 (circle c2 3 <span class='keyword3'>:fill</span> <span class='keyword3'>:slateblue</span>))
               (line `(,c1 ,p1) <span class='keyword3'>:stroke</span> <span class='keyword3'>:slateblue</span>)
               (line `(,c2 ,p2) <span class='keyword3'>:stroke</span> <span class='keyword3'>:slateblue</span>))))
    (defgrp-impl <span class='keyword3'>:sample1</span> '( 40 70) '(110 70) '( 10  30) '(140 30))
    (defgrp-impl <span class='keyword3'>:sample2</span> '( 40 70) '(110 70) '( 60  30) '( 90 30))
    (defgrp-impl <span class='keyword3'>:sample3</span> '( 40 70) '(110 70) '(110  30) '( 40 30))
    (defgrp-impl <span class='keyword3'>:sample4</span> '( 40 50) '(110 50) '( 10  10) '(140 90))
    (defgrp-impl <span class='keyword3'>:sample5</span> '( 40 50) '(110 50) '( 60  10) '( 90 90))
    (defgrp-impl <span class='keyword3'>:sample6</span> '( 40 50) '(110 50) '(110  10) '( 40 90))
    (use <span class='keyword3'>:sample1</span> '( 75  50))
    (use <span class='keyword3'>:sample2</span> '(225  50))
    (use <span class='keyword3'>:sample3</span> '(375  50))
    (use <span class='keyword3'>:sample4</span> '( 75 150))
    (use <span class='keyword3'>:sample5</span> '(225 150))
    (use <span class='keyword3'>:sample6</span> '(375 150))))
</pre>
</details>
<p>　<a class='autolink' href='#ewUXtISm3SD'>:3d-curve-to</a> では、任意の数の制御点と移動先の組みを追加することができます。つまり、 <code>(:3d-curve-to ptC1 ptC2 pt2 ptC3 pt3 ptC4 pt4...)</code> という要領で、必要な制御点は自動的に計算されます。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='250' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='none' stroke='black' stroke-width='2' d='M 10 90 C 40 20 80 40 100 90 S 200 20 230 70' />
	<!-- layer controls -->
	<g id='controls' display='inline'>
		<!-- line -->
		<polyline fill='none' stroke='slateblue' stroke-width='2' stroke-dasharray='3 3 ' points=' 10.0,90.0 40.0,20.0' />
		<!-- line -->
		<polyline fill='none' stroke='slateblue' stroke-width='2' stroke-dasharray='3 3 ' points=' 80.0,40.0 120.0,140.0' />
		<!-- line -->
		<polyline fill='none' stroke='slateblue' stroke-width='2' stroke-dasharray='3 3 ' points=' 230.0,70.0 200.0,20.0' />
		<!-- circle -->
		<circle cx='10' cy='90' r='4' fill='red' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='100' cy='90' r='4' fill='red' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='230' cy='70' r='4' fill='red' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='40' cy='20' r='4' fill='slateblue' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='80' cy='40' r='4' fill='slateblue' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='120' cy='140' r='4' fill='slateblue' stroke='none' stroke-width='1' />
		<!-- circle -->
		<circle cx='200' cy='20' r='4' fill='slateblue' stroke='none' stroke-width='1' />
		<!-- text -->
		<text x='5' y='105' text-anchor='start' font-size='10pt' fill='black' >pt1</text>
		<!-- text -->
		<text x='105' y='85' text-anchor='start' font-size='10pt' fill='black' >pt2</text>
		<!-- text -->
		<text x='225' y='85' text-anchor='start' font-size='10pt' fill='black' >pt3</text>
		<!-- text -->
		<text x='45' y='15' text-anchor='start' font-size='10pt' fill='black' >ptC1</text>
		<!-- text -->
		<text x='90' y='45' text-anchor='start' font-size='10pt' fill='black' >ptC2</text>
		<!-- text -->
		<text x='130' y='145' text-anchor='start' font-size='10pt' fill='black' >ptC2&#x27;</text>
		<!-- text -->
		<text x='210' y='27' text-anchor='start' font-size='10pt' fill='black' >ptC3</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='lPPONTNSIlV'></a>Figure.5-13 :3d-curve-to ディレクティブのサンプル - 3</p>
<details>
<summary>　※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (250 150)
  (grid)
  (layer <span class='keyword3'>:controls</span> <span class='comment'>#|:none|#</span>)
  (<span class='keyword1'>let</span> ((pt1   '( 10  90))
        (pt2   '(100  90))
        (pt3   '(230  70))
        (ptC1  '( 40  20))
        (ptC2  '( 80  40))
        (ptC2d '(120 140))
        (ptC3  '(200  20)))
    (path `((<span class='keyword3'>:move-to</span> ,pt1)
            (<span class='keyword3'>:3d-curve-to</span> ,ptC1 ,ptC2 ,pt2 ,ptC3 ,pt3))
          <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:black</span> <span class='keyword3'>:width</span> 2))
    (with-options (<span class='keyword3'>:layer</span> <span class='keyword3'>:controls</span>)
      (with-options (<span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:slateblue</span> <span class='keyword3'>:width</span> 2 <span class='keyword3'>:dasharray</span> (3 3)))
        (line `(,pt1  ,ptC1))
        (line `(,ptC2 ,ptC2d))
        (line `(,pt3  ,ptC3)))
      (with-options (<span class='keyword3'>:fill</span> <span class='keyword3'>:red</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span>)
        (mapcar (<span class='keyword1'>lambda</span> (p) (circle p 4)) `(,pt1 ,pt2 ,pt3))
        (mapcar (<span class='keyword1'>lambda</span> (p) (circle p 4 <span class='keyword3'>:fill</span> <span class='keyword3'>:slateblue</span>))
                `(,ptC1 ,ptC2 ,ptC2d ,ptC3)))
      (with-options (<span class='keyword3'>:font</span> 10)
        (text (xy+ pt1   -5 15) <span class='literal'>"pt1"</span>   <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
        (text (xy+ pt2    5 -5) <span class='literal'>"pt2"</span>   <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
        (text (xy+ pt3   -5 15) <span class='literal'>"pt3"</span>   <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
        (text (xy+ ptC1   5 -5) <span class='literal'>"ptC1"</span>  <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
        (text (xy+ ptC2  10  5) <span class='literal'>"ptC2"</span>  <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
        (text (xy+ ptC2d 10  5) <span class='literal'>"ptC2'"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
        (text (xy+ ptC3  10  7) <span class='literal'>"ptC3"</span>  <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)))))
</pre>
</details>
<p>　上の例では追加で制御点 ptC3 と点 pt3 を指定しており、そのために必要な制御点 pt2C' は自動的に計算されています。具体的には、「直前の制御点を、直前の点に対して鏡映した点」が次の制御点になります。上の例であれば ptC2' は ptC2 を pt2 に対して鏡映した点です。</p>
<h4><a name='dakC66hrAaS'></a>5.1.8 :absolute ディレクティブ</h4>
<p>　後続のディレクティブを、現在の<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>に対する絶対座標として処理します。以下の例では、三角形の描画を <a class='autolink' href='#dakC66hrAaS'>:absolute</a> 指定によって描画しています。同じ図形を <a class='autolink' href='#9DKrZhbLEFX'>:relative</a> で描画する <a href='#2cRykcOGGkY'>Figure.5-15</a> と比較してみてください。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='rosybrown' stroke='black' stroke-width='1' d='M 120 10 H 180 L 150 50 Z' />
	<!-- textbox -->
	<g text-anchor='start' font-family='Courier New' font-size='12pt' fill='black' >
		<text x='60' y='78' >(:move-to (120 10))</text>
		<text x='60' y='92' >:absolute</text>
		<text x='60' y='106' >(:h-line-to 180)</text>
		<text x='60' y='120' >(:line-to (150 50))</text>
		<text x='60' y='134' >:close-path</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='fh3ghDl4UuV'></a>Figure.5-14 :absolute ディレクティブのサンプル</p>
<h4><a name='9DKrZhbLEFX'></a>5.1.9 :relative ディレクティブ</h4>
<p>　後続のディレクティブを、現在の点に対する相対座標として処理します。以下の例では、三角形の描画を <a class='autolink' href='#9DKrZhbLEFX'>:relative</a> 指定によって描画しています。同じ図形を <a class='autolink' href='#dakC66hrAaS'>:absolute</a> で描画する <a href='#fh3ghDl4UuV'>Figure.5-14</a> と比較してみてください。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='rosybrown' stroke='black' stroke-width='1' d='M 120 10 h 60 l -30 40 z' />
	<!-- textbox -->
	<g text-anchor='start' font-family='Courier New' font-size='12pt' fill='black' >
		<text x='60' y='78' >(:move-to (120 10))</text>
		<text x='60' y='92' >:relative</text>
		<text x='60' y='106' >(:h-line-to 60)</text>
		<text x='60' y='120' >(:line-to (-30 40))</text>
		<text x='60' y='134' >:close-path</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='2cRykcOGGkY'></a>Figure.5-15 :relative ディレクティブのサンプル</p>
<h4><a name='eYtPrg88Qb0'></a>5.1.10 :close-path ディレクティブ</h4>
<p>　現在の点から現在のサブ<a class='autolink' href='#4qgt62QVDZl'>パス</a>（<a class='autolink' href='#g0Dr3NCI4V0'>:move-to</a> によって開始された一連の描画）の開始点まで<a class='autolink' href='#fv4OUML78x4'>直線</a>を描きながら移動します。以下の例では、１回の<a class='autolink' href='#4qgt62QVDZl'>パス</a>で 2 つの三角形を描画していますが、それぞれの三角形の最後の<a class='autolink' href='#fv4OUML78x4'>直線</a>を <a class='autolink' href='#eYtPrg88Qb0'>:close-path</a> で描画しています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- path -->
	<path fill='rosybrown' stroke='black' stroke-width='1' d='M 60 10 L 120 10 L 90 50 Z M 210 10 L 180 50 L 240 50 Z' />
	<!-- textbox -->
	<g text-anchor='start' font-family='Courier New' font-size='12pt' fill='black' >
		<text x='20' y='71' >(:move-to ( 60 10))</text>
		<text x='20' y='85' >(:line-to (120 10) ( 90 50))</text>
		<text x='20' y='99' >:close-path</text>
		<text x='20' y='113' >(:move-to (210 10))</text>
		<text x='20' y='127' >(:line-to (180 50) (240 50))</text>
		<text x='20' y='141' >:close-path</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='iPFjMa8UP1c'></a>Figure.5-16 :close-path ディレクティブのサンプル</p>
<p>　　</p>
<h3><a name='kSyxpJZzQjY'></a>5.2 画像ファイルの埋め込み</h3>
<p>　<a class='autolink' href='#8X1qKGWyF0t'>image マクロ</a>を使うことで、SVG 図面の中に他の画像を埋め込むことができます。以下の形式の画像ファイルをサポートします。</p>
<ul>
<li>PNG ( *.png )</li>
<li>JPEG ( *.jpg, *.jpeg )</li>
<li>GIF ( *.gif )</li>
<li>BMP ( *.bmp )</li>
</ul>
<p>　典型的には、<a class='autolink' href='#8X1qKGWyF0t'>image マクロ</a>の使用は以下のような記述になるでしょう。必須パラメータは、画像を配置する中心位置と画像ファイル名だけです。画像のサイズは kaavio が自分で調べるため、基本的には指定する必要がありません<sup><a name='footnote_ref7' href='#footnote7'>7</a></sup>。</p>
<pre class='code'>
(image '(400 400) <span class='literal'>"./foo.png"</span>)
</pre>
<p>　<a class='autolink' href='#8X1qKGWyF0t'>image マクロ</a>のパラメータ詳細は <a href='#8X1qKGWyF0t'>14.1.27  節</a>を参照してください。オプションのパラメータ <code>width</code> または <code>height</code> のどちらかを指定した場合、画像ファイルの縦横比（アスペクト比）を維持した状態で指定サイズで表示します。 <code>width</code> と <code>height</code> の両方を指定した場合、縦横比の維持は保証されず、指定されたサイズで表示します。</p>
<p>　　</p>
<h3><a name='cNmjD3OiTOH'></a>5.3 生の SVG コード片の挿入</h3>
<p>　<a class='autolink' href='#44CYyox6BTR'>raw-svg マクロ</a>によって、図面の中に任意の SVG コード片を挿入することができます。サンプルとしては雑ですが、以下のようにすれば、</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (raw-svg <span class='literal'>"&lt;rect x='50' y='25' width='100' height='50' fill='linen' stroke='brown' stroke-width='1' /&gt;"</span>))
</pre>
<p>　文字列として raw-svg に渡したコード片がそのまま挿入されます。パラメータの詳細については <a class='autolink' href='#44CYyox6BTR'>raw-svg マクロ</a>を参照してください。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- raw-svg -->
	<rect x='50' y='25' width='100' height='50' fill='linen' stroke='brown' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='f0G61WmPR5j'></a>Figure.5-17 raw-svg のサンプル</p>
<p>　　</p>
<h2><a name='h1RNMQY1C0b'></a>6 座標と位置</h2>
<p>　kaavio では、座標系は左上端を原点としており、水平右方向に x 軸、垂直下方向に y 軸となっています。また、角度は時計回りになります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- circle -->
	<circle cx='0' cy='0' r='4' fill='black' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='5' y='15' text-anchor='start' font-size='12pt' fill='black' >(0, 0)</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 250.0,10.0 275.0,10.0' />
	<path fill='black' stroke='black' stroke-width='1' d='M 275 10 l -9.063078 -4.2261825 l 0.0000000000000017763568 8.452365 z' />
	<!-- text -->
	<text x='280' y='15' text-anchor='start' font-size='12pt' fill='black' >x</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 10.0,100.0 10.0,130.0' />
	<path fill='black' stroke='black' stroke-width='1' d='M 10 130 l 4.2261825 -9.063078 l -8.452365 0.0000000000000017763568 z' />
	<!-- text -->
	<text x='10' y='145' text-anchor='middle' font-size='12pt' fill='black' >y</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,60.0 180.0,60.0' />
	<!-- text -->
	<text x='185' y='65' text-anchor='start' font-size='12pt' fill='black' >0°</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,60.0 140.0,130.0' />
	<!-- arc -->
	<path fill='none' stroke='black' stroke-width='1' d='M 129.99543085469173 60.523572193118504 A 30 30 0 0 1 115.0 85.98076211353316' />
	<path fill='black' stroke='black' stroke-width='1' d='M 115.0 85.98076 l 9.961947 -0.8715574 l -4.2261825 -7.319963 z' />
	<!-- text -->
	<text x='130' y='85' text-anchor='start' font-size='12pt' fill='black' >θ</text>

</svg>
</div>

<p class='fig_title'><a name='bdrJmRrH79B'></a>Figure.6-1 kaavio における座標系</p>
<details>
<summary>　※上記画像のソースはこちら。</summary>
<pre class='code'>
(diagram (300 150)
  (grid)
  (circle canvas.topleft 4 <span class='keyword3'>:fill</span> <span class='keyword3'>:black</span>)
  (<span class='keyword1'>let</span> ((em (make-endmark <span class='keyword3'>:type</span> <span class='keyword3'>:triangle</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:black</span> <span class='keyword3'>:size</span> <span class='keyword3'>:small</span>)))
    (text '(5 15) <span class='literal'>"(0, 0)"</span>)
    (line '((250  10) (275  10)) <span class='keyword3'>:end2</span> em) (text '(280  15) <span class='literal'>"x"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
    (line '(( 10 100) ( 10 130)) <span class='keyword3'>:end2</span> em) (text '( 10 145) <span class='literal'>"y"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>)
    (line '((100  60) (180  60)))          (text '(185  65) <span class='literal'>"0°"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
    (line '((100  60) (140 130)))
    (arc   '(100  60) 30 30 0 1 60 <span class='keyword3'>:end2</span> em)
    (text '(130  85) <span class='literal'>"θ"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)))
</pre>
</details>
<p>　　</p>
<p>　kaavio データの中で座標を指定する方法にはいくつかあります。以下に説明します。</p>
<p>　具体的な数値で座標を指定する場合、 <code>'(50 100)</code> といった要領で指定します。これは即値で座標を指定する場合の書き方ですが、Common Lisp の変数に格納した数値から座標を作成したい場合は <a class='autolink' href='#2S1kQeXPgCc'>make-point 関数</a>が使えます。これは <code>(make-point x y)</code> の要領で使用してください<sup><a name='footnote_ref8' href='#footnote8'>8</a></sup>。</p>
<p>　具体的な数値を指定するのでなく、「すでに登場した要素の属性を利用して位置を指定する」こともできます。<a href='#9LLncE6hWlx'>2  章</a>の 2 つめのサンプルでは、 <code>app.center</code> や <code>in.right</code> という表記が登場しました。これは、図形要素を記述する際に指定した ID を使ってその中心座標などを参照するものです。幅や高さを持つ図形要素では９種類あり、その名前と具体的な場所は以下の通りです<sup><a name='footnote_ref9' href='#footnote9'>9</a></sup>。図では <code>topleft(tl)</code> などの記載がありますが、括弧内の <code>tl</code> は簡略記法で、 <code>foo.topleft</code> を <code>foo.tl</code> と書くこともできることを意味しています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='420' height='170'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rct : rectangle -->
	<rect id='rct' x='130' y='25' width='160' height='120' fill='white' stroke='gray' stroke-width='1' />
	<!-- circle -->
	<circle cx='130' cy='25' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='127' y='19' text-anchor='end' font-size='12pt' fill='red' >topleft(tl)</text>
	<!-- circle -->
	<circle cx='210' cy='25' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='210' y='19' text-anchor='middle' font-size='12pt' fill='red' >top(tc)</text>
	<!-- circle -->
	<circle cx='290' cy='25' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='293' y='19' text-anchor='start' font-size='12pt' fill='red' >topright(tr)</text>
	<!-- circle -->
	<circle cx='130' cy='85' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='122' y='90' text-anchor='end' font-size='12pt' fill='red' >left(cl)</text>
	<!-- circle -->
	<circle cx='210' cy='85' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='210' y='79' text-anchor='middle' font-size='12pt' fill='red' >center(cc)</text>
	<!-- circle -->
	<circle cx='290' cy='85' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='298' y='90' text-anchor='start' font-size='12pt' fill='red' >right(cr)</text>
	<!-- circle -->
	<circle cx='130' cy='145' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='127' y='161' text-anchor='end' font-size='12pt' fill='red' >bottomleft(bl)</text>
	<!-- circle -->
	<circle cx='210' cy='145' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='210' y='161' text-anchor='middle' font-size='12pt' fill='red' >bottom(bc)</text>
	<!-- circle -->
	<circle cx='290' cy='145' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='293' y='161' text-anchor='start' font-size='12pt' fill='red' >bottomright(br)</text>

</svg>
</div>

<p class='fig_title'><a name='7mETQwj0yso'></a>Figure.6-2 図形要素の座標参照 - 1</p>
<p>　　</p>
<p>　さらに、<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>の <code>:style</code> パラメータ指定で使う <code>L1</code> や <code>T3</code> といった記法も使用できます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='420' height='170'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rct : rectangle -->
	<rect id='rct' x='130' y='25' width='160' height='120' fill='white' stroke='gray' stroke-width='1' />
	<!-- circle -->
	<circle cx='170' cy='25' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='168.5' y='19' text-anchor='middle' font-size='12pt' fill='red' >T1</text>
	<!-- circle -->
	<circle cx='210' cy='25' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='210' y='19' text-anchor='middle' font-size='12pt' fill='red' >T2</text>
	<!-- circle -->
	<circle cx='250' cy='25' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='251.5' y='19' text-anchor='middle' font-size='12pt' fill='red' >T3</text>
	<!-- circle -->
	<circle cx='170' cy='145' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='168.5' y='161' text-anchor='middle' font-size='12pt' fill='red' >B1</text>
	<!-- circle -->
	<circle cx='210' cy='145' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='210' y='161' text-anchor='middle' font-size='12pt' fill='red' >B2</text>
	<!-- circle -->
	<circle cx='250' cy='145' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='251.5' y='161' text-anchor='middle' font-size='12pt' fill='red' >B3</text>
	<!-- circle -->
	<circle cx='130' cy='55' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='124' y='60.5' text-anchor='end' font-size='12pt' fill='red' >L1</text>
	<!-- circle -->
	<circle cx='130' cy='85' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='124' y='92' text-anchor='end' font-size='12pt' fill='red' >L2</text>
	<!-- circle -->
	<circle cx='130' cy='115' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='124' y='123.5' text-anchor='end' font-size='12pt' fill='red' >L3</text>
	<!-- circle -->
	<circle cx='290' cy='55' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='296' y='60.5' text-anchor='start' font-size='12pt' fill='red' >R1</text>
	<!-- circle -->
	<circle cx='290' cy='85' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='296' y='92' text-anchor='start' font-size='12pt' fill='red' >R2</text>
	<!-- circle -->
	<circle cx='290' cy='115' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='296' y='123.5' text-anchor='start' font-size='12pt' fill='red' >R3</text>

</svg>
</div>

<p class='fig_title'><a name='1YSNZvyxqVa'></a>Figure.6-3 図形要素の座標参照 - 2</p>
<p>　　</p>
<p>　上記の記法は全て座標値を返しますが、これらにさらに <code>.x</code> や <code>.y</code> をつけて x 軸や y 軸の座標値を取得することができます。これを利用すると、 <code>(rect (make-point obj1.cc.x obj2.cc.y) ...)</code>　などの記述によって「縦方向を obj1 にあわせ、横方向を obj2 にあわせる」といったことができます。</p>
<p>　このようにして指定する座標を使う局面としてもっとも一般的なのは図形要素の位置指定です。たとえば<a class='autolink' href='#kJonRG8GtHF'>四角形</a> rect などは <code>position</code> パラメータで座標値を取ります。これは通常「その図形要素の中心点」として使用されますが、 <code>pivot</code> パラメータがある場合はこれを中心点以外で使用することができます。<code>pivot</code> に指定できるのは <code>:TL :TC :TR :CL :CC :CR :BL :BC :BR</code> のいずれかで、デフォルト値は <code>:CC</code> です。この指定により、 <code>position</code> で指定した座標が図形要素のどこに来るように描画されるかを制御できます。以下の例では、<a class='autolink' href='#kJonRG8GtHF'>四角形</a> <code>rct</code> に対して <code>(diamond rct.cr 60 40 :pivot :CL)</code> とすることで「<a class='autolink' href='#4dFMjynUMYw'>ひし形</a>の左端が<a class='autolink' href='#kJonRG8GtHF'>四角形</a>の右端にくるように位置指定」しています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rct : rectangle -->
	<rect id='rct' x='45' y='25' width='50' height='50' fill='none' stroke='black' stroke-width='1' />
	<!-- diamond -->
	<polygon fill='none' stroke='black' stroke-width='1' points='125.0,30.0 95.0,50.0 125.0,70.0 155.0,50.0 125.0,30.0' />
	<!-- circle -->
	<circle cx='95' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='a8bQ0cphetD'></a>Figure.6-4 pivot パラメータの利用例</p>
<p>　<a class='autolink' href='#fv4OUML78x4'>直線</a>や<a class='autolink' href='#cp2F91gKG7W'>円弧</a>、<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>、および<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>では、 <code>center</code> および線の端点として <code>end1, end2</code> が利用できます。以下のように、この場合の <code>center</code> は線の総延長のちょうど半分にあたる位置になります（<a class='autolink' href='#cp2F91gKG7W'>円弧</a>の場合はベースとなる<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の中心です）。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='110'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- line : line -->
	<polyline id='line' fill='none' stroke='black' stroke-width='1' points=' 50.0,40.0 100.0,40.0 100.0,80.0 250.0,80.0' />
	<!-- circle -->
	<circle cx='50' cy='40' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='130.0' cy='80.0' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='250' cy='80' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- text -->
	<text x='50' y='30' text-anchor='middle' font-size='12pt' fill='red' >end1</text>
	<!-- text -->
	<text x='130.0' y='70.0' text-anchor='start' font-size='12pt' fill='red' >center(cc)</text>
	<!-- text -->
	<text x='250' y='70' text-anchor='middle' font-size='12pt' fill='red' >end2</text>

</svg>
</div>

<p class='fig_title'><a name='3ye7tm07fAs'></a>Figure.6-5 図形要素の座標参照 - 3</p>
<p>　　</p>
<p>　前述の <code>app.center</code> という記法は、座標を指定すべきところではたいてい使用できますが、これを <code>(attr :app :center)</code> という記法で代替することもできます<sup><a name='footnote_ref10' href='#footnote10'>10</a></sup>。</p>
<p>　<code>app.center</code> の記法において要素名のところに <code>canvas</code> を指定することで、<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>全体をひとつの図形要素のように扱うことができます。つまり、 <code>canvas.cc</code> とすれば SVG 画像の中心点を指定できますし、 <code>canvas.width</code> と言えば SVG 画像の幅を取得することができます。実際には、この <code>canvas</code> が意味するのは「現在の<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>」なのですが、これについては「<a href='#kgs1vf3AbTN'>7  サブキャンバス</a>」で説明します。</p>
<ul>
<li><span style='background:red;color:white;'>ToDo : このあたりで相対座標と絶対座標について触れる：詳細はサブキャンバスの説明で、かな。</span></li>
</ul>
<p>　<code>app.cc</code> などの記述は単独で使用するよりも、「app の中心から 100pt くらい右」といった指定をしたい場合の方が多いでしょう。そのような場合、 <code>(x+ app.cc 100)</code> といった記述で目的を達することができます。以下の 3 つの関数が利用できます。</p>
<pre class='code'>
(<span class='keyword1'>defun</span> <span class='keyword5'>x+</span> (pt x) ...)
(<span class='keyword1'>defun</span> <span class='keyword5'>y+</span> (pt y) ...)
(<span class='keyword1'>defun</span> <span class='keyword5'>xy+</span> (pt x y) ...)
</pre>
<p>　なお、 <code>(x- app.cc 100)</code> とは書けません。 <code>(x+ app.cc -100)</code> としてください。</p>
<p>　　</p>
<h2><a name='kgs1vf3AbTN'></a>7 サブキャンバス</h2>
<p>　<a href='#h1RNMQY1C0b'>6  章</a>では、座標指定のための ID 名として <code>canvas</code> を指定すると作成中の図全体の領域を指定できると説明しました。kaavio では、これを<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>と読んでいますが、その一部を独立した<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>として描画を行うことができます。これを<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>と呼びます。</p>
<p>　<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>を使う方法のひとつは、<a class='autolink' href='#5cY34BaMQhr'>with-subcanvas マクロ</a>を使うことです。左上の座標と幅・高さを与えることで、その部分領域の左上を原点とする新しい座標系が作成されます。以下に簡単な例を示します。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (circle '(50 50) 20 <span class='keyword3'>:stroke</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:thistle</span>)
  (with-subcanvas ('(150 40) 100 100)
    (rect canvas.center canvas.width canvas.height <span class='keyword3'>:stroke</span> <span class='keyword3'>:gray</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:none</span>)
    (circle '(50 50) 20 <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span>)))
</pre>
<p>　上記のコードを kaavio に通すと以下が生成されます。2 回登場する circle は座標と半径が同じ <code>'(50 50) 20</code> で指定されていますが、実際に描画された場所は異なっています。これは、後者の（青い方の）circle が <a class='autolink' href='#5cY34BaMQhr'>with-subcanvas マクロ</a>の配下にあるためで、この<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>の実際の領域は rect で示されています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- circle -->
	<circle cx='50' cy='50' r='20' fill='thistle' stroke='brown' stroke-width='1' />
	<!-- rectangle -->
	<rect x='150' y='40' width='100' height='100' fill='none' stroke='gray' stroke-width='1' />
	<!-- circle -->
	<circle cx='200' cy='90' r='20' fill='skyblue' stroke='navy' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='kV8JVeAiwLR'></a>Figure.7-1 サブキャンバスのサンプル</p>
<p>　<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>は入力データの一部分で独自の座標系を一時的に作成するもので、それ以外の効果はありません。たとえば、描画順序を制御する<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>とは無関係ですし、<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>の矩形で描画内容を<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>することもしません。つまり、<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>の機能自体には実質的に原点をズラす効果しかありません<sup><a name='footnote_ref11' href='#footnote11'>11</a></sup>。<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>を行ないたい場合は <a href='#8VfZIeFiMsb'>8  章</a>を参照してください。</p>
<p>　<a class='autolink' href='#5cY34BaMQhr'>with-subcanvas マクロ</a>で明示的に<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>を作成するのでなく、作成した図形要素の内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とすることもできます。これには、 <code>:contents</code> パラメータを使用します。たとえば、先程の例と同じ作図をするには以下のように書きます。この場合、先程とは違って rect の中に circle が置かれることになります（rect が動けば circle も動く）。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (circle '(50 50) 20 <span class='keyword3'>:stroke</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:thistle</span>)
  (rect '(200 90) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:gray</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:none</span>
     <span class='keyword3'>:contents</span>
     ((circle '(50 50) 20 <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span>))))
</pre>
<p class='fig_title'><a name='5maEWPLcbWX'></a>Figure.7-2 contents パラメータを使ったサブキャンバス</p>
<p>　<code>:contents</code> パラメータによる<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>は、その図形要素の幅と高さからなる<a class='autolink' href='#kJonRG8GtHF'>四角形</a>になるのが原則です。つまり、円や<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の場合は以下のように<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>の方が大きくなりますので注意してください。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='120'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- circle -->
	<circle cx='70' cy='60' r='40' fill='lightgray' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='30' y='20' width='80' height='80' fill='none' stroke='red' stroke-width='3' stroke-opacity='0.3' stroke-dasharray='10 5 ' />
	<!-- ellipse -->
	<ellipse cx='200' cy='60' rx='70' ry='40' fill='lightgray' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='130' y='20' width='140' height='80' fill='none' stroke='red' stroke-width='3' stroke-opacity='0.3' stroke-dasharray='10 5 ' />

</svg>
</div>

<p>　一部の図形要素では、<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>の位置が調整されている場合があります。たとえば、cube では以下のようになります。青い点線の枠が cube の幅と高さからなる矩形で、赤い点線の枠が<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='200'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- node : cube -->
	<g id='node'>
		<g stroke='none' >
			<polygon fill='lightgray' points='20.0,54.0 48.0,26.0 274.0,26.0 274.0,152.0 246.0,180.0 246.0,54.0' />
			<rect x='20' y='54' width='226' height='126' fill='white' />
			<path fill='none' stroke='black' stroke-width='1' d='M 20 54 L 246 54 L 246 180 L 20 180 L 20 54 L 48 26 L 274 26 L 274 152 L 246 180 M 246 54 L 274 26' />
		</g>
	</g>
	<!-- rectangle -->
	<rect x='20' y='54' width='226' height='126' fill='none' stroke='red' stroke-width='3' stroke-opacity='0.5' stroke-dasharray='10 5 ' />
	<!-- rectangle -->
	<rect x='20' y='40' width='240' height='140' fill='none' stroke='blue' stroke-width='3' stroke-opacity='0.5' stroke-dasharray='10 5 ' />

</svg>
</div>

<p>　なお、 <code>:contents</code> パラメータを使わずに図形要素の<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>を利用する方法として、<a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>が用意されています。これは既出の図形要素の ID を指定して<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>を確立するものです。<a href='#kV8JVeAiwLR'>Figure.7-1</a> と同じ（つまり <a href='#5maEWPLcbWX'>Figure.7-2</a> とも同じ）作図をするサンプルを以下に示します。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (circle '(50 50) 20 <span class='keyword3'>:stroke</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:thistle</span>)
  (rect '(200 90) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:gray</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:none</span> <span class='keyword3'>:id</span> <span class='keyword3'>:rct</span>)
  (with-subcanvas-of (<span class='keyword3'>:rct</span>)
     (circle '(50 50) 20 <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span>)))
</pre>
<p class='fig_title'><a name='04Bhkv1vkfw'></a>Figure.7-3 with-subcanvas-of を使ったサブキャンバス</p>
<p>　　</p>
<p>　最後に <a class='autolink' href='#ibXCLOBvHnZ'>with-current-canvas マクロ</a>を紹介しておきます。<a class='autolink' href='#5cY34BaMQhr'>with-subcanvas マクロ</a>と <a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>は新しい<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>を確立するものでしたが、<a class='autolink' href='#ibXCLOBvHnZ'>with-current-canvas マクロ</a>は「現在の<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>へのアクセスを簡単にする」ものです。<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>を使っていると、 <code>canvas.center, canvas.width, canvas.height</code> などを頻繁に使うことになりますが、これらに短い名前でアクセスできるようにします。たとえば、<a href='#kgs1vf3AbTN'>本節冒頭の例</a>は、以下のように書き換えることができます（１回ずつしか使ってないのでメリットがわかりにくいですが）。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (circle '(50 50) 20 <span class='keyword3'>:stroke</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:thistle</span>)
  (with-subcanvas ('(150 40) 100 100)
    (with-current-canvas ((cc center) (w width) (h height))
      (rect cc w h <span class='keyword3'>:stroke</span> <span class='keyword3'>:gray</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:none</span>)
      (circle '(50 50) 20 <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span>))))
</pre>
<p class='fig_title'><a name='fIhw6603jDc'></a>Figure.7-4 with-current-canvas の使用</p>
<p>　　</p>
<h2><a name='8VfZIeFiMsb'></a>8 クリッピング</h2>
<p>　<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>機能を使えば、図面の一部だけを切り取ったように描画することができます。<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>からはみ出す部分が描画されないようにしたり、任意の形状（<a class='autolink' href='#4qgt62QVDZl'>パス</a>）で<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>することもできます。</p>
<p>　わざとらしい例ですが、以下のような図を考えましょう。大きな矩形の四隅に、それぞれはみ出すように４つの要素が置かれています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='280' height='160'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rct : rectangle -->
	<rect id='rct' x='60' y='30' width='160' height='100' fill='beige' stroke='black' stroke-width='1' filter='url(#drop-shadow)' />
	<!-- rectangle -->
	<rect x='50' y='20' width='40' height='40' fill='lightblue' stroke='navy' stroke-width='1' />
	<!-- circle -->
	<circle cx='210' cy='40' r='25' fill='darksalmon' stroke='maroon' stroke-width='1' />
	<!-- diamond -->
	<polygon fill='lightgreen' stroke='darkgreen' stroke-width='1' points='70.0,95.0 45.0,120.0 70.0,145.0 95.0,120.0 70.0,95.0' />
	<!-- regular-polygon -->
	<polygon fill='lightgray' stroke='black' stroke-width='1' points='210.0,92.0 236.62958,111.34753 226.458,142.65248 193.542,142.65248 183.37042,111.34753' />

</svg>
</div>

<p>　上記図面のコードは以下の通りです。大きな矩形 <code>:rct</code> の<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>内で 4 つの図形要素を描画しています。</p>
<pre class='code'>
(diagram (280 160)
  (grid)
  (drop-shadow)
  (rect canvas.cc 160 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:beige</span> <span class='keyword3'>:id</span> <span class='keyword3'>:rct</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
  (with-subcanvas-of (<span class='keyword3'>:rct</span>)
    (rect            '( 10  10) 40 40 <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span>      <span class='keyword3'>:fill</span> <span class='keyword3'>:lightblue</span>)
    (circle          '(150  10) 25    <span class='keyword3'>:stroke</span> <span class='keyword3'>:maroon</span>    <span class='keyword3'>:fill</span> <span class='keyword3'>:darksalmon</span>)
    (diamond         '( 10  90) 50 50 <span class='keyword3'>:stroke</span> <span class='keyword3'>:darkgreen</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgreen</span>)
    (regular-polygon '(150  90)  5 28 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>     <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span>)))
</pre>
<p>　では、<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>機能を使用してはみ出した部分が描画されないようにしてみましょう。<a class='autolink' href='#2GafnTjbeAv'>with-clipping-current-canvas マクロ</a>を使用して、4 つの要素を描画するコードを括るだけです。以下のように。</p>
<pre class='code'>
(diagram (280 160)
  (grid)
  (drop-shadow)
  (rect canvas.cc 160 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:beige</span> <span class='keyword3'>:id</span> <span class='keyword3'>:rct</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
  (with-subcanvas-of (<span class='keyword3'>:rct</span>)
    (with-clipping-current-canvas    <span class='comment'>;; ADDED</span>
      (rect            '( 10  10) 40 40 <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span>      <span class='keyword3'>:fill</span> <span class='keyword3'>:lightblue</span>)
      (circle          '(150  10) 25    <span class='keyword3'>:stroke</span> <span class='keyword3'>:maroon</span>    <span class='keyword3'>:fill</span> <span class='keyword3'>:darksalmon</span>)
      (diamond         '( 10  90) 50 50 <span class='keyword3'>:stroke</span> <span class='keyword3'>:darkgreen</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgreen</span>)
      (regular-polygon '(150  90)  5 28 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>     <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span>))))
</pre>
<p>　結果は以下のようになります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='280' height='160'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<defs><clipPath id='CLIPPATH9'><rect x='60' y='30' width='160' height='100' fill='none' stroke='none' /></clipPath></defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rct : rectangle -->
	<rect id='rct' x='60' y='30' width='160' height='100' fill='beige' stroke='black' stroke-width='1' filter='url(#drop-shadow)' />
	<!-- rectangle -->
	<rect x='50' y='20' width='40' height='40' fill='lightblue' stroke='navy' stroke-width='1' clip-path='url(#CLIPPATH9)' />
	<!-- circle -->
	<circle cx='210' cy='40' r='25' fill='darksalmon' stroke='maroon' stroke-width='1' clip-path='url(#CLIPPATH9)' />
	<!-- diamond -->
	<polygon fill='lightgreen' stroke='darkgreen' stroke-width='1' points='70.0,95.0 45.0,120.0 70.0,145.0 95.0,120.0 70.0,95.0' clip-path='url(#CLIPPATH9)' />
	<!-- regular-polygon -->
	<polygon fill='lightgray' stroke='black' stroke-width='1' points='210.0,92.0 236.62958,111.34753 226.458,142.65248 193.542,142.65248 183.37042,111.34753' clip-path='url(#CLIPPATH9)' />

</svg>
</div>

<p class='fig_title'><a name='0wFPSSB7qFm'></a>Figure.8-1 with-clipping-current-canvas マクロの例</p>
<p>　<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>は常に矩形なので、たとえば円形の領域で上記の方法を使うと期待通りにはいきません。その場合、<a class='autolink' href='#gOfMxQSeeNJ'>with-clipping-use マクロ</a>が使えるかもしれません。以下の例では、<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>で<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>をしています。</p>
<pre class='code'>
(diagram (280 160)
  (grid)
  (drop-shadow)
  (ellipse canvas.cc 100 60 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:beige</span> <span class='keyword3'>:id</span> <span class='keyword3'>:ellipse</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
  (with-clipping-use (<span class='keyword3'>:ellipse</span>)
    (rect            '( 70  40) 40 40 <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span>      <span class='keyword3'>:fill</span> <span class='keyword3'>:lightblue</span>)
    (circle          '(210  40) 25    <span class='keyword3'>:stroke</span> <span class='keyword3'>:maroon</span>    <span class='keyword3'>:fill</span> <span class='keyword3'>:darksalmon</span>)
    (diamond         '( 70 120) 50 50 <span class='keyword3'>:stroke</span> <span class='keyword3'>:darkgreen</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgreen</span>)
    (regular-polygon '(210 120)  5 28 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>     <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span>)))
</pre>
<p>　結果は以下のようになります。<a class='autolink' href='#gOfMxQSeeNJ'>with-clipping-use マクロ</a>は<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とは無関係なので、この例では（<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>される）4 つの図形要素の位置指定がこれまでと異なることに注意してください。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='280' height='160'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<defs><clipPath id='CLIPPATH8'><use xlink:href='#ellipse' /></clipPath></defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- ellipse : ellipse -->
	<ellipse id='ellipse' cx='140' cy='80' rx='100' ry='60' fill='beige' stroke='black' stroke-width='1' filter='url(#drop-shadow)' />
	<!-- rectangle -->
	<rect x='50' y='20' width='40' height='40' fill='lightblue' stroke='navy' stroke-width='1' clip-path='url(#CLIPPATH8)' />
	<!-- circle -->
	<circle cx='210' cy='40' r='25' fill='darksalmon' stroke='maroon' stroke-width='1' clip-path='url(#CLIPPATH8)' />
	<!-- diamond -->
	<polygon fill='lightgreen' stroke='darkgreen' stroke-width='1' points='70.0,95.0 45.0,120.0 70.0,145.0 95.0,120.0 70.0,95.0' clip-path='url(#CLIPPATH8)' />
	<!-- regular-polygon -->
	<polygon fill='lightgray' stroke='black' stroke-width='1' points='210.0,92.0 236.62958,111.34753 226.458,142.65248 193.542,142.65248 183.37042,111.34753' clip-path='url(#CLIPPATH8)' />

</svg>
</div>

<p class='fig_title'><a name='cfNMG45u3Cb'></a>Figure.8-2 with-clipping-use マクロの例</p>
<p>　より複雑な<a class='autolink' href='#4qgt62QVDZl'>パス</a>で<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>を行なうことも可能です。以下では、文字を使って<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>をています。</p>
<pre class='code'>
(diagram (280 160)
  (grid)
  (text (y+ canvas.cc 60) <span class='literal'>"B"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span> <span class='keyword3'>:id</span> <span class='keyword3'>:char</span>
        <span class='keyword3'>:font</span> '(<span class='keyword3'>:family</span> <span class='literal'>"Courier New"</span> <span class='keyword3'>:size</span> 140
                <span class='keyword3'>:stroke</span> 3 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span> <span class='keyword3'>:weight</span> <span class='keyword3'>:bolder</span>))
  (with-clipping-use (<span class='keyword3'>:char</span>)
    (explosion1 (y+ canvas.cc 10) 110 110 <span class='literal'>""</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:pink</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span>)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='280' height='160'>
	
	<defs><clipPath id='CLIPPATH3'><use xlink:href='#char' /></clipPath></defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- char : text -->
	<text x='140' y='140' id='char' text-anchor='middle' font-family='Courier New' font-size='140pt' fill='lightgray' stroke='black' stroke-width='3' font-weight='bolder' >B</text>
	<!-- explosion -->
	<polygon fill='pink' stroke='red' stroke-width='1' points='87.2,46.0 109.2,73.5 86.1,77.899994 104.8,94.4 86.1,108.700005 114.7,106.5 110.3,123.0 124.600006,115.3 127.899994,143.9 138.9,110.9 153.2,135.1 157.6,108.700005 177.4,126.299995 170.79999,99.899994 193.9,102.1 174.1,88.9 192.8,76.8 169.7,72.4 178.5,58.1 156.5,62.5 158.70001,35.0 140.0,64.7 127.899994,48.2 122.4,66.9' clip-path='url(#CLIPPATH3)' />

</svg>
</div>

<p class='fig_title'><a name='9vhIn1PotpA'></a>Figure.8-3 文字を使ったクリッピングの例</p>
<h2><a name='hwRhCz9Gn9t'></a>9 定義と再使用</h2>
<p>　<a class='autolink' href='#5hmH4Z1JfiN'>defgroup マクロ</a>と <a class='autolink' href='#3ABOLb3a4Yl'>use マクロ</a>を使うことによって、複数の図形要素をひとつにまとめ、図面の中で繰り返し使用することができます。要点を明確にするために、まずは同じ図形（ちょっと装飾のついた<a class='autolink' href='#kJonRG8GtHF'>四角形</a>）を３回描画することを考えてみてください。まずは単純に記述を３回繰り返します。座標以外は完全に同じ内容です。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (rect '( 50 50) 40 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>
        <span class='keyword3'>:contents</span>
        ((line '((0 10) (40 10)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
         (line '((10 0) (10 40)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)))
  (rect '(100 50) 40 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>
        <span class='keyword3'>:contents</span>
        ((line '((0 10) (40 10)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
         (line '((10 0) (10 40)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)))
  (rect '(150 50) 40 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>
        <span class='keyword3'>:contents</span>
        ((line '((0 10) (40 10)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
         (line '((10 0) (10 40)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>))))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='30' y='30' width='40' height='40' fill='white' stroke='black' stroke-width='1' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 30.0,40.0 70.0,40.0' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 40.0,30.0 40.0,70.0' />
	<!-- rectangle -->
	<rect x='80' y='30' width='40' height='40' fill='white' stroke='black' stroke-width='1' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,40.0 120.0,40.0' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 90.0,30.0 90.0,70.0' />
	<!-- rectangle -->
	<rect x='130' y='30' width='40' height='40' fill='white' stroke='black' stroke-width='1' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 130.0,40.0 170.0,40.0' />
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 140.0,30.0 140.0,70.0' />

</svg>
</div>

<p>　この場合、出力される SVG ファイル内でも（当然ながら）座標以外は同じ出力が３回繰り返されます。</p>
<pre>
&lt;svg xmlns="http://www.w3.org/2000/svg" ...&gt;
      :
    &lt;rect x="30" y="30" width="40" height="40" ...&gt;&lt;/rect&gt;
    &lt;polyline ... points=" 30.0,40.0 70.0,40.0"&gt;&lt;/polyline&gt;
    &lt;polyline ... points=" 40.0,30.0 40.0,70.0"&gt;&lt;/polyline&gt;

    &lt;rect x="80" y="30" width="40" height="40" ...&gt;&lt;/rect&gt;
    &lt;polyline ... points=" 80.0,40.0 120.0,40.0"&gt;&lt;/polyline&gt;
    &lt;polyline ... points=" 90.0,30.0 90.0,70.0"&gt;&lt;/polyline&gt;

    &lt;rect x="130" y="30" width="40" height="40" ...&gt;&lt;/rect&gt;
    &lt;polyline ... points=" 130.0,40.0 170.0,40.0"&gt;&lt;/polyline&gt;
    &lt;polyline ... points=" 140.0,30.0 140.0,70.0"&gt;&lt;/polyline&gt;
&lt;/svg&gt;
</pre>
<p>　以下のように、Common Lisp 言語の機能を使用してループで処理することはできますが、入力データが短くなっても出力される SVG が短くなるわけではありません。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (dotimes (i 3)
    (rect `(,(* (1+ i) 50) 50) 40 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>
          <span class='keyword3'>:contents</span>
          ((line '((0 10) (40 10)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
           (line '((10 0) (10 40)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)))))
</pre>
<p>　これに対して、<a class='autolink' href='#5hmH4Z1JfiN'>defgroup マクロ</a>と <a class='autolink' href='#3ABOLb3a4Yl'>use マクロ</a>を使うと SVG 上でも「一度だけ定義して複数回描画させる」ような出力をすることができます。先程のサンプルと同じ出力をするコードは以下のようになります。</p>
<pre class='code'>
(diagram (200 100)
  (grid)
  (defgroup (40 40 <span class='keyword3'>:icon</span>)
    (rect canvas.center canvas.width canvas.height <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>
          <span class='keyword3'>:contents</span>
          ((line `((0 10) (40 10)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
           (line `((10 0) (10 40)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>))))
  (use <span class='keyword3'>:icon</span> '( 50 50))
  (use <span class='keyword3'>:icon</span> '(100 50))
  (use <span class='keyword3'>:icon</span> '(150 50)))
</pre>
<p>　上記のコードでは、 <code>(defgroup (40 40 :icon) ...)</code> によって icon という名前の定義を作成しています。幅と高さはそれぞれ 40 です。これによって独立した<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>が確立され、その中で作図を行うことができます。ここではその<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>いっぱいに rect を描き、さらにその中で line を 2 本描いています。しかしこれは <a class='autolink' href='#5hmH4Z1JfiN'>defgroup マクロ</a>の中でのこと（つまり定義を作成しただけ）なので、これだけでは描画は行なわれません。<a class='autolink' href='#5hmH4Z1JfiN'>defgroup マクロ</a>で定義した図形を実際に描画するには、<a class='autolink' href='#3ABOLb3a4Yl'>use マクロ</a>を使います。上記の例では、 <code>(use :icon '( 50 50))</code> といった記述を 3 回行なっています。パラメータは、定義名と描画する基準座標です。</p>
<p>　上記のコードによって生成される SVG 画像は以下のようになります。入力データとの対応がわかると思います。定義（defgroup）は一度だけで、それを参照（use）するタグが複数登場しています。</p>
<pre>
&lt;svg xmlns='http://www.w3.org/2000/svg' ...&gt;
    &lt;defs&gt;
        &lt;g id='icon'&gt;
            &lt;rect x='0' y='0' width='40' height='40' ... /&gt;
            &lt;polyline ... points=' 0.0,10.0 40.0,10.0' /&gt;
            &lt;polyline ... points=' 10.0,0.0 10.0,40.0' /&gt;
        &lt;/g&gt;
    &lt;/defs&gt;
      :
    &lt;use xlink:href='#icon' x='30' y='30' /&gt;
    &lt;use xlink:href='#icon' x='80' y='30' /&gt;
    &lt;use xlink:href='#icon' x='130' y='30' /&gt;
&lt;/svg&gt;
</pre>
<p>　このように、<a class='autolink' href='#5hmH4Z1JfiN'>defgroup マクロ</a>と <a class='autolink' href='#3ABOLb3a4Yl'>use マクロ</a>を使えば繰り返し登場する図形要素の再利用が可能になりますが、スタンプのようにまったく同じものを表示させることしかできないのでしょうか。また、<a class='autolink' href='#3ABOLb3a4Yl'>use マクロ</a>で描画した要素どうしを<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>で接続したりできないでしょうか。最初の質問については、「基本的に定義した通りにしか描画できないけど、<a class='autolink' href='#3ABOLb3a4Yl'>use マクロ</a>で contents パラメータが使えます」が答えになります。そして２番目の質問の答えは、「<a class='autolink' href='#3ABOLb3a4Yl'>use マクロ</a>に ID を付ければ<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>が使える」です。以下の例ではその両方をやっています。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (defgroup (70 50 <span class='keyword3'>:frame</span>)
    (with-current-canvas (center width height)
      (rect center width height <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
      (line `((0 10) (,width 10)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)))
  (use <span class='keyword3'>:frame</span> '(75 50) <span class='keyword3'>:id</span> <span class='keyword3'>:frame1</span>
       <span class='keyword3'>:contents</span>
       ((text (y+ canvas.center 10) <span class='literal'>"frame 1"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>)))
  (use <span class='keyword3'>:frame</span> '(225 100) <span class='keyword3'>:id</span> <span class='keyword3'>:frame2</span>
       <span class='keyword3'>:contents</span>
       ((text (y+ canvas.center 10) <span class='literal'>"frame 2"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>)))
  (connect <span class='keyword3'>:frame1</span> <span class='keyword3'>:frame2</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- frame : group-definition -->
	<defs>
		<g id='frame'>
			<!-- rectangle -->
			<rect x='0' y='0' width='70' height='50' fill='white' stroke='black' stroke-width='1' />
			<!-- line -->
			<polyline fill='none' stroke='black' stroke-width='1' points=' 0.0,10.0 70.0,10.0' />
			
		</g>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- frame1 : use -->
	<use xlink:href='#frame' x='40' y='25' />
	<!-- text -->
	<text x='75' y='60' text-anchor='middle' font-size='12pt' fill='black' >frame 1</text>
	<!-- frame2 : use -->
	<use xlink:href='#frame' x='190' y='75' />
	<!-- text -->
	<text x='225' y='110' text-anchor='middle' font-size='12pt' fill='black' >frame 2</text>
	<!-- connector from frame1 to frame2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 110.0,61.666668 190.0,88.333336' />
	<polyline fill='none' stroke='black' stroke-width='1' points='175.30453,91.34054 190,88.333336 180.04796,77.11029' />

</svg>
</div>

<p class='fig_title'><a name='eY4WMx1X8UT'></a>Figure.9-1 defgroup と use のサンプル</p>
<p>　　</p>
<p>　注意してほしいのは、<a class='autolink' href='#5hmH4Z1JfiN'>defgroup マクロ</a>で作成する定義に指定する ID と、図形要素を描画する時に指定する ID は別モノだということです。上記の例で言えば、 <code>:frame</code> は定義の ID なので、<a class='autolink' href='#3ABOLb3a4Yl'>use マクロ</a>の最初のパラメータには使えますが<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>の接続対象としては指定できません。逆も同様で、たとえば rect を描いた後にその ID を指定して use することはできません。</p>
<ul>
<li><span style='background:red;color:white;'>ToDo : defgroup の中で use できない（っぽい：要確認）ことに言及する必要がある。</span></li>
</ul>
<p>　　</p>
<h2><a name='kfrwaPRQE9I'></a>10 パターンとグラデーション</h2>
<p>　「<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>」では通常<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定しますが、定義した図形を敷き詰める「<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>」や、複雑な色の変化を見せる「<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>」も利用できます。また、<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>と<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>は<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>だけでなく<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>で使用することも可能です。</p>
<h3><a name='dmYFJAv81Kl'></a>10.1 パターン</h3>
<p>　<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>を定義するには defpattern を使用します。 defpattern は defgroup に良く似ていますが、<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>を定義するための構文です。以下のサンプルでは 5 x 5 の小さな領域に細い青線を斜めにひく<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>を定義し、rect の中にそれを敷き詰めています。</p>
<pre class='code'>
(diagram (140 70)
  (defpattern (<span class='keyword3'>:tile</span> <span class='keyword3'>:width</span> 5 <span class='keyword3'>:height</span> 5 <span class='keyword3'>:units</span> <span class='keyword3'>:userSpaceOnUse</span>)
    (line '((5 0) (0 5)) <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:blue</span> <span class='keyword3'>:width</span> 0.3)))
  (rect canvas.center 100 50 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile</span>)))
</pre>
<p>　上記のコードは以下の図を生成します。defpattern で定義した<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>に <code>:tile</code> というID をつけ、後続の rect の <a href='#dBUd7L4C3dx'>fill パラメータ</a>で <code>'(:url :tile)</code> という指定をすることで<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>の使用を指示しています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='140' height='70'>
	
	<!-- tile : pattern-definition -->
	<defs>
		<pattern id='tile' width='5' height='5' patternUnits='userSpaceOnUse' >
			<!-- line -->
			<polyline fill='none' stroke='blue' stroke-width='0.3' points=' 5.0,0.0 0.0,5.0' />
			
		</pattern>
	</defs>
	<!-- rectangle -->
	<rect x='20' y='10' width='100' height='50' fill='url(#tile)' stroke='black' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='hMyYNXGygmb'></a>Figure.10-1 単純なパターンのサンプル</p>
<p>　　</p>
<p>　せっかくなのでサンプルをもうひとつ。センス云々はともかくとして、お望みならこんなカラフルな<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>も作成できます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='140' height='140'>
	
	<!-- crazy : pattern-definition -->
	<defs>
		<pattern id='crazy' width='40' height='40' patternUnits='userSpaceOnUse' >
			<!-- circle -->
			<circle cx='10' cy='10' r='8' fill='red' stroke='none' stroke-width='1' />
			<!-- rectangle -->
			<rect x='23' y='3' width='14' height='14' fill='blue' stroke='none' stroke-width='1' />
			<!-- rectangle -->
			<g transform='rotate(45,10,30)'>
				<rect x='4' y='24' width='12' height='12' fill='green' stroke='none' stroke-width='1' />
			</g>
			<!-- circle -->
			<circle cx='30' cy='30' r='8' fill='orange' stroke='none' stroke-width='1' />
			
		</pattern>
	</defs>
	<!-- rectangle -->
	<rect x='10' y='10' width='120' height='120' fill='url(#crazy)' stroke='black' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='iUL0e8M4mDl'></a>Figure.10-2 パターンのサンプル - 2</p>
<details>
<summary>　※上記画像のソースはこちら。</summary>
<pre class='code'>
(diagram (140 140)
  (defpattern (<span class='keyword3'>:crazy</span> <span class='keyword3'>:width</span> 40 <span class='keyword3'>:height</span> 40 <span class='keyword3'>:units</span> <span class='keyword3'>:userSpaceOnUse</span>)
    (circle '(10 10) 8     <span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:red</span>)
    (rect   '(30 10) 14 14 <span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:blue</span>)
    (rect   '(10 30) 12 12 <span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:green</span> <span class='keyword3'>:rotate</span> 45)
    (circle '(30 30) 8     <span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:orange</span>))
  (rect canvas.center 120 120 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:crazy</span>)))
</pre>
</details>
<p>　　</p>
<p>　defpattern には <code>x, y, units, content-units, view-box</code> などの名前付きパラメータがありますが、現時点ではその詳細な説明は割愛します。今後説明を充実させる可能性はありますが、現時点では <a class='autolink' href='#l10jSaJeUDk'>SVG本</a>の８章をお読みください。kaavio で <a class='autolink' href='#l10jSaJeUDk'>SVG本</a>の 8.1 節のサンプルを実現するコードを以下に提示しておきます。なお、現在 preserveAspectRatio 属性には対応していません。将来対応する可能性はありますが、未確定です。</p>
<details>
<summary>　※「SVG エッセンシャルズ 第二版」 8.1 節の図面サンプルはこちら</summary>
<p><strong>◆ 図 8.2</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='170'>
	
	<!-- tile1 : pattern-definition -->
	<defs>
		<pattern id='tile1' x='0' y='0' width='20%' height='20%' patternUnits='objectBoundingBox' >
			<!-- raw-svg -->
			<path d='M 0 0 Q 5 20 10 10 T 20 20' stroke='black' fill='none' />
			<!-- raw-svg -->
			<path d='M 0 0 h 20 v 20 h -20 z'    stroke='gray'  fill='none' />
			
		</pattern>
	</defs>
	<!-- rectangle -->
	<rect x='20' y='20' width='100' height='100' fill='url(#tile1)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='135' y='20' width='70' height='80' fill='url(#tile1)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='225' y='20' width='150' height='130' fill='url(#tile1)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (400 170)
  (defpattern (<span class='keyword3'>:tile1</span> <span class='keyword3'>:x</span> 0 <span class='keyword3'>:y</span> 0 <span class='keyword3'>:width</span> <span class='literal'>"20%"</span> <span class='keyword3'>:height</span> <span class='literal'>"20%"</span> <span class='keyword3'>:units</span> <span class='keyword3'>:objectBoundingBox</span>)
    (raw-svg <span class='literal'>"&lt;path d='M 0 0 Q 5 20 10 10 T 20 20' stroke='black' fill='none' /&gt;"</span>)
    (raw-svg <span class='literal'>"&lt;path d='M 0 0 h 20 v 20 h -20 z'    stroke='gray'  fill='none' /&gt;"</span>))
  (rect '( 70 70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile1</span>))
  (rect '(170 60)  70  80 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile1</span>))
  (rect '(300 85) 150 130 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile1</span>)))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.3</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='170'>
	
	<!-- tile2 : pattern-definition -->
	<defs>
		<pattern id='tile2' width='20' height='20' patternUnits='userSpaceOnUse' >
			<!-- raw-svg -->
			<path d='M 0 0 Q 5 20 10 10 T 20 20' stroke='black' fill='none' />
			<!-- raw-svg -->
			<path d='M 0 0 h 20 v 20 h -20 z'    stroke='gray'  fill='none' />
			
		</pattern>
	</defs>
	<!-- rectangle -->
	<rect x='20' y='20' width='100' height='100' fill='url(#tile2)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='135' y='20' width='70' height='80' fill='url(#tile2)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='225' y='20' width='150' height='130' fill='url(#tile2)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (400 170)
  (defpattern (<span class='keyword3'>:tile2</span> <span class='keyword3'>:width</span> 20 <span class='keyword3'>:height</span> 20 <span class='keyword3'>:units</span> <span class='keyword3'>:userSpaceOnUse</span>)
    (raw-svg <span class='literal'>"&lt;path d='M 0 0 Q 5 20 10 10 T 20 20' stroke='black' fill='none' /&gt;"</span>)
    (raw-svg <span class='literal'>"&lt;path d='M 0 0 h 20 v 20 h -20 z'    stroke='gray'  fill='none' /&gt;"</span>))
  (rect '( 70 70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile2</span>))
  (rect '(170 60)  70  80 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile2</span>))
  (rect '(300 85) 150 130 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile2</span>)))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.4</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='170'>
	
	<!-- tile3 : pattern-definition -->
	<defs>
		<pattern id='tile3' width='.2' height='.2' patternUnits='objectBoundingBox' patternContentUnits='objectBoundingBox' >
			<!-- raw-svg -->
			<path d='M 0 0 Q .05 .20 .10 .10 T .20 .20' stroke='black' stroke-width='0.01' fill='none' />
			<!-- raw-svg -->
			<path d='M 0 0 h 0.20 v 0.20 h -0.2 z'      stroke='gray'  stroke-width='0.01' fill='none' />
			
		</pattern>
	</defs>
	<!-- rectangle -->
	<rect x='20' y='20' width='100' height='100' fill='url(#tile3)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='135' y='20' width='70' height='80' fill='url(#tile3)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='225' y='20' width='150' height='130' fill='url(#tile3)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (400 170)
  (defpattern (<span class='keyword3'>:tile3</span> <span class='keyword3'>:width</span> <span class='literal'>".2"</span> <span class='keyword3'>:height</span> <span class='literal'>".2"</span> 
               <span class='keyword3'>:units</span> <span class='keyword3'>:objectBoundingBox</span> <span class='keyword3'>:content-units</span> <span class='keyword3'>:objectBoundingBox</span>)
    (raw-svg <span class='literal'>"&lt;path d='M 0 0 Q .05 .20 .10 .10 T .20 .20' stroke='black' stroke-width='0.01' fill='none' /&gt;"</span>)
    (raw-svg <span class='literal'>"&lt;path d='M 0 0 h 0.20 v 0.20 h -0.2 z'      stroke='gray'  stroke-width='0.01' fill='none' /&gt;"</span>))
  (rect '( 70 70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile3</span>))
  (rect '(170 60)  70  80 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile3</span>))
  (rect '(300 85) 150 130 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile3</span>)))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.5</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='140' height='140'>
	
	<!-- tile4 : pattern-definition -->
	<defs>
		<pattern id='tile4' width='20' height='20' patternUnits='userSpaceOnUse' viewBox=' 0 0 150 150' >
			<!-- raw-svg -->
			<path d='M 30 100 C 50 50, 70 20, 100 100, 110, 130, 45, 150, 65, 100' stroke='black' stroke-width='5' fill='none' />
			
		</pattern>
	</defs>
	<!-- rectangle -->
	<rect x='20' y='20' width='100' height='100' fill='url(#tile4)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (140 140)
  (defpattern (<span class='keyword3'>:tile4</span> <span class='keyword3'>:width</span> 20 <span class='keyword3'>:height</span> 20 
               <span class='keyword3'>:units</span> <span class='keyword3'>:userSpaceOnUse</span> <span class='keyword3'>:view-box</span> '(0 0 150 150))
    (raw-svg <span class='literal'>"&lt;path d='M 30 100 C 50 50, 70 20, 100 100, 110, 130, 45, 150, 65, 100' stroke='black' stroke-width='5' fill='none' /&gt;"</span>))
  (rect canvas.center 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile4</span>)))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.6</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='110' height='110'>
	
	<!-- stripe : pattern-definition -->
	<defs>
		<pattern id='stripe' width='6' height='6' patternUnits='userSpaceOnUse' >
			<!-- raw-svg -->
			<path d='M 0 0 6 0' stroke='black' fill='none' />
			
		</pattern>
	</defs>
	<!-- polcadot : pattern-definition -->
	<defs>
		<pattern id='polcadot' width='36' height='36' patternUnits='userSpaceOnUse' >
			<!-- circle -->
			<circle cx='18' cy='18' r='12' fill='url(#stripe)' stroke='black' stroke-width='1' />
			
		</pattern>
	</defs>
	<!-- rectangle -->
	<rect x='4' y='4' width='100' height='100' fill='url(#polcadot)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (110 110)
  (defpattern (<span class='keyword3'>:stripe</span> <span class='keyword3'>:width</span> 6 <span class='keyword3'>:height</span> 6 <span class='keyword3'>:units</span> <span class='keyword3'>:userSpaceOnUse</span>)
    (raw-svg <span class='literal'>"&lt;path d='M 0 0 6 0' stroke='black' fill='none' /&gt;"</span>))
  (defpattern (<span class='keyword3'>:polcadot</span> <span class='keyword3'>:width</span> 36 <span class='keyword3'>:height</span> 36 <span class='keyword3'>:units</span> <span class='keyword3'>:userSpaceOnUse</span>)
    (circle '(18 18) 12 <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:stripe</span>) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>))
  (rect '(54 54) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:polcadot</span>)))
</pre>
</details>
<p>　　</p>
<h3><a name='4p1J7EWjD3m'></a>10.2 グラデーション</h3>
<p>　<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>を定義するには defgradient を使用します。<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>には線型と円形の２種類があります。以下のサンプルでは、青から赤に連続的に変換する<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>を定義し、rect の中でそれを利用しています。</p>
<pre class='code'>
(diagram (140 70)
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:gradient1</span>)
    (0.00 <span class='keyword3'>:blue</span>)
    (1.00 <span class='keyword3'>:red</span>))
  (rect canvas.center 100 50 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:gradient1</span>)))
</pre>
<p>　上記のコードは以下の図を生成します。defgradient で定義した<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>に <code>:gradient1</code> というID をつけ、後続の rect の <a href='#dBUd7L4C3dx'>fill パラメータ</a>で <code>'(:url :gradient1)</code> という指定をすることで<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>の使用を指示しています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='140' height='70'>
	
	<!-- gradient1 : linear-gradient-definition -->
	<defs>
		<linearGradient id='gradient1' >
			<stop offset='0.0' stop-color='blue' />
			<stop offset='1.0' stop-color='red' />
		</linearGradient>
	</defs>
	<!-- rectangle -->
	<rect x='20' y='10' width='100' height='50' fill='url(#gradient1)' stroke='black' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='fMuRXwcCVRN'></a>Figure.10-3 単純なグラデーションのサンプル</p>
<p>　　</p>
<p>　もうひとつのサンプルは円形<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>です。今度は単色で不透明度を変化させています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='140' height='140'>
	
	<!-- gradient2 : radial-gradient-definition -->
	<defs>
		<radialGradient id='gradient2' r='70%' >
			<stop offset='0.0' stop-color='green' stop-opacity='0.0' />
			<stop offset='1.0' stop-color='green' stop-opacity='1.0' />
		</radialGradient>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='20' y='20' width='100' height='100' fill='url(#gradient2)' stroke='black' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='04QAFmYhXse'></a>Figure.10-4 グラデーションのサンプル - 2</p>
<details>
<summary>　※上記画像のソースはこちら。</summary>
<pre class='code'>
(diagram (140 140)
  (grid)
  (defgradient (<span class='keyword3'>:radial</span> <span class='keyword3'>:gradient2</span> <span class='keyword3'>:radius</span> <span class='literal'>"70%"</span>)
    (0.00 <span class='keyword3'>:green</span> 0.0)
    (1.00 <span class='keyword3'>:green</span> 1.0))
  (rect '(70 70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:gradient2</span>)))
</pre>
</details>
<p>　　</p>
<p>　defgradient には多くの名前付きパラメータがありますが、現時点ではその詳細な説明は割愛します。今後説明を充実させる可能性はありますが、現時点では <a class='autolink' href='#l10jSaJeUDk'>SVG本</a>の８章をお読みください。kaavio で <a class='autolink' href='#l10jSaJeUDk'>SVG本</a>の 8.2 節のサンプルを実現するコードを以下に提示しておきます。</p>
<details>
<summary>　※「SVG エッセンシャルズ 第二版」 8.2 節の図面サンプルはこちら</summary>
<p><strong>◆ 図 8.7</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='120'>
	
	<!-- two_hues_8_7 : linear-gradient-definition -->
	<defs>
		<linearGradient id='two_hues_8_7' >
			<stop offset='0.0' stop-color='#ffcc00' />
			<stop offset='1.0' stop-color='#0099cc' />
		</linearGradient>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='20' y='10' width='200' height='100' fill='url(#two_hues_8_7)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (240 120)
  (grid)
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:two_hues_8_7</span>)
    (0.0 <span class='literal'>"#ffcc00"</span>)
    (1.0 <span class='literal'>"#0099cc"</span>))
  (rect canvas.center 200 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:two_hues_8_7</span>)))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.8</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='120'>
	
	<!-- three_stops_8_8 : linear-gradient-definition -->
	<defs>
		<linearGradient id='three_stops_8_8' >
			<stop offset='0.0' stop-color='#ffcc00' />
			<stop offset='0.33' stop-color='#cc6699' />
			<stop offset='1.0' stop-color='#66cc99' />
		</linearGradient>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='20' y='10' width='200' height='100' fill='url(#three_stops_8_8)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (240 120)
  (grid)
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:three_stops_8_8</span>)
    (0.00 <span class='literal'>"#ffcc00"</span>)
    (0.33 <span class='literal'>"#cc6699"</span>)
    (1.00 <span class='literal'>"#66cc99"</span>))
  (rect canvas.center 200 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:three_stops_8_8</span>)))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.9</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='120'>
	
	<!-- three_stops_8_9 : linear-gradient-definition -->
	<defs>
		<linearGradient id='three_stops_8_9' >
			<stop offset='0.0' stop-color='#906' stop-opacity='1.0' />
			<stop offset='0.5' stop-color='#906' stop-opacity='0.3' />
			<stop offset='1.0' stop-color='#906' stop-opacity='0.1' />
		</linearGradient>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='20' y='10' width='200' height='100' fill='url(#three_stops_8_9)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (240 120)
  (grid)
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:three_stops_8_9</span>)
    (0.00 <span class='literal'>"#906"</span> 1.0)
    (0.50 <span class='literal'>"#906"</span> 0.3)
    (1.00 <span class='literal'>"#906"</span> 0.1))
  (rect canvas.center 200 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:three_stops_8_9</span>)))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.10</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='380' height='240'>
	
	<!-- three_stops_8_10 : linear-gradient-definition -->
	<defs>
		<linearGradient id='three_stops_8_10' >
			<stop offset='0.0' stop-color='#ffcc00' />
			<stop offset='0.33' stop-color='#cc6699' />
			<stop offset='1.0' stop-color='#66cc99' />
		</linearGradient>
	</defs>
	<!-- right_to_left_8_10 : linear-gradient-definition -->
	<defs>
		<linearGradient id='right_to_left_8_10' xlink:href='#three_stops_8_10' x1='100%' y1='0%' x2='0%' y2='0%' />
	</defs>
	<!-- down_8_10 : linear-gradient-definition -->
	<defs>
		<linearGradient id='down_8_10' xlink:href='#three_stops_8_10' x1='0%' y1='0%' x2='0%' y2='100%' />
	</defs>
	<!-- up_8_10 : linear-gradient-definition -->
	<defs>
		<linearGradient id='up_8_10' xlink:href='#three_stops_8_10' x1='0%' y1='100%' x2='0%' y2='0%' />
	</defs>
	<!-- diagonal_8_10 : linear-gradient-definition -->
	<defs>
		<linearGradient id='diagonal_8_10' xlink:href='#three_stops_8_10' x1='0%' y1='0%' x2='100%' y2='100%' />
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='40' y='20' width='200' height='40' fill='url(#three_stops_8_10)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='40' y='70' width='200' height='40' fill='url(#right_to_left_8_10)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='250' y='20' width='40' height='200' fill='url(#down_8_10)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='300' y='20' width='40' height='200' fill='url(#up_8_10)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='40' y='120' width='200' height='100' fill='url(#diagonal_8_10)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (380 240)
  (grid)
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:three_stops_8_10</span>)
    (0.00 <span class='literal'>"#ffcc00"</span>)
    (0.33 <span class='literal'>"#cc6699"</span>)
    (1.00 <span class='literal'>"#66cc99"</span>))
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:right_to_left_8_10</span> <span class='keyword3'>:href</span> <span class='keyword3'>:three_stops_8_10</span>
                        <span class='keyword3'>:x1</span> <span class='literal'>"100%"</span> <span class='keyword3'>:y1</span> <span class='literal'>"0%"</span> <span class='keyword3'>:x2</span> <span class='literal'>"0%"</span> <span class='keyword3'>:y2</span> <span class='literal'>"0%"</span>))
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:down_8_10</span>          <span class='keyword3'>:href</span> <span class='keyword3'>:three_stops_8_10</span>
                        <span class='keyword3'>:x1</span> <span class='literal'>"0%"</span> <span class='keyword3'>:y1</span> <span class='literal'>"0%"</span> <span class='keyword3'>:x2</span> <span class='literal'>"0%"</span> <span class='keyword3'>:y2</span> <span class='literal'>"100%"</span>))
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:up_8_10</span>            <span class='keyword3'>:href</span> <span class='keyword3'>:three_stops_8_10</span>
                        <span class='keyword3'>:x1</span> <span class='literal'>"0%"</span> <span class='keyword3'>:y1</span> <span class='literal'>"100%"</span> <span class='keyword3'>:x2</span> <span class='literal'>"0%"</span> <span class='keyword3'>:y2</span> <span class='literal'>"0%"</span>))
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:diagonal_8_10</span>      <span class='keyword3'>:href</span> <span class='keyword3'>:three_stops_8_10</span>
                        <span class='keyword3'>:x1</span> <span class='literal'>"0%"</span> <span class='keyword3'>:y1</span> <span class='literal'>"0%"</span> <span class='keyword3'>:x2</span> <span class='literal'>"100%"</span> <span class='keyword3'>:y2</span> <span class='literal'>"100%"</span>))
  (rect '(140  40) 200 40  <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:three_stops_8_10</span>))
  (rect '(140  90) 200 40  <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:right_to_left_8_10</span>))
  (rect '(270 120)  40 200 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:down_8_10</span>))
  (rect '(320 120)  40 200 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:up_8_10</span>))
  (rect '(140 170) 200 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:diagonal_8_10</span>)))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.11</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='360' height='140'>
	
	<!-- partial_8_11 : linear-gradient-definition -->
	<defs>
		<linearGradient id='partial_8_11' x1='20%' y1='30%' x2='40%' y2='80%' >
			<stop offset='0.0' stop-color='#ffcc00' />
			<stop offset='0.33' stop-color='#cc6699' />
			<stop offset='1.0' stop-color='#66cc99' />
		</linearGradient>
	</defs>
	<!-- padded_8_11 : linear-gradient-definition -->
	<defs>
		<linearGradient id='padded_8_11' xlink:href='#partial_8_11' spreadMethod='pad' />
	</defs>
	<!-- repeated_8_11 : linear-gradient-definition -->
	<defs>
		<linearGradient id='repeated_8_11' xlink:href='#partial_8_11' spreadMethod='repeat' />
	</defs>
	<!-- reflected_8_11 : linear-gradient-definition -->
	<defs>
		<linearGradient id='reflected_8_11' xlink:href='#partial_8_11' spreadMethod='reflect' />
	</defs>
	<!-- line_8_11 : group-definition -->
	<defs>
		<g id='line_8_11'>
			<!-- line -->
			<polyline fill='none' stroke='black' stroke-width='1' points=' 20.0,30.0 40.0,80.0' />
			
		</g>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='20' y='20' width='100' height='100' fill='url(#padded_8_11)' stroke='black' stroke-width='1' />
	<!-- use -->
	<use xlink:href='#line_8_11' x='20' y='20' />
	<!-- rectangle -->
	<rect x='130' y='20' width='100' height='100' fill='url(#repeated_8_11)' stroke='black' stroke-width='1' />
	<!-- use -->
	<use xlink:href='#line_8_11' x='130' y='20' />
	<!-- rectangle -->
	<rect x='240' y='20' width='100' height='100' fill='url(#reflected_8_11)' stroke='black' stroke-width='1' />
	<!-- use -->
	<use xlink:href='#line_8_11' x='240' y='20' />

</svg>
</div>

<pre class='code'>
(diagram (360 140)
  (grid)
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:partial_8_11</span> <span class='keyword3'>:x1</span> <span class='literal'>"20%"</span> <span class='keyword3'>:y1</span> <span class='literal'>"30%"</span> <span class='keyword3'>:x2</span> <span class='literal'>"40%"</span> <span class='keyword3'>:y2</span> <span class='literal'>"80%"</span>)
    (0.00 <span class='literal'>"#ffcc00"</span>)
    (0.33 <span class='literal'>"#cc6699"</span>)
    (1.00 <span class='literal'>"#66cc99"</span>))
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:padded_8_11</span>    <span class='keyword3'>:href</span> <span class='keyword3'>:partial_8_11</span> <span class='keyword3'>:spread</span> <span class='keyword3'>:pad</span>))
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:repeated_8_11</span>  <span class='keyword3'>:href</span> <span class='keyword3'>:partial_8_11</span> <span class='keyword3'>:spread</span> <span class='keyword3'>:repeat</span>))
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:reflected_8_11</span> <span class='keyword3'>:href</span> <span class='keyword3'>:partial_8_11</span> <span class='keyword3'>:spread</span> <span class='keyword3'>:reflect</span>))
  (defgroup (100 100 <span class='keyword3'>:line_8_11</span>)
      (line '((20 30) (40 80)) <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>))
  (rect '( 70  70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:padded_8_11</span>)
                           <span class='keyword3'>:contents</span> ((use <span class='keyword3'>:line_8_11</span> canvas.center)))
  (rect '(180  70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:repeated_8_11</span>)
                           <span class='keyword3'>:contents</span> ((use <span class='keyword3'>:line_8_11</span> canvas.center)))
  (rect '(290  70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:reflected_8_11</span>)
                           <span class='keyword3'>:contents</span> ((use <span class='keyword3'>:line_8_11</span> canvas.center))))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.12</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='140' height='140'>
	
	<!-- three_stops_8_12 : radial-gradient-definition -->
	<defs>
		<radialGradient id='three_stops_8_12' >
			<stop offset='0.0' stop-color='#f96' />
			<stop offset='0.5' stop-color='#9c9' />
			<stop offset='1.0' stop-color='#906' />
		</radialGradient>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='20' y='20' width='100' height='100' fill='url(#three_stops_8_12)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (140 140)
  (grid)
  (defgradient (<span class='keyword3'>:radial</span> <span class='keyword3'>:three_stops_8_12</span>)
    (0.00 <span class='literal'>"#f96"</span>)
    (0.50 <span class='literal'>"#9c9"</span>)
    (1.00 <span class='literal'>"#906"</span>))
  (rect '(70 70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:three_stops_8_12</span>)))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.13</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='140' height='140'>
	
	<!-- center_origin_8_13 : radial-gradient-definition -->
	<defs>
		<radialGradient id='center_origin_8_13' cx='0%' cy='0%' r='141%' >
			<stop offset='0.0' stop-color='#f96' />
			<stop offset='0.5' stop-color='#9c9' />
			<stop offset='1.0' stop-color='#906' />
		</radialGradient>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='20' y='20' width='100' height='100' fill='url(#center_origin_8_13)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (140 140)
  (grid)
  (defgradient (<span class='keyword3'>:radial</span> <span class='keyword3'>:center_origin_8_13</span> <span class='keyword3'>:cx</span> <span class='literal'>"0%"</span> <span class='keyword3'>:cy</span> <span class='literal'>"0%"</span> <span class='keyword3'>:radius</span> <span class='literal'>"141%"</span>)
    (0.00 <span class='literal'>"#f96"</span>)
    (0.50 <span class='literal'>"#9c9"</span>)
    (1.00 <span class='literal'>"#906"</span>))
  (rect '(70 70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:center_origin_8_13</span>)))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.14</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='140' height='140'>
	
	<!-- focal_set_8_14 : radial-gradient-definition -->
	<defs>
		<radialGradient id='focal_set_8_14' cx='0%' cy='0%' fx='50%' fy='50%' r='100%' >
			<stop offset='0.0' stop-color='#f96' />
			<stop offset='0.5' stop-color='#9c9' />
			<stop offset='1.0' stop-color='#906' />
		</radialGradient>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='20' y='20' width='100' height='100' fill='url(#focal_set_8_14)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (140 140)
  (grid)
  (defgradient (<span class='keyword3'>:radial</span> <span class='keyword3'>:focal_set_8_14</span> <span class='keyword3'>:cx</span> <span class='literal'>"0%"</span> <span class='keyword3'>:cy</span> <span class='literal'>"0%"</span>
                        <span class='keyword3'>:fx</span> <span class='literal'>"50%"</span> <span class='keyword3'>:fy</span> <span class='literal'>"50%"</span> <span class='keyword3'>:radius</span> <span class='literal'>"100%"</span>)
    (0.00 <span class='literal'>"#f96"</span>)
    (0.50 <span class='literal'>"#9c9"</span>)
    (1.00 <span class='literal'>"#906"</span>))
  (rect '(70 70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:focal_set_8_14</span>)))
</pre>
<p>　　</p>
<p><strong>◆ 図 8.15</strong></p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='360' height='140'>
	
	<!-- three_stops_8_15 : radial-gradient-definition -->
	<defs>
		<radialGradient id='three_stops_8_15' cx='0%' cy='0%' r='70%' >
			<stop offset='0.0' stop-color='#f96' />
			<stop offset='0.5' stop-color='#9c9' />
			<stop offset='1.0' stop-color='#906' />
		</radialGradient>
	</defs>
	<!-- padded_8_15 : radial-gradient-definition -->
	<defs>
		<radialGradient id='padded_8_15' xlink:href='#three_stops_8_15' spreadMethod='pad' />
	</defs>
	<!-- repeated_8_15 : radial-gradient-definition -->
	<defs>
		<radialGradient id='repeated_8_15' xlink:href='#three_stops_8_15' spreadMethod='repeat' />
	</defs>
	<!-- reflected_8_15 : radial-gradient-definition -->
	<defs>
		<radialGradient id='reflected_8_15' xlink:href='#three_stops_8_15' spreadMethod='reflect' />
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='20' y='20' width='100' height='100' fill='url(#padded_8_15)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='130' y='20' width='100' height='100' fill='url(#repeated_8_15)' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='240' y='20' width='100' height='100' fill='url(#reflected_8_15)' stroke='black' stroke-width='1' />

</svg>
</div>

<pre class='code'>
(diagram (360 140)
  (grid)
  (defgradient (<span class='keyword3'>:radial</span> <span class='keyword3'>:three_stops_8_15</span> <span class='keyword3'>:cx</span> <span class='literal'>"0%"</span> <span class='keyword3'>:cy</span> <span class='literal'>"0%"</span> <span class='keyword3'>:radius</span> <span class='literal'>"70%"</span>)
    (0.00 <span class='literal'>"#f96"</span>)
    (0.50 <span class='literal'>"#9c9"</span>)
    (1.00 <span class='literal'>"#906"</span>))
  (defgradient (<span class='keyword3'>:radial</span> <span class='keyword3'>:padded_8_15</span>    <span class='keyword3'>:href</span> <span class='keyword3'>:three_stops_8_15</span> <span class='keyword3'>:spread</span> <span class='keyword3'>:pad</span>))
  (defgradient (<span class='keyword3'>:radial</span> <span class='keyword3'>:repeated_8_15</span>  <span class='keyword3'>:href</span> <span class='keyword3'>:three_stops_8_15</span> <span class='keyword3'>:spread</span> <span class='keyword3'>:repeat</span>))
  (defgradient (<span class='keyword3'>:radial</span> <span class='keyword3'>:reflected_8_15</span> <span class='keyword3'>:href</span> <span class='keyword3'>:three_stops_8_15</span> <span class='keyword3'>:spread</span> <span class='keyword3'>:reflect</span>))
  (rect '( 70  70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:padded_8_15</span>))
  (rect '(180  70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:repeated_8_15</span>))
  (rect '(290  70) 100 100 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:reflected_8_15</span>)))
</pre>
<p>　　</p>
</details>
<p>　　</p>
<h2><a name='4z8VHZK3CSo'></a>11 テーマ</h2>
<p>　<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>や<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>など図形要素のスタイルを都度指定するのは面倒です。with-options のようなマクロを使うこともできますが、図形要素毎の with- 系マクロを多段に書くのもやはり面倒です。各種図形要素に対するスタイル指定をひとまとめした設定があれば便利でしょう。</p>
<p>　「<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>」はそのためのものです。以下のコードは図形要素毎の個別のスタイル設定をせずに <a href='#1s5LsvBYupX'>4  章</a>の図形要素を描画していますが、</p>
<pre class='code'>
(diagram (500 300)
  (grid)
  (with-theme (<span class='keyword3'>:default</span>)
    (<span class='keyword1'>let</span> ((cc canvas.center))
      (document     (xy+ cc -190 -100) 70 50 <span class='literal'>"doc"</span>)
      (folder       (xy+ cc  -65 -100) <span class='literal'>"folder"</span> <span class='keyword3'>:width</span> 80 <span class='keyword3'>:height</span> 50)
      (person       (xy+ cc   65 -100) 30 <span class='keyword3'>:label</span> <span class='literal'>"person"</span>)
      (balloon      (xy+ cc  190 -100) <span class='literal'>"balloon"</span>
                    (xy+ cc  160 -140) <span class='keyword3'>:width</span> 80 <span class='keyword3'>:height</span> 40)
      (memo         (xy+ cc -190    0) <span class='literal'>"memo"</span> <span class='keyword3'>:width</span> 80 <span class='keyword3'>:height</span> 50)
      (cube         (xy+ cc  -65    0)  70 60 <span class='literal'>"cube"</span>)
      (cylinder     (xy+ cc   65    0)  70 60 <span class='literal'>"cylinder"</span>)
      (explosion1   (xy+ cc  190    0) 110 90 <span class='literal'>"explosion"</span>)
      (cross        (xy+ cc -190  100)  70 70 20)
      (block-arrow1 (xy+ cc -100  100) (xy+ cc -20 100) 20))))
</pre>
<p>　　</p>
<p>描画結果は以下のようなものになります。これは 3 行目の with-theme で default <a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>を指定したことによる効果です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='500' height='300'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- document -->
	<path fill='whitesmoke' stroke='darkslategray' stroke-width='1' d='M 25 25 L 25 75 A 23.333334 16.666666 0 0 0 60 75 A 23.333334 16.666666 1 0 1 95 75 L 95 25 Z' />
	<text x='60' y='56' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >doc</text>
	<!-- folder -->
	<g fill='cornsilk' stroke='darkkhaki' stroke-width='1' >
		<polygon points='145.0,25.0 145.0,75.0 225.0,75.0 225.0,35.0 215.0,25.0 195.0,25.0 185.0,15.0 155.0,15.0 145.0,25.0' />
		<polygon points='145.0,25.0 155.0,35.0 185.0,35.0 195.0,25.0 185.0,15.0 155.0,15.0 145.0,25.0' />
	</g>
	<text x='185' y='56' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >folder</text>
	<!-- person -->
	<path fill='linen' stroke='maroon' stroke-width='1' d='M 300 80 A 15 30 0 1 1 330 80 L 300 80 M 315 50 A 15 15 0 0 1 315 20 A 15 15 0 0 1 315 50' />
	<text x='315' y='94' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >person</text>
	<!-- balloon -->
	<path fill='azure' stroke='navy' stroke-width='1' d='M 410 30 L 410 10 L 426.66666 30 L 470 30 A 10 10 1 0 1 480 40 L 480 60 A 10 10 1 0 1 470 70 L 410 70 A 10 10 1 0 1 400 60 L 400 40 A 10 10 1 0 1 410 30 Z' />
	<text x='440' y='56' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >balloon</text>
	<!-- memo -->
	<g stroke='none' >
		<polygon fill='mintcream' points='20.0,125.0 20.0,175.0 70.0,175.0 80.0,155.0 100.0,160.0 100.0,125.0' />
		<polygon fill='#7CCD7C' points='70.0,175.0 100.0,160.0 80.0,155.0' />
		<g fill='none' stroke='darkgreen' stroke-width='1' >
			<polyline fill='none' points=' 20.0,150.0 20.0,125.0 100.0,125.0 100.0,160.0 70.0,175.0 20.0,175.0 20.0,150.0' />
			<polyline fill='none' points=' 100.0,160.0 80.0,155.0 70.0,175.0' />
		</g>
	</g>
	<text x='30' y='147' text-anchor='start' font-family='sans-serif' font-size='12pt' fill='black' >memo</text>
	<!-- cube -->
	<g stroke='none' >
		<polygon fill='darkgray' points='150.0,126.0 162.0,114.0 226.0,114.0 226.0,168.0 214.0,180.0 214.0,126.0' />
		<rect x='150' y='126' width='64' height='54' fill='lightgray' />
		<path fill='none' stroke='black' stroke-width='1' d='M 150 126 L 214 126 L 214 180 L 150 180 L 150 126 L 162 114 L 226 114 L 226 168 L 214 180 M 214 126 L 226 114' />
	</g>
	<text x='182' y='159' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >cube</text>
	<!-- cylinder -->
	<g stroke='black' stroke-width='1' >
		<path fill='white' d='M 280 120 L 280 180 A 35 6 0 0 0 350 180 L 350 120 A 35 6 0 0 0 280 120' />
		<path fill='none' d='M 280 120 A 35 6 0 0 0 350 120' />
	</g>
	<text x='315' y='156' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >cylinder</text>
	<!-- explosion -->
	<polygon fill='pink' stroke='red' stroke-width='1' points='387.2,114.0 409.2,136.5 386.1,140.1 404.8,153.6 386.1,165.3 414.7,163.5 410.3,177.0 424.6,170.70001 427.9,194.1 438.9,167.1 453.2,186.9 457.6,165.3 477.4,179.7 470.8,158.1 493.9,159.9 474.1,149.1 492.8,139.2 469.7,135.6 478.5,123.9 456.5,127.5 458.7,105.0 440.0,129.3 427.9,115.8 422.4,131.1' />
	<text x='440' y='156' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >explosion</text>
	<!-- cross -->
	<path fill='white' stroke='black' stroke-width='1' d='M 50 215 V 240 H 25 V 260 H 50 V 285 H 70 V 260 H 95 V 240 H 70 V 215 z' />
	<!-- block-arrow -->
	<polygon fill='skyblue' stroke='navy' stroke-width='1' points='150.0,260.0 150.0,240.0 190.0,240.0 190.0,230.0 230.0,250.0 190.0,270.0 190.0,260.0' />

</svg>
</div>

<p class='fig_title'><a name='eA7AkqA2hXb'></a>Figure.11-1 デフォルトテーマの使用例</p>
<p>　　</p>
<p>　この 3 行目の <code>(with-theme (:default) ...)</code> というコードは、以下と等価です。<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>を利用することで、これらをすべて記述する手間を省くことができるわけです。なお、<a href='#2msfXdtEc6a'>3  章</a>の図形要素は、どちらかというと複雑な図形を組み立てるための部品のため、default <a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>による設定はありません。</p>
<pre class='code'>
(with-options (<span class='keyword3'>:font</span> '(<span class='keyword3'>:family</span> <span class='literal'>"sans-serif"</span>))
 (with-textbox-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
  (with-document-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:darkslategray</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:whitesmoke</span>)
   (with-folder-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:darkkhaki</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:cornsilk</span>)
    (with-person-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:maroon</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:linen</span>)
     (with-balloon-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:azure</span>)
      (with-memo-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:darkgreen</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:mintcream</span>
                          <span class='keyword3'>:fill2</span> <span class='keyword3'>:palegreen3</span> <span class='keyword3'>:crease</span> 30 <span class='keyword3'>:align</span> <span class='keyword3'>:left</span> <span class='keyword3'>:valign</span> <span class='keyword3'>:top</span>)
       (with-cube-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span> <span class='keyword3'>:fill2</span> <span class='keyword3'>:darkgray</span>)
        (with-cylinder-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
         (with-explosion-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:pink</span>)
          (with-cross-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
           (with-block-arrow-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span>)
            (<span class='keyword1'>locally</span> ... )))))))))))))
</pre>
<p>　<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>はそのまま使用することもできますし、<a href='#fgQNJlpxlTm'>部分的にカスタマイズ</a>することもできます。また、<a href='#dY1SXtflNNS'>イチから新しく作る</a>ことも可能です。これらの方法については後述します。</p>
<h3><a name='fg1xJPCiXVU'></a>11.1 利用できるテーマ</h3>
<p>　現在、以下の<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>が利用できます。</p>
<ul>
<li>default : <a href='#1s5LsvBYupX'>一般的な図形</a>の図形要素を設定しています。サンプルは <a href='#eA7AkqA2hXb'>Figure.11-1</a> を参照してください。</li>
</ul>
<h3><a name='dY1SXtflNNS'></a>11.2 新しいテーマの作成</h3>
<p>　register-theme を使えば、新しい<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>を作成することができます。以下は、default <a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>を定義している register-theme の使用例です。</p>
<pre class='code'>
(register-theme (<span class='keyword3'>:default</span>)
  (t           <span class='keyword3'>:font</span> '(<span class='keyword3'>:family</span> <span class='literal'>"sans-serif"</span>))
  (textbox     <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>         <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
  (document    <span class='keyword3'>:stroke</span> <span class='keyword3'>:darkslategray</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:whitesmoke</span>)
  (folder      <span class='keyword3'>:stroke</span> <span class='keyword3'>:darkkhaki</span>     <span class='keyword3'>:fill</span> <span class='keyword3'>:cornsilk</span>)
  (person      <span class='keyword3'>:stroke</span> <span class='keyword3'>:maroon</span>        <span class='keyword3'>:fill</span> <span class='keyword3'>:linen</span>)
  (balloon     <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span>          <span class='keyword3'>:fill</span> <span class='keyword3'>:azure</span>)
  (memo        <span class='keyword3'>:stroke</span> <span class='keyword3'>:darkgreen</span>     <span class='keyword3'>:fill</span> <span class='keyword3'>:mintcream</span>
               <span class='keyword3'>:fill2</span>  <span class='keyword3'>:palegreen3</span>    <span class='keyword3'>:crease</span> 30 <span class='keyword3'>:align</span> <span class='keyword3'>:left</span> <span class='keyword3'>:valign</span> <span class='keyword3'>:top</span>)
  (cube        <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>         <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span> <span class='keyword3'>:fill2</span> <span class='keyword3'>:darkgray</span>)
  (cylinder    <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>         <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
  (explosion   <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span>           <span class='keyword3'>:fill</span> <span class='keyword3'>:pink</span>)
  (cross       <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>         <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
  (block-arrow <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span>          <span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span>))
</pre>
<p class='fig_title'><a name='ejNFOP6Lepj'></a>Figure.11-2 register-theme によるテーマの作成</p>
<p>　　</p>
<p>　register-theme に続けて、括弧内に<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>名をキーワードで指定します。続けて、各図形要素に指定するスタイルを指定します。このとき、</p>
<ul>
<li>それぞれの指定は <code>(textbox :stroke :black :fill :white)</code> のようにリストで指定します
<ul>
<li>その先頭要素は、 with-xxx-options マクロの xxx 部分を指定してください</li>
<li>後続要素は、with-xxx-options のパラメータ部分をそのまま記述してください</li>
</ul>
</li>
<li>with-options に相当する指定は、 <code>(t  :font '(:family "sans-serif"))</code> のように <code>t</code> で始まるリストで指定してください</li>
</ul>
<h3><a name='fgQNJlpxlTm'></a>11.3 テーマのカスタマイズ</h3>
<p>　register-theme において、「ベースとする既存の<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>」を指定することで、差分だけを指定したカスタム<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>を作成することができます。以下の例では、default <a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>をベースとして my-theme という<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>を作成しています。</p>
<pre class='code'>
(register-theme (<span class='keyword3'>:my-theme</span> <span class='keyword3'>:default</span>)
  (cylinder <span class='keyword3'>:stroke</span> <span class='keyword3'>:maroon</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:beige</span>)
  (cross <span class='keyword3'>:stroke</span> <span class='keyword3'>:purple</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lavender</span>))
</pre>
<p class='fig_title'><a name='lxaclItxO4a'></a>Figure.11-3 register-theme でベーステーマを指定する例</p>
<p>　　</p>
<p>　上記の my-theme を使用して <a href='#eA7AkqA2hXb'>Figure.11-1</a> と同じ図面を描画した結果を以下に示します。カスタマイズした内容が反映されていることがわかります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='500' height='300'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- document -->
	<path fill='whitesmoke' stroke='darkslategray' stroke-width='1' d='M 25 25 L 25 75 A 23.333334 16.666666 0 0 0 60 75 A 23.333334 16.666666 1 0 1 95 75 L 95 25 Z' />
	<text x='60' y='56' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >doc</text>
	<!-- folder -->
	<g fill='cornsilk' stroke='darkkhaki' stroke-width='1' >
		<polygon points='145.0,25.0 145.0,75.0 225.0,75.0 225.0,35.0 215.0,25.0 195.0,25.0 185.0,15.0 155.0,15.0 145.0,25.0' />
		<polygon points='145.0,25.0 155.0,35.0 185.0,35.0 195.0,25.0 185.0,15.0 155.0,15.0 145.0,25.0' />
	</g>
	<text x='185' y='56' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >folder</text>
	<!-- person -->
	<path fill='linen' stroke='maroon' stroke-width='1' d='M 300 80 A 15 30 0 1 1 330 80 L 300 80 M 315 50 A 15 15 0 0 1 315 20 A 15 15 0 0 1 315 50' />
	<text x='315' y='94' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >person</text>
	<!-- balloon -->
	<path fill='azure' stroke='navy' stroke-width='1' d='M 410 30 L 410 10 L 426.66666 30 L 470 30 A 10 10 1 0 1 480 40 L 480 60 A 10 10 1 0 1 470 70 L 410 70 A 10 10 1 0 1 400 60 L 400 40 A 10 10 1 0 1 410 30 Z' />
	<text x='440' y='56' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >balloon</text>
	<!-- memo -->
	<g stroke='none' >
		<polygon fill='mintcream' points='20.0,125.0 20.0,175.0 70.0,175.0 80.0,155.0 100.0,160.0 100.0,125.0' />
		<polygon fill='#7CCD7C' points='70.0,175.0 100.0,160.0 80.0,155.0' />
		<g fill='none' stroke='darkgreen' stroke-width='1' >
			<polyline fill='none' points=' 20.0,150.0 20.0,125.0 100.0,125.0 100.0,160.0 70.0,175.0 20.0,175.0 20.0,150.0' />
			<polyline fill='none' points=' 100.0,160.0 80.0,155.0 70.0,175.0' />
		</g>
	</g>
	<text x='30' y='147' text-anchor='start' font-family='sans-serif' font-size='12pt' fill='black' >memo</text>
	<!-- cube -->
	<g stroke='none' >
		<polygon fill='darkgray' points='150.0,126.0 162.0,114.0 226.0,114.0 226.0,168.0 214.0,180.0 214.0,126.0' />
		<rect x='150' y='126' width='64' height='54' fill='lightgray' />
		<path fill='none' stroke='black' stroke-width='1' d='M 150 126 L 214 126 L 214 180 L 150 180 L 150 126 L 162 114 L 226 114 L 226 168 L 214 180 M 214 126 L 226 114' />
	</g>
	<text x='182' y='159' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >cube</text>
	<!-- cylinder -->
	<g stroke='maroon' stroke-width='1' >
		<path fill='beige' d='M 280 120 L 280 180 A 35 6 0 0 0 350 180 L 350 120 A 35 6 0 0 0 280 120' />
		<path fill='none' d='M 280 120 A 35 6 0 0 0 350 120' />
	</g>
	<text x='315' y='156' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >cylinder</text>
	<!-- explosion -->
	<polygon fill='pink' stroke='red' stroke-width='1' points='387.2,114.0 409.2,136.5 386.1,140.1 404.8,153.6 386.1,165.3 414.7,163.5 410.3,177.0 424.6,170.70001 427.9,194.1 438.9,167.1 453.2,186.9 457.6,165.3 477.4,179.7 470.8,158.1 493.9,159.9 474.1,149.1 492.8,139.2 469.7,135.6 478.5,123.9 456.5,127.5 458.7,105.0 440.0,129.3 427.9,115.8 422.4,131.1' />
	<text x='440' y='156' text-anchor='middle' font-family='sans-serif' font-size='12pt' fill='black' >explosion</text>
	<!-- cross -->
	<path fill='lavender' stroke='purple' stroke-width='1' d='M 50 215 V 240 H 25 V 260 H 50 V 285 H 70 V 260 H 95 V 240 H 70 V 215 z' />
	<!-- block-arrow -->
	<polygon fill='skyblue' stroke='navy' stroke-width='1' points='150.0,260.0 150.0,240.0 190.0,240.0 190.0,230.0 230.0,250.0 190.0,270.0 190.0,260.0' />

</svg>
</div>

<p class='fig_title'><a name='9n1DDDTm5Ta'></a>Figure.11-4 テーマのカスタマイズ例</p>
<p>　　</p>
<h2><a name='2QhgoP1QBEQ'></a>12 パラメータの詳細</h2>
<h3><a name='1rpUB3fre67'></a>12.1 色の指定</h3>
<p>　kaavio は SVG 形式で図形を生成するため、<a class='autolink' href='#1rpUB3fre67'>色の指定</a>は SVG の規格に準拠します。</p>
<ul>
<li><code>#rrggbb</code> 表記による、6 桁の16進指定。rr、gg、bb は順に赤、緑、青の成分で、 00〜ff の範囲で指定します。</li>
<li><code>#rgb</code> 表記による、3 桁の16進指定。r、g、b は順に赤、緑、青の成分で、 0〜f の範囲で指定します。これは <code>#rrggbb</code> の簡略表記で、たとえば #136 は #113366 に相当します。</li>
<li><a class='autolink' href='#bxjD7EmOfDd'>rgb 関数</a>による指定。これは <code>(rgb r g b)</code> の要領で使用します。r、g、b は順に赤、緑、青の成分で、それぞれ 0〜255 の整数または 0.0〜1.0 の小数点数で指定します。0.0〜1.0 の指定の場合、それに 255 をかけた値が指定されます。</li>
<li>色名での指定。 <code>:black</code> など先頭にコロンをつけたキーワードの形式で指定します。使用できる色の名前とサンプルは <a href='#dR01Jh257Q6'>14.2  節</a> を参照してください。</li>
</ul>
<p>　　</p>
<h3><a name='4HFjqmTuIU6'></a>12.2 ストローク</h3>
<p>　<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>とは、図形を描画する際の「線の引き方」を指定する情報です。</p>
<p>　このマニュアルのほとんどの部分では、 <code>:stroke :red</code> のように、 <code>:stroke</code> に続けて色名だけを指定しています。もう少し複雑な場合、 <code>:stroke '(:color :red :width 3)</code> といった要領で色名と太さを指定している個所もあります。実はこれらは全て簡易的な指定方法で、<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>にはもっと多くの情報が含まれています。以下に説明します。</p>
<ul>
<li><code>color</code> は線の色を指定します。<a class='autolink' href='#1rpUB3fre67'>色の指定</a>方法については <a href='#1rpUB3fre67'>12.1  節</a>を参照してください。</li>
<li><code>width</code> は線の太さです。数値で指定します。</li>
<li><code>opacity</code> は線の不透明度です。0.0 ～ 1.0 の数値で指定します。0.0 は完全な透明、1.0 は完全な不透明です。</li>
<li><code>linecap</code> は線の両端の形状です。詳細は後述します。</li>
<li><code>linejoin, miterlimit</code> は線が折れ曲ってできる角の形状に関する指定です。詳細は後述します。</li>
<li><code>dasharray, dashoffset</code> は点線や破線を描画する場合の指定です。詳細は後述します。</li>
</ul>
<p>　　</p>
<p>　それぞれについて細かい説明を始める前に、 <code>:stroke :red</code> といった記述がどのように扱われるのかを説明する必要があるでしょう。 <code>:stroke</code> によるこれらの指定は、実は全て <a class='autolink' href='#erFvEPTJvvx'>make-stroke 関数</a>に渡されます。<a class='autolink' href='#erFvEPTJvvx'>make-stroke 関数</a>は、渡されたのが単一の値の場合には、数値なら太さ、キーワードや文字列なら色名などと解釈します。そして <code>'(:color :red :width 3)</code> などの（複数要素からなる）リストの場合、名前付きパラメータの羅列として解釈します。</p>
<p>　<a class='autolink' href='#erFvEPTJvvx'>make-stroke 関数</a>はその結果として「<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>情報オブジェクト」を返しますが、その<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>情報オブジェクトを <a class='autolink' href='#erFvEPTJvvx'>make-stroke 関数</a>自身に渡した場合、そのまま返すようになっています。そのため、自分で明示的に <a class='autolink' href='#erFvEPTJvvx'>make-stroke 関数</a>を使って<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>情報オブジェクトを作成し、Common Lisp 変数に格納して複数の図形要素で使用する、ということも可能です。以下のように<sup><a name='footnote_ref12' href='#footnote12'>12</a></sup>。この関数の詳細は <a href='#erFvEPTJvvx'>14.1.37  節</a> を参照してください。</p>
<pre class='code'>
(<span class='keyword1'>let</span> ((st (make-stroke <span class='keyword3'>:color</span> <span class='keyword3'>:blue</span> <span class='keyword3'>:width</span> 4 <span class='keyword3'>:opacity</span> 0.3)))
  (rect   ... <span class='keyword3'>:stroke</span> st)
  (circle ... <span class='keyword3'>:stroke</span> st))
</pre>
<p>　　</p>
<h4><a name='ixMeyP7oEvS'></a>12.2.1 ストロークのデフォルト設定</h4>
<p>　さて、実際のところ、作図をする上でそれぞれの要素の線がバラバラな色や太さで描かれることはないでしょう。わかりやすい図面というのは、同じ種類の図形要素は同じ種類の線で描画されているなど、統制が取れているものです。このことは、多くの作図においては「まったく同じ<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>の指定を繰り返す場合が多い」ことを意味します。前述の方法で<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>情報オブジェクトを作成して使い回すことも可能ですが、もっとよい方法があります。それは「デフォルト<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>の変更」です。もともと、<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>はデフォルトで <code>:color :black :width 1</code> とされていますが、<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>を使えばこれを変更することができます<sup><a name='footnote_ref13' href='#footnote13'>13</a></sup>。以下の例では４種類の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>を描いていますが、B, C の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>ではデフォルト<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を変更しています。</p>
<pre class='code'>
(diagram (250 100)
  (grid)
  (rect '(50 50) 40 40)
  (with-options (<span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:width</span> 8 <span class='keyword3'>:linejoin</span> <span class='keyword3'>:round</span>))
    (rect '(100 50) 40 40)
    (rect '(150 50) 40 40 <span class='keyword3'>:stroke</span> <span class='keyword3'>:brown</span>))
  (rect '(200 50) 40 40 <span class='keyword3'>:stroke</span> <span class='keyword3'>:brown</span>)
  (text '( 50 90) <span class='literal'>"A"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>)
  (text '(100 90) <span class='literal'>"B"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>)
  (text '(150 90) <span class='literal'>"C"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>)
  (text '(200 90) <span class='literal'>"D"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='250' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='30' y='30' width='40' height='40' fill='none' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='80' y='30' width='40' height='40' fill='none' stroke='navy' stroke-width='8' stroke-linejoin='round' />
	<!-- rectangle -->
	<rect x='130' y='30' width='40' height='40' fill='none' stroke='brown' stroke-width='8' stroke-linejoin='round' />
	<!-- rectangle -->
	<rect x='180' y='30' width='40' height='40' fill='none' stroke='brown' stroke-width='1' />
	<!-- text -->
	<text x='50' y='90' text-anchor='middle' font-size='12pt' fill='black' >A</text>
	<!-- text -->
	<text x='100' y='90' text-anchor='middle' font-size='12pt' fill='black' >B</text>
	<!-- text -->
	<text x='150' y='90' text-anchor='middle' font-size='12pt' fill='black' >C</text>
	<!-- text -->
	<text x='200' y='90' text-anchor='middle' font-size='12pt' fill='black' >D</text>

</svg>
</div>

<p class='fig_title'><a name='g39KVcpoX7B'></a>Figure.12-1 with-options によるデフォルトストロークの変更</p>
<p>　　</p>
<p>　C の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>では「色しか指定していない」のに線が太くなっていることに注意してください。これは、「明示的に指定されていないものはデフォルトの設定が使用される」からです。<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>によってデフォルト設定が変更されており、B の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>では（ <code>:stroke</code> を省略することによって）全てがデフォルト設定で描画されました。C の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>では、 <code>:stroke :brown</code> によってデフォルト設定をベースとして色だけを変更している、というわけです。</p>
<p>　<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>では全体のデフォルト設定を変更しますが、図形要素によっては個別にデフォルト設定を持っています。たとえば、<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>であれば <a class='autolink' href='#5oL7bKJkowz'>with-textbox-options マクロ</a>でデフォルト設定を変更することができます。</p>
<p>　　</p>
<h4><a name='62KpZHJ4mOR'></a>12.2.2 linecap</h4>
<p>　<code>linecap</code> について説明します。これは <code>:butt :round :square</code> から指定するもので、以下のように線の端の形状が変わります。 <code>:butt</code> は指定した開始点／終了点で線が切れますが、 <code>:round :square</code> では開始点／終了点を少しはみ出すことに注意してください。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- line -->
	<polyline fill='none' stroke='lightgray' stroke-width='16' stroke-linecap='butt' points=' 50.0,25.0 150.0,25.0' />
	<!-- text -->
	<text x='100' y='30' text-anchor='middle' font-size='10pt' fill='black' >:butt</text>
	<!-- line -->
	<polyline fill='none' stroke='lightgray' stroke-width='16' stroke-linecap='round' points=' 50.0,50.0 150.0,50.0' />
	<!-- text -->
	<text x='100' y='55' text-anchor='middle' font-size='10pt' fill='black' >:round</text>
	<!-- line -->
	<polyline fill='none' stroke='lightgray' stroke-width='16' stroke-linecap='square' points=' 50.0,75.0 150.0,75.0' />
	<!-- text -->
	<text x='100' y='80' text-anchor='middle' font-size='10pt' fill='black' >:square</text>
	<!-- line -->
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='3 3 ' points=' 50.0,0.0 50.0,100.0' />
	<!-- line -->
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='3 3 ' points=' 150.0,0.0 150.0,100.0' />

</svg>
</div>

<p class='fig_title'><a name='eXOpfZPd3Nn'></a>Figure.12-2 linecap のサンプル</p>
<p>　　</p>
<h4><a name='kp3HeQv7roH'></a>12.2.3 linejoin と miterlimit</h4>
<p>　<code>linejoin</code> は、線が折れ曲る部分の形状を <code>:miter :round :bevel</code> から指定するもので、以下のように角の形状が変わります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='20' stroke-linejoin='miter' points=' 20.0,65.0 50.0,35.0 80.0,65.0' />
	<!-- text -->
	<text x='50' y='90' text-anchor='middle' font-size='12pt' fill='black' >:miter</text>
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='20' stroke-linejoin='round' points=' 120.0,65.0 150.0,35.0 180.0,65.0' />
	<!-- text -->
	<text x='150' y='90' text-anchor='middle' font-size='12pt' fill='black' >:round</text>
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='20' stroke-linejoin='bevel' points=' 220.0,65.0 250.0,35.0 280.0,65.0' />
	<!-- text -->
	<text x='250' y='90' text-anchor='middle' font-size='12pt' fill='black' >:bevel</text>

</svg>
</div>

<p class='fig_title'><a name='hP90ozCer2U'></a>Figure.12-3 linejoin のサンプル</p>
<p>　　</p>
<details>
<summary><strong>miterlimit についての説明は暫定です（作者自身 SVG 規格における miterlimit の意味が良くわかっていない）。</strong></summary>
<p>　<code>miterlimit</code> は、 <code>linejoin</code> が <code>:miter</code> の場合における、結合される線の太さに対する結合部の長さの比率を数値で指定します。デフォルト値は 4 です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='600' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='16' stroke-linejoin='miter' stroke-miterlimit='0' points=' 35.0,65.0 50.0,35.0 65.0,65.0' />
	<!-- text -->
	<text x='50' y='90' text-anchor='middle' font-size='12pt' fill='black' >0</text>
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='16' stroke-linejoin='miter' stroke-miterlimit='2' points=' 135.0,65.0 150.0,35.0 165.0,65.0' />
	<!-- text -->
	<text x='150' y='90' text-anchor='middle' font-size='12pt' fill='black' >2</text>
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='16' stroke-linejoin='miter' stroke-miterlimit='4' points=' 235.0,65.0 250.0,35.0 265.0,65.0' />
	<!-- text -->
	<text x='250' y='90' text-anchor='middle' font-size='12pt' fill='black' >4</text>
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='16' stroke-linejoin='miter' stroke-miterlimit='6' points=' 335.0,65.0 350.0,35.0 365.0,65.0' />
	<!-- text -->
	<text x='350' y='90' text-anchor='middle' font-size='12pt' fill='black' >6</text>
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='16' stroke-linejoin='miter' stroke-miterlimit='8' points=' 435.0,65.0 450.0,35.0 465.0,65.0' />
	<!-- text -->
	<text x='450' y='90' text-anchor='middle' font-size='12pt' fill='black' >8</text>
	<!-- line -->
	<polyline fill='none' stroke='gray' stroke-width='16' stroke-linejoin='miter' stroke-miterlimit='10' points=' 535.0,65.0 550.0,35.0 565.0,65.0' />
	<!-- text -->
	<text x='550' y='90' text-anchor='middle' font-size='12pt' fill='black' >10</text>

</svg>
</div>

<p class='fig_title'><a name='6vs2Vz9sOKj'></a>Figure.12-4 miterlimit のサンプル</p>
</details>
<p>　　</p>
<h4><a name='9Kl09MlELdq'></a>12.2.4 dasharray と dashoffset</h4>
<p>　<code>dasharray</code> と <code>dashoffset</code> は点線や破線を描画する際に指定します。 <code>dasharray</code> は繰り返される線の幅と間隔の幅を数値でリストにしたものを渡します。通常は <code>dasharray</code> で指定された点線・破線を最初から描画しますが、 <code>dashoffset</code> を指定すると開始するオフセットを指定できます。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='120'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- text -->
	<text x='100' y='20' text-anchor='middle' font-size='10pt' fill='black' >dasharray</text>
	<!-- text -->
	<text x='65' y='45' text-anchor='end' font-size='10pt' fill='black' >(2 2)</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='4' stroke-dasharray='2 2 ' points=' 70.0,40.0 160.0,40.0' />
	<!-- text -->
	<text x='65' y='65' text-anchor='end' font-size='10pt' fill='black' >(5 5)</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='4' stroke-dasharray='5 5 ' points=' 70.0,60.0 160.0,60.0' />
	<!-- text -->
	<text x='65' y='85' text-anchor='end' font-size='10pt' fill='black' >(7 3)</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='4' stroke-dasharray='7 3 ' points=' 70.0,80.0 160.0,80.0' />
	<!-- text -->
	<text x='65' y='105' text-anchor='end' font-size='10pt' fill='black' >(10 5 3 5)</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='4' stroke-dasharray='10 5 3 5 ' points=' 70.0,100.0 160.0,100.0' />
	<!-- text -->
	<text x='300' y='20' text-anchor='middle' font-size='10pt' fill='black' >dashoffset</text>
	<!-- text -->
	<text x='265' y='45' text-anchor='end' font-size='10pt' fill='black' >0</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='4' stroke-dasharray='20 10 ' stroke-dashoffset='0' points=' 270.0,40.0 380.0,40.0' />
	<!-- text -->
	<text x='265' y='65' text-anchor='end' font-size='10pt' fill='black' >5</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='4' stroke-dasharray='20 10 ' stroke-dashoffset='5' points=' 270.0,60.0 380.0,60.0' />
	<!-- text -->
	<text x='265' y='85' text-anchor='end' font-size='10pt' fill='black' >10</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='4' stroke-dasharray='20 10 ' stroke-dashoffset='10' points=' 270.0,80.0 380.0,80.0' />
	<!-- text -->
	<text x='265' y='105' text-anchor='end' font-size='10pt' fill='black' >15</text>
	<!-- line -->
	<polyline fill='none' stroke='black' stroke-width='4' stroke-dasharray='20 10 ' stroke-dashoffset='15' points=' 270.0,100.0 380.0,100.0' />

</svg>
</div>

<p class='fig_title'><a name='dpbOii37pGP'></a>Figure.12-5 dasharray, dashoffset のサンプル</p>
<p>　　</p>
<h4><a name='cPNmZfLmh3t'></a>12.2.5 ストロークにおけるパターンとグラデーションの指定</h4>
<p>　<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>でできるのは、単色で線や点線をひくことだけではありません。<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>や<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>を定義して、それを使うこともできます。たとえば以下では、赤色から青色に変化する<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>を作成し、<a class='autolink' href='#kJonRG8GtHF'>四角形</a>の<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>で使用しています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='140' height='70'>
	
	<!-- gradient1 : linear-gradient-definition -->
	<defs>
		<linearGradient id='gradient1' >
			<stop offset='0.0' stop-color='red' />
			<stop offset='1.0' stop-color='blue' />
		</linearGradient>
	</defs>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='20' y='10' width='100' height='50' fill='white' stroke='url(#gradient1)' stroke-width='4' />

</svg>
</div>

<p class='fig_title'><a name='4csTWXsTuKW'></a>Figure.12-6 グラデーションを使ったストロークのサンプル</p>
<p>　　</p>
<p>　上記のサンプルを生成するコードは以下になります。<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>と<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>の詳細については <a href='#kfrwaPRQE9I'>10  章</a>を参照してください。定義された<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>を指定するために、 <code>:stroke '(:url :gradient1 :width 4)</code> という記述をしています。</p>
<pre class='code'>
(diagram (140 70)
  (grid)
  (defgradient (<span class='keyword3'>:linear</span> <span class='keyword3'>:gradient1</span>)
    (0.00 <span class='keyword3'>:red</span>)
    (1.00 <span class='keyword3'>:blue</span>))
  (rect canvas.center 100 50 <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:gradient1</span> <span class='keyword3'>:width</span> 4) <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>))
</pre>
<p>　<a href='#4HFjqmTuIU6'>12.2  節</a>では説明を省略しましたが、<a class='autolink' href='#erFvEPTJvvx'>make-stroke 関数</a>は <code>url</code> というパラメータで<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>や<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>の ID を指定することができます。これを指定した場合、 <code>:color</code> パラメータは無視されます。</p>
<p>　　</p>
<h3><a name='dBUd7L4C3dx'></a>12.3 フィル</h3>
<p>　<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>とは、図形を描画する際の「<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>方」を指定する情報です。</p>
<p>　このマニュアルのほとんどの部分では、 <code>:fill :white</code> のように、 <code>:fill</code> に続けて色名だけを指定しています。もう少し複雑な場合、 <code>:fill '(:color :skyblue :opacity 0.3)</code> といった要領で色名と不透明度を指定している個所もあります。実はこれらは全て簡易的な指定方法で、<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>にはもっと多くの情報が含まれています。以下に説明します。</p>
<ul>
<li><code>color</code> は<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>の色を指定します。<a class='autolink' href='#1rpUB3fre67'>色の指定</a>方法については <a href='#1rpUB3fre67'>12.1  節</a>を参照してください。</li>
<li><code>opacity</code> は<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>の不透明度です。0.0 ～ 1.0 の数値で指定します。0.0 は完全な透明、1.0 は完全な不透明です。</li>
<li><code>rule</code> は複雑な図形における<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>の規則を指定するものです。詳細は後述します。</li>
</ul>
<p>　　</p>
<p>　それぞれについて細かい説明を始める前に、 <code>:fill :white</code> といった記述がどのように扱われるのかを説明する必要があるでしょう。 <code>:fill</code> によるこれらの指定は、実は全て <a class='autolink' href='#8VjSwPlDaAr'>make-fill 関数</a>に渡されます。<a class='autolink' href='#8VjSwPlDaAr'>make-fill 関数</a>は、渡されたのが単一の値の場合には、キーワードや文字列なら色名と解釈します。そして <code>'(:color :red :width 3)</code> などの（複数要素からなる）リストの場合、名前付きパラメータの羅列として解釈します。</p>
<p>　<a class='autolink' href='#8VjSwPlDaAr'>make-fill 関数</a>はその結果として「<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>情報オブジェクト」を返しますが、その<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>情報オブジェクトを <a class='autolink' href='#8VjSwPlDaAr'>make-fill 関数</a>自身に渡した場合、そのまま返すようになっています。そのため、自分で明示的に <a class='autolink' href='#8VjSwPlDaAr'>make-fill 関数</a>を使って<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>情報オブジェクトを作成し、Common Lisp 変数に格納して複数の図形要素で使用する、ということも可能です。以下のように<sup><a name='footnote_ref14' href='#footnote14'>14</a></sup>。この関数の詳細は <a href='#8VjSwPlDaAr'>14.1.31  節</a>を参照してください。</p>
<pre class='code'>
(<span class='keyword1'>let</span> ((fl (make-fill <span class='keyword3'>:color</span> <span class='keyword3'>:blue</span> <span class='keyword3'>:opacity</span> 0.3)))
  (rect   ... <span class='keyword3'>:fill</span> fl)
  (circle ... <span class='keyword3'>:fill</span> fl))
</pre>
<p>　　</p>
<h4><a name='hnD8TtKB1bS'></a>12.3.1 フィルのデフォルト設定</h4>
<p>　<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>の説明では「デフォルト設定がある」という話をしましたが、<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>においてもデフォルト設定があります。<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>はデフォルトで <code>:color :none</code> とされているため、図形を描画すると<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>無し（つまり背景が透けて見える）になります。<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>を使えばこれを変更することができます。以下の例では４種類の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>を描いていますが、B, C の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>ではデフォルトの<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>を変更しています。</p>
<pre class='code'>
(diagram (250 100)
  (grid)
  (rect '(50 50) 40 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
  (with-options (<span class='keyword3'>:fill</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:red</span> <span class='keyword3'>:opacity</span> 0.2))
    (rect '(100 50) 40 40)
    (rect '(150 50) 40 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:blue</span>))
  (rect '(200 50) 40 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span>)
  (text '( 50 90) <span class='literal'>"A"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>)
  (text '(100 90) <span class='literal'>"B"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>)
  (text '(150 90) <span class='literal'>"C"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>)
  (text '(200 90) <span class='literal'>"D"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='250' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='30' y='30' width='40' height='40' fill='white' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='80' y='30' width='40' height='40' fill='red' fill-opacity='0.2' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='130' y='30' width='40' height='40' fill='blue' fill-opacity='0.2' stroke='black' stroke-width='1' />
	<!-- rectangle -->
	<rect x='180' y='30' width='40' height='40' fill='lightgray' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='50' y='90' text-anchor='middle' font-size='12pt' fill='black' >A</text>
	<!-- text -->
	<text x='100' y='90' text-anchor='middle' font-size='12pt' fill='black' >B</text>
	<!-- text -->
	<text x='150' y='90' text-anchor='middle' font-size='12pt' fill='black' >C</text>
	<!-- text -->
	<text x='200' y='90' text-anchor='middle' font-size='12pt' fill='black' >D</text>

</svg>
</div>

<p class='fig_title'><a name='3bmxM1d5ylR'></a>Figure.12-7 with-options によるデフォルトフィルの変更</p>
<p>　　</p>
<p>　C の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>では「色しか指定していない」のに半透明になっていることに注意してください。これは、「明示的に指定されていないものはデフォルトの設定が使用される」からです。<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>によってデフォルト設定が変更されており、B の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>では（ <code>:fill</code> を省略することによって）全てがデフォルト設定で描画されました。C の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>では、 <code>:fill :blue</code> によってデフォルト設定をベースとして色だけを変更している、というわけです。</p>
<p>　<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>では全体のデフォルト設定を変更しますが、図形要素によっては個別にデフォルト設定を持っています。たとえば、<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>であれば <a class='autolink' href='#5oL7bKJkowz'>with-textbox-options マクロ</a>でデフォルト設定を変更することができます。</p>
<p>　　</p>
<h4><a name='kF4odxGhtYL'></a>12.3.2 fill における rule パラメータ</h4>
<p>　<code>rule</code> パラメータについて説明します。これは <code>:nonezero :evenodd</code> から指定するもので、以下のように複雑な図形の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>方が変わります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='120'>
	
	<!-- polygon -->
	<polygon fill='skyblue' fill-rule='nonzero' stroke='black' stroke-width='1' points='125.0,10.0 95.0,90.0 165.0,40.0 85.0,40.0 155.0,90.0' />
	<!-- text -->
	<text x='125' y='110' text-anchor='middle' font-size='12pt' fill='black' >:nonzero</text>
	<!-- polygon -->
	<polygon fill='skyblue' fill-rule='evenodd' stroke='black' stroke-width='1' points='275.0,10.0 245.0,90.0 315.0,40.0 235.0,40.0 305.0,90.0' />
	<!-- text -->
	<text x='275' y='110' text-anchor='middle' font-size='12pt' fill='black' >:evenodd</text>

</svg>
</div>

<p class='fig_title'><a name='9n3NgPBJGzS'></a>Figure.12-8 fill における rule のサンプル</p>
<details>
<summary><a href='#9n3NgPBJGzS'>Figure.12-8</a> のソースはこちら</summary>
<pre class='code'>
(diagram (400 120)
  (<span class='keyword1'>let</span> ((points '((50 10) (20 90) (90 40) (10 40) (80 90))))
    (with-subcanvas ('(75 0) 100 100)
      (polygon points <span class='keyword3'>:fill</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:skyblue</span> <span class='keyword3'>:rule</span> <span class='keyword3'>:nonzero</span>))
      (text '(50 110) <span class='literal'>":nonzero"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>))
    (with-subcanvas ('(225 0) 100 100)
      (polygon points <span class='keyword3'>:fill</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:skyblue</span> <span class='keyword3'>:rule</span> <span class='keyword3'>:evenodd</span>))
      (text '(50 110) <span class='literal'>":evenodd"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>))))
</pre>
</details>
<p>　　</p>
<p>　これについては、ひとまずのところあまり使用頻度が高いとは思われないため、<a class='autolink' href='#l10jSaJeUDk'>SVG本</a>の説明を引用するに留めます。</p>
<blockquote>
<p><strong>塗りつぶしのルールの説明</strong></p>
<p>　完全を期すために、fill-rule がどのように機能するかを説明しますが、悩む必要はありません −− 詳細を知らなくてもルールを利用することはできます。nonzero ルールは、問題になっている点から無限遠まで線を引くことで、その点が<a class='autolink' href='#5vGRm9AMypB'>多角形</a>の内側か外側かを判断します。その線が<a class='autolink' href='#5vGRm9AMypB'>多角形</a>の線と何回交差するかを数え、<a class='autolink' href='#5vGRm9AMypB'>多角形</a>の線が右から左に向かって描かれている場合は1を足し、左から右に向かって描かれている場合は1を引きます。合計がゼロであれば、その点は<a class='autolink' href='#5vGRm9AMypB'>多角形</a>の外側にあります。合計がゼロ以外（nonzero）であれば、その点は<a class='autolink' href='#5vGRm9AMypB'>多角形</a>の内側にあります。</p>
<p>　evenodd ルールも、問題になっている点から無限遠まで線を引きますが、その線が<a class='autolink' href='#5vGRm9AMypB'>多角形</a>の線と何回交差するかを単純に数えます。交差した回数が奇数であれば、その点は内側にあります。偶数であれば、外側にあります。</p>
</blockquote>
<p>　　</p>
<h4><a name='7K8A5tBrYlW'></a>12.3.3 フィルにおけるパターンとグラデーションの指定</h4>
<p>　<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>でできるのは、単色で塗り潰すことだけではありません。<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>や<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>を定義して、それを使うこともできます。たとえば以下では、細い斜め線の<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>を作成し、<a class='autolink' href='#kJonRG8GtHF'>四角形</a>の中に敷き詰めています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='140' height='70'>
	
	<!-- tile : pattern-definition -->
	<defs>
		<pattern id='tile' width='5' height='5' patternUnits='userSpaceOnUse' >
			<!-- line -->
			<polyline fill='none' stroke='blue' stroke-width='0.3' points=' 5.0,0.0 0.0,5.0' />
			
		</pattern>
	</defs>
	<!-- rectangle -->
	<rect x='20' y='10' width='100' height='50' fill='url(#tile)' stroke='black' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='6bZICAqfljz'></a>Figure.12-9 パターンを使った塗り潰しのサンプル</p>
<p>　　</p>
<p>　上記のサンプルを生成するコードは以下になります。<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>と<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>の詳細については <a href='#kfrwaPRQE9I'>10  章</a>を参照してください。定義された<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>を指定するために、 <code>:fill '(:url :tile)</code> という記述をしています。</p>
<pre class='code'>
(diagram (140 70)
  (defpattern (<span class='keyword3'>:tile</span> <span class='keyword3'>:width</span> 5 <span class='keyword3'>:height</span> 5 <span class='keyword3'>:units</span> <span class='keyword3'>:userSpaceOnUse</span>)
    (line '((5 0) (0 5)) <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:color</span> <span class='keyword3'>:blue</span> <span class='keyword3'>:width</span> 0.3)))
  (rect canvas.center 100 50 <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> '(<span class='keyword3'>:url</span> <span class='keyword3'>:tile</span>)))
</pre>
<p>　<a href='#dBUd7L4C3dx'>12.3  節</a>では説明を省略しましたが、<a class='autolink' href='#8VjSwPlDaAr'>make-fill 関数</a>は <code>url</code> というパラメータで<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>や<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>のID を指定することができます。これを指定した場合、 <code>:color</code> など他のパラメータは無視されます。</p>
<p>　　</p>
<h3><a name='3kZ9FkounyK'></a>12.4 フォント</h3>
<p>　kaavio では様々な図形要素に<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を付与できます。おおむね Web における<a class='autolink' href='#3kZ9FkounyK'>フォント</a>指定と同じですが、醜いハックも含まれています。</p>
<p>　通常の使用では、 <code>:font 24</code> のようにサイズだけを指定したりします。もう少し複雑な場合、 <code>:font '(:family "monospace" :size 16)</code> といった要領で<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の種類とサイズを指定することもあります。実はこれらは全て簡易的な指定方法で、<a class='autolink' href='#3kZ9FkounyK'>フォント</a>にはもっと多くの情報が含まれています。以下に説明します。</p>
<ul>
<li><code>family</code> は<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の名称を文字列で指定します。</li>
<li><code>size</code> は<a class='autolink' href='#3kZ9FkounyK'>フォント</a>のサイズを指定します（厳密には違うらしいのですが、詳細は後述します）。</li>
<li><code>fill</code> は<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> は<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の輪郭線を指定します。<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の場合、通常は<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>のみで輪郭線は指定しません。</li>
<li><code>style</code> はスタイルの指定です。 <code>:normal :italic :oblique</code> のいずれかから選択します。</li>
<li><code>decoration</code> は装飾の指定です。 <code>:none :underline :overline :line-through</code> のいずれかから選択します。</li>
<li><code>weight</code> は文字の太さの指定です。 <code>:normal :bold :bolder :lighter</code> のいずれか、または 100 200 300 400 500 600 700 800 900 のいずれかです。</li>
<li><code>filter</code> は<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>に適用する<a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>の指定です。</li>
<li><code>line-spacing</code> は、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>が複数行になる場合の行間を指定します。</li>
<li><code>width-spice</code> は、「<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>が実際に描画される幅」を計算するための目安となる係数を指定します。詳細は後述します。</li>
</ul>
<p>　　</p>
<p>　それぞれについて細かい説明を始める前に、 <code>:font 24</code> といった記述がどのように扱われるのかを説明する必要があるでしょう。 <code>:font</code> によるこれらの指定は、実は全て <a class='autolink' href='#1LiwgKPPHPV'>make-font 関数</a>に渡されます。<a class='autolink' href='#1LiwgKPPHPV'>make-font 関数</a>は、渡されたのが単一の値の場合には、数値ならサイズ、キーワードなら色名、文字列なら<a class='autolink' href='#3kZ9FkounyK'>フォント</a>ファミリ名などと解釈します。そして <code>'(:family "sans serif" :size 10)</code> などの（複数要素からなる）リストの場合、名前付きパラメータの羅列として解釈します。</p>
<p>　<a class='autolink' href='#1LiwgKPPHPV'>make-font 関数</a>はその結果として「<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報オブジェクト」を返しますが、その<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報オブジェクトを <a class='autolink' href='#1LiwgKPPHPV'>make-font 関数</a>自身に渡した場合、そのまま返すようになっています。そのため、自分で明示的に <a class='autolink' href='#1LiwgKPPHPV'>make-font 関数</a>を使って<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報オブジェクトを作成し、Common Lisp 変数に格納して複数の図形要素で使用する、ということも可能です。以下のように。この関数の詳細は <a href='#1LiwgKPPHPV'>14.1.32  節</a>を参照してください。</p>
<pre class='code'>
(<span class='keyword1'>let</span> ((fnt (make-font <span class='keyword3'>:family</span> <span class='literal'>"Courier New, monospace"</span> <span class='keyword3'>:size</span> 12)))
  (text   ... <span class='keyword3'>:font</span> fnt)
  (paragraph ... <span class='keyword3'>:font</span> fnt))
</pre>
<p>　　</p>
<h4><a name='6ogELpgtwxO'></a>12.4.1 フォントのデフォルト設定</h4>
<p>　実際のところ、作図をする上でそれぞれの<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>がバラバラな<a class='autolink' href='#3kZ9FkounyK'>フォント</a>で描かれることはないでしょう。わかりやすい図面というのは、同じ種類の図形要素は同じ種類の線で描画されているなど、統制が取れているものです。このことは、複数の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を含む作図においては「まったく同じ<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の指定を繰り返す場合が多い」ことを意味します。前述の方法で<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報オブジェクトを作成して使い回すことも可能ですが、もっとよい方法があります。それは「デフォルト<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の変更」です。もともと、<a class='autolink' href='#3kZ9FkounyK'>フォント</a>はデフォルトで <code>:size 12 :fill :black</code> とされています<sup><a name='footnote_ref15' href='#footnote15'>15</a></sup>が、<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>を使えばこれを変更することができます。以下の例では４種類の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を描いていますが、B, C の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>はデフォルト<a class='autolink' href='#3kZ9FkounyK'>フォント</a>を変更しています。</p>
<pre class='code'>
(diagram (250 100)
  (grid)
  (text '(30 70) <span class='literal'>"A"</span> <span class='keyword3'>:font</span> 36)
  (with-options (<span class='keyword3'>:font</span> '(<span class='keyword3'>:size</span> 36 <span class='keyword3'>:fill</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:style</span> <span class='keyword3'>:italic</span> <span class='keyword3'>:weight</span> <span class='keyword3'>:bold</span>))
    (text '(80 70) <span class='literal'>"B"</span>)
    (text '(130 70) <span class='literal'>"C"</span> <span class='keyword3'>:font</span> '(<span class='keyword3'>:fill</span> <span class='keyword3'>:brown</span>)))
  (text '(190 70) <span class='literal'>"D"</span> <span class='keyword3'>:font</span> '(<span class='keyword3'>:size</span> 36 <span class='keyword3'>:fill</span> <span class='keyword3'>:brown</span>)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='250' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- text -->
	<text x='30' y='70' text-anchor='start' font-size='36pt' fill='black' >A</text>
	<!-- text -->
	<text x='80' y='70' text-anchor='start' font-size='36pt' fill='navy' font-style='italic' font-weight='bold' >B</text>
	<!-- text -->
	<text x='130' y='70' text-anchor='start' font-size='36pt' fill='brown' font-style='italic' font-weight='bold' >C</text>
	<!-- text -->
	<text x='190' y='70' text-anchor='start' font-size='36pt' fill='brown' >D</text>

</svg>
</div>

<p class='fig_title'><a name='aImv1ABfsGj'></a>Figure.12-10 with-options によるデフォルトフォントの変更</p>
<p>　　</p>
<p>　C の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>では「色しか指定していない」のに文字装飾が変更されていることに注意してください。これは、「明示的に指定されていないものはデフォルトの設定が使用される」からです。<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>によってデフォルト設定が変更されており、B の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>では（ <code>:font</code> を省略することによって）全てがデフォルト設定で描画されました。C の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>では、 <code>:font :brown</code> によってデフォルト設定をベースとして色だけを変更している、というわけです。</p>
<p>　<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>では全体のデフォルト設定を変更しますが、図形要素によっては個別にデフォルト設定を持っています。たとえば、<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>であれば <a class='autolink' href='#5oL7bKJkowz'>with-textbox-options マクロ</a>でデフォルト設定を変更することができます。</p>
<p>　　</p>
<h4><a name='kEzS3nMEHGk'></a>12.4.2 フォントにおける family パラメータ</h4>
<p>　family パラメータについては、<a class='autolink' href='#l10jSaJeUDk'>SVG本</a>の説明を引用しておきます（手抜きでごめんなさい）。</p>
<blockquote>
<p><strong>font-family</strong></p>
<p>この値に指定するのは、<a class='autolink' href='#3kZ9FkounyK'>フォント</a>ファミリー名または総称ファミリー名をカンマで区切って並べたリストです。これはフォールバック値のリストです。つまり、SVGビューアーは、自身が認識する最初のファミリー名を使用します。総称ファミリー名は、リスト内の最後に指定しなければなりません。SVG ビューアーに義務づけられているのは、総称ファミリー名を認識することと、それらを表示できる<a class='autolink' href='#3kZ9FkounyK'>フォント</a>を備えていることです。総称ファミリー名は、serif、 sans-serif、 monospace、 fantasy、 cursive です。 serif （セリフ）<a class='autolink' href='#3kZ9FkounyK'>フォント</a>には、<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>の端に「セリフ」と呼ばれる小さな飾り −−「うろこ」や「ひげ」などとも呼ばれます −− があります。sans-serif （サンセリフ）<a class='autolink' href='#3kZ9FkounyK'>フォント</a>には、セリフがありません。‥‥（中略）‥‥serif <a class='autolink' href='#3kZ9FkounyK'>フォント</a>も sans-serif <a class='autolink' href='#3kZ9FkounyK'>フォント</a>も、プロポーショナル<a class='autolink' href='#3kZ9FkounyK'>フォント</a>（可変幅<a class='autolink' href='#3kZ9FkounyK'>フォント</a>）です。つまり、大文字の「M」の幅と「I」の幅は異なります。 monospace （モノスペース）<a class='autolink' href='#3kZ9FkounyK'>フォント</a>は、タイプライターの文字のように、すべてのグリフが同じ幅を持つ<a class='autolink' href='#3kZ9FkounyK'>フォント</a>です（等幅<a class='autolink' href='#3kZ9FkounyK'>フォント</a>、固定幅<a class='autolink' href='#3kZ9FkounyK'>フォント</a>などと呼ばれます）。これは、セリフがある<a class='autolink' href='#3kZ9FkounyK'>フォント</a>でも、ない<a class='autolink' href='#3kZ9FkounyK'>フォント</a>でもかまいません。 fantasy <a class='autolink' href='#3kZ9FkounyK'>フォント</a>と cursive <a class='autolink' href='#3kZ9FkounyK'>フォント</a>は、ブラウザーやSVGビューアーによって実装が大きく異なる可能性があります。</p>
</blockquote>
<p>　　</p>
<h4><a name='8v1oWuXm6mt'></a>12.4.3 フォントにおける stroke と fill</h4>
<p>　前述の通り、<a class='autolink' href='#3kZ9FkounyK'>フォント</a>では通常 stroke を指定しません。しかし、逆に fill を無し（あるいは背景色同等）にして stroke を指定することで縁取られた<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を描画することもできます。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='190'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- text -->
	<text x='10' y='50' text-anchor='start' font-family='sans-serif' font-size='40pt' fill='white' stroke='black' stroke-width='2' font-weight='bold' >Abcdefgh</text>
	<!-- text -->
	<text x='270' y='30' text-anchor='start' font-family='sans-serif' font-size='12pt' fill='black' stroke='none' stroke-width='2' font-weight='normal' >:stroke :black</text>
	<!-- text -->
	<text x='270' y='50' text-anchor='start' font-family='sans-serif' font-size='12pt' fill='black' stroke='none' stroke-width='2' font-weight='normal' >:fill :white</text>
	<!-- text -->
	<text x='10' y='110' text-anchor='start' font-family='sans-serif' font-size='40pt' fill='black' stroke='none' stroke-width='2' font-weight='bold' >Abcdefgh</text>
	<!-- text -->
	<text x='270' y='90' text-anchor='start' font-family='sans-serif' font-size='12pt' fill='black' stroke='none' stroke-width='2' font-weight='normal' >:stroke :none</text>
	<!-- text -->
	<text x='270' y='110' text-anchor='start' font-family='sans-serif' font-size='12pt' fill='black' stroke='none' stroke-width='2' font-weight='normal' >:fill :black</text>
	<!-- text -->
	<text x='10' y='170' text-anchor='start' font-family='sans-serif' font-size='40pt' fill='black' stroke='black' stroke-width='2' font-weight='bold' >Abcdefgh</text>
	<!-- text -->
	<text x='270' y='150' text-anchor='start' font-family='sans-serif' font-size='12pt' fill='black' stroke='none' stroke-width='2' font-weight='normal' >:stroke :black</text>
	<!-- text -->
	<text x='270' y='170' text-anchor='start' font-family='sans-serif' font-size='12pt' fill='black' stroke='none' stroke-width='2' font-weight='normal' >:fill :black</text>

</svg>
</div>

<p class='fig_title'><a name='gbHwYj2Ai06'></a>Figure.12-11 font における stroke と fill</p>
<p>　　</p>
<h4><a name='fxm5l02ul2O'></a>12.4.4 size と line-spacing</h4>
<p>　<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の size 情報については、まず <a class='autolink' href='#l10jSaJeUDk'>SVG本</a>の説明を引用しておきましょう。</p>
<blockquote>
<p><strong>font-size</strong></p>
<p>この値には、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>が複数行になる場合の、ベースラインからベースラインまでのグリフの距離を指定します（SVGでは、複数行の <code>&lt;text&gt;</code> の内容は自分自身で配置しなければならないので、この概念は少々空論的です）。</p>
</blockquote>
<p>　上記のようなわけで、kaavio では<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報の size は単純に「<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の縦方向のサイズである」という立場をとっています。正確には、「文字の上端からベースラインまでの距離」です。そして、paragraph などで複数行を描画する場合の「ベースラインから次行の上端までの距離」を <code>line-spacing</code> で指定します。以下は、 <code>:font '(:size 50 :line-spacing 30)</code> で描画した場合のサンプルです。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='170'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- paragraph -->
	<g text-anchor='start' font-size='50pt' fill='black' >
		<text x='130' y='70' >Abcdefg</text>
		<text x='130' y='150' >Hijklmn</text>
	</g>
	<!-- line -->
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 2 ' points=' 130.0,0.0 130.0,160.0' />
	<!-- line -->
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 2 ' points=' 0.0,20.0 400.0,20.0' />
	<!-- line -->
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 2 ' points=' 0.0,70.0 400.0,70.0' />
	<!-- line -->
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 2 ' points=' 0.0,100.0 400.0,100.0' />
	<!-- line -->
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 2 ' points=' 0.0,150.0 400.0,150.0' />
	<!-- line -->
	<polyline fill='none' stroke='blue' stroke-width='1' points=' 110.0,20.0 110.0,70.0' />
	<polyline fill='none' stroke='blue' stroke-width='1' points='115.0,28.660254 110,20 105.0,28.660254' />
	<polyline fill='none' stroke='blue' stroke-width='1' points='105.0,61.339745 110,70 115.0,61.339745' />
	<!-- text -->
	<text x='100' y='50' text-anchor='end' font-size='12pt' fill='blue' >size</text>
	<!-- line -->
	<polyline fill='none' stroke='blue' stroke-width='1' points=' 110.0,70.0 110.0,100.0' />
	<polyline fill='none' stroke='blue' stroke-width='1' points='115.0,78.660255 110,70 105.0,78.660255' />
	<polyline fill='none' stroke='blue' stroke-width='1' points='105.0,91.339745 110,100 115.0,91.339745' />
	<!-- text -->
	<text x='100' y='90' text-anchor='end' font-size='12pt' fill='blue' >line-spacing</text>

</svg>
</div>

<p class='fig_title'><a name='8UprDrMi9gT'></a>Figure.12-12 font における size と line-spacing</p>
<p>　　</p>
<p>　見ての通り、文字によってはベースラインよりも下に描画されることがありますから、 <code>size</code> によって <code>line-spacing</code> も調整する必要があります。</p>
<p>　　</p>
<h4><a name='iFx6Ice5zu7'></a>12.4.5 width-spice</h4>
<p>　<code>width-spice</code> は、kaavio におけるもっとも醜いハックです。簡単に言えば、「<a class='autolink' href='#3kZ9FkounyK'>フォント</a>サイズと<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>長にかける係数を指定可能にし、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の描画幅の計算に使う」というものです。というのも、「<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>がその<a class='autolink' href='#3kZ9FkounyK'>フォント</a>設定で実際に描画される場合、どれだけの幅をとることになるかわからない」ためです。たとえば、<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>では明示的に幅を指定しない場合は<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>から幅を自動計算しようとしますが、width-spice の値によって結果は以下のように変わります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='450' height='200'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- text -->
	<text x='120' y='20' text-anchor='middle' font-family='Courier New, monospace' font-size='12pt' fill='black' >Courier New</text>
	<!-- textbox -->
	<rect x='74.0' y='34' width='92.0' height='32' fill='lightgray' stroke='gray' stroke-width='1' />
	<text x='120.0' y='56' text-anchor='middle' font-family='Courier New, monospace' font-size='12pt' fill='red' >width-spice 0.4</text>
	<!-- textbox -->
	<rect x='56.0' y='74' width='128.0' height='32' fill='lightgray' stroke='gray' stroke-width='1' />
	<text x='120.0' y='96' text-anchor='middle' font-family='Courier New, monospace' font-size='12pt' fill='red' >width-spice 0.6</text>
	<!-- textbox -->
	<rect x='38.0' y='114' width='164.0' height='32' fill='lightgray' stroke='gray' stroke-width='1' />
	<text x='120.0' y='136' text-anchor='middle' font-family='Courier New, monospace' font-size='12pt' fill='red' >width-spice 0.8</text>
	<!-- textbox -->
	<rect x='20.0' y='154' width='200.0' height='32' fill='lightgray' stroke='gray' stroke-width='1' />
	<text x='120.0' y='176' text-anchor='middle' font-family='Courier New, monospace' font-size='12pt' fill='red' >width-spice 1.0</text>
	<!-- text -->
	<text x='330' y='20' text-anchor='middle' font-family='serif' font-size='12pt' fill='black' >serif font</text>
	<!-- textbox -->
	<rect x='284.0' y='34' width='92.0' height='32' fill='lightgray' stroke='gray' stroke-width='1' />
	<text x='330.0' y='56' text-anchor='middle' font-family='serif' font-size='12pt' fill='red' >width-spice 0.4</text>
	<!-- textbox -->
	<rect x='266.0' y='74' width='128.0' height='32' fill='lightgray' stroke='gray' stroke-width='1' />
	<text x='330.0' y='96' text-anchor='middle' font-family='serif' font-size='12pt' fill='red' >width-spice 0.6</text>
	<!-- textbox -->
	<rect x='248.0' y='114' width='164.0' height='32' fill='lightgray' stroke='gray' stroke-width='1' />
	<text x='330.0' y='136' text-anchor='middle' font-family='serif' font-size='12pt' fill='red' >width-spice 0.8</text>
	<!-- textbox -->
	<rect x='230.0' y='154' width='200.0' height='32' fill='lightgray' stroke='gray' stroke-width='1' />
	<text x='330.0' y='176' text-anchor='middle' font-family='serif' font-size='12pt' fill='red' >width-spice 1.0</text>

</svg>
</div>

<p class='fig_title'><a name='1Z9lqmEkvJx'></a>Figure.12-13 width-spice のサンプル</p>
<details>
<summary><a href='#1Z9lqmEkvJx'>Figure.12-13</a> のソースはこちら</summary>
<pre class='code'>
(diagram (450 200)
  (grid)
  (<span class='keyword1'>labels</span> ((impl (x y spice)
             (<span class='keyword1'>let</span> ((txt (format nil <span class='literal'>"width-spice ~A"</span> spice)))
               (textbox `(,x ,y) txt <span class='keyword3'>:font</span> `(<span class='keyword3'>:width-spice</span> ,spice)))))
    (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:gray</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span>
                   <span class='keyword3'>:font</span> '(<span class='keyword3'>:fill</span> <span class='keyword3'>:red</span> <span class='keyword3'>:size</span> 12 <span class='keyword3'>:family</span> <span class='literal'>"Courier New, monospace"</span>))
      (text '(120 20) <span class='literal'>"Courier New"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span> <span class='keyword3'>:font</span> '(<span class='keyword3'>:fill</span> <span class='keyword3'>:black</span>))
      (impl 120  50 0.4)
      (impl 120  90 0.6)
      (impl 120 130 0.8)
      (impl 120 170 1.0))
    (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:gray</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span>
                   <span class='keyword3'>:font</span> '(<span class='keyword3'>:fill</span> <span class='keyword3'>:red</span> <span class='keyword3'>:size</span> 12 <span class='keyword3'>:family</span> <span class='literal'>"serif"</span>))
      (text '(330 20) <span class='literal'>"serif font"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span> <span class='keyword3'>:font</span> '(<span class='keyword3'>:fill</span> <span class='keyword3'>:black</span>))
      (impl 330  50 0.4)
      (impl 330  90 0.6)
      (impl 330 130 0.8)
      (impl 330 170 1.0))))
</pre>
</details>
<p>　　</p>
<p>　上記の結果を見る限りでは、Courier New <a class='autolink' href='#3kZ9FkounyK'>フォント</a>では 0.8 程度、serif <a class='autolink' href='#3kZ9FkounyK'>フォント</a>では 0.7 弱が spice 値としてよさそうに思えます。しかし、プロポーショナル<a class='autolink' href='#3kZ9FkounyK'>フォント</a>では（文字数が同じでも）文字列内で使われている文字の種類によって変わってしまいますし、そもそも制御できない外部環境によって描画は変わりえるのです。上記サンプルの左側は <code>:family</code> 指定で <code>Courier New, monospace</code> としていますから、Courier New <a class='autolink' href='#3kZ9FkounyK'>フォント</a>がない環境で表示すれば monospace が使用されるでしょう。それによって、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の実際の描画幅は大きく変化してしまいます。</p>
<p>　width-spice は kaavio の開発初期の段階で導入されたものですが、現在ではあまり良くないアイデアとみなされています。<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>などでは幅を明示的に指定するのが現実的であり、その他<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の描画幅においてもなんらかの仮定に依存するようなデザインをしないことが賢明でしょう<sup><a name='footnote_ref16' href='#footnote16'>16</a></sup>。</p>
<p>　　</p>
<h3><a name='iu9Ovm00KHn'></a>12.5 IDと参照</h3>
<p>　たいていの場合、図中の要素は互いに関係しています。<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>などで接続されることもありますし、それ以外の位置関係に意味があるかもしれません。kaavio では、個々の図形要素に ID を付与し、その ID を指定することで図形要素どうしを接続したり位置関係を指定したりできます。</p>
<p>　このマニュアルの<a href='#9LLncE6hWlx'>冒頭に出てきたサンプル</a>は、以下のようなものでした。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (rect   '( 50  50) 80 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:powderblue</span> <span class='keyword3'>:id</span> <span class='keyword3'>:x</span>)
  (circle '(250 100) 40    <span class='keyword3'>:fill</span> <span class='keyword3'>:moccasin</span>   <span class='keyword3'>:id</span> <span class='keyword3'>:y</span>)
  (connect <span class='keyword3'>:x</span> <span class='keyword3'>:y</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>))
</pre>
<p>　ここでは、rect と circle に <code>:x</code> や <code>:y</code> という ID を付与しており、connect での指定に利用しています。これが ID とその参照の基本的なかたちです。もうひとつ、ID は座標の指定でも利用できます。上のサンプルを少し変えて、circle を rect の相対位置で指定してみましょう。生成される図はまったく同じです。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (rect   '( 50  50) 80 60         <span class='keyword3'>:fill</span> <span class='keyword3'>:powderblue</span> <span class='keyword3'>:id</span> <span class='keyword3'>:x</span>)
  (circle (xy+ x.center 200 50) 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:moccasin</span>   <span class='keyword3'>:id</span> <span class='keyword3'>:y</span>)
  (connect <span class='keyword3'>:x</span> <span class='keyword3'>:y</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>))
</pre>
<p>　このように、ID（この例では <code>x</code> ）とその図形要素の属性（この例では <code>center</code> ）を <code>.</code> で繋ぐことで既出の図形要素の位置などを参照することができます。使用できる属性は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」にて紹介しています。</p>
<p>　続いて、ID を使わない方法について説明します。これは 「$N 記法」と呼ばれるもので、「N 個手前で登場した図形要素を参照」するものです。先ほどの circle の例は以下のように書くことができます。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (rect   '( 50  50) 80 60          <span class='keyword3'>:fill</span> <span class='keyword3'>:powderblue</span> <span class='keyword3'>:id</span> <span class='keyword3'>:x</span>)
  (circle (xy+ $1.center 200 50) 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:moccasin</span>   <span class='keyword3'>:id</span> <span class='keyword3'>:y</span>)
  (connect <span class='keyword3'>:x</span> <span class='keyword3'>:y</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>))
</pre>
<p>　この <code>$1</code> は、circle から見て「ひとつ前の図形要素」、つまり rect の <code>x</code> を参照しています。このような $N 記法は、$1 から $9 までが利用可能です。つまり、9 つ前までの要素を ID を使わずに参照できるわけです。</p>
<p>　この <code>$1.center</code> といった記法は、ID 指定を省略した図形要素でも使用することができます。しかし、connect はどうでしょう。connect では図形要素の ID そのものをキーワードで指定する必要があります。</p>
<p>　まず、connect での ID 指定の話からしましょう。$N 記法を使うと、以下のように書くことができます。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (rect   '( 50  50) 80 60          <span class='keyword3'>:fill</span> <span class='keyword3'>:powderblue</span> <span class='keyword3'>:id</span> <span class='keyword3'>:x</span>)
  (circle (xy+ $1.center 200 50) 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:moccasin</span>   <span class='keyword3'>:id</span> <span class='keyword3'>:y</span>)
  (connect $2.id $1.id <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>))
</pre>
<p>　connect からみれば rect は 2 つ前なので <code>$2</code> 、circle は 1 つ前なので <code>$1</code> で参照し、<code>$1.id</code> とすることでその ID を参照しています。結局、これは <code>:x</code> や <code>:y</code> を指定しているのと同じことになります。</p>
<p>　この説明からすると奇妙に思われるかもしれませんが、上記の状態になっていれば rect / circle から ID 指定は除去することができます。つまり、以下のように書けるということです。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (rect   '( 50  50) 80 60          <span class='keyword3'>:fill</span> <span class='keyword3'>:powderblue</span>)
  (circle (xy+ $1.center 200 50) 40 <span class='keyword3'>:fill</span> <span class='keyword3'>:moccasin</span>)
  (connect $2.id $1.id <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>))
</pre>
<p>　このコードでは、connect における <code>$2.id</code> といった記述は何を返すのでしょうか？　実は、kaavio では ID 指定を省略された図形要素には、kaavio が独自の ID を付与するようになっています<sup><a name='footnote_ref17' href='#footnote17'>17</a></sup>。この自動付与される ID はコード上には現われないため直接指定することはできませんが、connect での指定で $N.id とする場合には使用できます。</p>
<p>　最後に、ID に . を続けることで参照できる属性の一覧を示しておきます。座標参照の正確な位置については <a href='#7mETQwj0yso'>Figure.6-2</a> を参照してください。</p>
<p class='tbl_title'><a name='ju0HQrRY8oT'></a>Table.12-1 ID 指定で参照できる属性の一覧</p>
<table align='center'>
<tr style="font-size: 14;"><th>属性</th><th>説明</th></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>id</code></td><td align='left'>図形要素の ID を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>width</code></td><td align='left'>幅と高さを持つ図形要素の幅を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>height</code></td><td align='left'>幅と高さを持つ図形要素の高さを参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>topleft</code></td><td align='left'>幅と高さを持つ図形要素の左上の座標を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>top</code></td><td align='left'>幅と高さを持つ図形要素の上端の座標を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>topright</code></td><td align='left'>幅と高さを持つ図形要素の右上の座標を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>left</code></td><td align='left'>幅と高さを持つ図形要素の右端の座標を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>center</code></td><td align='left'>幅と高さを持つ図形要素の中心の座標を参照します。<br>                 または<a class='autolink' href='#fv4OUML78x4'>直線</a>や<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>の中央点の座標を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>right</code></td><td align='left'>幅と高さを持つ図形要素の左端の座標を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>bottomleft</code></td><td align='left'>幅と高さを持つ図形要素の左下の座標を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>bottom</code></td><td align='left'>幅と高さを持つ図形要素の下端の座標を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>bottomright</code></td><td align='left'>幅と高さを持つ図形要素の右下の座標を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>end1</code></td><td align='left'><a class='autolink' href='#fv4OUML78x4'>直線</a>や<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>の端点（始点）の座標を参照します。</td></tr>
<tr style="font-size: 14;"><td nowrap align='left'><code>end2</code></td><td align='left'><a class='autolink' href='#fv4OUML78x4'>直線</a>や<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>の端点（終点）の座標を参照します。</td></tr>
</table>
<p>　　</p>
<h3><a name='heEi5Lc5BX9'></a>12.6 回転</h3>
<p>　お望みなら、図形要素を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させることができます。ただし、この機能は kaavio の他の機能とはあまり整合しないので注意が必要です。ひとまずのところ、 <code>:rotate</code> パラメータに角度を与えることで<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させることができます。以下のように。</p>
<pre class='code'>
(diagram (300 200)
  (grid)
  (rect canvas.center 150 100 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:rotate</span> 30))
</pre>
<p>　このコードは以下の図を生成します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='200'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<g transform='rotate(30,150,100)'>
		<rect x='75' y='50' width='150' height='100' fill='lightgray' stroke='black' stroke-width='1' />
	</g>

</svg>
</div>

<p class='fig_title'><a name='h7K5JgIwvZY'></a>Figure.12-14 回転のサンプル</p>
<p>　見た目は問題なく<a class='autolink' href='#heEi5Lc5BX9'>回転</a>できていますが、この<a class='autolink' href='#kJonRG8GtHF'>四角形</a>に<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>を接続しようとすると何がどう「整合しない」のかがわかります。以下のように、接続点は<a class='autolink' href='#heEi5Lc5BX9'>回転</a>には追従しないのです。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='200'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- frame : rectangle -->
	<rect id='frame' x='75' y='50' width='150' height='100' fill='none' stroke='gray' stroke-width='1' stroke-dasharray='3 3 ' />
	<!-- circle -->
	<circle cx='112.5' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='112.5' cy='150' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='75' cy='75' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='225' cy='75' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='150' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='150' cy='150' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='75' cy='100' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='225' cy='100' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='187.5' cy='50' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='187.5' cy='150' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='75' cy='125' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- circle -->
	<circle cx='225' cy='125' r='3' fill='red' stroke='none' stroke-width='1' />
	<!-- target : rectangle -->
	<g id='target' transform='rotate(30,150,100)'>
		<rect x='75' y='50' width='150' height='100' fill='gray' fill-opacity='0.3' stroke='black' stroke-width='1' filter='url(#drop-shadow)' />
	</g>
	<!-- c1 : circle -->
	<circle id='c1' cx='20' cy='20' r='10' fill='white' stroke='brown' stroke-width='2' />
	<!-- c2 : circle -->
	<circle id='c2' cx='280' cy='20' r='10' fill='white' stroke='brown' stroke-width='2' />
	<!-- connector from c1 to target -->
	<polyline fill='none' stroke='brown' stroke-width='2' points=' 28.516582,25.240974 75.0,53.846153' />
	<polyline fill='none' stroke='brown' stroke-width='2' points='60.005905,53.425365 75,53.846153 67.86736,40.65049' />
	<!-- connector from c2 to target -->
	<polyline fill='none' stroke='brown' stroke-width='2' points=' 270.0,20.0 187.5,20.0 187.5,50.0' />
	<polyline fill='none' stroke='brown' stroke-width='2' points='180.0,37.00962 187.5,50 195.0,37.00962' />

</svg>
</div>

<p class='fig_title'><a name='9DgdURPyOHh'></a>Figure.12-15 回転しても図形要素の属性は変化しない</p>
<p>　接続点だけではありません。<a href='#ju0HQrRY8oT'>Table.12-1</a> で紹介した属性についても、すべて<a class='autolink' href='#heEi5Lc5BX9'>回転</a>前の状態のままとなります。これら全てを<a class='autolink' href='#heEi5Lc5BX9'>回転</a>に追従させることも開発途上で検討されましたが、すっきりとした仕様に落とし込むことができなかったため、<a class='autolink' href='#heEi5Lc5BX9'>回転</a>の機能は「図形要素の見た目だけを<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させるもの」とされました。</p>
<p>　　</p>
<h3><a name='gPGlqSbIfdL'></a>12.7 フィルタ</h3>
<p>　<a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>は、SVG 規格における <code>&lt;filter&gt;</code> 要素の機能を利用するものの総称で、おおまかに言って図形要素に対してなんらかのグラフィカルな効果を及ぼす機能です。現在の kaavio における<a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>機能は極めて限定されたもので、包括的なサポートを行うかは未定です。</p>
<p>　現在、<a class='autolink' href='#4L4hGTnCpBr'>drop-shadow マクロ</a>と <a class='autolink' href='#9Uh7JdQfISi'>glow-shadow マクロ</a>の２種類が利用できます。例を以下に示します。通常、冒頭で <code>(drop-shadow)</code> などの記述により使用を宣言し、図形要素の <code>:filter</code> パラメータで指定します。</p>
<pre class='code'>
(diagram (360 180)
  (grid)
  (drop-shadow)
  (glow-shadow)
  (rect (y+ canvas.center -30) 100 70
        <span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
  (text (y+ canvas.center  70) <span class='literal'>"sample text"</span>
        <span class='keyword3'>:align</span> <span class='keyword3'>:center</span> <span class='keyword3'>:font</span> (make-font <span class='keyword3'>:size</span> 36 <span class='keyword3'>:filter</span> <span class='keyword3'>:glow-shadow</span>)))
</pre>
<p>　上記のコードは以下の画像を生成します。<a class='autolink' href='#kJonRG8GtHF'>四角形</a>の右下にできている影が drop-shadow で、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の周囲に広がるような影が glow-shadow です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='360' height='180'>
	
	<filter id='glow-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0' />
		<feGaussianBlur stdDeviation='3' result='blur' />
		<feMerge>
			<feMergeNode in='blur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='130' y='25' width='100' height='70' fill='lightgray' stroke='black' stroke-width='1' filter='url(#drop-shadow)' />
	<!-- text -->
	<text x='180' y='160' text-anchor='middle' font-size='36pt' fill='black' filter='url(#glow-shadow)' >sample text</text>

</svg>
</div>

<p class='fig_title'><a name='9Z8wQykrThD'></a>Figure.12-16 フィルタのサンプル</p>
<p>　　</p>
<p>　これらのシャドウは通常図面内で１種類しか使用しないため、ID もデフォルト値を使用可能になっています。複数のシャドウを導入する場合には、ID を明示的に指定して区別することができます。以下の例では、<code>color-matrix</code> を指定して異なる色のシャドウを導入しています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='200'>
	
	<filter id='shadow3'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0.5 0 0 0 0 0 0 0 0 0 0.9 0' />
		<feGaussianBlur stdDeviation='3' result='blur' />
		<feMerge>
			<feMergeNode in='blur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<filter id='shadow2'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0 0 0 0 0.6 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<filter id='shadow1'>
		<feColorMatrix type='matrix' values=' 0 0 0 0.5 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<rect x='50' y='35' width='100' height='70' fill='lightpink' stroke='red' stroke-width='1' filter='url(#shadow1)' />
	<!-- rectangle -->
	<rect x='250' y='35' width='100' height='70' fill='lightcyan' stroke='navy' stroke-width='1' filter='url(#shadow2)' />
	<!-- text -->
	<text x='200' y='170' text-anchor='middle' font-size='36pt' fill='green' filter='url(#shadow3)' >sample text</text>

</svg>
</div>

<p class='fig_title'><a name='fVptn2Tiqv7'></a>Figure.12-17 フィルタのサンプル - 2</p>
<details>
<summary>上記サンプルのコードはこちら。</summary>
<pre class='code'>
(diagram (400 200)
  (grid)
  (drop-shadow <span class='keyword3'>:id</span> <span class='keyword3'>:shadow1</span> <span class='keyword3'>:color-matrix</span> '(0 0 0 0.5 0
                                            0 0 0 0   0
                                            0 0 0 0   0
                                            0 0 0 0.6 0))
  (drop-shadow <span class='keyword3'>:id</span> <span class='keyword3'>:shadow2</span> <span class='keyword3'>:color-matrix</span> '(0 0 0 0   0
                                            0 0 0 0   0
                                            0 0 0 0.5 0
                                            0 0 0 0.6 0))
  (glow-shadow <span class='keyword3'>:id</span> <span class='keyword3'>:shadow3</span> <span class='keyword3'>:color-matrix</span> '(0 0 0 0   0
                                            0 0 0 0.5 0
                                            0 0 0 0   0
                                            0 0 0 0.9 0))
  (rect '(100  70) 100 70 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightpink</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span>  <span class='keyword3'>:filter</span> <span class='keyword3'>:shadow1</span>)
  (rect '(300  70) 100 70 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightcyan</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:shadow2</span>)
  (text '(200 170) <span class='literal'>"sample text"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>
                   <span class='keyword3'>:font</span> (make-font <span class='keyword3'>:size</span> 36 <span class='keyword3'>:fill</span> <span class='keyword3'>:green</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:shadow3</span>)))
</pre>
</details>
<p>　　</p>
<p>　シャドウを使用する場合、通常は図面内の多くの図形要素に同じ<a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用します。そのため、<code>with-options</code> でデフォルトの<a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を指定可能になっています。<a href='#aw36ReN8sMQ'>Figure.2-2</a> のコードを参照してください。</p>
<p>　　</p>
<h3><a name='1ovJxG7Ie9O'></a>12.8 レイヤー</h3>
<p>　<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>は図形要素の表示順序を制御するための仕組みです。まずは以下の例をご覧ください。表示位置が重なる<a class='autolink' href='#kJonRG8GtHF'>四角形</a>を３つ描画しています。</p>
<pre class='code'>
(diagram (160 160)
  (grid)
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
    (rect '(50 50)              60 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightcyan</span> <span class='keyword3'>:id</span> <span class='keyword3'>:R1</span>)
    (rect (xy+ R1.center 30 30) 60 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightpink</span> <span class='keyword3'>:id</span> <span class='keyword3'>:R2</span>)
    (rect (xy+ R2.center 30 30) 60 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:palegreen</span> <span class='keyword3'>:id</span> <span class='keyword3'>:R3</span>)))
</pre>
<p>　R2 は R1 に、R3 は R2 に、それぞれ座標指定において依存しているので、この順序で書く必要があり、結果として表示は以下のようになります。これが kaavio における描画の基本的なルール、「コード上で書いた順に描画される」です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='160' height='160'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- r1 : rectangle -->
	<rect id='r1' x='20' y='20' width='60' height='60' fill='lightcyan' stroke='black' stroke-width='1' />
	<!-- r2 : rectangle -->
	<rect id='r2' x='50' y='50' width='60' height='60' fill='lightpink' stroke='black' stroke-width='1' />
	<!-- r3 : rectangle -->
	<rect id='r3' x='80' y='80' width='60' height='60' fill='palegreen' stroke='black' stroke-width='1' />

</svg>
</div>

<p>　この描画順序を制御するのが<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>という機能です。<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を使用するには、コードの冒頭で <a class='autolink' href='#5Ymxg2NeQNs'>layer 関数</a>を使用してその名前とともに使用を宣言し、図形要素のパラメータ <code>:layer</code> で所属する<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定します。以下の例では、3 つの<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を導入し、それぞれの<a class='autolink' href='#kJonRG8GtHF'>四角形</a>を別の<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>に所属させています。</p>
<pre class='code'>
(diagram (160 160)
  (layer <span class='keyword3'>:L1</span>)
  (layer <span class='keyword3'>:L2</span>)
  (layer <span class='keyword3'>:L3</span>)
  (grid)
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
    (rect '(50 50)              60 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightcyan</span> <span class='keyword3'>:id</span> <span class='keyword3'>:R1</span> <span class='keyword3'>:layer</span> <span class='keyword3'>:L3</span>)
    (rect (xy+ R1.center 30 30) 60 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightpink</span> <span class='keyword3'>:id</span> <span class='keyword3'>:R2</span> <span class='keyword3'>:layer</span> <span class='keyword3'>:L2</span>)
    (rect (xy+ R2.center 30 30) 60 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:palegreen</span> <span class='keyword3'>:id</span> <span class='keyword3'>:R3</span> <span class='keyword3'>:layer</span> <span class='keyword3'>:L1</span>)))
</pre>
<p>　複数の<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>が存在する場合、その導入順で描画が行なわれます。上記の例では逆順になるように<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定しているので、以下のような描画になります。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='160' height='160'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- layer l1 -->
	<g id='l1' display='inline'>
		<!-- r3 : rectangle -->
		<rect id='r3' x='80' y='80' width='60' height='60' fill='palegreen' stroke='black' stroke-width='1' />
	</g>
	<!-- layer l2 -->
	<g id='l2' display='inline'>
		<!-- r2 : rectangle -->
		<rect id='r2' x='50' y='50' width='60' height='60' fill='lightpink' stroke='black' stroke-width='1' />
	</g>
	<!-- layer l3 -->
	<g id='l3' display='inline'>
		<!-- r1 : rectangle -->
		<rect id='r1' x='20' y='20' width='60' height='60' fill='lightcyan' stroke='black' stroke-width='1' />
	</g>

</svg>
</div>

<p class='fig_title'><a name='69T4cxkHZWY'></a>Figure.12-18 レイヤーを使用した表示順序の制御</p>
<p>　さらに、<a class='autolink' href='#5Ymxg2NeQNs'>layer 関数</a>にはオプションの <code>display</code> 引数があります。これは省略時のデフォルト値は <code>:inline</code> ですが、 <code>:none</code> を指定することで「その<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>全体を非表示にする」ことができます。先程の例に対して<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a> L2 を非表示にする例を以下に示します。</p>
<pre class='code'>
(diagram (160 160)
  (layer <span class='keyword3'>:L1</span>)
  (layer <span class='keyword3'>:L2</span> <span class='keyword3'>:none</span>)
  (layer <span class='keyword3'>:L3</span>)
  (grid)
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
    (rect '(50 50)              60 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightcyan</span> <span class='keyword3'>:id</span> <span class='keyword3'>:R1</span> <span class='keyword3'>:layer</span> <span class='keyword3'>:L3</span>)
    (rect (xy+ R1.center 30 30) 60 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:lightpink</span> <span class='keyword3'>:id</span> <span class='keyword3'>:R2</span> <span class='keyword3'>:layer</span> <span class='keyword3'>:L2</span>)
    (rect (xy+ R2.center 30 30) 60 60 <span class='keyword3'>:fill</span> <span class='keyword3'>:palegreen</span> <span class='keyword3'>:id</span> <span class='keyword3'>:R3</span> <span class='keyword3'>:layer</span> <span class='keyword3'>:L1</span>)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='160' height='160'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- layer l1 -->
	<g id='l1' display='inline'>
		<!-- r3 : rectangle -->
		<rect id='r3' x='80' y='80' width='60' height='60' fill='palegreen' stroke='black' stroke-width='1' />
	</g>
	<!-- layer l2 -->
	<g id='l2' display='none'>
		<!-- r2 : rectangle -->
		<rect id='r2' x='50' y='50' width='60' height='60' fill='lightpink' stroke='black' stroke-width='1' />
	</g>
	<!-- layer l3 -->
	<g id='l3' display='inline'>
		<!-- r1 : rectangle -->
		<rect id='r1' x='20' y='20' width='60' height='60' fill='lightcyan' stroke='black' stroke-width='1' />
	</g>

</svg>
</div>

<p class='fig_title'><a name='lvFSgV5aS35'></a>Figure.12-19 レイヤーを非表示にする例</p>
<p>　　</p>
<p>　<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>機能について以下にまとめます。</p>
<ul>
<li><a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>はその宣言順で描画される</li>
<li><a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>指定されない図形要素は「暗黙の背景<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>」として最初に（つまり一番下に）描画される</li>
<li>同じ<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>に所属する図形要素はコード上での登場順で描画される</li>
<li><a class='autolink' href='#5Ymxg2NeQNs'>layer 関数</a>でオプションの <code>display</code> パラメータに <code>:none</code> を指定すると<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>をまるごと非表示にできる<sup><a name='footnote_ref18' href='#footnote18'>18</a></sup></li>
</ul>
<p>　　</p>
<h3><a name='fbLcMRTVXac'></a>12.9 リンク</h3>
<p>　HTML で任意の文言に<a class='autolink' href='#fbLcMRTVXac'>リンク</a>を設定できるように、SVG では図形要素に<a class='autolink' href='#fbLcMRTVXac'>リンク</a>を設定することができます。kaavio では、図形要素の <code>:link</code> パラメータで実現します。以下の例では、図中の<a class='autolink' href='#kJonRG8GtHF'>四角形</a>に<a href='#3DDQkfdwVQl'>目次</a>への<a class='autolink' href='#fbLcMRTVXac'>リンク</a>を設定しています。</p>
<!-- define: HASH_TOC = '[](A#toc-link-target)' -->
<pre class='code'>
(diagram (200 100)
  (grid)
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightcyan</span>)
    (rect canvas.center  60 60 <span class='keyword3'>:link</span> <span class='literal'>"#3DDQkfdwVQl"</span>)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- rectangle -->
	<a xlink:href='#3DDQkfdwVQl' target='_self'>
		<rect x='70' y='20' width='60' height='60' fill='lightcyan' stroke='navy' stroke-width='1' />
	</a>

</svg>
</div>

<p class='fig_title'><a name='64zrFTxyK0i'></a>Figure.12-20 図形要素へのリンクの設定例</p>
<p>　この例では、 <code>:link</code> に続けて文字列で<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定しています（このマニュアルでは SVG 図面を HTML に直接埋め込んでいるので、これは HTML 文書内へのアンカーを指定した<a class='autolink' href='#fbLcMRTVXac'>リンク</a>です）。あるいは、 <code>:link '(:url "#3DDQkfdwVQl" :target :blank)</code> といった指定をする場合もあります。実はこれらは全て簡易的な指定方法で、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>にはもう少し多くの情報が含まれています。以下に説明します。</p>
<ul>
<li><code>:url</code> は<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先の URL を文字列で指定します。</li>
<li><code>:target</code> はターゲット指定です。 <code>:blank</code> などを指定します（<a href='#kHFmcjbmpJJ'>14.1.35  節</a>参照）。</li>
</ul>
<p>　　</p>
<p>　それぞれについて細かい説明を始める前に、 <code>:link "URL"</code> といった記述がどのように扱われるのかを説明する必要があるでしょう。 <code>:link</code> によるこれらの指定は、実は全て <a class='autolink' href='#kHFmcjbmpJJ'>make-link 関数</a>に渡されます。<a class='autolink' href='#kHFmcjbmpJJ'>make-link 関数</a>は、渡されたのが単一の値の場合には、それを URL と解釈します。そして <code>'(:url "URL" :target :blank)</code> などの（複数要素からなる）リストの場合、名前付きパラメータの羅列として解釈します。</p>
<p>　<a class='autolink' href='#kHFmcjbmpJJ'>make-link 関数</a>はその結果として「<a class='autolink' href='#fbLcMRTVXac'>リンク</a>情報オブジェクト」を返しますが、その<a class='autolink' href='#fbLcMRTVXac'>リンク</a>情報オブジェクトを <a class='autolink' href='#kHFmcjbmpJJ'>make-link 関数</a>自身に渡した場合、そのまま返すようになっています。そのため、自分で明示的に <a class='autolink' href='#kHFmcjbmpJJ'>make-link 関数</a>を使って<a class='autolink' href='#fbLcMRTVXac'>リンク</a>情報オブジェクトを作成し、Common Lisp 変数に格納して複数の図形要素で使用する、ということも可能です。この関数の詳細は <a href='#kHFmcjbmpJJ'>14.1.35  節</a>を参照してください。</p>
<p>　　</p>
<p>　複数の図形要素をまとめて<a class='autolink' href='#fbLcMRTVXac'>リンク</a>設定したい場合はどうすれば良いでしょうか。現状では、<a class='autolink' href='#5hmH4Z1JfiN'>defgroup マクロ</a>によってグループ化し、use において <code>:link</code> パラメータを使うことになります。以下の例は、<a href='#2msfXdtEc6a'>3  章</a>冒頭の一覧から抜粋したものです。</p>
<pre class='code'>
(diagram (100 120)
  <span class='comment'>;(grid)</span>
  (<span class='keyword1'>let</span> ((w  80)
        (h 100))
    (defgroup (w h <span class='keyword3'>:rect-grp</span>)
      (rect canvas.center canvas.width canvas.height <span class='keyword3'>:stroke</span> <span class='keyword3'>:none</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
      (rect `(,(/ w 2) ,(/ w 2)) 50 50 <span class='keyword3'>:fill</span> <span class='keyword3'>:skyblue</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:blue</span>)
      (text `(,(/ w 2) ,(- h 5)) <span class='literal'>"四角形"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>))
    (use <span class='keyword3'>:rect-grp</span> canvas.center <span class='keyword3'>:link</span> <span class='literal'>"#kJonRG8GtHF"</span>)))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='100' height='120'>
	
	<!-- rect-grp : group-definition -->
	<defs>
		<g id='rect-grp'>
			<!-- rectangle -->
			<rect x='0' y='0' width='80' height='100' fill='white' stroke='none' stroke-width='1' />
			<!-- rectangle -->
			<rect x='15' y='15' width='50' height='50' fill='skyblue' stroke='blue' stroke-width='1' />
			<!-- text -->
			<text x='40' y='95' text-anchor='middle' font-size='12pt' fill='black' >四角形</text>
			
		</g>
	</defs>
	<!-- use -->
	<a xlink:href='#kJonRG8GtHF' target='_self'>
		<use xlink:href='#rect-grp' x='10' y='10' />
	</a>

</svg>
</div>

<p class='fig_title'><a name='dzS2BoL9Ae0'></a>Figure.12-21 グループ化と use におけるリンク設定の例</p>
<p>　　</p>
<h3><a name='9MB3lirlqL9'></a>12.10 終端マーク</h3>
<p>　<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>とは、<a class='autolink' href='#fv4OUML78x4'>直線</a>や<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>、および<a class='autolink' href='#cp2F91gKG7W'>円弧</a>の端点に描画するマークを指定する情報です。<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>を使った例を以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='210'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- c1 : circle -->
	<circle id='c1' cx='50' cy='40' r='20' fill='lightgray' stroke='gray' stroke-width='1' />
	<!-- c2 : circle -->
	<circle id='c2' cx='250' cy='40' r='20' fill='lightgray' stroke='gray' stroke-width='1' />
	<!-- c3 : circle -->
	<circle id='c3' cx='150' cy='170' r='20' fill='lightgray' stroke='gray' stroke-width='1' />
	<!-- connector from c1 to c2 -->
	<polyline fill='none' stroke='blue' stroke-width='1' points=' 70.0,40.0 230.0,40.0' />
	<polyline fill='none' stroke='blue' stroke-width='1' points='217.00961,47.5 230.0,40.0 217.00961,32.5' />
	<!-- connector from c2 to c3 -->
	<polyline fill='none' stroke='blue' stroke-width='1' points=' 237.80579,55.852478 162.19421,154.14752' />
	<path fill='blue' stroke='blue' stroke-width='1' d='M 237.80579 55.852478 l -13.313445 6.910296 l 10.049321 7.730247 z' />
	<path fill='blue' stroke='blue' stroke-width='1' d='M 162.19421 154.14752 L 176.05927 148.42386 L 178.03496 133.55455 L 164.1699 139.2782 z' />
	<!-- connector from c3 to c1 -->
	<polyline fill='none' stroke='blue' stroke-width='1' points=' 137.80579,154.14752 62.194214,55.852478' />
	<circle cx='137.80579' cy='154.14752' r='7.5' fill='blue' stroke='blue' stroke-width='1' />
	<path fill='blue' stroke='blue' stroke-width='1' d='M 63.566063 45.33497 L 72.71172 57.224327 L 60.822365 66.36999 L 51.676704 54.48063 z' />
	<!-- text -->
	<text x='225' y='30' text-anchor='end' font-size='12pt' fill='blue' >:arrow</text>
	<!-- text -->
	<text x='230' y='90' text-anchor='start' font-size='12pt' fill='blue' >:triangle</text>
	<!-- text -->
	<text x='185' y='140' text-anchor='start' font-size='12pt' fill='blue' >:diamond</text>
	<!-- text -->
	<text x='125' y='150' text-anchor='end' font-size='12pt' fill='blue' >:circle</text>
	<!-- text -->
	<text x='55' y='80' text-anchor='end' font-size='12pt' fill='blue' >:rect</text>

</svg>
</div>

<p class='fig_title'><a name='dCXVPZYpqQz'></a>Figure.12-22 終端マークの例</p>
<details>
<summary>※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (300 210)
  (grid)
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:gray</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span>)
    (circle '( 50  40) 20 <span class='keyword3'>:id</span> <span class='keyword3'>:C1</span>)
    (circle '(250  40) 20 <span class='keyword3'>:id</span> <span class='keyword3'>:C2</span>)
    (circle '(150 170) 20 <span class='keyword3'>:id</span> <span class='keyword3'>:C3</span>)
    (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:blue</span>)
      (connect <span class='keyword3'>:C1</span> <span class='keyword3'>:C2</span>                 <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>)
      (connect <span class='keyword3'>:C2</span> <span class='keyword3'>:C3</span> <span class='keyword3'>:end1</span> <span class='keyword3'>:triangle</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:diamond</span>)
      (connect <span class='keyword3'>:C3</span> <span class='keyword3'>:C1</span> <span class='keyword3'>:end1</span> <span class='keyword3'>:circle</span>   <span class='keyword3'>:end2</span> <span class='keyword3'>:rect</span>))
    (with-options (<span class='keyword3'>:font</span> '(<span class='keyword3'>:fill</span> <span class='keyword3'>:blue</span>))
      (text '(225  30) <span class='literal'>":arrow"</span>    <span class='keyword3'>:align</span> <span class='keyword3'>:right</span>)
      (text '(230  90) <span class='literal'>":triangle"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
      (text '(185 140) <span class='literal'>":diamond"</span>  <span class='keyword3'>:align</span> <span class='keyword3'>:left</span>)
      (text '(125 150) <span class='literal'>":circle"</span>   <span class='keyword3'>:align</span> <span class='keyword3'>:right</span>)
      (text '( 55  80) <span class='literal'>":rect"</span>     <span class='keyword3'>:align</span> <span class='keyword3'>:right</span>))))
</pre>
</details>
<p>　上記のサンプルでは、 <code>:end2 :arrow</code> のように、 <code>:end1</code> または <code>:end2</code> に続けて<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>の種類だけを指定しています。もう少し複雑な場合、 <code>:end1 '(:type :arrow :size :small)</code> といった要領で種類とサイズを指定することもできます。実はこれらは全て簡易的な指定方法で、<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>にはもっと多くの情報が含まれています。以下に説明します。</p>
<ul>
<li><code>type</code> は<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>の形状を指定します。 <code>:arrow :triangle :diamond :circle :rect</code> のいずれか、またはカスタム描画関数を指定します。詳細は <a class='autolink' href='#793zIcGmzV1'>make-endmark 関数</a>を参照してください。</li>
<li><code>size</code> は<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>の大きさです。 <code>:small :medium :large :xlarge</code> のいずれか、または数値を指定します。</li>
<li><code>stroke</code> は<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>の線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>指定です。通常は（指定を省略することで）<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>が適用される<a class='autolink' href='#fv4OUML78x4'>直線</a>や<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>の<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>と同じものを指定します。</li>
<li><code>fill</code> は<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>の内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>指定です。省略すると、<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>と同じ色で塗り潰されます。</li>
</ul>
<p>　　</p>
<p>　それぞれについて細かい説明を始める前に、 <code>:end1 :arrow</code> といった記述がどのように扱われるのかを説明する必要があるでしょう。 <code>:end1 / :end2</code> によるこれらの指定は、実は全て <a class='autolink' href='#793zIcGmzV1'>make-endmark 関数</a>に渡されます。<a class='autolink' href='#793zIcGmzV1'>make-endmark 関数</a>は、渡されたのが単一の値の場合には、キーワードなら種類、数値ならサイズなどと解釈します。そして <code>'(:type :arrow :size :small)</code> などの（複数要素からなる）リストの場合、名前付きパラメータの羅列として解釈します。</p>
<p>　<a class='autolink' href='#793zIcGmzV1'>make-endmark 関数</a>はその結果として「<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>情報オブジェクト」を返しますが、その<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>情報オブジェクトを <a class='autolink' href='#793zIcGmzV1'>make-endmark 関数</a>自身に渡した場合、そのまま返すようになっています。そのため、自分で明示的に <a class='autolink' href='#793zIcGmzV1'>make-endmark 関数</a>を使って<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>情報オブジェクトを作成し、Common Lisp 変数に格納して複数の図形要素で使用する、ということも可能です。以下のように。この関数の詳細は <a href='#793zIcGmzV1'>14.1.30  節</a>を参照してください。</p>
<pre class='code'>
(<span class='keyword1'>let</span> ((em (make-endmark <span class='keyword3'>:type</span> <span class='keyword3'>:triangle</span> <span class='keyword3'>:size</span> <span class='keyword3'>:small</span>)))
  (connect  ... <span class='keyword3'>:end2</span> em)
  (connect  ... <span class='keyword3'>:end2</span> em))
</pre>
<p>　　</p>
<h4><a name='ko76iwUCiuE'></a>12.10.1 終端マークのデフォルト設定</h4>
<p>　実際のところ、作図をする上でそれぞれの<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>の終端がバラバラな形状やサイズで描かれることはないでしょう。わかりやすい図面というのは、同じ種類の図形要素は同じ種類の線で描画されているなど、統制が取れているものです。このことは、多くの作図においては「まったく同じ終端マークの指定を繰り返す場合が多い」ことを意味します。前述の方法で<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>情報オブジェクトを作成して使い回すことも可能ですが、もっとよい方法があります。それは <a class='autolink' href='#i3AN3FOExuU'>with-endmark-options マクロ</a>を使った「<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>のデフォルト設定値の変更」です。以下の例では３つの<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>を描いていますが、<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>の種類は <a class='autolink' href='#i3AN3FOExuU'>with-endmark-options マクロ</a>で指定しています。</p>
<!-- with-endmark-options の :end[12] のみ指定する例 -->
<pre class='code'>
(diagram (300 150)
  (grid)
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
    (circle '( 50  40) 20 <span class='keyword3'>:id</span> <span class='keyword3'>:C1</span>)
    (circle '(250  40) 20 <span class='keyword3'>:id</span> <span class='keyword3'>:C2</span>)
    (circle '(150 110) 20 <span class='keyword3'>:id</span> <span class='keyword3'>:C3</span>)
    (with-endmark-options (<span class='keyword3'>:end1</span> nil <span class='keyword3'>:end2</span> <span class='keyword3'>:triangle</span>)
      (connect <span class='keyword3'>:C1</span> <span class='keyword3'>:C2</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span>)
      (connect <span class='keyword3'>:C2</span> <span class='keyword3'>:C3</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:green</span>)
      (connect <span class='keyword3'>:C3</span> <span class='keyword3'>:C1</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:blue</span>))))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- c1 : circle -->
	<circle id='c1' cx='50' cy='40' r='20' fill='white' stroke='black' stroke-width='1' />
	<!-- c2 : circle -->
	<circle id='c2' cx='250' cy='40' r='20' fill='white' stroke='black' stroke-width='1' />
	<!-- c3 : circle -->
	<circle id='c3' cx='150' cy='110' r='20' fill='white' stroke='black' stroke-width='1' />
	<!-- connector from c1 to c2 -->
	<polyline fill='none' stroke='red' stroke-width='1' points=' 70.0,40.0 230.0,40.0' />
	<path fill='red' stroke='red' stroke-width='1' d='M 230.0 40.0 l -13.594617 -6.339274 l 0.0000000000000017763568 12.678548 z' />
	<!-- connector from c2 to c3 -->
	<polyline fill='none' stroke='green' stroke-width='1' points=' 233.61536,51.469246 166.38464,98.530754' />
	<path fill='green' stroke='green' stroke-width='1' d='M 166.38464 98.530754 l 14.772479 -2.6026666 l -7.270671 -10.38667 z' />
	<!-- connector from c3 to c1 -->
	<polyline fill='none' stroke='blue' stroke-width='1' points=' 133.61536,98.530754 66.384636,51.469246' />
	<path fill='blue' stroke='blue' stroke-width='1' d='M 66.384636 51.469246 l 7.5018086 12.989338 l 7.270671 -10.386671 z' />

</svg>
</div>

<p class='fig_title'><a name='4SdD3hnRhh0'></a>Figure.12-23 with-endmark-options によるデフォルト終端マークの変更 - 1</p>
<p>　　</p>
<p>　上記の場合、３つの<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>全てで <code>:end1 nil :end2 :triangle</code> と指定したのと同じことになります。結果として、それぞれの<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>はそれぞれの<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>の<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>で描画され、<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>も<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>と同じ色になりました。</p>
<p>　種類は個別に指定して、<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>やサイズのデフォルト値を変更したい場合は以下のようになります。この場合、それぞれの<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>の <code>:end2</code> で指定指定された <code>:triangle</code> などのキーワードから<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>情報オブジェクトを作成する際、<a class='autolink' href='#i3AN3FOExuU'>with-endmark-options マクロ</a>の <code>:size :small :fill :white</code> が適用されるイメージになります。</p>
<!-- with-endmark-options の :end[12] に「具体的な endmark」を指定する例 -->
<pre class='code'>
(diagram (300 150)
  (grid)
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
    (circle '( 50  40) 20 <span class='keyword3'>:id</span> <span class='keyword3'>:C1</span>)
    (circle '(250  40) 20 <span class='keyword3'>:id</span> <span class='keyword3'>:C2</span>)
    (circle '(150 110) 20 <span class='keyword3'>:id</span> <span class='keyword3'>:C3</span>)
    (with-endmark-options (<span class='keyword3'>:size</span> <span class='keyword3'>:small</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
      (connect <span class='keyword3'>:C1</span> <span class='keyword3'>:C2</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:red</span>   <span class='keyword3'>:end2</span> <span class='keyword3'>:triangle</span>)
      (connect <span class='keyword3'>:C2</span> <span class='keyword3'>:C3</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:green</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:diamond</span>)
      (connect <span class='keyword3'>:C3</span> <span class='keyword3'>:C1</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:blue</span>  <span class='keyword3'>:end2</span> <span class='keyword3'>:circle</span>))))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- c1 : circle -->
	<circle id='c1' cx='50' cy='40' r='20' fill='white' stroke='black' stroke-width='1' />
	<!-- c2 : circle -->
	<circle id='c2' cx='250' cy='40' r='20' fill='white' stroke='black' stroke-width='1' />
	<!-- c3 : circle -->
	<circle id='c3' cx='150' cy='110' r='20' fill='white' stroke='black' stroke-width='1' />
	<!-- connector from c1 to c2 -->
	<polyline fill='none' stroke='red' stroke-width='1' points=' 70.0,40.0 230.0,40.0' />
	<path fill='white' stroke='red' stroke-width='1' d='M 230.0 40.0 l -9.063078 -4.2261825 l 0.0000000000000017763568 8.452365 z' />
	<!-- connector from c2 to c3 -->
	<polyline fill='none' stroke='green' stroke-width='1' points=' 233.61536,51.469246 166.38464,98.530754' />
	<path fill='white' stroke='green' stroke-width='1' d='M 166.38464 98.530754 L 176.34671 97.66058 L 180.57416 88.59809 L 170.61209 89.46826 z' />
	<!-- connector from c3 to c1 -->
	<polyline fill='none' stroke='blue' stroke-width='1' points=' 133.61536,98.530754 66.384636,51.469246' />
	<circle cx='66.384636' cy='51.469246' r='5.0' fill='white' stroke='blue' stroke-width='1' />

</svg>
</div>

<p class='fig_title'><a name='atVRmHYlVjQ'></a>Figure.12-24 with-endmark-options によるデフォルト終端マークの変更 - 2</p>
<p>　　</p>
<h3><a name='lpCVEZ9kMoP'></a>12.11 ラベル</h3>
<p>　<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>とは、<a class='autolink' href='#fv4OUML78x4'>直線</a>や<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>、および一部の図形要素に付加できる簡易的な<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>片のことです。明示的に位置を指定して <a class='autolink' href='#cSks5rQ0qHz'>text マクロ</a>を使用するよりは楽に<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を付加することができます。<a class='autolink' href='#03WwbeGq0eH'>人物</a>と<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>を使った例を以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- person -->
	<path fill='lightcyan' stroke='navy' stroke-width='1' d='M 35 80 A 15 30 0 1 1 65 80 L 35 80 M 50 50 A 15 15 0 0 1 50 20 A 15 15 0 0 1 50 50' />
	<text x='50' y='94' text-anchor='middle' font-size='12pt' fill='black' >actor1</text>
	<!-- person -->
	<path fill='lightcyan' stroke='navy' stroke-width='1' d='M 335 130 A 15 30 0 1 1 365 130 L 335 130 M 350 100 A 15 15 0 0 1 350 70 A 15 15 0 0 1 350 100' />
	<text x='350' y='68' text-anchor='middle' font-size='12pt' fill='black' >actor2</text>
	<!-- connector -->
	<polyline fill='none' stroke='black' stroke-width='1' stroke-dasharray='5 2 ' points=' 65.0,52.5 335.0,97.5' />
	<text x='199.98639' y='60.081635' text-anchor='middle' font-size='12pt' fill='black' >connection</text>

</svg>
</div>

<p class='fig_title'><a name='7hvJUTgyFyn'></a>Figure.12-25 ラベルの例</p>
<details>
<summary>※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (400 150)
  (grid)
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightcyan</span>)
    (person '( 50  50) 30 <span class='keyword3'>:label</span>   <span class='literal'>"actor1"</span>)
    (person '(350 100) 30 <span class='keyword3'>:label</span> '(<span class='literal'>"actor2"</span> <span class='keyword3'>:position</span> <span class='keyword3'>:above</span>)))
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span>)
    (connect $2.id $1.id
             <span class='keyword3'>:stroke</span> '(<span class='keyword3'>:dasharray</span> (5 2))
             <span class='keyword3'>:label</span> '(<span class='literal'>"connection"</span> <span class='keyword3'>:offset</span> (-40 -15)))))
</pre>
</details>
<p>　上記のサンプルでは、 <code>:label "actor1"</code> のように、 <code>:label</code> に続けて<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>だけを指定しています。もう少し複雑な場合、 <code>:label '("actor2" :position :above)</code> や <code>:label '("connection" :offset (-40 -15))</code> といった要領で<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>と表示位置を指定することもできます。実はこれらは全て簡易的な指定方法で、<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>にはもっと多くの情報が含まれています。パラメータ先頭で常に指定する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>以外の名前付きパラメータを以下に説明します。</p>
<ul>
<li><code>position</code> は<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の表示位置を指定します。 <code>:above :below :left :right</code> のいずれかを指定します。</li>
<li><code>offset</code> は<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の表示位置を調整する値を <code>(x y)</code> の要領で指定します。</li>
<li><code>font</code> は<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の描画に使用される<a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。詳細は <a href='#3kZ9FkounyK'>12.4  節</a> を参照してください。</li>
</ul>
<p>　　</p>
<p>　それぞれについて細かい説明を始める前に、 <code>:label "actor1"</code> といった記述がどのように扱われるのかを説明する必要があるでしょう。 <code>:label</code> によるこれらの指定は、実は全て <a class='autolink' href='#39Bn4oB2Anb'>make-label 関数</a>に渡されます。<a class='autolink' href='#39Bn4oB2Anb'>make-label 関数</a>は、渡されたのが単一の値の場合には、それを<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a><a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>と解釈します。そして <code>'("text" :position :above :offset (-5 10))</code> などの（複数要素からなる）リストの場合、パラメータの羅列として解釈します。</p>
<p>　<a class='autolink' href='#39Bn4oB2Anb'>make-label 関数</a>はその結果として「<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>情報オブジェクト」を返しますが、その<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>情報オブジェクトを <a class='autolink' href='#39Bn4oB2Anb'>make-label 関数</a>自身に渡した場合、そのまま返すようになっています。そのため、自分で明示的に <a class='autolink' href='#39Bn4oB2Anb'>make-label 関数</a>を使って<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>情報オブジェクトを作成し、Common Lisp 変数に格納して複数の図形要素で使用する、ということも可能です。以下のように。この関数の詳細は <a href='#39Bn4oB2Anb'>14.1.34  節</a>を参照してください。</p>
<pre class='code'>
(<span class='keyword1'>let</span> ((txt (make-label <span class='literal'>"label"</span> <span class='keyword3'>:position</span> <span class='keyword3'>:above</span>)))
  (connect  ... <span class='keyword3'>:label</span> txt)
  (connect  ... <span class='keyword3'>:label</span> txt))
</pre>
<h4><a name='cAmRpIqSCBp'></a>12.11.1 position パラメータによるラベル位置の指定</h4>
<p>　<code>:position</code> パラメータを使うことで、図形要素の上下左右のどこに<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>を配置するかを指定できます。<a href='#7hvJUTgyFyn'>先ほどの例</a>では、<a class='autolink' href='#03WwbeGq0eH'>人物</a>に対して <code>:label "actor1"</code> とすることで図形要素の下に<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>が表示され、 <code>:label '("actor2" :position :above)</code> によって上に<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>が表示されました。このように、 <code>:position</code> パラメータは<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の表示位置を明示的に指定する場合に使用します。省略した場合の表示位置は<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>をサポートする図形要素によって異なります。</p>
<p>　<code>:position</code> パラメータは、<a class='autolink' href='#03WwbeGq0eH'>人物</a>などの「幅と高さを持つ」図形要素でのみ有効であることに注意してください。<a class='autolink' href='#fv4OUML78x4'>直線</a>や<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>のような図形要素では <code>:position</code> パラメータは単純に無視され、<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の配置は経路の中央付近に自動的に決定されます。どちらの場合でも、結果として<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>が表示される位置に不満を感じるかもしれません。そのような場合は、 <code>:offset</code> パラメータで微調整をすることができます。これについては次節を参照してください。</p>
<h4><a name='bPXbrd4Hi8T'></a>12.11.2 offset パラメータによるラベル位置の微調整</h4>
<p>　<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>が配置される場所を微調整したい場合、 <code>:offset</code> パラメータを使うことができます。これは x 軸および y 軸方向にどれだけ移動させるかを指定する値を <code>(x y)</code> 形式、つまり座標指定と同じ方法で指定するものです。<a href='#7hvJUTgyFyn'>先ほどの例</a>では、<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>に対して <code>:label '("connection" :offset (-40 -15))</code> とすることで<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の位置調整を行なっています。</p>
<p>　<code>:offset</code> パラメータは「 <code>:position</code> パラメータ（または自動決定結果）による配置場所に対して調整をする」ものなので、周辺の状況が変化した場合などには、都度変更が必要になることに注意してください。</p>
<h4><a name='lBIUm5GZbS4'></a>12.11.3 ラベルのデフォルト設定</h4>
<p>　実際のところ、作図をする上でそれぞれの<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の位置や<a class='autolink' href='#3kZ9FkounyK'>フォント</a>がバラバラに指定されることはないでしょう。わかりやすい図面というのは、同じ種類の図形要素は同じ種類の線で描画されているなど、統制が取れているものです。このことは、多くの作図においては「まったく同じ<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の指定を繰り返す場合が多い」ことを意味します。前述の方法で<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>情報オブジェクトを作成して使い回すことも可能ですが、もっとよい方法があります。それは <a class='autolink' href='#3s1ciXCdtTy'>with-label-options マクロ</a>を使った「<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>のデフォルト設定値の変更」です。以下の例では全部で６つの<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>を描いていますが、その<a class='autolink' href='#3kZ9FkounyK'>フォント</a>や位置は <a class='autolink' href='#3s1ciXCdtTy'>with-label-options マクロ</a>で指定しています。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (with-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
    (with-label-options (<span class='keyword3'>:font</span> 10)
      (with-label-options (<span class='keyword3'>:position</span> <span class='keyword3'>:left</span> <span class='keyword3'>:offset</span> '(-5 0))
        (person '( 70  40) 20 <span class='keyword3'>:label</span> <span class='literal'>"actor1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:P1</span>)
        (person '( 70 110) 20 <span class='keyword3'>:label</span> <span class='literal'>"actor2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:P2</span>))
      (with-label-options (<span class='keyword3'>:position</span> <span class='keyword3'>:right</span> <span class='keyword3'>:offset</span> '(5 0))
        (person '(230  40) 20 <span class='keyword3'>:label</span> <span class='literal'>"actor3"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:P3</span>)
        (person '(230 110) 20 <span class='keyword3'>:label</span> <span class='literal'>"actor4"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:P4</span>))
      (with-label-options (<span class='keyword3'>:offset</span> '(0 -5))
        (connect <span class='keyword3'>:P1</span> <span class='keyword3'>:P3</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span> <span class='keyword3'>:label</span> <span class='literal'>"P1 - P3"</span>)
        (connect <span class='keyword3'>:P2</span> <span class='keyword3'>:P4</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span> <span class='keyword3'>:label</span> <span class='literal'>"P2 - P4"</span>)))))
</pre>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- p1 : person -->
	<g id='p1'>
		<path fill='white' stroke='black' stroke-width='1' d='M 60 60 A 10 20 0 1 1 80 60 L 60 60 M 70 40 A 10 10 0 0 1 70 20 A 10 10 0 0 1 70 40' />
		<text x='55' y='45' text-anchor='end' font-size='10pt' fill='black' >actor1</text>
	</g>
	<!-- p2 : person -->
	<g id='p2'>
		<path fill='white' stroke='black' stroke-width='1' d='M 60 130 A 10 20 0 1 1 80 130 L 60 130 M 70 110 A 10 10 0 0 1 70 90 A 10 10 0 0 1 70 110' />
		<text x='55' y='115' text-anchor='end' font-size='10pt' fill='black' >actor2</text>
	</g>
	<!-- p3 : person -->
	<g id='p3'>
		<path fill='white' stroke='black' stroke-width='1' d='M 220 60 A 10 20 0 1 1 240 60 L 220 60 M 230 40 A 10 10 0 0 1 230 20 A 10 10 0 0 1 230 40' />
		<text x='245' y='45' text-anchor='start' font-size='10pt' fill='black' >actor3</text>
	</g>
	<!-- p4 : person -->
	<g id='p4'>
		<path fill='white' stroke='black' stroke-width='1' d='M 220 130 A 10 20 0 1 1 240 130 L 220 130 M 230 110 A 10 10 0 0 1 230 90 A 10 10 0 0 1 230 110' />
		<text x='245' y='115' text-anchor='start' font-size='10pt' fill='black' >actor4</text>
	</g>
	<!-- connector from p1 to p3 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,40.0 220.0,40.0' />
	<text x='150.0' y='35.0' text-anchor='middle' font-size='10pt' fill='black' >P1 - P3</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='207.00961,47.5 220,40.0 207.00961,32.5' />
	<!-- connector from p2 to p4 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,110.0 220.0,110.0' />
	<text x='150.0' y='105.0' text-anchor='middle' font-size='10pt' fill='black' >P2 - P4</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='207.00961,117.5 220,110.0 207.00961,102.5' />

</svg>
</div>

<p class='fig_title'><a name='iVJA6wcGHlP'></a>Figure.12-26 with-label-options によるラベル設定の変更</p>
<p>　　</p>
<p>　<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>は通常それぞれで異なるため、<a class='autolink' href='#3s1ciXCdtTy'>with-label-options マクロ</a>で指定することはできません。指定可能なのは <code>:position :offset :font</code> だけです<sup><a name='footnote_ref19' href='#footnote19'>19</a></sup>。</p>
<p>　　</p>
<h3><a name='2tO36YvJCgK'></a>12.12 補助線</h3>
<p>　<a class='autolink' href='#cp2F91gKG7W'>円弧</a>やベジェ曲線など、一部の要素はパラメータの指定が難しく感じられるかもしれません。これは、指定する位置（制御点など）と実際に描画されるもの（曲線など）が異なるからです。このような図形要素では、<a class='autolink' href='#2tO36YvJCgK'>補助線</a>の表示がサポートされています。これは作図を支援するための機能で、 <code>:debug</code> パラメータに色名を指定することで調整に役立つ線を表示してくれます。<a class='autolink' href='#iTkYd8KXLYO'>二次ベジェ曲線</a>での例を以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='500' height='250'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- 2d-curve -->
	<path fill='none' stroke='darkslategray' stroke-width='3' d='M 50.0 150.0Q 100.0 30.0 150.0 130.0T 250.0 180.0T 450.0 130.0' />
	<path fill='darkslategray' stroke='darkslategray' stroke-width='3' d='M 40.192307 154.03847 L 45.96154 140.1923 L 59.807693 145.96153 L 54.03846 159.8077 z' />
	<path fill='darkslategray' stroke='darkslategray' stroke-width='3' d='M 450 130 l -13.594617 -6.339274 l 0.0000000000000017763568 12.678548 z' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='50.0,150.0 100.0,30.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='100.0,30.0 150.0,130.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='150.0,130.0 200.0,230.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='200.0,230.0 250.0,180.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='250.0,180.0 300.0,130.0' />
	<polyline fill='none' stroke='red' stroke-width='1' stroke-dasharray='2 3 ' points='300.0,130.0 450.0,130.0' />
	<circle cx='50' cy='150' r='3' stroke='none' fill='red' />
	<circle cx='100' cy='30' r='3' stroke='none' fill='red' />
	<circle cx='150' cy='130' r='3' stroke='none' fill='red' />
	<circle cx='200' cy='230' r='3' stroke='none' fill='red' />
	<circle cx='250' cy='180' r='3' stroke='none' fill='red' />
	<circle cx='300' cy='130' r='3' stroke='none' fill='red' />
	<circle cx='450' cy='130' r='3' stroke='none' fill='red' />

</svg>
</div>

<p class='fig_title'><a name='6nX9Svj7TD9'></a>Figure.12-27 二次ベジェ曲線での補助線の例</p>
<p>　なお、<a class='autolink' href='#1rpUB3fre67'>色名の指定</a>が面倒であれば <code>:debug t</code> とすることもできます。この場合、デフォルトの色が使用されます。</p>
<h2><a name='2CSYEsoWlWE'></a>13 UML</h2>
<p>　kaavio は、UML を（一部）サポートしています。</p>
<h3><a name='8ya1jqc5cZQ'></a>13.1 アクティビティ図</h3>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>の例を以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='800' height='270'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- start : uml-activity-start -->
	<circle id='start' cx='30' cy='60' r='10' fill='maroon' stroke='none' stroke-width='1' />
	<!-- step1 : uml-action -->
	<g id='step1'>
		<g >
			<rect x='80' y='40' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<path fill='none' stroke='brown' stroke-width='2' d='M 150 63 l 0 14 m -5 0 l 0 -7 l 10 0 l 0 7' />
			<text x='120' y='65' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step1</text>
		</g>
	</g>
	<!-- uml-note -->
	<g stroke='olive' stroke-width='1' >
		<polygon fill='ivory' points='25.0,140.0 25.0,170.0 155.0,170.0 155.0,130.0 135.0,110.0 25.0,110.0 25.0,140.0' />
		<polyline fill='none' points=' 155.0,130.0 135.0,130.0 135.0,110.0' />
	</g>
	<text x='35' y='130' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >«memo»</text>
	<g text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >
		<text x='35' y='142' >action with</text>
		<text x='35' y='154' >rake icon.</text>
	</g>
	<polyline fill='none' stroke='olive' stroke-width='1' stroke-dasharray='3 3 ' points=' 101.25,110.0 112.5,80.0' />
	<!-- check : uml-decision-merge -->
	<g id='check'>
		<polygon fill='wheat' stroke='brown' stroke-width='1' points='213.33333,40.0 200.0,60.0 213.33333,80.0 266.66666,80.0 280.0,60.0 266.66666,40.0' />
		<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
			<text x='240' y='59' >check</text>
			<text x='240' y='71' >status</text>
		</g>
	</g>
	<!-- signal : uml-signal -->
	<g id='signal'>
		<polygon fill='powderblue' stroke='darkslateblue' stroke-width='1' points='207.5,139.0 192.5,160.0 207.5,181.0 280.0,181.0 280.0,139.0 207.5,139.0' />
		<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
			<text x='240' y='159' >signal</text>
			<text x='240' y='171' >error</text>
		</g>
	</g>
	<!-- step2 : uml-action -->
	<g id='step2'>
		<g >
			<rect x='330' y='20' width='400' height='160' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='530' y='40' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step2</text>
		</g>
	</g>
	<!-- start2 : uml-activity-start -->
	<circle id='start2' cx='350' cy='115' r='10' fill='maroon' stroke='none' stroke-width='1' />
	<!-- fork : uml-fork-join -->
	<g id='fork'>
		<rect x='385' y='95' width='10' height='40' rx='0' fill='maroon' stroke='none' stroke-width='1' />
	</g>
	<!-- sub1 : uml-action -->
	<g id='sub1'>
		<g >
			<rect x='430' y='65' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='470' y='90' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >sub1</text>
		</g>
	</g>
	<!-- sub2 : uml-action -->
	<g id='sub2'>
		<g >
			<rect x='550' y='65' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='590' y='90' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >sub2</text>
		</g>
	</g>
	<!-- sub3 : uml-action -->
	<g id='sub3'>
		<g >
			<rect x='490' y='125' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='530' y='150' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >sub3</text>
		</g>
	</g>
	<!-- join : uml-fork-join -->
	<g id='join'>
		<rect x='665' y='95' width='10' height='40' rx='0' fill='maroon' stroke='none' stroke-width='1' />
	</g>
	<!-- final2 : uml-activity-final -->
	<circle id='final2' cx='710' cy='115' r='15' fill='linen' stroke='maroon' stroke-width='1' />
	<circle cx='710' cy='115' r='9.0' fill='maroon' stroke='none' stroke-width='1' />
	<!-- uml-flow from start2 to fork -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 360.0,115.0 385.0,115.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='376.33975,120.0 385,115.0 376.33975,110.0' />
	<!-- uml-flow from fork to sub1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 395.0,113.125 430.0,100.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='423.64676,107.722466 430,100.0 420.13553,98.35917' />
	<!-- uml-flow from sub1 to sub2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 510.0,85.0 550.0,85.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='541.3397,90.0 550,85.0 541.3397,80.0' />
	<!-- uml-flow from sub2 to join -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 630.0,100.0 665.0,113.125' />
	<polyline fill='none' stroke='black' stroke-width='1' points='655.13556,114.76583 665,113.125 658.6468,105.402534' />
	<!-- uml-flow from join to final2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 675.0,115.0 695.0,115.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='686.3397,120.0 695.0,115.0 686.3397,110.0' />
	<!-- uml-flow from fork to sub3 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 395.0,116.07143 490.0,136.42857' />
	<polyline fill='none' stroke='black' stroke-width='1' points='480.48434,139.503 490,136.42857 482.57962,129.72499' />
	<!-- uml-flow from sub3 to join -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 570.0,136.42857 665.0,116.07143' />
	<polyline fill='none' stroke='black' stroke-width='1' points='657.57965,122.77502 665,116.07143 655.4843,112.99699' />
	<!-- merge : uml-decision-merge -->
	<g id='merge'>
		<polygon fill='wheat' stroke='brown' stroke-width='1' points='530.0,225.0 510.0,240.0 530.0,255.0 550.0,240.0 530.0,225.0' />
	</g>
	<!-- final : uml-activity-final -->
	<circle id='final' cx='710' cy='240' r='15' fill='linen' stroke='maroon' stroke-width='1' />
	<circle cx='710' cy='240' r='9.0' fill='maroon' stroke='none' stroke-width='1' />
	<!-- uml-flow from start to step1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 40.0,60.0 80.0,60.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='71.339745,65.0 80,60.0 71.339745,55.0' />
	<!-- uml-flow from step1 to check -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 160.0,60.0 200.0,60.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='191.33975,65.0 200,60.0 191.33975,55.0' />
	<!-- uml-flow from check to signal -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,80.0 240.0,139.0' />
	<text x='256.7' y='98.0' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='black' >[NG]</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='235.0,130.33975 240.0,139 245.0,130.33975' />
	<!-- uml-flow from check to step2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 280.0,60.0 330.0,60.0' />
	<text x='296.0' y='52.5' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='black' >[OK]</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='321.33975,65.0 330,60 321.33975,55.0' />
	<!-- uml-flow from signal to merge -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,181.0 240.0,240.0 510.0,240.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='501.33975,245.0 510,240 501.33975,235.0' />
	<!-- uml-flow from step2 to merge -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 530.0,180.0 530.0,225.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='525.0,216.33975 530,225 535.0,216.33975' />
	<!-- uml-flow from merge to final -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 550.0,240.0 695.0,240.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='686.3397,245.0 695.0,240.0 686.3397,235.0' />

</svg>
</div>

<p class='fig_title'><a name='47w9hCS30sC'></a>Figure.13-1 UML アクティビティ図の例</p>
<details>
<summary>※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (800 270)
  (grid)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (uml-activity-start '(30 60) <span class='keyword3'>:id</span> <span class='keyword3'>:start</span>)
    (uml-action   (x+ start.cc  90) <span class='literal'>"step1"</span> <span class='keyword3'>:rake</span> t <span class='keyword3'>:id</span> <span class='keyword3'>:step1</span>)
    (uml-note (xy+ step1.cc -30 80) 130 60
              <span class='literal'>"action with~%rake icon."</span>
              <span class='keyword3'>:targets</span> <span class='keyword3'>:step1</span> <span class='keyword3'>:keyword</span> <span class='literal'>"memo"</span>)
    (uml-decision (x+ step1.cc 120)
                  <span class='keyword3'>:text</span> <span class='literal'>"check~%status"</span> <span class='keyword3'>:width</span> 80 <span class='keyword3'>:height</span> 40 <span class='keyword3'>:id</span> <span class='keyword3'>:check</span>)
    (uml-signal   (y+ check.center 100) <span class='keyword3'>:send</span>
                  <span class='literal'>"signal~%error"</span> <span class='keyword3'>:direction</span> <span class='keyword3'>:left</span> <span class='keyword3'>:id</span> <span class='keyword3'>:signal</span>)
    (uml-action (xy+ check.center 290 40) <span class='literal'>"step2"</span>
                <span class='keyword3'>:id</span> <span class='keyword3'>:step2</span> <span class='keyword3'>:width</span> 400 <span class='keyword3'>:height</span> 160 <span class='keyword3'>:contents</span> t)
    (<span class='keyword1'>labels</span> ((flow-chain (from <span class='keyword2'>&amp;rest</span> rest)
               (<span class='keyword1'>when</span> rest
                 (uml-flow from (car rest))
                 (apply #'flow-chain (car rest) (cdr rest)))))
      (with-subcanvas-of (<span class='keyword3'>:step2</span>)
        (uml-activity-start (x+ canvas.cl 20) <span class='keyword3'>:id</span> <span class='keyword3'>:start2</span>)
        (uml-fork           (x+ start2.cc 40) <span class='keyword3'>:h</span> <span class='keyword3'>:id</span> <span class='keyword3'>:fork</span>)
        (uml-action (xy+ $1.cc 80 -30)   <span class='literal'>"sub1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:sub1</span>)
        (uml-action (x+  $1.cc 120)      <span class='literal'>"sub2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:sub2</span>)
        (uml-action (xy+ fork.cc 140 30) <span class='literal'>"sub3"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:sub3</span>)
        (uml-join           (xy+ sub2.cc 80 30) <span class='keyword3'>:h</span> <span class='keyword3'>:id</span> <span class='keyword3'>:join</span>)
        (uml-activity-final (x+  join.cc 40) <span class='keyword3'>:id</span> <span class='keyword3'>:final2</span>)
        (flow-chain <span class='keyword3'>:start2</span> <span class='keyword3'>:fork</span> <span class='keyword3'>:sub1</span> <span class='keyword3'>:sub2</span> <span class='keyword3'>:join</span> <span class='keyword3'>:final2</span>)
        (flow-chain <span class='keyword3'>:fork</span> <span class='keyword3'>:sub3</span> <span class='keyword3'>:join</span>))
      (uml-merge (y+ step2.bc 60) <span class='keyword3'>:id</span> <span class='keyword3'>:merge</span>)
      (uml-activity-final (x+ merge.center 180) <span class='keyword3'>:id</span> <span class='keyword3'>:final</span>)
      (flow-chain <span class='keyword3'>:start</span>  <span class='keyword3'>:step1</span> <span class='keyword3'>:check</span>)
      (uml-flow   <span class='keyword3'>:check</span>  <span class='keyword3'>:signal</span>
                  <span class='keyword3'>:spec</span> '(<span class='keyword3'>:guard</span> <span class='literal'>"NG"</span> <span class='keyword3'>:offset</span> ( 5 -15) <span class='keyword3'>:font</span> 9))
      (uml-flow   <span class='keyword3'>:check</span>  <span class='keyword3'>:step2</span> <span class='keyword3'>:style</span> <span class='keyword3'>:RL1</span>
                  <span class='keyword3'>:spec</span> '(<span class='keyword3'>:guard</span> <span class='literal'>"OK"</span> <span class='keyword3'>:offset</span> (-9   0) <span class='keyword3'>:font</span> 9))
      (uml-flow   <span class='keyword3'>:signal</span> <span class='keyword3'>:merge</span> <span class='keyword3'>:style</span> <span class='keyword3'>:BL</span>)
      (flow-chain <span class='keyword3'>:step2</span>  <span class='keyword3'>:merge</span> <span class='keyword3'>:final</span>))))
</pre>
</details>
<p>　　</p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>で使用する構成要素は以下を参照してください。</p>
<ul>
<li><a href='#5kkSlhsbaIn'>uml-action</a></li>
<li><a href='#gfsl4uecBoY'>uml-activity-final</a></li>
<li><a href='#gr8RKSxFalf'>uml-activity-start</a></li>
<li><a href='#lgLGZTmFJ4a'>uml-connector</a></li>
<li><a href='#4gZkeXtP8bm'>uml-decision</a></li>
<li><a href='#gbfzFbCEQb7'>uml-expansion-region</a></li>
<li><a href='#602QxE3z6rZ'>uml-flow</a></li>
<li><a href='#8l54mEIg2yA'>uml-flow-final</a></li>
<li><a href='#dI34u24Hxh3'>uml-fork</a></li>
<li><a href='#1cJtoPoE2w0'>uml-frame</a></li>
<li><a href='#eTHeBBfGtFF'>uml-join</a></li>
<li><a href='#ikpYK2ZSZov'>uml-merge</a></li>
<li><a href='#jFViCKeUWqC'>uml-note</a></li>
<li><a href='#hDY1LBkmvKv'>uml-partition</a></li>
<li><a href='#axhW9kmgXg3'>uml-pin</a></li>
<li><a href='#9eWb5bnq5W3'>uml-signal</a></li>
<li><a href='#dkYATTKFF3X'>uml-time-event</a></li>
</ul>
<h3><a name='khgkJB6xK95'></a>13.2 クラス図</h3>
<p>　UML <a class='autolink' href='#khgkJB6xK95'>クラス図</a>の例を以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='800' height='270'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- gui : uml-package -->
	<g id='gui'>
		<g >
			<rect x='330' y='45' width='140' height='110' fill='beige' />
			<rect x='330' y='25' width='40' height='20' fill='beige' />
			<polyline fill='none' stroke='brown' stroke-width='1' points=' 370.0,45.0 370.0,25.0 330.0,25.0 330.0,155.0 470.0,155.0 470.0,45.0 330.0,45.0' />
			<text x='344.75' y='40' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >GUI</text>
		</g>
	</g>
	<!-- app : uml-class -->
	<g id='app'>
		<rect x='354.25' y='85' width='91.5' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='400.0' y='105' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Application</text>
	</g>
	<!-- sys : uml-package -->
	<g id='sys'>
		<g >
			<rect x='530' y='45' width='140' height='110' fill='beige' />
			<rect x='530' y='25' width='40' height='20' fill='beige' />
			<polyline fill='none' stroke='brown' stroke-width='1' points=' 570.0,45.0 570.0,25.0 530.0,25.0 530.0,155.0 670.0,155.0 670.0,45.0 530.0,45.0' />
			<text x='544.75' y='40' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >sys</text>
		</g>
	</g>
	<!-- thread : uml-class -->
	<g id='thread'>
		<rect x='565' y='85' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='600' y='105' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Thread</text>
	</g>
	<!-- theapp : uml-class -->
	<g id='theapp'>
		<rect x='335' y='195' width='130' height='50' fill='beige' stroke='maroon' stroke-width='1' />
		<polyline fill='none' stroke='maroon' stroke-width='1' points=' 340.0,195.0 340.0,245.0' />
		<polyline fill='none' stroke='maroon' stroke-width='1' points=' 460.0,195.0 460.0,245.0' />
		<text x='400' y='215' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >TheApp</text>
		<polyline fill='none' stroke='maroon' stroke-width='1' points=' 340.0,225.0 460.0,225.0' />
		<text x='345' y='240' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >+Run():int</text>
	</g>
	<!-- uml-note -->
	<g stroke='olive' stroke-width='1' >
		<polygon fill='ivory' points='155.0,140.0 155.0,170.0 285.0,170.0 285.0,130.0 265.0,110.0 155.0,110.0 155.0,140.0' />
		<polyline fill='none' points=' 285.0,130.0 265.0,130.0 265.0,110.0' />
	</g>
	<text x='165' y='130' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >«memo»</text>
	<g text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >
		<text x='165' y='142' >TheApp is</text>
		<text x='165' y='154' >active class.</text>
	</g>
	<polyline fill='none' stroke='olive' stroke-width='1' stroke-dasharray='3 3 ' points=' 285.0,168.88889 343.75,195.0' />
	<!-- worker : uml-class -->
	<g id='worker'>
		<rect x='564.0' y='204' width='72.0' height='32' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='600.0' y='219' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='black' >«thread»</text>
		<text x='600.0' y='231' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Worker</text>
	</g>
	<!-- uml-generalization from theapp to app -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 400.0,195.0 400.0,115.0' />
	<path fill='white' stroke='black' stroke-width='1' d='M 400.0 115 l -4.2261825 9.063078 l 8.452365 -0.0000000000000017763568 z' />
	<!-- uml-generalization from worker to thread -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 600.0,204.0 600.0,115.0' />
	<path fill='white' stroke='black' stroke-width='1' d='M 600.0 115 l -4.2261825 9.063078 l 8.452365 -0.0000000000000017763568 z' />
	<!-- uml-aggregation from theapp to worker -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 465.0,220.0 564.0,220.0' />
	<path fill='white' stroke='black' stroke-width='1' d='M 465 220.0 L 473.66025 225.0 L 482.3205 220.0 L 473.66025 215.0 z' />
	<polyline fill='none' stroke='black' stroke-width='1' points='555.3397,225.0 564.0,220.0 555.3397,215.0' />
	<!-- logrcv : uml-interface -->
	<g id='logrcv'>
		<circle cx='230' cy='220' r='10' fill='lightgray' stroke='maroon' stroke-width='1' />
		<text x='230' y='242' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >LogReceiver</text>
	</g>
	<!-- logger : uml-class -->
	<g id='logger'>
		<rect x='45' y='205' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='80' y='225' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Logger</text>
	</g>
	<!-- uml-interface-request from theapp to logrcv -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 335.0,220.0 250.0,220.0' />
	<path fill='none' stroke='black' stroke-width='1' d='M 242.5881904510252 210.3407417371093 A 10 10 0 0 1 242.5881904510252 229.6592582628907' />
	<!-- uml-association from logger to logrcv -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 115.0,220.0 220.0,220.0' />

</svg>
</div>

<p class='fig_title'><a name='2nfepGo8CeS'></a>Figure.13-2 UML クラス図の例</p>
<details>
<summary>※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (800 270)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-package (y+ canvas.tc 100) <span class='literal'>"GUI"</span>
      <span class='keyword3'>:width</span> 140 <span class='keyword3'>:height</span> 110 <span class='keyword3'>:stroke</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:beige</span> <span class='keyword3'>:id</span> <span class='keyword3'>:gui</span>
      <span class='keyword3'>:contents</span>
      ((uml-class canvas.cc <span class='literal'>"Application"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:app</span>)))
    (uml-package (xy+ canvas.tc 200 100) <span class='literal'>"sys"</span>
      <span class='keyword3'>:width</span> 140 <span class='keyword3'>:height</span> 110 <span class='keyword3'>:stroke</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:beige</span> <span class='keyword3'>:id</span> <span class='keyword3'>:sys</span>
      <span class='keyword3'>:contents</span>
      ((uml-class canvas.cc <span class='literal'>"Thread"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:thread</span>)))
    (uml-class (y+ app.cc    120) <span class='literal'>"TheApp"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:theapp</span>
      <span class='keyword3'>:width</span> 120 <span class='keyword3'>:active</span> t
      <span class='keyword3'>:operations</span>
      ((<span class='keyword3'>:public</span> <span class='literal'>"Run"</span> <span class='keyword3'>:type</span> <span class='keyword3'>:int</span>)))
    (uml-note (xy+ theapp.cc -180 -80) 130 60
                <span class='literal'>"TheApp is~%active class."</span>
                <span class='keyword3'>:fill</span> <span class='keyword3'>:ivory</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:olive</span>
                <span class='keyword3'>:targets</span> <span class='keyword3'>:theapp</span> <span class='keyword3'>:keyword</span> <span class='literal'>"memo"</span>)
    (uml-class (y+ thread.cc 120) <span class='literal'>"Worker"</span> <span class='keyword3'>:keyword</span> '(<span class='literal'>"thread"</span> <span class='keyword3'>:font</span> 9) <span class='keyword3'>:id</span> <span class='keyword3'>:worker</span>)
    (uml-generalization <span class='keyword3'>:theapp</span> <span class='keyword3'>:app</span>)
    (uml-generalization <span class='keyword3'>:worker</span> <span class='keyword3'>:thread</span>)
    (uml-aggregation <span class='keyword3'>:theapp</span> <span class='keyword3'>:worker</span> <span class='keyword3'>:arrow</span> t)
    (uml-interface (x+ theapp.cc -170) <span class='literal'>"LogReceiver"</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:lightgray</span> <span class='keyword3'>:id</span> <span class='keyword3'>:logrcv</span>)
    (uml-class (x+ logrcv.cc -150) <span class='literal'>"Logger"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:logger</span>)
    (uml-interface-request <span class='keyword3'>:theapp</span> <span class='keyword3'>:logrcv</span>)
    (uml-association <span class='keyword3'>:logger</span> <span class='keyword3'>:logrcv</span>)))
</pre>
</details>
<p>　　</p>
<p>　UML <a class='autolink' href='#khgkJB6xK95'>クラス図</a>で使用する構成要素は以下を参照してください。</p>
<ul>
<li><a href='#881rvOpGoim'>uml-aggregation</a></li>
<li><a href='#0A70k6t8D8T'>uml-association</a></li>
<li><a href='#fkYROSV9994'>uml-class</a></li>
<li><a href='#jswiRdMw2Be'>uml-composition</a></li>
<li><a href='#f40Gf0pqB5B'>uml-dependency</a></li>
<li><a href='#1cJtoPoE2w0'>uml-frame</a></li>
<li><a href='#i8NSsns8du9'>uml-generalization</a></li>
<li><a href='#7DqwJ3CtaoY'>uml-interface</a></li>
<li><a href='#iND5crw5iJu'>uml-interface-request</a></li>
<li><a href='#dd6qYwERoK0'>uml-stereotype-info</a></li>
<li><a href='#g6kEHGpHjhy'>uml-multiplicity-info</a></li>
<li><a href='#jFViCKeUWqC'>uml-note</a></li>
<li><a href='#algAxSoZB1Z'>uml-package</a></li>
<li><a href='#bn5BLn6Qb3Y'>uml-realization</a></li>
<li><a href='#9ugZNtgVL4J'>uml-role-info</a></li>
</ul>
<h3><a name='evUs70Itwyp'></a>13.3 コンポーネント図</h3>
<p>　UML <a class='autolink' href='#evUs70Itwyp'>コンポーネント図</a>の例を以下に示します。これは書籍「UML モデリングのエッセンス第３版」の図を再現したものです。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='700' height='400'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- till : uml-component -->
	<g id='till'>
		<g >
			<rect x='30' y='25' width='100' height='50' fill='white' stroke='black' stroke-width='1' />
			<rect x='108' y='33' width='14' height='14' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='102.75' y='35.45' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='102.75' y='41.05' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<text x='80' y='55' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >: till</text>
		</g>
	</g>
	<!-- sales-msg1 : uml-interface -->
	<g id='sales-msg1'>
		<circle cx='80' cy='120' r='10' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='95' y='125' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >sales message</text>
	</g>
	<!-- msg-que : uml-component -->
	<g id='msg-que'>
		<g >
			<rect x='30' y='153' width='100' height='54' fill='white' stroke='black' stroke-width='1' />
			<rect x='108' y='161' width='14' height='14' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='102.75' y='163.45' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='102.75' y='169.05' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
				<text x='80' y='173' ></text>
				<text x='80' y='185' >: message</text>
				<text x='80' y='197' >queue</text>
			</g>
		</g>
	</g>
	<!-- uml-interface-request from till to sales-msg1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,75.0 80.0,100.0' />
	<path fill='none' stroke='black' stroke-width='1' d='M 70.34074173710931 107.41180954897479 A 10 10 0 0 1 89.65925826289069 107.41180954897479' />
	<!-- uml-association from msg-que to sales-msg1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,153.0 80.0,130.0' />
	<!-- sales-msg2 : uml-interface -->
	<g id='sales-msg2'>
		<circle cx='180' cy='166.5' r='10' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='180' y='193.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >sales</text>
		<text x='180' y='205.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >message</text>
	</g>
	<!-- uml-interface-request from msg-que to sales-msg2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 130.0,166.5 160.0,166.5' />
	<path fill='none' stroke='black' stroke-width='1' d='M 167.4118095489748 176.1592582628907 A 10 10 0 0 1 167.4118095489748 156.8407417371093' />
	<!-- sales-svr : uml-component -->
	<g id='sales-svr'>
		<g >
			<rect x='240' y='91.5' width='420' height='150' fill='white' stroke='black' stroke-width='1' />
			<rect x='638' y='99.5' width='14' height='14' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='632.75' y='101.95' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='632.75' y='107.55' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<text x='450' y='111.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >: Sales Server</text>
		</g>
	</g>
	<!-- port1 : uml-port -->
	<g id='port1'>
		<rect x='232' y='158.5' width='16' height='16' fill='#EEE5DE' stroke='black' stroke-width='1' />
	</g>
	<!-- uml-association from port1 to sales-msg2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 232.0,166.5 190.0,166.5' />
	<!-- tran-proc : uml-component -->
	<g id='tran-proc'>
		<g >
			<rect x='287.75' y='131.5' width='104.5' height='70' fill='white' stroke='black' stroke-width='1' />
			<rect x='370.25' y='139.5' width='14' height='14' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='365.0' y='141.95' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='365.0' y='147.55' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
				<text x='340.0' y='159.5' ></text>
				<text x='340.0' y='171.5' >: transaction</text>
				<text x='340.0' y='183.5' >processor</text>
			</g>
		</g>
	</g>
	<!-- tmp-interface : uml-interface -->
	<g id='tmp-interface'>
		<circle cx='460' cy='166.5' r='10' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='460' y='188.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' ></text>
	</g>
	<!-- account-drvr : uml-component -->
	<g id='account-drvr'>
		<g >
			<rect x='530' y='131.5' width='100' height='70' fill='white' stroke='black' stroke-width='1' />
			<rect x='608' y='139.5' width='14' height='14' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='602.75' y='141.95' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='602.75' y='147.55' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
				<text x='580' y='159.5' ></text>
				<text x='580' y='171.5' >: accounting</text>
				<text x='580' y='183.5' >driver</text>
			</g>
		</g>
	</g>
	<!-- uml-interface-request from tran-proc to tmp-interface -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 392.25,166.5 440.0,166.5' />
	<path fill='none' stroke='black' stroke-width='1' d='M 447.4118095489748 176.1592582628907 A 10 10 0 0 1 447.4118095489748 156.8407417371093' />
	<!-- uml-association from account-drvr to tmp-interface -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 530.0,166.5 470.0,166.5' />
	<!-- uml-dependency from port1 to tran-proc -->
	<polyline fill='none' stroke='black' stroke-width='1' stroke-dasharray='4 2 ' points=' 248.0,166.5 287.75,166.5' />
	<polyline fill='none' stroke='black' stroke-width='1' points='279.08975,171.5 287.75,166.5 279.08975,161.5' />
	<!-- port2 : uml-port -->
	<g id='port2'>
		<rect x='572' y='233.5' width='16' height='16' fill='#EEE5DE' stroke='black' stroke-width='1' />
	</g>
	<!-- uml-dependency from account-drvr to port2 -->
	<polyline fill='none' stroke='black' stroke-width='1' stroke-dasharray='4 2 ' points=' 580.0,201.5 580.0,233.5' />
	<polyline fill='none' stroke='black' stroke-width='1' points='575.0,224.83975 580.0,233.5 585.0,224.83975' />
	<!-- receivables : uml-interface -->
	<g id='receivables'>
		<circle cx='580' cy='286.5' r='10' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='565' y='291.5' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >receivables</text>
	</g>
	<!-- uml-interface-request from port2 to receivables -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 580.0,249.5 580.0,266.5' />
	<path fill='none' stroke='black' stroke-width='1' d='M 570.3407417371093 273.9118095489748 A 10 10 0 0 1 589.6592582628907 273.9118095489748' />
	<!-- account-sys : uml-component -->
	<g id='account-sys'>
		<g >
			<rect x='530' y='316.5' width='100' height='70' fill='white' stroke='black' stroke-width='1' />
			<rect x='608' y='324.5' width='14' height='14' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='602.75' y='326.95' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='602.75' y='332.55' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
				<text x='580' y='344.5' ></text>
				<text x='580' y='356.5' >: accounting</text>
				<text x='580' y='368.5' >system</text>
			</g>
		</g>
	</g>
	<!-- uml-association from account-sys to receivables -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 580.0,316.5 580.0,296.5' />

</svg>
</div>

<p class='fig_title'><a name='5njTon1Y568'></a>Figure.13-3 UML コンポーネント図の例</p>
<details>
<summary>※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (700 400)
  (grid)
  (with-theme (<span class='keyword3'>:uml-component-default</span>)
    (with-options (<span class='keyword3'>:font</span> 10)
      (uml-component (xy+ canvas.tl 80 50) <span class='literal'>": till"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:till</span>)
      (uml-interface (xy+ $1.cc 0 70)
                     '(<span class='literal'>"sales message"</span> <span class='keyword3'>:position</span> <span class='keyword3'>:right</span> <span class='keyword3'>:offset</span> (5 0)) <span class='keyword3'>:id</span> <span class='keyword3'>:sales-msg1</span>)
      (uml-component (xy+ $1.cc 0 60) <span class='literal'>"~%: message~%queue"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:msg-que</span>)
      (uml-interface-request <span class='keyword3'>:till</span> <span class='keyword3'>:sales-msg1</span>)
      (uml-association <span class='keyword3'>:msg-que</span> <span class='keyword3'>:sales-msg1</span>)
      (uml-interface (xy+ msg-que.tr 50 (/ msg-que.height 4))
                     '(<span class='literal'>"sales~%message"</span> <span class='keyword3'>:position</span> <span class='keyword3'>:below</span> <span class='keyword3'>:offset</span> (0 5)) <span class='keyword3'>:id</span> <span class='keyword3'>:sales-msg2</span>)
      (uml-interface-request <span class='keyword3'>:msg-que</span> <span class='keyword3'>:sales-msg2</span> <span class='keyword3'>:style</span> <span class='keyword3'>:R1L2</span>)
      (uml-component (xy+ sales-msg2.cc 270 0) <span class='literal'>": Sales Server"</span>
                     <span class='keyword3'>:width</span> 420 <span class='keyword3'>:height</span> 150 <span class='keyword3'>:contents</span> t <span class='keyword3'>:id</span> <span class='keyword3'>:sales-svr</span>)
      (uml-port sales-svr.CL <span class='keyword3'>:id</span> <span class='keyword3'>:port1</span>)
      (uml-association <span class='keyword3'>:port1</span> <span class='keyword3'>:sales-msg2</span>)
      (with-subcanvas-of (<span class='keyword3'>:sales-svr</span>)
        (uml-component (xy+ port1.cc 100 0)
                       <span class='literal'>"~%: transaction~%processor"</span> <span class='keyword3'>:height</span> 70 <span class='keyword3'>:id</span> <span class='keyword3'>:tran-proc</span>)
        (uml-interface (xy+ $1.cc  120 0) <span class='literal'>""</span> <span class='keyword3'>:id</span> <span class='keyword3'>:tmp-interface</span>)
        (uml-component (xy+ $1.cc  120 0)
                       <span class='literal'>"~%: accounting~%driver"</span> <span class='keyword3'>:height</span> 70 <span class='keyword3'>:id</span> <span class='keyword3'>:account-drvr</span>)
        (uml-interface-request <span class='keyword3'>:tran-proc</span> <span class='keyword3'>:tmp-interface</span>)
        (uml-association <span class='keyword3'>:account-drvr</span> <span class='keyword3'>:tmp-interface</span>)
        (uml-dependency <span class='keyword3'>:port1</span> <span class='keyword3'>:tran-proc</span>))
      (uml-port (x+ sales-svr.B3 25) <span class='keyword3'>:id</span> <span class='keyword3'>:port2</span>)
      (uml-dependency <span class='keyword3'>:account-drvr</span> <span class='keyword3'>:port2</span>)
      (uml-interface (xy+ port2.cc 0 45)
                     '(<span class='literal'>"receivables"</span> <span class='keyword3'>:position</span> <span class='keyword3'>:left</span> <span class='keyword3'>:offset</span> (-5 0)) <span class='keyword3'>:id</span> <span class='keyword3'>:receivables</span>)
      (uml-interface-request <span class='keyword3'>:port2</span> <span class='keyword3'>:receivables</span>)
      (uml-component (xy+ receivables.cc 0 65)
                     <span class='literal'>"~%: accounting~%system"</span> <span class='keyword3'>:height</span> 70 <span class='keyword3'>:id</span> <span class='keyword3'>:account-sys</span>)
      (uml-association <span class='keyword3'>:account-sys</span> <span class='keyword3'>:receivables</span>))))
</pre>
</details>
<p>　　</p>
<p>　UML <a class='autolink' href='#evUs70Itwyp'>コンポーネント図</a>で使用する構成要素は以下を参照してください。</p>
<ul>
<li><a href='#hlJEas6GjYs'>uml-component</a></li>
<li><a href='#f40Gf0pqB5B'>uml-dependency</a></li>
<li><a href='#1cJtoPoE2w0'>uml-frame</a></li>
<li><a href='#dd6qYwERoK0'>uml-stereotype-info</a></li>
<li><a href='#jFViCKeUWqC'>uml-note</a></li>
<li><a href='#algAxSoZB1Z'>uml-package</a></li>
<li><a href='#froC5uEo6hu'>uml-port</a></li>
<li><a href='#7DqwJ3CtaoY'>uml-interface</a></li>
<li><a href='#iND5crw5iJu'>uml-interface-request</a></li>
<li><a href='#0A70k6t8D8T'>uml-association</a></li>
<li><a href='#bn5BLn6Qb3Y'>uml-realization</a></li>
</ul>
<h3><a name='la7Xa1OTF3W'></a>13.4 パッケージ図</h3>
<p>　UML <a class='autolink' href='#la7Xa1OTF3W'>パッケージ図</a>の例を以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='700' height='300'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-package -->
	<g >
		<rect x='50' y='30' width='100' height='60' fill='beige' />
		<rect x='50' y='15' width='40' height='15' fill='beige' />
		<polyline fill='none' stroke='maroon' stroke-width='1' points=' 90.0,30.0 90.0,15.0 50.0,15.0 50.0,90.0 150.0,90.0 150.0,30.0 50.0,30.0' />
		<text x='100' y='65' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Application</text>
	</g>
	<!-- db-gateway : uml-package -->
	<g id='db-gateway'>
		<g >
			<rect x='310' y='30' width='100' height='60' fill='beige' />
			<rect x='310' y='15' width='40' height='15' fill='beige' />
			<polyline fill='none' stroke='maroon' stroke-width='1' points=' 350.0,30.0 350.0,15.0 310.0,15.0 310.0,90.0 410.0,90.0 410.0,30.0 310.0,30.0' />
			<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
				<text x='360' y='59' >Database</text>
				<text x='360' y='71' >Gateway</text>
			</g>
		</g>
	</g>
	<!-- uml-dependency to db-gateway -->
	<polyline fill='none' stroke='black' stroke-width='1' stroke-dasharray='4 2 ' points=' 150.0,60.0 310.0,60.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='301.33975,65.0 310,60.0 301.33975,55.0' />
	<!-- uml-package -->
	<g >
		<rect x='310' y='190' width='100' height='60' fill='beige' />
		<rect x='310' y='175' width='40' height='15' fill='beige' />
		<polyline fill='none' stroke='maroon' stroke-width='1' points=' 350.0,190.0 350.0,175.0 310.0,175.0 310.0,250.0 410.0,250.0 410.0,190.0 310.0,190.0' />
		<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
			<text x='360' y='219' >SQL Server</text>
			<text x='360' y='231' >Gateway</text>
		</g>
	</g>
	<!-- uml-realization to db-gateway -->
	<polyline fill='none' stroke='black' stroke-width='1' stroke-dasharray='4 2 ' points=' 360.0,190.0 360.0,90.0' />
	<path fill='white' stroke='black' stroke-width='1' d='M 360.0 90 l -4.2261825 9.063078 l 8.452365 -0.0000000000000017763568 z' />
	<!-- uml-package -->
	<g >
		<rect x='110' y='190' width='100' height='60' fill='beige' />
		<rect x='110' y='175' width='40' height='15' fill='beige' />
		<polyline fill='none' stroke='maroon' stroke-width='1' points=' 150.0,190.0 150.0,175.0 110.0,175.0 110.0,250.0 210.0,250.0 210.0,190.0 110.0,190.0' />
		<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
			<text x='160' y='219' >Oracle</text>
			<text x='160' y='231' >Gateway</text>
		</g>
	</g>
	<!-- uml-realization to db-gateway -->
	<polyline fill='none' stroke='black' stroke-width='1' stroke-dasharray='4 2 ' points=' 160.0,190.0 160.0,140.0 335.0,140.0 335.0,90.0' />
	<path fill='white' stroke='black' stroke-width='1' d='M 335 90 l -4.2261825 9.063078 l 8.452365 -0.0000000000000017763568 z' />
	<!-- uml-package -->
	<g >
		<rect x='510' y='190' width='100' height='60' fill='beige' />
		<rect x='510' y='175' width='40' height='15' fill='beige' />
		<polyline fill='none' stroke='maroon' stroke-width='1' points=' 550.0,190.0 550.0,175.0 510.0,175.0 510.0,250.0 610.0,250.0 610.0,190.0 510.0,190.0' />
		<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
			<text x='560' y='219' >Tset Stub</text>
			<text x='560' y='231' >Gateway</text>
		</g>
	</g>
	<!-- uml-realization to db-gateway -->
	<polyline fill='none' stroke='black' stroke-width='1' stroke-dasharray='4 2 ' points=' 560.0,190.0 560.0,140.0 385.0,140.0 385.0,90.0' />
	<path fill='white' stroke='black' stroke-width='1' d='M 385 90 l -4.2261825 9.063078 l 8.452365 -0.0000000000000017763568 z' />

</svg>
</div>

<p class='fig_title'><a name='8LCq1lJWOf6'></a>Figure.13-4 UML パッケージ図の例</p>
<details>
<summary>※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (700 300)
  (grid)
  (with-theme (<span class='keyword3'>:uml-package-default</span>)
	(with-options (<span class='keyword3'>:font</span> 10)
	  (uml-package (xy+ canvas.tl 100  60) <span class='literal'>"Application"</span>)
	  (uml-package (xy+ $1.cc     260   0) <span class='literal'>"Database~%Gateway"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:db-gateway</span>)
	  (uml-dependency $2.id $1.id)
	  (uml-package (xy+ $2.cc       0 160) <span class='literal'>"SQL Server~%Gateway"</span>)
	  (uml-realization $1.id <span class='keyword3'>:db-gateway</span>)
	  (uml-package (xy+ $2.cc    -200   0) <span class='literal'>"Oracle~%Gateway"</span>)
	  (uml-realization $1.id <span class='keyword3'>:db-gateway</span> <span class='keyword3'>:style</span> <span class='keyword3'>:TB1</span>)
	  (uml-package (xy+ $4.cc     200   0) <span class='literal'>"Tset Stub~%Gateway"</span>)
	  (uml-realization $1.id <span class='keyword3'>:db-gateway</span> <span class='keyword3'>:style</span> <span class='keyword3'>:TB3</span>))))
</pre>
</details>
<p>　　</p>
<p>　UML <a class='autolink' href='#la7Xa1OTF3W'>パッケージ図</a>で使用する構成要素は以下を参照してください。</p>
<ul>
<li><a href='#dd6qYwERoK0'>uml-stereotype-info</a></li>
<li><a href='#f40Gf0pqB5B'>uml-dependency</a></li>
<li><a href='#1cJtoPoE2w0'>uml-frame</a></li>
<li><a href='#jFViCKeUWqC'>uml-note</a></li>
<li><a href='#algAxSoZB1Z'>uml-package</a></li>
<li><a href='#bn5BLn6Qb3Y'>uml-realization</a></li>
</ul>
<h3><a name='kYsauEETY6n'></a>13.5 状態マシン図</h3>
<p>　UML <a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>の例を以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='600' height='300'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- s1 : uml-state -->
	<g id='s1'>
		<g >
			<rect x='250' y='19' width='100' height='42' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
				<text x='300' y='39' >Show</text>
				<text x='300' y='51' >Connections</text>
			</g>
		</g>
	</g>
	<!-- s2 : uml-state -->
	<g id='s2'>
		<g >
			<rect x='20' y='130' width='560' height='140' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='300' y='150' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Enter Connection Details</text>
			<polyline fill='none' stroke='darkslateblue' stroke-width='1' points=' 20.0,160.0 580.0,160.0' />
		</g>
	</g>
	<!-- s3 : uml-state-begin -->
	<circle id='s3' cx='50' cy='215' r='10' fill='darkslateblue' stroke='none' stroke-width='1' />
	<!-- s4 : uml-state -->
	<g id='s4'>
		<g >
			<rect x='86.0' y='195' width='108.0' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
				<text x='140.0' y='215' >Enter phone</text>
				<text x='140.0' y='227' >number</text>
			</g>
		</g>
	</g>
	<!-- s5 : uml-state -->
	<g id='s5'>
		<g >
			<rect x='258.0' y='195' width='124.0' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
				<text x='320.0' y='215' >Choose shared</text>
				<text x='320.0' y='227' >or solo</text>
			</g>
		</g>
	</g>
	<!-- s6 : uml-state -->
	<g id='s6'>
		<g >
			<rect x='450.0' y='195' width='100.0' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='500.0' y='220' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Enter name</text>
		</g>
	</g>
	<!-- uml-transition from s3 to s4 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 60.0,215.0 86.0,215.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='77.339745,220.0 86.0,215.0 77.339745,210.0' />
	<!-- uml-transition from s4 to s5 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 194.0,205.0 258.0,205.0' />
	<text x='226.0' y='197.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >next</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='249.33975,210.0 258.0,205 249.33975,200.0' />
	<!-- uml-transition from s5 to s4 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 258.0,225.0 194.0,225.0' />
	<text x='226.0' y='241.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >back</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='202.66025,220.0 194.0,225 202.66025,230.0' />
	<!-- uml-transition from s5 to s6 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 382.0,205.0 450.0,205.0' />
	<text x='416.0' y='197.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >next</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='441.33975,210.0 450.0,205 441.33975,200.0' />
	<!-- uml-transition from s6 to s5 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 450.0,225.0 382.0,225.0' />
	<text x='416.0' y='241.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >back</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='390.66025,220.0 382.0,225 390.66025,230.0' />
	<!-- uml-transition from s1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 275.0,61.0 275.0,129.995' />
	<text x='257.0' y='79.4975' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >new</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='270.0,121.33474 275.0,129.995 280.0,121.33474' />
	<!-- uml-transition to s1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 325.0,129.995 325.0,61.0' />
	<text x='351.0' y='119.4975' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >cancel</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='330.0,69.660255 325,61 320.0,69.660255' />
	<!-- uml-transition from s6 to s1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 500.0,195.0 500.0,40.0 350.0,40.0' />
	<text x='519.0' y='96.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >save</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='358.66025,35.0 350,40 358.66025,45.0' />

</svg>
</div>

<p class='fig_title'><a name='ethEYgcWcsm'></a>Figure.13-5 UML 状態マシン図の例</p>
<details>
<summary>※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (600 300)
  (grid)
  (with-theme (<span class='keyword3'>:uml-statemachine-default</span>)
    (with-options (<span class='keyword3'>:font</span> '(<span class='keyword3'>:width-spice</span> 0.8))
      (uml-state (xy+ canvas.tc   0  40) <span class='literal'>"Show~%Connections"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:s1</span> <span class='keyword3'>:width</span> 100)
      (uml-state (xy+ $1.cc       0 160) <span class='literal'>"Enter Connection Details"</span>
                 <span class='keyword3'>:id</span> <span class='keyword3'>:s2</span> <span class='keyword3'>:width</span> 560 <span class='keyword3'>:height</span> 140 <span class='keyword3'>:contents</span> t)
      (with-subcanvas-of (<span class='keyword3'>:s2</span>)
        (uml-state-begin (x+ canvas.cl 30) <span class='keyword3'>:id</span> <span class='keyword3'>:s3</span>)
        (uml-state (xy+ $1.cc  90 0) <span class='literal'>"Enter phone~%number"</span>    <span class='keyword3'>:height</span> 40 <span class='keyword3'>:id</span> <span class='keyword3'>:s4</span>)
        (uml-state (xy+ $1.cc 180 0) <span class='literal'>"Choose shared~%or solo"</span> <span class='keyword3'>:height</span> 40 <span class='keyword3'>:id</span> <span class='keyword3'>:s5</span>)
        (uml-state (xy+ $1.cc 180 0) <span class='literal'>"Enter name"</span>             <span class='keyword3'>:height</span> 40 <span class='keyword3'>:id</span> <span class='keyword3'>:s6</span>)
        (uml-transition <span class='keyword3'>:s3</span> <span class='keyword3'>:s4</span>)
        (uml-transition <span class='keyword3'>:s4</span> <span class='keyword3'>:s5</span> <span class='keyword3'>:style</span> <span class='keyword3'>:R1L1</span> <span class='keyword3'>:spec</span> <span class='keyword3'>:next</span>)
        (uml-transition <span class='keyword3'>:s5</span> <span class='keyword3'>:s4</span> <span class='keyword3'>:style</span> <span class='keyword3'>:L3R3</span> <span class='keyword3'>:spec</span> <span class='keyword3'>:back</span>)
        (uml-transition <span class='keyword3'>:s5</span> <span class='keyword3'>:s6</span> <span class='keyword3'>:style</span> <span class='keyword3'>:R1L1</span> <span class='keyword3'>:spec</span> <span class='keyword3'>:next</span>)
        (uml-transition <span class='keyword3'>:s6</span> <span class='keyword3'>:s5</span> <span class='keyword3'>:style</span> <span class='keyword3'>:L3R3</span> <span class='keyword3'>:spec</span> <span class='keyword3'>:back</span>))
      (uml-transition <span class='keyword3'>:s1</span> (x+ s2.tc -25) <span class='keyword3'>:style</span> <span class='keyword3'>:B1T</span>
                      <span class='keyword3'>:spec</span> '(<span class='keyword3'>:trigger</span> <span class='literal'>"new"</span>    <span class='keyword3'>:offset</span> (-30 -20)))
      (uml-transition (x+ s2.tc  25) <span class='keyword3'>:s1</span> <span class='keyword3'>:style</span> <span class='keyword3'>:TB3</span>
                      <span class='keyword3'>:spec</span> '(<span class='keyword3'>:trigger</span> <span class='literal'>"cancel"</span> <span class='keyword3'>:offset</span> ( 50  20)))
      (uml-transition <span class='keyword3'>:s6</span> <span class='keyword3'>:s1</span> <span class='keyword3'>:style</span> <span class='keyword3'>:TR</span>
                      <span class='keyword3'>:spec</span> '(<span class='keyword3'>:trigger</span> <span class='keyword3'>:save</span> <span class='keyword3'>:offset</span> (35 50))))))
</pre>
</details>
<p>　　</p>
<p>　UML <a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>で使用する構成要素は以下を参照してください。</p>
<ul>
<li><a href='#1cJtoPoE2w0'>uml-frame</a></li>
<li><a href='#jFViCKeUWqC'>uml-note</a></li>
<li><a href='#a7K2CBytplo'>uml-state</a></li>
<li><a href='#4Fe1V46854v'>uml-state-begin</a></li>
<li><a href='#6dfRecys5K7'>uml-state-end</a></li>
<li><a href='#dZcuFEPgREn'>uml-state-history</a></li>
<li><a href='#8h222SLEnVx'>uml-transition</a></li>
<li><a href='#aiNf7xsL8zY'>uml-transition-spec</a></li>
</ul>
<h3><a name='e57rLpXY8ah'></a>13.6 ユースケース図</h3>
<p>　UML <a class='autolink' href='#e57rLpXY8ah'>ユースケース図</a>の例を以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='600' height='200'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-actor -->
	<circle cx='140' cy='48.0' r='8.0' fill='ivory' stroke='olive' stroke-width='1' />
	<polyline fill='none' stroke='olive' stroke-width='1' points=' 140.0,56.0 140.0,69.6' />
	<polyline fill='none' stroke='olive' stroke-width='1' points=' 127.6,61.0 152.4,61.0' />
	<polyline fill='none' stroke='olive' stroke-width='1' points=' 127.6,80.0 140.0,69.6 152.4,80.0' />
	<text x='140' y='92' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >user</text>
	<!-- case1 : uml-usecase -->
	<g id='case1'>
		<g>
			<ellipse cx='340.0' cy='60' rx='62.25' ry='35' fill='ivory' stroke='olive' stroke-width='1' />
			<text x='340.0' y='65' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >make diagram.</text>
		</g>
	</g>
	<!-- uml-association to case1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 160.0,60.0 277.75,60.0' />
	<!-- case2 : uml-usecase -->
	<g id='case2'>
		<g>
			<ellipse cx='420.0' cy='140' rx='46.0' ry='41' fill='ivory' stroke='olive' stroke-width='1' />
			<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
				<text x='420.0' y='139' >make UML</text>
				<text x='420.0' y='151' >diagram.</text>
			</g>
		</g>
	</g>
	<!-- uml-generalization from case2 to case1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 389.39294,109.39296 370.50842,90.508415' />
	<path fill='white' stroke='black' stroke-width='1' d='M 370.50842 90.508415 l 3.4201956 9.396929 l 5.976729 -5.9767213 z' />

</svg>
</div>

<p class='fig_title'><a name='3fo8qztJ9j0'></a>Figure.13-6 UML ユースケース図の例</p>
<details>
<summary>※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (600 200)
  (grid)
  (with-theme (<span class='keyword3'>:uml-usecase-default</span>)
	(with-options (<span class='keyword3'>:font</span> 10)
	  (uml-actor   (xy+ canvas.tl 140  60) <span class='literal'>"user"</span>)
	  (uml-usecase (xy+ $1.cc     200   0) <span class='literal'>"make diagram."</span> <span class='keyword3'>:id</span> <span class='keyword3'>:case1</span>)
	  (uml-association $2.id $1.id)
	  (uml-usecase (xy+ $2.cc      80  80) <span class='literal'>"make UML~%diagram."</span> <span class='keyword3'>:id</span> <span class='keyword3'>:case2</span>)
	  (uml-generalization $1.id $3.id))))
</pre>
</details>
<p>　　</p>
<p>　UML <a class='autolink' href='#e57rLpXY8ah'>ユースケース図</a>で使用する構成要素は以下を参照してください。</p>
<ul>
<li><a href='#4rUQqcq4sKb'>uml-actor</a></li>
<li><a href='#0A70k6t8D8T'>uml-association</a></li>
<li><a href='#1cJtoPoE2w0'>uml-frame</a></li>
<li><a href='#i8NSsns8du9'>uml-generalization</a></li>
<li><a href='#jFViCKeUWqC'>uml-note</a></li>
<li><a href='#44mEhv2hQcS'>uml-usecase</a></li>
</ul>
<h3><a name='6DAfYJjISDb'></a>13.7 配置図</h3>
<p>　UML <a class='autolink' href='#6DAfYJjISDb'>配置図</a>の例を以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='600' height='300'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- n1 : uml-node -->
	<g id='n1'>
		<g stroke='none' >
			<polygon fill='#D9D9D9' points='20.0,37.5 35.0,22.5 147.5,22.5 147.5,95.0 132.5,110.0 132.5,37.5' />
			<rect x='20' y='37.5' width='112.5' height='72.5' fill='#F7F7F7' />
			<path fill='none' stroke='black' stroke-width='1' d='M 20 37.5 L 132.5 37.5 L 132.5 110 L 20 110 L 20 37.5 L 35 22.5 L 147.5 22.5 L 147.5 95 L 132.5 110 M 132.5 37.5 L 147.5 22.5' />
			<text x='76.25' y='78.75' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >BrowserClient</text>
		</g>
	</g>
	<!-- n2 : uml-node -->
	<g id='n2'>
		<g stroke='none' >
			<polygon fill='#D9D9D9' points='160.0,37.5 175.0,22.5 287.5,22.5 287.5,95.0 272.5,110.0 272.5,37.5' />
			<rect x='160' y='37.5' width='112.5' height='72.5' fill='#F7F7F7' />
			<path fill='none' stroke='black' stroke-width='1' d='M 160 37.5 L 272.5 37.5 L 272.5 110 L 160 110 L 160 37.5 L 175 22.5 L 287.5 22.5 L 287.5 95 L 272.5 110 M 272.5 37.5 L 287.5 22.5' />
			<text x='216.25' y='78.75' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Rich Client</text>
		</g>
	</g>
	<!-- n3 : uml-node -->
	<g id='n3'>
		<g stroke='none' >
			<polygon fill='#D9D9D9' points='90.0,187.5 105.0,172.5 217.5,172.5 217.5,245.0 202.5,260.0 202.5,187.5' />
			<rect x='90' y='187.5' width='112.5' height='72.5' fill='#F7F7F7' />
			<path fill='none' stroke='black' stroke-width='1' d='M 90 187.5 L 202.5 187.5 L 202.5 260 L 90 260 L 90 187.5 L 105 172.5 L 217.5 172.5 L 217.5 245 L 202.5 260 M 202.5 187.5 L 217.5 172.5' />
			<text x='146.25' y='228.75' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Web Server</text>
		</g>
	</g>
	<!-- uml-association from n3 to n1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 120.0,180.0 120.0,145.0 80.0,145.0 80.0,110.0' />
	<text x='70.0' y='161.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >http/internet</text>
	<!-- uml-association from n3 to n2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 180.0,180.0 180.0,145.0 220.0,145.0 220.0,110.0' />
	<text x='230.0' y='160.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >http/LAN</text>
	<!-- n4 : uml-node -->
	<g id='n4'>
		<g stroke='none' >
			<polygon fill='#D9D9D9' points='350.0,32.5 365.0,17.5 517.5,17.5 517.5,270.0 502.5,285.0 502.5,32.5' />
			<rect x='350' y='32.5' width='152.5' height='252.5' fill='#F7F7F7' />
			<path fill='none' stroke='black' stroke-width='1' d='M 350 32.5 L 502.5 32.5 L 502.5 285 L 350 285 L 350 32.5 L 365 17.5 L 517.5 17.5 L 517.5 270 L 502.5 285 M 502.5 32.5 L 517.5 17.5' />
			<text x='426.25' y='47.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Application Server</text>
			<polyline fill='none' stroke='black' stroke-width='1' points=' 350.0,52.5 502.5,52.5' />
		</g>
	</g>
	<!-- uml-association from n3 to n4 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 210.0,220.0 350.0,220.0' />
	<text x='280.0' y='217.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Java RMI/LAN</text>
	<!-- uml-artifact -->
	<g >
		<rect x='376.25' y='67.5' width='100' height='50' fill='white' stroke='black' stroke-width='1' />
		<polygon fill='floralwhite' stroke='darkgray' stroke-width='1' points='454.25,75.5 454.25,93.7 468.25,93.7 468.25,80.166664 463.58334,75.5 463.58334,75.5 454.25,75.5' />
		<polyline fill='none' stroke='darkgray' stroke-width='1' points=' 468.25,80.166664 463.58334,80.166664 463.58334,75.5' />
		<text x='426.25' y='97.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >JoveGL.exe</text>
	</g>
	<!-- n5 : uml-node -->
	<g id='n5'>
		<g stroke='none' >
			<polygon fill='#D9D9D9' points='361.25,145.0 376.25,130.0 498.75,130.0 498.75,172.5 483.75,187.5 483.75,145.0' />
			<rect x='361.25' y='145' width='122.5' height='42.5' fill='#F7F7F7' />
			<path fill='none' stroke='black' stroke-width='1' d='M 361.25 145 L 483.75 145 L 483.75 187.5 L 361.25 187.5 L 361.25 145 L 376.25 130 L 498.75 130 L 498.75 172.5 L 483.75 187.5 M 483.75 145 L 498.75 130' />
			<text x='422.5' y='171.25' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >EJB Container</text>
		</g>
	</g>
	<!-- n6 : uml-node -->
	<g id='n6'>
		<g stroke='none' >
			<polygon fill='#D9D9D9' points='361.25,225.0 376.25,210.0 498.75,210.0 498.75,252.5 483.75,267.5 483.75,225.0' />
			<rect x='361.25' y='225' width='122.5' height='42.5' fill='#F7F7F7' />
			<path fill='none' stroke='black' stroke-width='1' d='M 361.25 225 L 483.75 225 L 483.75 267.5 L 361.25 267.5 L 361.25 225 L 376.25 210 L 498.75 210 L 498.75 252.5 L 483.75 267.5 M 483.75 225 L 498.75 210' />
			<text x='422.5' y='251.25' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Oracle DBMS</text>
		</g>
	</g>
	<!-- uml-association from n6 to n5 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 426.25,217.5 426.25,187.5' />
	<text x='403.25' y='201.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >JDBC</text>

</svg>
</div>

<p class='fig_title'><a name='4PuNJlu58fE'></a>Figure.13-7 UML 配置図の例</p>
<details>
<summary>※上記サンプルのソースはこちら。</summary>
<pre class='code'>
(diagram (600 300)
  (grid)
  (with-theme (<span class='keyword3'>:uml-deployment-default</span>)
    (uml-node (xy+ canvas.tl  80  70) <span class='literal'>"BrowserClient"</span> <span class='keyword3'>:width</span> 120 <span class='keyword3'>:id</span> <span class='keyword3'>:n1</span>)
    (uml-node (xy+ canvas.tl 220  70) <span class='literal'>"Rich Client"</span>   <span class='keyword3'>:width</span> 120 <span class='keyword3'>:id</span> <span class='keyword3'>:n2</span>)
    (uml-node (xy+ canvas.tl 150 220) <span class='literal'>"Web Server"</span>    <span class='keyword3'>:width</span> 120 <span class='keyword3'>:id</span> <span class='keyword3'>:n3</span>)
    (uml-association <span class='keyword3'>:n3</span> <span class='keyword3'>:n1</span> <span class='keyword3'>:style</span> <span class='keyword3'>:T1B</span> <span class='keyword3'>:name</span> '(<span class='literal'>"http/internet"</span> <span class='keyword3'>:offset</span> (-30  0)))
    (uml-association <span class='keyword3'>:n3</span> <span class='keyword3'>:n2</span> <span class='keyword3'>:style</span> <span class='keyword3'>:T3B</span> <span class='keyword3'>:name</span> '(<span class='literal'>"http/LAN"</span>      <span class='keyword3'>:offset</span> ( 30 23)))
    (uml-node (xy+ n3.cc 280 -65) <span class='literal'>"Application Server"</span> <span class='keyword3'>:width</span> 160 <span class='keyword3'>:height</span> 260 <span class='keyword3'>:contents</span> t <span class='keyword3'>:id</span> <span class='keyword3'>:n4</span>)
    (uml-association <span class='keyword3'>:n3</span> <span class='keyword3'>:n4</span> <span class='keyword3'>:style</span> <span class='keyword3'>:RL3</span> <span class='keyword3'>:name</span> '(<span class='literal'>"Java RMI/LAN"</span> <span class='keyword3'>:offset</span> (0 5)))
    (with-subcanvas-of (<span class='keyword3'>:n4</span>)
      (uml-artifact (y+ canvas.tc  40) <span class='literal'>"JoveGL.exe"</span> <span class='keyword3'>:height</span> 50)
      (uml-node     (y+ $1.cc      70) <span class='literal'>"EJB Container"</span> <span class='keyword3'>:width</span> 130 <span class='keyword3'>:height</span> 50 <span class='keyword3'>:id</span> <span class='keyword3'>:n5</span>)
      (uml-node     (y+ $1.cc      80) <span class='literal'>"Oracle DBMS"</span>   <span class='keyword3'>:width</span> 130 <span class='keyword3'>:height</span> 50 <span class='keyword3'>:id</span> <span class='keyword3'>:n6</span>)
      (uml-association <span class='keyword3'>:n6</span> <span class='keyword3'>:n5</span> <span class='keyword3'>:name</span> '(<span class='literal'>"JDBC"</span> <span class='keyword3'>:offset</span> (-10 -5))))))
</pre>
</details>
<p>　　</p>
<p>　UML <a class='autolink' href='#6DAfYJjISDb'>配置図</a>で使用する構成要素は以下を参照してください。</p>
<ul>
<li><a href='#1ryiWMoWWul'>uml-artifact</a></li>
<li><a href='#0A70k6t8D8T'>uml-association</a></li>
<li><a href='#f40Gf0pqB5B'>uml-dependency</a></li>
<li><a href='#1cJtoPoE2w0'>uml-frame</a></li>
<li><a href='#jOvc70hxXQE'>uml-node</a></li>
<li><a href='#jFViCKeUWqC'>uml-note</a></li>
</ul>
<h3><a name='cyQMjgm73rg'></a>13.8 UML のダイアグラム要素</h3>
<h4><a name='5kkSlhsbaIn'></a>13.8.1 uml-action</h4>
<p>　<a class='autolink' href='#5kkSlhsbaIn'>uml-action</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるアクションを表記するための図形要素です。ほぼ<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>と同じように使えますが、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>明示のためのレーキアイコンなどが用意されています。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='220'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- start : uml-activity-start -->
	<circle id='start' cx='50' cy='40' r='10' fill='maroon' stroke='none' stroke-width='1' />
	<!-- step1 : uml-action -->
	<g id='step1'>
		<g >
			<rect x='110' y='20' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='150' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step1</text>
		</g>
	</g>
	<!-- step2 : uml-action -->
	<g id='step2'>
		<g >
			<rect x='260' y='20' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<path fill='none' stroke='brown' stroke-width='2' d='M 330 43 l 0 14 m -5 0 l 0 -7 l 10 0 l 0 7' />
			<text x='300' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step2</text>
		</g>
	</g>
	<!-- step3 : uml-action -->
	<g id='step3'>
		<g >
			<rect x='15' y='85' width='250' height='110' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='140' y='105' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step3</text>
		</g>
	</g>
	<!-- uml-action -->
	<g >
		<rect x='30' y='135' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
		<text x='70' y='160' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >sub-step1</text>
	</g>
	<!-- uml-action -->
	<g >
		<rect x='170' y='135' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
		<text x='210' y='160' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >sub-step2</text>
	</g>
	<!-- uml-flow -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 110.0,155.0 170.0,155.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='161.33975,160.0 170,155.0 161.33975,150.0' />
	<!-- final : uml-activity-final -->
	<circle id='final' cx='360' cy='190' r='15' fill='linen' stroke='maroon' stroke-width='1' />
	<circle cx='360' cy='190' r='9.0' fill='maroon' stroke='none' stroke-width='1' />
	<!-- uml-flow from start to step1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 60.0,40.0 110.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='101.339745,45.0 110,40.0 101.339745,35.0' />
	<!-- uml-flow from step1 to step2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 190.0,40.0 260.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='251.33975,45.0 260,40.0 251.33975,35.0' />
	<!-- uml-flow from step2 to step3 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 300.0,60.0 300.0,112.5 265.0,112.5' />
	<polyline fill='none' stroke='black' stroke-width='1' points='273.66025,107.5 265,112.5 273.66025,117.5' />
	<!-- uml-flow from step3 to final -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 265.0,168.40909 345.37302,186.67569' />
	<polyline fill='none' stroke='black' stroke-width='1' points='335.82,189.63206 345.37302,186.67569 338.03622,179.88074' />

</svg>
</div>

<p class='fig_title'><a name='jUTz0MAjqS8'></a>Figure.13-8 uml-action のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 220)
  (grid)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (uml-activity-start '(50 40) <span class='keyword3'>:id</span> <span class='keyword3'>:start</span>)
    (uml-action (x+ start.cc 100) <span class='literal'>"step1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step1</span>)
    (uml-action (x+ step1.cc 150) <span class='literal'>"step2"</span> <span class='keyword3'>:rake</span> t <span class='keyword3'>:id</span> <span class='keyword3'>:step2</span>)
    (uml-action (xy+ canvas.cc -60 30) <span class='literal'>"step3"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step3</span> <span class='keyword3'>:width</span> 250 <span class='keyword3'>:height</span> 110
        <span class='keyword3'>:contents</span>
        ((uml-action (x+ canvas.cc -70) <span class='literal'>"sub-step1"</span>)
         (uml-action (x+ canvas.cc  70) <span class='literal'>"sub-step2"</span>)
         (uml-flow $2.id $1.id)))
    (uml-activity-final (xy+ step3.cc 220 50) <span class='keyword3'>:id</span> <span class='keyword3'>:final</span>)
    (uml-flow <span class='keyword3'>:start</span> <span class='keyword3'>:step1</span>)
    (uml-flow <span class='keyword3'>:step1</span> <span class='keyword3'>:step2</span>)
    (uml-flow <span class='keyword3'>:step2</span> <span class='keyword3'>:step3</span> <span class='keyword3'>:style</span> <span class='keyword3'>:BR1</span>)
    (uml-flow <span class='keyword3'>:step3</span> <span class='keyword3'>:final</span>)))
</pre>
<p>　<code>:contents</code> パラメータと <a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>は通常は同じように使えますが、<a class='autolink' href='#5kkSlhsbaIn'>uml-action</a> では違いが存在します。 <code>:contents</code> で内部を描画する場合、<a class='autolink' href='#5kkSlhsbaIn'>uml-action</a> は<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を上端付近に描画しますが、 <code>:contents</code> を使わずに <a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>を使用した場合、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>は中央に描画されます。この問題を解決するため、<a class='autolink' href='#5kkSlhsbaIn'>uml-action</a> では <code>:contents t</code> と指定することで<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を上端付近に描画させることができます。</p>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#h5Ic0bvUIs7'>uml-action マクロ</a></li>
<li><a class='autolink' href='#kqRLmxG6cu2'>with-uml-action-options マクロ</a></li>
</ul>
<h4><a name='gfsl4uecBoY'></a>13.8.2 uml-activity-final</h4>
<p>　<a class='autolink' href='#gfsl4uecBoY'>uml-activity-final</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>における終了状態を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- step : uml-action -->
	<g id='step'>
		<g >
			<rect x='20' y='20' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='60' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action</text>
		</g>
	</g>
	<!-- final : uml-activity-final -->
	<circle id='final' cx='160' cy='40' r='15' fill='linen' stroke='maroon' stroke-width='1' />
	<circle cx='160' cy='40' r='9.0' fill='maroon' stroke='none' stroke-width='1' />
	<!-- uml-flow from step to final -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,40.0 145.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='136.33975,45.0 145.0,40.0 136.33975,35.0' />

</svg>
</div>

<p class='fig_title'><a name='avZmIPquQ5d'></a>Figure.13-9 uml-activity-final のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (200 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (uml-action (x+ canvas.cc -40) <span class='literal'>"action"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step</span>)
    (uml-activity-final (x+ $1.cc 100) <span class='keyword3'>:id</span> <span class='keyword3'>:final</span>)
    (uml-flow <span class='keyword3'>:step</span> <span class='keyword3'>:final</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#fqECxhnnBJh'>uml-activity-final マクロ</a></li>
<li><a class='autolink' href='#ixy0Rc930O0'>with-uml-activity-final-options マクロ</a></li>
</ul>
<h4><a name='gr8RKSxFalf'></a>13.8.3 uml-activity-start</h4>
<p>　<a class='autolink' href='#gr8RKSxFalf'>uml-activity-start</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>における開始状態を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- start : uml-activity-start -->
	<circle id='start' cx='40' cy='40' r='10' fill='maroon' stroke='none' stroke-width='1' />
	<!-- step : uml-action -->
	<g id='step'>
		<g >
			<rect x='100' y='20' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='140' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action</text>
		</g>
	</g>
	<!-- uml-flow from start to step -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 50.0,40.0 100.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='91.339745,45.0 100,40.0 91.339745,35.0' />

</svg>
</div>

<p class='fig_title'><a name='fR31UaSYV5i'></a>Figure.13-10 uml-activity-start のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (200 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (uml-activity-start (x+ canvas.cc -60) <span class='keyword3'>:id</span> <span class='keyword3'>:start</span>)
    (uml-action (x+ $1.cc 100) <span class='literal'>"action"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step</span>)
    (uml-flow <span class='keyword3'>:start</span> <span class='keyword3'>:step</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#ff3fz3G29Ce'>uml-activity-start マクロ</a></li>
<li><a class='autolink' href='#fiKYEk7l3vl'>with-uml-activity-start-options マクロ</a></li>
</ul>
<h4><a name='4rUQqcq4sKb'></a>13.8.4 uml-actor</h4>
<p>　<a class='autolink' href='#4rUQqcq4sKb'>uml-actor</a> は UML の<a class='autolink' href='#e57rLpXY8ah'>ユースケース図</a>におけるアクターを表記するための図形要素です。</p>
<!-- このダイアグラムは uml-usecase のところでも使われてることに注意。 -->
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- actor : uml-actor -->
	<g id='actor'>
		<circle cx='30' cy='28.0' r='8.0' fill='ivory' stroke='olive' stroke-width='1' />
		<polyline fill='none' stroke='olive' stroke-width='1' points=' 30.0,36.0 30.0,49.6' />
		<polyline fill='none' stroke='olive' stroke-width='1' points=' 17.6,41.0 42.4,41.0' />
		<polyline fill='none' stroke='olive' stroke-width='1' points=' 17.6,60.0 30.0,49.6 42.4,60.0' />
		<text x='30' y='72' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >actor</text>
	</g>
	<!-- usecase : uml-usecase -->
	<g id='usecase'>
		<g>
			<ellipse cx='180.0' cy='40' rx='42.75' ry='25' fill='ivory' stroke='olive' stroke-width='1' />
			<text x='180.0' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >usecase</text>
		</g>
	</g>
	<!-- uml-association from actor to usecase -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 50.0,40.0 137.25,40.0' />

</svg>
</div>

<p class='fig_title'><a name='dKmzvNQH31B'></a>Figure.13-11 uml-actor のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (240 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-usecase-default</span>)
    (uml-actor   (x+ canvas.cl  30) <span class='literal'>"actor"</span>   <span class='keyword3'>:id</span> <span class='keyword3'>:actor</span>)
    (uml-usecase (x+ canvas.cr -60) <span class='literal'>"usecase"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:usecase</span> <span class='keyword3'>:height</span> 50)
    (uml-association <span class='keyword3'>:actor</span> <span class='keyword3'>:usecase</span>)))
</pre>
<p>　第二パラメータで指定するアクターの名称は、<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式での指定になります。</p>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#0jrm0BGl279'>uml-actor マクロ</a></li>
<li><a class='autolink' href='#6E6RgdGy314'>with-uml-actor-options マクロ</a></li>
</ul>
<h4><a name='881rvOpGoim'></a>13.8.5 uml-aggregation</h4>
<p>　<a class='autolink' href='#881rvOpGoim'>uml-aggregation</a> は UML の<a class='autolink' href='#khgkJB6xK95'>クラス図</a>などにおける集約関連を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- foo : uml-class -->
	<g id='foo'>
		<rect x='15' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='50' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	</g>
	<!-- bar : uml-class -->
	<g id='bar'>
		<rect x='315' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='350' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	</g>
	<!-- uml-aggregation from foo to bar -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 85.0,40.0 315.0,40.0' />
	<text x='200.0' y='22.5' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='black' >«stereotype»</text>
	<text x='200.0' y='34.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >name</text>
	<path fill='white' stroke='black' stroke-width='1' d='M 85 40.0 L 93.660255 45.0 L 102.32051 40.0 L 93.660255 35.0 z' />
	<polyline fill='none' stroke='black' stroke-width='1' points='306.33975,45.0 315,40.0 306.33975,35.0' />
	<text x='90.0' y='58.660255' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >role1</text>
	<text x='310.0' y='31.339746' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >role2</text>
	<text x='90.0' y='31.339746' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >1</text>
	<text x='310.0' y='58.660255' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >0..*</text>

</svg>
</div>

<p class='fig_title'><a name='3LIgWeQQNi9'></a>Figure.13-12 uml-aggregation のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class   (x+ canvas.cl  50) <span class='literal'>"foo"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:foo</span>)
    (uml-class   (x+ canvas.cr -50) <span class='literal'>"bar"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:bar</span>)
    (uml-aggregation <span class='keyword3'>:foo</span> <span class='keyword3'>:bar</span>
                     <span class='keyword3'>:arrow</span>      t
                     <span class='keyword3'>:stereotype</span> '(<span class='literal'>"stereotype"</span> <span class='keyword3'>:font</span> 9)
                     <span class='keyword3'>:name</span>       '(<span class='literal'>"name"</span> <span class='keyword3'>:offset</span> (0 5))
                     <span class='keyword3'>:role1</span>      <span class='literal'>"role1"</span>
                     <span class='keyword3'>:role2</span>      <span class='literal'>"role2"</span>
                     <span class='keyword3'>:mult1</span>      1
                     <span class='keyword3'>:mult2</span>      '(0 . <span class='keyword3'>:*</span>))))
</pre>
<p>　必須パラメータは接続元／接続先のみで、それ以外の名前付きパラメータは基本的に <a class='autolink' href='#0A70k6t8D8T'>uml-association</a> と同じです。ただし、矢印は関連先に表示するか否かの指定になるため、（<a class='autolink' href='#0A70k6t8D8T'>uml-association</a> の <code>:arrows</code> と異なり）真偽値を指定する <code>:arrow</code> パラメータとなります。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#0A70k6t8D8T'>uml-association</a></li>
<li><a class='autolink' href='#ie20bBGavpf'>uml-aggregation マクロ</a></li>
<li><a class='autolink' href='#g2Q9l90IWR5'>with-uml-aggregation-options マクロ</a></li>
</ul>
<h4><a name='0A70k6t8D8T'></a>13.8.6 uml-association</h4>
<p>　<a class='autolink' href='#0A70k6t8D8T'>uml-association</a> は UML の<a class='autolink' href='#khgkJB6xK95'>クラス図</a>などにおける関連を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- foo : uml-class -->
	<g id='foo'>
		<rect x='15' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='50' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	</g>
	<!-- bar : uml-class -->
	<g id='bar'>
		<rect x='315' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='350' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	</g>
	<!-- uml-association from foo to bar -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 85.0,40.0 315.0,40.0' />
	<text x='200.0' y='22.5' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='black' >«stereotype»</text>
	<text x='200.0' y='34.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >name</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='306.33975,45.0 315,40.0 306.33975,35.0' />
	<text x='90.0' y='58.660255' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >role1</text>
	<text x='310.0' y='31.339746' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >role2</text>
	<text x='90.0' y='31.339746' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >1</text>
	<text x='310.0' y='58.660255' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >0..*</text>

</svg>
</div>

<p class='fig_title'><a name='4eHCRyuZjkq'></a>Figure.13-13 uml-association のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class   (x+ canvas.cl  50) <span class='literal'>"foo"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:foo</span>)
    (uml-class   (x+ canvas.cr -50) <span class='literal'>"bar"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:bar</span>)
    (uml-association <span class='keyword3'>:foo</span> <span class='keyword3'>:bar</span>
                     <span class='keyword3'>:arrows</span>     1
                     <span class='keyword3'>:stereotype</span> '(<span class='literal'>"stereotype"</span> <span class='keyword3'>:font</span> 9)
                     <span class='keyword3'>:name</span>       '(<span class='literal'>"name"</span> <span class='keyword3'>:offset</span> (0 5))
                     <span class='keyword3'>:role1</span>      <span class='literal'>"role1"</span>
                     <span class='keyword3'>:role2</span>      <span class='literal'>"role2"</span>
                     <span class='keyword3'>:mult1</span>      1
                     <span class='keyword3'>:mult2</span>      '(0 . <span class='keyword3'>:*</span>))))
</pre>
<p>　<a class='autolink' href='#0A70k6t8D8T'>uml-association</a> は<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>とほぼ同じように使えますが、終端に表示する情報などを指定可能になっています。矢印に関しては <code>:arrows</code> パラメータで 0,1,2 のいずれかを指定します。これは、矢印無しか、接続先のみか、両端かを意味します。また、ロール情報や多重度情報を <code>:role1 :role2 :mult1 :mult2</code> といった名前付きパラメータで指定します。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#9ugZNtgVL4J'>uml-role-info</a></li>
<li><a class='autolink' href='#g6kEHGpHjhy'>uml-multiplicity-info</a></li>
<li><a class='autolink' href='#c2inmUVDBj2'>uml-association マクロ</a></li>
<li><a class='autolink' href='#76cvwodLVQW'>with-uml-association-options マクロ</a></li>
</ul>
<h4><a name='1ryiWMoWWul'></a>13.8.7 uml-artifact</h4>
<p>　<a class='autolink' href='#1ryiWMoWWul'>uml-artifact</a> は UML の<a class='autolink' href='#6DAfYJjISDb'>配置図</a>における生成物を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='120'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-artifact -->
	<g filter='url(#drop-shadow)' >
		<rect x='60' y='35' width='120' height='50' fill='white' stroke='black' stroke-width='1' />
		<polygon fill='floralwhite' stroke='darkgray' stroke-width='1' points='158.0,43.0 158.0,61.199997 172.0,61.199997 172.0,47.666668 167.33333,43.0 167.33333,43.0 158.0,43.0' />
		<polyline fill='none' stroke='darkgray' stroke-width='1' points=' 172.0,47.666668 167.33333,47.666668 167.33333,43.0' />
		<text x='120' y='65' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >sample.exe</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='15gwZ4l2t0k'></a>Figure.13-14 uml-artifact のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (240 120)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-deployment-default</span>)
    (uml-artifact canvas.cc <span class='literal'>"sample.exe"</span>
                  <span class='keyword3'>:width</span> 120 <span class='keyword3'>:height</span> 50 <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)))
</pre>
<p>　上記では指定されていませんが、右上に表示されるアイコンの位置などの調整には <code>:icon</code>パラメータを指定します（<a href='#dlZiBdOIRvM'>13.8.24  節</a>参照）。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#dlZiBdOIRvM'>uml-icon-setting</a></li>
<li><a class='autolink' href='#29j3NypNjE1'>uml-artifact マクロ</a></li>
<li><a class='autolink' href='#lbGYWLxwRmP'>with-uml-artifact-options マクロ</a></li>
</ul>
<h4><a name='fkYROSV9994'></a>13.8.8 uml-class</h4>
<p>　<a class='autolink' href='#fkYROSV9994'>uml-class</a> は UML の<a class='autolink' href='#khgkJB6xK95'>クラス図</a>におけるクラスを表記するための図形要素です。 クラス名だけの単純なボックスでも、属性・操作・責務などの記述を伴ったボックスでも描画できます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='500' height='180'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-class -->
	<rect x='25' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
	<text x='60' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	<!-- uml-class -->
	<rect x='144.0' y='24' width='72.0' height='32' fill='beige' stroke='maroon' stroke-width='1' />
	<text x='180.0' y='39' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' font-style='italic' >abstract</text>
	<text x='180.0' y='51' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' font-style='italic' >class</text>
	<!-- uml-class -->
	<rect x='20' y='124' width='80' height='32' fill='beige' stroke='maroon' stroke-width='1' />
	<polyline fill='none' stroke='maroon' stroke-width='1' points=' 25.0,124.0 25.0,156.0' />
	<polyline fill='none' stroke='maroon' stroke-width='1' points=' 95.0,124.0 95.0,156.0' />
	<text x='60' y='139' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >active</text>
	<text x='60' y='151' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >class</text>
	<!-- uml-class -->
	<rect x='135' y='120' width='90' height='40' fill='beige' stroke='maroon' stroke-width='1' />
	<text x='180' y='139' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >template</text>
	<text x='180' y='151' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >class</text>
	<rect x='210.25' y='110' width='29.5' height='20' fill='beige' stroke='maroon' stroke-width='1' stroke-dasharray='3 3 ' />
	<text x='225' y='125' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' > T </text>
	<!-- uml-class -->
	<rect x='75' y='74' width='90' height='32' fill='beige' stroke='maroon' stroke-width='1' />
	<text x='120' y='89' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='black' >«keyword»</text>
	<text x='120' y='101' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	<!-- uml-class -->
	<rect x='290' y='20' width='160' height='140' fill='beige' stroke='maroon' stroke-width='1' />
	<text x='370' y='35' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >class with</text>
	<text x='370' y='47' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >additional boxes</text>
	<polyline fill='none' stroke='maroon' stroke-width='1' points=' 290.0,52.0 450.0,52.0' />
	<text x='295' y='67' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >-m_status:uint32_t</text>
	<polyline fill='none' stroke='maroon' stroke-width='1' points=' 290.0,72.0 450.0,72.0' />
	<text x='295' y='87' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >+Run():int</text>
	<text x='295' y='99' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >+Abort()</text>
	<polyline fill='none' stroke='maroon' stroke-width='1' points=' 290.0,104.0 450.0,104.0' />
	<text x='370' y='119' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Responsibilities</text>
	<text x='295' y='131' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >blah blah blah</text>
	<text x='295' y='143' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >blah blah blah</text>
	<text x='295' y='155' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >blah blah blah</text>

</svg>
</div>

<p class='fig_title'><a name='dwJuaQgXaIx'></a>Figure.13-15 uml-class のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (500 180)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class (xy+ canvas.tl  60 40) <span class='literal'>"foo"</span>)
    (uml-class (x+  $1.cc     120) <span class='literal'>"abstract~%class"</span> <span class='keyword3'>:abstract</span> t)
    (uml-class (y+  $2.cc     100)   <span class='literal'>"active~%class"</span> <span class='keyword3'>:active</span> t)
    (uml-class (y+  $2.cc     100) <span class='literal'>"template~%class"</span>
               <span class='keyword3'>:width</span> 90 <span class='keyword3'>:height</span> 40 <span class='keyword3'>:template</span> <span class='literal'>" T "</span>)
    (uml-class (xy+ $4.cc 60   50) <span class='literal'>"bar"</span> <span class='keyword3'>:width</span> 90
                                   <span class='keyword3'>:keyword</span> '(<span class='literal'>"keyword"</span> <span class='keyword3'>:font</span> 9))
    (uml-class (x+  canvas.cc 120) <span class='literal'>"class with~%additional boxes"</span>
               <span class='keyword3'>:width</span> 160
               <span class='keyword3'>:attributes</span>
               ((<span class='keyword3'>:private</span> <span class='literal'>"m_status"</span> <span class='keyword3'>:type</span> <span class='keyword3'>:uint32_t</span>))
               <span class='keyword3'>:operations</span>
               ((<span class='keyword3'>:public</span> <span class='literal'>"Run"</span> <span class='keyword3'>:type</span> <span class='keyword3'>:int</span>)
                (<span class='keyword3'>:public</span> <span class='literal'>"Abort"</span>))
               <span class='keyword3'>:responsibilities</span>
               <span class='literal'>"blah blah blah~%blah blah blah~%blah blah blah"</span>)))
</pre>
<p>　必須のパラメータは座標とクラス名だけです。それ以外は名前付きパラメータで、抽象クラスやクラステンプレートなどの指定を行ないます。属性や操作の指定は <code>:attributes</code> と <code>:operations</code> でクラス属性情報またはクラス操作情報のリストを指定します。これらについては、<a class='autolink' href='#ilyzpkPZT4a'>uml-class-attribute</a> および <a class='autolink' href='#5PbBv7nZ2KR'>uml-class-operation</a> を参照してください。</p>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#ilyzpkPZT4a'>uml-class-attribute</a></li>
<li><a class='autolink' href='#bmlwXPORm6W'>uml-class-operation-param</a></li>
<li><a class='autolink' href='#5PbBv7nZ2KR'>uml-class-operation</a></li>
<li><a class='autolink' href='#bepvr4okFYe'>uml-class マクロ</a></li>
<li><a class='autolink' href='#8POSSKTKzFu'>with-uml-class-options マクロ</a></li>
</ul>
<h4><a name='ilyzpkPZT4a'></a>13.8.9 uml-class-attribute</h4>
<p>　<a class='autolink' href='#ilyzpkPZT4a'>uml-class-attribute</a> は UML のクラス表記における属性欄を記述するための、可視性、名前、型、多重度などからなる情報です。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-class -->
	<rect x='70' y='14' width='160' height='122' fill='beige' stroke='maroon' stroke-width='1' />
	<text x='150' y='34' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	<polyline fill='none' stroke='maroon' stroke-width='1' points=' 70.0,44.0 230.0,44.0' />
	<text x='75' y='59' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >«section1»</text>
	<text x='75' y='71' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >-m_lastMsg:string</text>
	<text x='75' y='83' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >...</text>
	<text x='75' y='95' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >«section2»</text>
	<text x='75' y='107' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >-m_status:statust</text>
	<text x='75' y='119' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >-m_data:uint32_t[10]</text>
	<text x='75' y='131' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >...</text>

</svg>
</div>

<p class='fig_title'><a name='jLagPUaVQa5'></a>Figure.13-16 uml-class-attribute のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class canvas.cc <span class='literal'>"foo"</span>
               <span class='keyword3'>:width</span> 160
               <span class='keyword3'>:attributes</span>
               (<span class='keyword3'>:&lt;&lt;section1&gt;&gt;</span>
                (<span class='keyword3'>:private</span> <span class='literal'>"m_lastMsg"</span> <span class='keyword3'>:type</span> <span class='keyword3'>:string</span>)
                <span class='keyword3'>:etc</span>
                <span class='keyword3'>:&lt;&lt;section2&gt;&gt;</span>
                (<span class='keyword3'>:private</span> <span class='literal'>"m_status"</span> <span class='keyword3'>:type</span> <span class='keyword3'>:StatusT</span>)
                (<span class='keyword3'>:private</span> <span class='literal'>"m_data"</span>   <span class='keyword3'>:type</span> <span class='keyword3'>:uint32_t</span> <span class='keyword3'>:multiplicity</span> 10)
                <span class='keyword3'>:etc</span>))))
</pre>
<p>　<a class='autolink' href='#bepvr4okFYe'>uml-class マクロ</a>の <code>:attributes</code> パラメータには、属性情報のボックスに記載する情報をリストで指定します。このリストの要素は以下のいずれかです。</p>
<ul>
<li>キーワードを示すキーワードシンボル
<ul>
<li>これは文字列 <code>&lt;&lt;</code> で始まり、文字列 <code>&gt;&gt;</code> で終わる名前を持ちます</li>
</ul>
</li>
<li>属性情報を表現するリスト
<ul>
<li>これは <a class='autolink' href='#cOZubN9xlDA'>make-uml-class-attribute 関数</a>に渡されます</li>
</ul>
</li>
<li>省略を示すキーワードシンボル <code>:etc</code>
<ul>
<li>これは「ここに記載されているものが全てではない」ことを表現する <code>...</code> になります</li>
</ul>
</li>
</ul>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#cOZubN9xlDA'>make-uml-class-attribute 関数</a></li>
</ul>
<h4><a name='5PbBv7nZ2KR'></a>13.8.10 uml-class-operation</h4>
<p>　<a class='autolink' href='#5PbBv7nZ2KR'>uml-class-operation</a> は UML のクラス表記における操作欄を記述するための、可視性、名前、パラメータ、型などからなる情報です。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='170'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-class -->
	<rect x='25' y='18' width='250' height='134' fill='beige' stroke='maroon' stroke-width='1' />
	<text x='150' y='38' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	<polyline fill='none' stroke='maroon' stroke-width='1' points=' 25.0,48.0 275.0,48.0' />
	<text x='30' y='63' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >«constructor»</text>
	<text x='30' y='75' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >+foo()</text>
	<text x='30' y='87' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >+foo(foo&amp;)</text>
	<text x='30' y='99' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >«accessors»</text>
	<text x='30' y='111' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >+GetData():uint32_t{frozen}</text>
	<text x='30' y='123' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >«operations»</text>
	<text x='30' y='135' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >+DoSomething(uint32_t):boolean</text>
	<text x='30' y='147' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >...</text>

</svg>
</div>

<p class='fig_title'><a name='bRTDU2yRUHK'></a>Figure.13-17 uml-class-operation のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (300 170)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class canvas.cc <span class='literal'>"foo"</span>
               <span class='keyword3'>:width</span> 250
               <span class='keyword3'>:operations</span>
               (<span class='keyword3'>:&lt;&lt;constructor&gt;&gt;</span>
                (<span class='keyword3'>:public</span> <span class='literal'>"foo"</span>)
                (<span class='keyword3'>:public</span> <span class='literal'>"foo"</span> <span class='keyword3'>:parameters</span> (<span class='literal'>"foo&amp;"</span>))
                <span class='keyword3'>:&lt;&lt;accessors&gt;&gt;</span>
                (<span class='keyword3'>:public</span> <span class='literal'>"GetData"</span> <span class='keyword3'>:type</span> <span class='keyword3'>:uint32_t</span> <span class='keyword3'>:property</span> <span class='keyword3'>:frozen</span>)
                <span class='keyword3'>:&lt;&lt;operations&gt;&gt;</span>
                (<span class='keyword3'>:public</span> <span class='literal'>"DoSomething"</span> <span class='keyword3'>:parameters</span> (<span class='keyword3'>:uint32_t</span>) <span class='keyword3'>:type</span> <span class='keyword3'>:boolean</span>)
                <span class='keyword3'>:etc</span>))))
</pre>
<p>　<a class='autolink' href='#bepvr4okFYe'>uml-class マクロ</a>の <code>:operations</code> パラメータには、操作情報のボックスに記載する情報をリストで指定します。このリストの要素は以下のいずれかです。</p>
<ul>
<li>キーワードを示すキーワードシンボル
<ul>
<li>これは文字列 <code>&lt;&lt;</code> で始まり、文字列 <code>&gt;&gt;</code> で終わる名前を持ちます</li>
</ul>
</li>
<li>操作情報を表現するリスト
<ul>
<li>これは <a class='autolink' href='#0h6fmJhiwsl'>make-uml-class-operation 関数</a>に渡されます</li>
</ul>
</li>
<li>省略を示すキーワードシンボル <code>:etc</code>
<ul>
<li>これは「ここに記載されているものが全てではない」ことを表現する <code>...</code> になります</li>
</ul>
</li>
</ul>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#bmlwXPORm6W'>uml-class-operation-param</a></li>
<li><a class='autolink' href='#0h6fmJhiwsl'>make-uml-class-operation 関数</a></li>
</ul>
<h4><a name='bmlwXPORm6W'></a>13.8.11 uml-class-operation-param</h4>
<p>　<a class='autolink' href='#bmlwXPORm6W'>uml-class-operation-param</a> は UML のクラス操作情報におけるパラメータを記述するための、名前、型、デフォルト値などからなる情報です。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-class -->
	<rect x='40' y='25' width='320' height='50' fill='beige' stroke='maroon' stroke-width='1' />
	<text x='200' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	<polyline fill='none' stroke='maroon' stroke-width='1' points=' 40.0,55.0 360.0,55.0' />
	<text x='45' y='70' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >+Sample(prm1:string,prm2:int=0,...):bool</text>

</svg>
</div>

<p class='fig_title'><a name='lz50RmgVDbe'></a>Figure.13-18 uml-class-operation-param のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 100)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class canvas.cc <span class='literal'>"foo"</span>
               <span class='keyword3'>:width</span> 320
               <span class='keyword3'>:operations</span>
               ((<span class='keyword3'>:public</span> <span class='literal'>"Sample"</span> <span class='keyword3'>:type</span> <span class='keyword3'>:bool</span>
                 <span class='keyword3'>:parameters</span>
                 ((<span class='keyword3'>:prm1</span> <span class='keyword3'>:type</span> <span class='keyword3'>:string</span>)
                  (<span class='keyword3'>:prm2</span> <span class='keyword3'>:type</span> <span class='keyword3'>:int</span> <span class='keyword3'>:default</span> 0)
                  <span class='keyword3'>:etc</span>))))))
</pre>
<p>　<a class='autolink' href='#0h6fmJhiwsl'>make-uml-class-operation 関数</a>の <code>:parameters</code> パラメータには、操作情報のパラメータ部分に記載する情報をリストで指定します。このリストの要素は以下のいずれかです。</p>
<ul>
<li>パラメータ情報を表現するリスト
<ul>
<li>これは <a class='autolink' href='#9ACetVBVOg5'>make-uml-class-operation-param 関数</a>に渡されます</li>
</ul>
</li>
<li>省略を示すキーワードシンボル <code>:etc</code>
<ul>
<li>これは「ここに記載されているものが全てではない」ことを表現する <code>...</code> になります</li>
</ul>
</li>
</ul>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#5PbBv7nZ2KR'>uml-class-operation</a></li>
<li><a class='autolink' href='#9ACetVBVOg5'>make-uml-class-operation-param 関数</a></li>
</ul>
<h4><a name='hlJEas6GjYs'></a>13.8.12 uml-component</h4>
<p>　<a class='autolink' href='#hlJEas6GjYs'>uml-component</a> は UML の<a class='autolink' href='#evUs70Itwyp'>コンポーネント図</a>などにおけるコンポーネントを表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='120'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-component -->
	<g filter='url(#drop-shadow)' >
		<rect x='60' y='30' width='120' height='60' fill='white' stroke='black' stroke-width='1' />
		<rect x='158' y='38' width='14' height='14' fill='lightgray' stroke='dimgray' stroke-width='1' />
		<rect x='152.75' y='40.45' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
		<rect x='152.75' y='46.05' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
		<text x='120' y='65' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >somewhat.dll</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='lbLUrKsYU8x'></a>Figure.13-19 uml-component のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (240 120)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-component-default</span>)
    (uml-component canvas.cc <span class='literal'>"somewhat.dll"</span>
                   <span class='keyword3'>:width</span> 120 <span class='keyword3'>:height</span> 60 <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)))
</pre>
<p>　上記では指定されていませんが、右上に表示されるアイコンの位置などの調整には <code>:icon</code>パラメータを指定します（<a href='#dlZiBdOIRvM'>13.8.24  節</a>参照）。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#dlZiBdOIRvM'>uml-icon-setting</a></li>
<li><a class='autolink' href='#cC1mrTiDRg0'>uml-component マクロ</a></li>
<li><a class='autolink' href='#40gYpXP3NCx'>with-uml-component-options マクロ</a></li>
</ul>
<h4><a name='jswiRdMw2Be'></a>13.8.13 uml-composition</h4>
<p>　<a class='autolink' href='#jswiRdMw2Be'>uml-composition</a> は UML の<a class='autolink' href='#khgkJB6xK95'>クラス図</a>などにおけるコンポジション関連を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- foo : uml-class -->
	<g id='foo'>
		<rect x='15' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='50' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	</g>
	<!-- bar : uml-class -->
	<g id='bar'>
		<rect x='315' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='350' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	</g>
	<!-- uml-composition from foo to bar -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 85.0,40.0 315.0,40.0' />
	<text x='200.0' y='22.5' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='black' >«stereotype»</text>
	<text x='200.0' y='34.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >name</text>
	<path fill='black' stroke='black' stroke-width='1' d='M 85 40.0 L 93.660255 45.0 L 102.32051 40.0 L 93.660255 35.0 z' />
	<polyline fill='none' stroke='black' stroke-width='1' points='306.33975,45.0 315,40.0 306.33975,35.0' />
	<text x='90.0' y='58.660255' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >role1</text>
	<text x='310.0' y='31.339746' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >role2</text>
	<text x='90.0' y='31.339746' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >1</text>
	<text x='310.0' y='58.660255' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >0..*</text>

</svg>
</div>

<p class='fig_title'><a name='bym1gthn40y'></a>Figure.13-20 uml-composition のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class   (x+ canvas.cl  50) <span class='literal'>"foo"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:foo</span>)
    (uml-class   (x+ canvas.cr -50) <span class='literal'>"bar"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:bar</span>)
    (uml-composition <span class='keyword3'>:foo</span> <span class='keyword3'>:bar</span>
                     <span class='keyword3'>:arrow</span>      t
                     <span class='keyword3'>:stereotype</span> '(<span class='literal'>"stereotype"</span> <span class='keyword3'>:font</span> 9)
                     <span class='keyword3'>:name</span>       '(<span class='literal'>"name"</span> <span class='keyword3'>:offset</span> (0 5))
                     <span class='keyword3'>:role1</span>      <span class='literal'>"role1"</span>
                     <span class='keyword3'>:role2</span>      <span class='literal'>"role2"</span>
                     <span class='keyword3'>:mult1</span>      1
                     <span class='keyword3'>:mult2</span>      '(0 . <span class='keyword3'>:*</span>))))
</pre>
<p>　必須パラメータは接続元／接続先のみで、それ以外の名前付きパラメータは基本的に <a class='autolink' href='#0A70k6t8D8T'>uml-association</a> と同じです。ただし、矢印は関連先に表示するか否かの指定になるため、（<a class='autolink' href='#0A70k6t8D8T'>uml-association</a> の <code>:arrows</code> と異なり）真偽値を指定する <code>:arrow</code> パラメータとなります。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#0A70k6t8D8T'>uml-association</a></li>
<li><a class='autolink' href='#8Xj1ijpUjgr'>uml-composition マクロ</a></li>
<li><a class='autolink' href='#8xVEIr1yYBY'>with-uml-composition-options マクロ</a></li>
</ul>
<h4><a name='lgLGZTmFJ4a'></a>13.8.14 uml-connector</h4>
<p>　<a class='autolink' href='#lgLGZTmFJ4a'>uml-connector</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>における<a href='#lgLGZTmFJ4a'>コネクタ</a>を表記するための図形要素です。あまり使用されませんが、接続線がどうしても交差してしまう場合には便利です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='120'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- step1 : uml-action -->
	<g id='step1'>
		<g >
			<rect x='30' y='10' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='70' y='35' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action1</text>
		</g>
	</g>
	<!-- step2 : uml-action -->
	<g id='step2'>
		<g >
			<rect x='190' y='70' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='230' y='95' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action2</text>
		</g>
	</g>
	<!-- warp-a : uml-connector -->
	<g id='warp-a'>
		<circle cx='200' cy='30' r='10' fill='wheat' stroke='brown' stroke-width='1' />
		<circle cx='100' cy='90' r='10' fill='wheat' stroke='brown' stroke-width='1' />
		<text x='200' y='35' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >A</text>
		<text x='100' y='95' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >A</text>
	</g>
	<!-- uml-flow from step1 to warp-a -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 110.0,30.0 190.0,30.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='181.33975,35.0 190.0,30.0 181.33975,25.0' />
	<!-- uml-flow from warp-a to step2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 110.0,90.0 190.0,90.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='181.33975,95.0 190,90.0 181.33975,85.0' />

</svg>
</div>

<p class='fig_title'><a name='9mR0oZ4J9iT'></a>Figure.13-21 uml-connector のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (300 120)
  (grid)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (uml-action (xy+ canvas.center -80 -30) <span class='literal'>"action1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step1</span>)
    (uml-action (xy+ canvas.center  80  30) <span class='literal'>"action2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step2</span>)
    (uml-connector (x+ step1.center  130)
                   (x+ step2.center -130) <span class='keyword3'>:warp-a</span> <span class='keyword3'>:name</span> <span class='keyword3'>:A</span>)
    (uml-flow <span class='keyword3'>:step1</span>  <span class='keyword3'>:warp-a</span>)
    (uml-flow <span class='keyword3'>:warp-a</span> <span class='keyword3'>:step2</span>)))
</pre>
<p>　<a class='autolink' href='#lgLGZTmFJ4a'>uml-connector</a> はかなり特殊な図形要素で、２点を指定します。指定された２ケ所に同じ円形のマーカーが描画され、<a class='autolink' href='#602QxE3z6rZ'>uml-flow</a> などの接続線で <code>from</code> と <code>to</code> のどちらに指定されたかで接続先が変わります。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#f2NYv8Z2P8m'>uml-connector マクロ</a></li>
<li><a class='autolink' href='#cjmXVBgVQzD'>with-uml-connector-options マクロ</a></li>
</ul>
<h4><a name='4gZkeXtP8bm'></a>13.8.15 uml-decision</h4>
<p>　<a class='autolink' href='#4gZkeXtP8bm'>uml-decision</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>における判断を表記するための図形要素です。以下の例では左端の check status という<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を伴った要素が <a class='autolink' href='#4gZkeXtP8bm'>uml-decision</a> です。<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を指定しなければ <a class='autolink' href='#ikpYK2ZSZov'>uml-merge</a> と同じように<a class='autolink' href='#4dFMjynUMYw'>ひし形</a>が描画されます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='150'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- check : uml-decision-merge -->
	<g id='check'>
		<g filter='url(#drop-shadow)' >
			<polygon fill='wheat' stroke='brown' stroke-width='1' points='53.333332,55.0 40.0,75.0 53.333332,95.0 106.666664,95.0 120.0,75.0 106.666664,55.0' filter='url(#drop-shadow)' />
		</g>
		<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
			<text x='80' y='74' >check</text>
			<text x='80' y='86' >status</text>
		</g>
	</g>
	<!-- act1 : uml-action -->
	<g id='act1'>
		<g filter='url(#drop-shadow)' >
			<rect x='200' y='15' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='240' y='40' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action1</text>
		</g>
	</g>
	<!-- act2 : uml-action -->
	<g id='act2'>
		<g filter='url(#drop-shadow)' >
			<rect x='200' y='95' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='240' y='120' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action2</text>
		</g>
	</g>
	<!-- merge : uml-decision-merge -->
	<g id='merge'>
		<g filter='url(#drop-shadow)' >
			<polygon fill='wheat' stroke='brown' stroke-width='1' points='350.0,60.0 330.0,75.0 350.0,90.0 370.0,75.0 350.0,60.0' filter='url(#drop-shadow)' />
		</g>
	</g>
	<!-- uml-flow from check to act1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,55.0 80.0,35.0 200.0,35.0' />
	<text x='130.0' y='27.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >[OK]</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='191.33975,40.0 200,35 191.33975,30.0' />
	<!-- uml-flow from check to act2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,95.0 80.0,115.0 200.0,115.0' />
	<text x='130.0' y='107.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >[NG]</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='191.33975,120.0 200,115 191.33975,110.0' />
	<!-- uml-flow from act1 to merge -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 280.0,35.0 350.0,35.0 350.0,60.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='345.0,51.339745 350,60 355.0,51.339745' />
	<!-- uml-flow from act2 to merge -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 280.0,115.0 350.0,115.0 350.0,90.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='355.0,98.660255 350,90 345.0,98.660255' />

</svg>
</div>

<p class='fig_title'><a name='jNVPfxjHUcC'></a>Figure.13-22 uml-decision のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 150)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (with-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-decision (x+ canvas.cc -120)
                    <span class='keyword3'>:text</span> <span class='literal'>"check~%status"</span> <span class='keyword3'>:width</span> 80 <span class='keyword3'>:height</span> 40 <span class='keyword3'>:id</span> <span class='keyword3'>:check</span>)
      (uml-action   (xy+ canvas.cc 40 -40) <span class='literal'>"action1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act1</span>)
      (uml-action   (xy+ canvas.cc 40  40) <span class='literal'>"action2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act2</span>)
      (uml-merge    (x+ canvas.cc  150) <span class='keyword3'>:id</span> <span class='keyword3'>:merge</span>))
    (uml-flow <span class='keyword3'>:check</span> <span class='keyword3'>:act1</span> <span class='keyword3'>:style</span> <span class='keyword3'>:TL</span> <span class='keyword3'>:spec</span> <span class='literal'>"OK"</span>)
    (uml-flow <span class='keyword3'>:check</span> <span class='keyword3'>:act2</span> <span class='keyword3'>:style</span> <span class='keyword3'>:BL</span> <span class='keyword3'>:spec</span> <span class='literal'>"NG"</span>)
    (uml-flow <span class='keyword3'>:act1</span> <span class='keyword3'>:merge</span> <span class='keyword3'>:style</span> <span class='keyword3'>:RT</span>)
    (uml-flow <span class='keyword3'>:act2</span> <span class='keyword3'>:merge</span> <span class='keyword3'>:style</span> <span class='keyword3'>:RB</span>)))
</pre>
<p>　<a class='autolink' href='#4gZkeXtP8bm'>uml-decision</a> は<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の有無で形状が変化します。そして、どちらの場合でも width と height の指定、または <a class='autolink' href='#izhz8eDjPe0'>with-uml-decision-merge-options マクロ</a>で指定されるそれらのデフォルト値のみでサイズを決定します。つまり、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>内容から（<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>のように）サイズを自動決定したりはしません。このことは、width / height のデフォルト値としてテキストありの場合と無しの場合のどちらを想定した値を設定すべきか、という問題を引き起こします。ひとまずのところ、デフォルトとしては<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>無しのサイズを指定しておき、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を指定する場合は width / height を明示的に指定することをお勧めします。</p>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#jFepxnqBIdp'>uml-merge マクロ</a></li>
<li><a class='autolink' href='#4OsqWlN0N0o'>uml-decision マクロ</a></li>
<li><a class='autolink' href='#izhz8eDjPe0'>with-uml-decision-merge-options マクロ</a></li>
</ul>
<h4><a name='f40Gf0pqB5B'></a>13.8.16 uml-dependency</h4>
<p>　<a class='autolink' href='#f40Gf0pqB5B'>uml-dependency</a> は UML の各種ダイアグラムにおける依存関係を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- foo : uml-class -->
	<g id='foo'>
		<rect x='15' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='50' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	</g>
	<!-- bar : uml-class -->
	<g id='bar'>
		<rect x='315' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='350' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	</g>
	<!-- uml-dependency from foo to bar -->
	<polyline fill='none' stroke='black' stroke-width='1' stroke-dasharray='4 2 ' points=' 85.0,40.0 315.0,40.0' />
	<text x='200.0' y='22.5' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='black' >«stereotype»</text>
	<text x='200.0' y='34.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >name</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='306.33975,45.0 315,40.0 306.33975,35.0' />

</svg>
</div>

<p class='fig_title'><a name='gdWF6ah8eK6'></a>Figure.13-23 uml-dependency のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class   (x+ canvas.cl  50) <span class='literal'>"foo"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:foo</span>)
    (uml-class   (x+ canvas.cr -50) <span class='literal'>"bar"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:bar</span>)
    (uml-dependency <span class='keyword3'>:foo</span> <span class='keyword3'>:bar</span>
                    <span class='keyword3'>:stereotype</span> '(<span class='literal'>"stereotype"</span> <span class='keyword3'>:font</span> 9)
                    <span class='keyword3'>:name</span>       '(<span class='literal'>"name"</span> <span class='keyword3'>:offset</span> (0 5)))))
</pre>
<p>　必須パラメータは接続元／接続先のみで、それ以外は名前付きパラメータです。コネクタとほぼ同じように使えます。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#0AOc4Hz7cU9'>uml-dependency マクロ</a></li>
<li><a class='autolink' href='#8I8CeZX7FA2'>with-uml-dependency-options マクロ</a></li>
</ul>
<h4><a name='gbfzFbCEQb7'></a>13.8.17 uml-expansion-region</h4>
<p>　<a class='autolink' href='#gbfzFbCEQb7'>uml-expansion-region</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>における拡張領域を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='200'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-expansion-region -->
	<rect x='20' y='20' width='260' height='160' rx='10' fill='oldlace' stroke='brown' stroke-width='2' stroke-dasharray='5 5 ' filter='url(#drop-shadow)' />
	<text x='25' y='35' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >«concurrent»</text>

</svg>
</div>

<p class='fig_title'><a name='5uEj5boHvy4'></a>Figure.13-24 uml-expansion-region のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。 <code>stereotype</code> または <code>keyword</code> パラメータを指定した場合、デフォルトでは左上に表示されます。この位置は <code>offset</code> パラメータで調整することができます。</p>
<ul>
<li><span style='background:red;color:white;'>ToDo : 上記の調整方法について改善タスクが起票されている。</span></li>
</ul>
<pre class='code'>
(diagram (300 200)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (with-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-expansion-region canvas.center 260 160 <span class='keyword3'>:keyword</span> '(<span class='keyword3'>:concurrent</span> <span class='keyword3'>:font</span> 10)))))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#5Ql5zK0cMwk'>uml-expansion-region マクロ</a></li>
<li><a class='autolink' href='#8SWwZSuNPRo'>with-uml-expansion-region-options マクロ</a></li>
</ul>
<h4><a name='8l54mEIg2yA'></a>13.8.18 uml-flow-final</h4>
<p>　<a class='autolink' href='#8l54mEIg2yA'>uml-flow-final</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるフロー終了を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- step : uml-action -->
	<g id='step'>
		<g >
			<rect x='20' y='20' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='60' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action</text>
		</g>
	</g>
	<!-- final : uml-flow-final -->
	<circle id='final' cx='160' cy='40' r='15' fill='linen' stroke='maroon' stroke-width='1' />
	<polyline fill='none' stroke='maroon' stroke-width='1' points=' 149.3934,29.393398 170.6066,50.6066' />
	<polyline fill='none' stroke='maroon' stroke-width='1' points=' 170.6066,29.393398 149.3934,50.6066' />
	<!-- uml-flow from step to final -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,40.0 145.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='136.33975,45.0 145.0,40.0 136.33975,35.0' />

</svg>
</div>

<p class='fig_title'><a name='hbCYwWh5EVR'></a>Figure.13-25 uml-flow-final のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (200 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (uml-action (x+ canvas.center -40) <span class='literal'>"action"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step</span>)
    (uml-flow-final (x+ $1.center 100) <span class='keyword3'>:id</span> <span class='keyword3'>:final</span>)
    (uml-flow <span class='keyword3'>:step</span> <span class='keyword3'>:final</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#hesl6zCtKGG'>uml-flow-final マクロ</a></li>
<li><a class='autolink' href='#iBvtd62FNd1'>with-uml-flow-final-options マクロ</a></li>
</ul>
<h4><a name='602QxE3z6rZ'></a>13.8.19 uml-flow</h4>
<p>　<a class='autolink' href='#602QxE3z6rZ'>uml-flow</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるアクション間の遷移を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- step1 : uml-action -->
	<g id='step1'>
		<g filter='url(#drop-shadow)' >
			<rect x='20' y='30' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='60' y='55' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step1</text>
		</g>
	</g>
	<!-- step2 : uml-action -->
	<g id='step2'>
		<g filter='url(#drop-shadow)' >
			<rect x='300' y='30' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='340' y='55' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step2</text>
		</g>
	</g>
	<!-- uml-flow from step1 to step2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,50.0 300.0,50.0' />
	<text x='200.0' y='42.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >[idle]/act()</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='291.33975,55.0 300,50.0 291.33975,45.0' />

</svg>
</div>

<p class='fig_title'><a name='4WwY2tJcwxx'></a>Figure.13-26 uml-flow のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 100)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (with-uml-action-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-action '( 60 50) <span class='literal'>"step1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step1</span>)
      (uml-action '(340 50) <span class='literal'>"step2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step2</span>)
      (uml-flow <span class='keyword3'>:step1</span> <span class='keyword3'>:step2</span> <span class='keyword3'>:spec</span> '(<span class='keyword3'>:guard</span> <span class='keyword3'>:idle</span> <span class='keyword3'>:action</span> <span class='literal'>"act()"</span>)))))
</pre>
<p>　必須パラメータは接続元／接続先の指定のみで、それ以外は名前付きパラメータです。そのうち、 <code>:stereotype :keyword :spec</code> 以外はほぼ<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>と同じように使えます。<code>:spec</code> は遷移のガード条件やアクションを指定するためのものです。これらについての詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#jG6cW6e7gyu'>uml-flow-spec</a></li>
<li><a class='autolink' href='#9i3KzQ9ScEv'>uml-flow マクロ</a></li>
<li><a class='autolink' href='#eSqOz44b8wF'>with-uml-flow-options マクロ</a></li>
</ul>
<h4><a name='jG6cW6e7gyu'></a>13.8.20 uml-flow-spec</h4>
<p>　<a class='autolink' href='#jG6cW6e7gyu'>uml-flow-spec</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるフロー仕様を記述するための、ガード条件、アクションなどからなる情報です。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='190'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- act1 : uml-action -->
	<g id='act1'>
		<g filter='url(#drop-shadow)' >
			<rect x='20' y='20' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='60' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action1</text>
		</g>
	</g>
	<!-- act2 : uml-action -->
	<g id='act2'>
		<g filter='url(#drop-shadow)' >
			<rect x='300' y='20' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='340' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action2</text>
		</g>
	</g>
	<!-- uml-flow from act1 to act2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,40.0 300.0,40.0' />
	<text x='200.0' y='32.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >[on-idle]</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='291.33975,45.0 300,40.0 291.33975,35.0' />
	<!-- act3 : uml-action -->
	<g id='act3'>
		<g filter='url(#drop-shadow)' >
			<rect x='20' y='80' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='60' y='105' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action3</text>
		</g>
	</g>
	<!-- act4 : uml-action -->
	<g id='act4'>
		<g filter='url(#drop-shadow)' >
			<rect x='300' y='130' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='340' y='155' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action4</text>
		</g>
	</g>
	<!-- uml-flow from act3 to act4 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,100.0 200.0,100.0 200.0,150.0 300.0,150.0' />
	<text x='156.8' y='93.5' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='brown' >[guard]/action()</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='291.33975,155.0 300,150 291.33975,145.0' />

</svg>
</div>

<p class='fig_title'><a name='aIqYEOfOopd'></a>Figure.13-27 uml-flow-spec のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 190)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (with-uml-action-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-action '( 60  40) <span class='literal'>"action1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act1</span>)
      (uml-action '(340  40) <span class='literal'>"action2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act2</span>)
      (uml-flow <span class='keyword3'>:act1</span> <span class='keyword3'>:act2</span> <span class='keyword3'>:spec</span> <span class='keyword3'>:on-idle</span>)
      (uml-action '( 60 100) <span class='literal'>"action3"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act3</span>)
      (uml-action '(340 150) <span class='literal'>"action4"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act4</span>)
      (uml-flow <span class='keyword3'>:act3</span> <span class='keyword3'>:act4</span>
                <span class='keyword3'>:style</span> <span class='keyword3'>:RL</span>
                <span class='keyword3'>:spec</span> '(<span class='keyword3'>:guard</span>  <span class='literal'>"guard"</span>
                        <span class='keyword3'>:action</span> <span class='literal'>"action()"</span>
                        <span class='keyword3'>:offset</span> (-90 -35)
                        <span class='keyword3'>:font</span>   (<span class='keyword3'>:fill</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:size</span> 9))))))
</pre>
<p>　<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるフロー仕様は、<a class='autolink' href='#9i3KzQ9ScEv'>uml-flow マクロ</a>に渡す <code>:spec</code> パラメータで指定します。このパラメータは <a class='autolink' href='#ci5LvS1eCsb'>make-uml-flow-spec 関数</a>に渡されます。単一のキーワードシンボルや文字列を与えた場合、ガード条件として扱われます。リストを渡せばガード条件やアクション、表示位置の調整や<a class='autolink' href='#3kZ9FkounyK'>フォント</a>指定を行なうことができます。</p>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#602QxE3z6rZ'>uml-flow</a></li>
<li><a class='autolink' href='#ci5LvS1eCsb'>make-uml-flow-spec 関数</a></li>
</ul>
<h4><a name='dI34u24Hxh3'></a>13.8.21 uml-fork</h4>
<p>　<a class='autolink' href='#dI34u24Hxh3'>uml-fork</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるフォークを表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='340' height='150'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- step1 : uml-action -->
	<g id='step1'>
		<g filter='url(#drop-shadow)' >
			<rect x='30' y='55' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='70' y='80' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step1</text>
		</g>
	</g>
	<!-- fork : uml-fork-join -->
	<g id='fork'>
		<rect x='165' y='55' width='10' height='40' rx='0' fill='maroon' stroke='none' stroke-width='1' filter='url(#drop-shadow)' />
	</g>
	<!-- step2 : uml-action -->
	<g id='step2'>
		<g filter='url(#drop-shadow)' >
			<rect x='230' y='15' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='270' y='40' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step2</text>
		</g>
	</g>
	<!-- step3 : uml-action -->
	<g id='step3'>
		<g filter='url(#drop-shadow)' >
			<rect x='230' y='95' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='270' y='120' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step3</text>
		</g>
	</g>
	<!-- uml-flow from step1 to fork -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 110.0,75.0 165.0,75.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='156.33975,80.0 165,75.0 156.33975,70.0' />
	<!-- uml-flow to step2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 175.005,64.99842 230.0,47.631577' />
	<polyline fill='none' stroke='black' stroke-width='1' points='223.24739,55.007366 230,47.631577 220.23607,45.47154' />
	<!-- uml-flow to step3 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 175.005,85.00158 230.0,102.36842' />
	<polyline fill='none' stroke='black' stroke-width='1' points='220.23607,104.528465 230,102.36842 223.24739,94.99264' />

</svg>
</div>

<p class='fig_title'><a name='2HkfRE5l33M'></a>Figure.13-28 uml-fork のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (340 150)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (with-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-action (x+ canvas.cc -100)<span class='literal'>"step1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step1</span>)
      (uml-fork   canvas.cc <span class='keyword3'>:h</span> <span class='keyword3'>:id</span> <span class='keyword3'>:fork</span>)
      (uml-action (xy+ canvas.cc 100 -40) <span class='literal'>"step2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step2</span>)
      (uml-action (xy+ canvas.cc 100  40) <span class='literal'>"step3"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step3</span>))
    (uml-flow <span class='keyword3'>:step1</span>  <span class='keyword3'>:fork</span>)
    (uml-flow fork.R1 <span class='keyword3'>:step2</span>)
    (uml-flow fork.R3 <span class='keyword3'>:step3</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#fF3E03hjzKt'>uml-fork マクロ</a></li>
<li><a class='autolink' href='#aT9JaFCRs0a'>with-uml-fork-join-options マクロ</a></li>
</ul>
<h4><a name='1cJtoPoE2w0'></a>13.8.22 uml-frame</h4>
<p>　<a class='autolink' href='#1cJtoPoE2w0'>uml-frame</a> は UML において汎用的に使用される区分要素です。ダイアグラム全体を包む場合もありますし、別図面への<a class='autolink' href='#fbLcMRTVXac'>リンク</a>を提示して詳細を省略したりします。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='150'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-frame -->
	<g stroke='darkslategray' stroke-width='1' filter='url(#drop-shadow)' >
		<rect x='20' y='20' width='260' height='110' fill='whitesmoke' />
		<polyline fill='none' points=' 20.0,40.0 121.0,40.0 126.0,35.0 126.0,20.0' />
	</g>
	<text x='25' y='35' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >this is frame.</text>
	<!-- act1 : uml-action -->
	<g id='act1'>
		<g >
			<rect x='110' y='65' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='150' y='90' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action</text>
		</g>
	</g>
	<!-- start : uml-activity-start -->
	<circle id='start' cx='50' cy='85' r='10' fill='maroon' stroke='none' stroke-width='1' />
	<!-- final : uml-activity-final -->
	<circle id='final' cx='250' cy='85' r='15' fill='linen' stroke='maroon' stroke-width='1' />
	<circle cx='250' cy='85' r='9.0' fill='maroon' stroke='none' stroke-width='1' />
	<!-- connector from start to act1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 60.0,85.0 110.0,85.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='97.00962,92.5 110,85.0 97.00962,77.5' />
	<!-- connector from act1 to final -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 190.0,85.0 235.0,85.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='222.00961,92.5 235.0,85.0 222.00961,77.5' />

</svg>
</div>

<p class='fig_title'><a name='g4Ps2obm0X8'></a>Figure.13-29 uml-frame のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (300 150)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (uml-frame canvas.center 260 110 <span class='literal'>"this is frame."</span> <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
    (with-subcanvas-of ($1.id)
      (uml-action (y+ canvas.center 10) <span class='literal'>"action"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act1</span>)
      (uml-activity-start (x+ $1.center -100) <span class='keyword3'>:id</span> <span class='keyword3'>:start</span>)
      (uml-activity-final (x+ $2.center  100) <span class='keyword3'>:id</span> <span class='keyword3'>:final</span>)))
  (connector <span class='keyword3'>:start</span> <span class='keyword3'>:act1</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>)
  (connector <span class='keyword3'>:act1</span> <span class='keyword3'>:final</span> <span class='keyword3'>:end2</span> <span class='keyword3'>:arrow</span>))
</pre>
<p>　<code>:fragments</code> パラメータを使用することで、フレームを複数の領域に分割することができます。以下に例を示します。分割された個々の領域には、<a class='autolink' href='#aqZzAjhns3j'>with-uml-frame-fragment マクロ</a>を使ってアクセスできます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='700' height='220'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- f1 : uml-frame -->
	<g id='f1'>
		<g stroke='darkslategray' stroke-width='1' >
			<rect x='20' y='20' width='300' height='180' fill='whitesmoke' />
			<polyline fill='none' points=' 20.0,40.0 69.0,40.0 74.0,35.0 74.0,20.0' />
		</g>
		<polyline fill='none' stroke='darkslategray' stroke-width='1' stroke-dasharray='4 4 ' points=' 20.0,110.0 320.0,110.0' />
		<text x='25' y='35' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >frame1</text>
	</g>
	<!-- text -->
	<text x='170' y='35' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >[when foo]</text>
	<!-- text -->
	<text x='170' y='125' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >[unless foo]</text>
	<!-- f2 : uml-frame -->
	<g id='f2'>
		<g stroke='darkslategray' stroke-width='1' >
			<rect x='380' y='20' width='300' height='180' fill='whitesmoke' />
			<polyline fill='none' points=' 380.0,40.0 429.0,40.0 434.0,35.0 434.0,20.0' />
		</g>
		<polyline fill='none' stroke='darkslategray' stroke-width='1' stroke-dasharray='4 4 ' points=' 380.0,80.0 680.0,80.0' />
		<polyline fill='none' stroke='darkslategray' stroke-width='1' stroke-dasharray='4 4 ' points=' 380.0,140.0 680.0,140.0' />
		<text x='385' y='35' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >frame2</text>
	</g>
	<!-- text -->
	<text x='530' y='35' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >[condition1]</text>
	<!-- text -->
	<text x='530' y='95' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >[condition2]</text>
	<!-- text -->
	<text x='530' y='155' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >[condition3]</text>

</svg>
</div>

<p class='fig_title'><a name='7E6tTd25Xwb'></a>Figure.13-30 fragments パラメータを使った uml-frame のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (700 220)
  (grid)
  (with-theme (<span class='keyword3'>:uml-component-default</span>)
    <span class='comment'>;; frame1</span>
    (uml-frame (x+ canvas.cc -180) 300 180 <span class='literal'>"frame1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:f1</span> <span class='keyword3'>:fragments</span> 90)
    (with-uml-frame-fragment (<span class='keyword3'>:f1</span> 0)
      (text (y+ canvas.tc 15) <span class='literal'>"[when foo]"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>))
    (with-uml-frame-fragment (<span class='keyword3'>:f1</span> 1)
      (text (y+ canvas.tc 15) <span class='literal'>"[unless foo]"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>))
    <span class='comment'>;; frame2</span>
    (uml-frame (x+ canvas.cc 180) 300 180 <span class='literal'>"frame2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:f2</span> <span class='keyword3'>:fragments</span> '(60 60))
    (with-uml-frame-fragment (<span class='keyword3'>:f2</span> 0)
      (text (y+ canvas.tc 15) <span class='literal'>"[condition1]"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>))
    (with-uml-frame-fragment (<span class='keyword3'>:f2</span> 1)
      (text (y+ canvas.tc 15) <span class='literal'>"[condition2]"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>))
    (with-uml-frame-fragment (<span class='keyword3'>:f2</span> 2)
      (text (y+ canvas.tc 15) <span class='literal'>"[condition3]"</span> <span class='keyword3'>:align</span> <span class='keyword3'>:center</span>))))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#5mxCyQhUUgs'>uml-frame マクロ</a></li>
<li><a class='autolink' href='#aqZzAjhns3j'>with-uml-frame-fragment マクロ</a></li>
<li><a class='autolink' href='#bKkNt5lQdCz'>with-uml-frame-options マクロ</a></li>
</ul>
<h4><a name='i8NSsns8du9'></a>13.8.23 uml-generalization</h4>
<p>　<a class='autolink' href='#i8NSsns8du9'>uml-generalization</a> は UML の<a class='autolink' href='#khgkJB6xK95'>クラス図</a>などにおける汎化関係を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- foo : uml-class -->
	<g id='foo'>
		<rect x='15' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='50' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	</g>
	<!-- bar : uml-class -->
	<g id='bar'>
		<rect x='315' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='350' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	</g>
	<!-- uml-generalization from foo to bar -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 85.0,40.0 315.0,40.0' />
	<text x='200.0' y='22.5' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='black' >«stereotype»</text>
	<text x='200.0' y='34.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >name</text>
	<path fill='white' stroke='black' stroke-width='1' d='M 315 40.0 l -9.063078 -4.2261825 l 0.0000000000000017763568 8.452365 z' />

</svg>
</div>

<p class='fig_title'><a name='0JpthcuLAtL'></a>Figure.13-31 uml-generalization のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class   (x+ canvas.cl  50) <span class='literal'>"foo"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:foo</span>)
    (uml-class   (x+ canvas.cr -50) <span class='literal'>"bar"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:bar</span>)
    (uml-generalization <span class='keyword3'>:foo</span> <span class='keyword3'>:bar</span>
                        <span class='keyword3'>:stereotype</span> '(<span class='literal'>"stereotype"</span> <span class='keyword3'>:font</span> 9)
                        <span class='keyword3'>:name</span>       '(<span class='literal'>"name"</span> <span class='keyword3'>:offset</span> (0 5)))))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#j26H32Vq33s'>uml-generalization マクロ</a></li>
<li><a class='autolink' href='#9voMgsjpww9'>with-uml-generalization-options マクロ</a></li>
</ul>
<h4><a name='dlZiBdOIRvM'></a>13.8.24 uml-icon-setting</h4>
<p>　<a class='autolink' href='#dlZiBdOIRvM'>uml-icon-setting</a> は UML の描画要素において使用されるアイコンの設定をするための要素です。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='110'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-component -->
	<g >
		<rect x='40' y='30' width='120' height='50' fill='white' stroke='black' stroke-width='1' />
		<rect x='138' y='38' width='14' height='14' fill='lightgray' stroke='dimgray' stroke-width='1' />
		<rect x='132.75' y='40.45' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
		<rect x='132.75' y='46.05' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
		<text x='100' y='60' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >component</text>
	</g>
	<!-- uml-component -->
	<g >
		<rect x='240' y='30' width='120' height='50' fill='white' stroke='black' stroke-width='1' />
		<rect x='249' y='35' width='16' height='16' fill='lightcyan' stroke='navy' stroke-width='1' />
		<rect x='243.0' y='37.8' width='12.0' height='4' fill='lightcyan' stroke='navy' stroke-width='1' />
		<rect x='243.0' y='44.2' width='12.0' height='4' fill='lightcyan' stroke='navy' stroke-width='1' />
		<text x='300' y='60' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >component</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='hccBhwXyWO1'></a>Figure.13-32 uml-icon-setting のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 110)
  (grid)
  (with-theme (<span class='keyword3'>:uml-component-default</span>)
    (uml-component (x+ canvas.CL  100) <span class='literal'>"component"</span> <span class='keyword3'>:width</span> 120)
    (uml-component (x+ canvas.CR -100) <span class='literal'>"component"</span> <span class='keyword3'>:width</span> 120
                   <span class='keyword3'>:icon</span> '(<span class='keyword3'>:fill</span> <span class='keyword3'>:lightcyan</span> <span class='keyword3'>:stroke</span> <span class='keyword3'>:navy</span>
                           <span class='keyword3'>:size</span> 16 <span class='keyword3'>:pivot</span> <span class='keyword3'>:TL</span> <span class='keyword3'>:offset</span> (17 13)))))
</pre>
<p>　左の <a class='autolink' href='#hlJEas6GjYs'>uml-component</a> はデフォルトのアイコン設定で描画されていますが、右の <a class='autolink' href='#hlJEas6GjYs'>uml-component</a> は <code>:icon</code> パラメータによってアイコン設定を指定されています。指定できるのは<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>と<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>、サイズ、位置です。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#1ZEGenUynXh'>make-uml-icon-setting 関数</a></li>
</ul>
<h4><a name='7DqwJ3CtaoY'></a>13.8.25 uml-interface</h4>
<p>　<a class='autolink' href='#7DqwJ3CtaoY'>uml-interface</a> は UML の<a class='autolink' href='#khgkJB6xK95'>クラス図</a>などにおけるインターフェースを表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='360' height='100'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-class -->
	<rect x='65' y='35' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
	<text x='100' y='55' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >class</text>
	<!-- uml-interface -->
	<circle cx='260' cy='50' r='10' fill='beige' stroke='maroon' stroke-width='1' />
	<text x='260' y='72' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >interface</text>
	<!-- uml-association -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 135.0,50.0 250.0,50.0' />

</svg>
</div>

<p class='fig_title'><a name='lNHV28za0bO'></a>Figure.13-33 uml-interface のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (360 100)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class     (x+ canvas.CL  100) <span class='literal'>"class"</span>)
    (uml-interface (x+ canvas.CR -100) <span class='literal'>"interface"</span>)
    (uml-association $2.id $1.id)))
</pre>
<p>詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#00gSBM6e17a'>uml-interface マクロ</a></li>
</ul>
<h4><a name='iND5crw5iJu'></a>13.8.26 uml-interface-request</h4>
<p>　<a class='autolink' href='#iND5crw5iJu'>uml-interface-request</a> は UML の<a class='autolink' href='#khgkJB6xK95'>クラス図</a>などにおけるインターフェースのソケットを表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='360' height='150'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- foo : uml-class -->
	<g id='foo'>
		<rect x='25' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='60' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	</g>
	<!-- bar : uml-class -->
	<g id='bar'>
		<rect x='265' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='300' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	</g>
	<!-- baz : uml-interface -->
	<g id='baz'>
		<circle cx='190' cy='40' r='10' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='190' y='62' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >baz</text>
	</g>
	<!-- uml-association from bar to baz -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 265.0,40.0 200.0,40.0' />
	<!-- uml-interface-request from foo to baz -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 95.0,40.0 170.0,40.0' />
	<path fill='none' stroke='black' stroke-width='1' d='M 177.4118095489748 49.65925826289068 A 10 10 0 0 1 177.4118095489748 30.34074173710932' />
	<!-- uml-interface-request from foo -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 60.0,55.0 60.0,100.0 169.995,100.0' />
	<path fill='none' stroke='black' stroke-width='1' d='M 177.4068046661623 109.65925826289069 A 10 10 0 0 1 177.4068046661623 90.34074173710931' />
	<text x='179.995' y='125.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >quux</text>

</svg>
</div>

<p class='fig_title'><a name='8Ppt9eXm4N2'></a>Figure.13-34 uml-interface-request のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (360 150)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class     (xy+ canvas.TL 60 40) <span class='literal'>"foo"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:foo</span>)
    (uml-class     (x+  foo.cc 240)      <span class='literal'>"bar"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:bar</span>)
    (uml-interface (x+  bar.cc -110)     <span class='literal'>"baz"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:baz</span>)
    (uml-association       <span class='keyword3'>:bar</span> <span class='keyword3'>:baz</span>)
    (uml-interface-request <span class='keyword3'>:foo</span> <span class='keyword3'>:baz</span>)
    (uml-interface-request <span class='keyword3'>:foo</span> (xy+ foo.cc 120 60)
                           <span class='keyword3'>:style</span> <span class='keyword3'>:BL</span> <span class='keyword3'>:name</span> '(<span class='literal'>"quux"</span> <span class='keyword3'>:offset</span> (0 25)))))
</pre>
<p>　<a class='autolink' href='#iND5crw5iJu'>uml-interface-request</a> には 2 つの使い方があります。ひとつは要求されるインターフェースが<a class='autolink' href='#7DqwJ3CtaoY'>uml-interface</a> で描画されている場合にそれを接続先として指定するもので、上記の例ではクラス <code>foo</code> からインターフェース <code>baz</code> の要求が描かれています。</p>
<p>　もうひとつは接続先として座標を指定することでソケットだけを描画するもので、上記の例ではクラス <code>foo</code> からインターフェース <code>quux</code> を要求するソケットが描画されています。この場合、インターフェース名は <code>:name</code> パラメータで指定することになります。いずれの場合も、<a class='autolink' href='#iND5crw5iJu'>uml-interface-request</a> は実質的に<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>なので、 <code>:style</code> や <code>:spacing</code> パラメータで接続線の折れ曲がり方を調整することができます。</p>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#gOnL4iRiMam'>uml-interface-request マクロ</a></li>
</ul>
<h4><a name='eTHeBBfGtFF'></a>13.8.27 uml-join</h4>
<p>　<a class='autolink' href='#eTHeBBfGtFF'>uml-join</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるフォークを表記するための図形要素です。見た目は<a href='#dI34u24Hxh3'>uml-fork</a> と同じですが、ジョイン仕様を指定することができます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='340' height='150'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- step1 : uml-action -->
	<g id='step1'>
		<g filter='url(#drop-shadow)' >
			<rect x='30' y='15' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='70' y='40' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step1</text>
		</g>
	</g>
	<!-- step2 : uml-action -->
	<g id='step2'>
		<g filter='url(#drop-shadow)' >
			<rect x='30' y='95' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='70' y='120' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step2</text>
		</g>
	</g>
	<!-- join : uml-fork-join -->
	<g id='join'>
		<rect x='165' y='55' width='10' height='40' rx='0' fill='maroon' stroke='none' stroke-width='1' filter='url(#drop-shadow)' />
		<text x='200' y='115' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >{joinSpec=blah blah}</text>
	</g>
	<!-- step3 : uml-action -->
	<g id='step3'>
		<g filter='url(#drop-shadow)' >
			<rect x='230' y='55' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='270' y='80' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >step3</text>
		</g>
	</g>
	<!-- uml-flow from step1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 110.0,47.631577 164.995,64.99842' />
	<polyline fill='none' stroke='black' stroke-width='1' points='155.23106,67.15846 164.995,64.99842 158.24239,57.62263' />
	<!-- uml-flow from step2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 110.0,102.36842 164.995,85.00158' />
	<polyline fill='none' stroke='black' stroke-width='1' points='158.24239,92.377365 164.995,85.00158 155.23106,82.84154' />
	<!-- uml-flow from join to step3 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 175.0,75.0 230.0,75.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='221.33975,80.0 230,75.0 221.33975,70.0' />

</svg>
</div>

<p class='fig_title'><a name='ctRzvw94nYe'></a>Figure.13-35 uml-join のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (340 150)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (with-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-action (xy+ canvas.cc -100 -40) <span class='literal'>"step1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step1</span>)
      (uml-action (xy+ canvas.cc -100  40) <span class='literal'>"step2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step2</span>)
      (uml-join canvas.cc <span class='keyword3'>:h</span> <span class='keyword3'>:id</span> <span class='keyword3'>:join</span>
                <span class='keyword3'>:spec</span> '(<span class='literal'>"{joinSpec=blah blah}"</span> <span class='keyword3'>:offset</span> (30 8) <span class='keyword3'>:font</span> 10))
      (uml-action (x+ canvas.cc 100) <span class='literal'>"step3"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step3</span>))
    (uml-flow <span class='keyword3'>:step1</span> join.L1)
    (uml-flow <span class='keyword3'>:step2</span> join.L3)
    (uml-flow <span class='keyword3'>:join</span>  <span class='keyword3'>:step3</span>)))
</pre>
<p>　ジョイン仕様は <code>:spec</code> パラメータで<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#bmxOutyzIGv'>uml-join マクロ</a></li>
<li><a class='autolink' href='#aT9JaFCRs0a'>with-uml-fork-join-options マクロ</a></li>
</ul>
<h4><a name='ikpYK2ZSZov'></a>13.8.28 uml-merge</h4>
<p>　<a class='autolink' href='#ikpYK2ZSZov'>uml-merge</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>において判断による分岐の終了を表記するための図形要素です。以下の例では右端の<a class='autolink' href='#4dFMjynUMYw'>ひし形</a>の要素が <a class='autolink' href='#ikpYK2ZSZov'>uml-merge</a> です。<a class='autolink' href='#4gZkeXtP8bm'>uml-decision</a> とは異なり、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を指定することはできません。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='150'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- check : uml-decision-merge -->
	<g id='check'>
		<g filter='url(#drop-shadow)' >
			<polygon fill='wheat' stroke='brown' stroke-width='1' points='53.333332,55.0 40.0,75.0 53.333332,95.0 106.666664,95.0 120.0,75.0 106.666664,55.0' filter='url(#drop-shadow)' />
		</g>
		<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
			<text x='80' y='74' >check</text>
			<text x='80' y='86' >status</text>
		</g>
	</g>
	<!-- act1 : uml-action -->
	<g id='act1'>
		<g filter='url(#drop-shadow)' >
			<rect x='200' y='15' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='240' y='40' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action1</text>
		</g>
	</g>
	<!-- act2 : uml-action -->
	<g id='act2'>
		<g filter='url(#drop-shadow)' >
			<rect x='200' y='95' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='240' y='120' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action2</text>
		</g>
	</g>
	<!-- merge : uml-decision-merge -->
	<g id='merge'>
		<g filter='url(#drop-shadow)' >
			<polygon fill='wheat' stroke='brown' stroke-width='1' points='350.0,60.0 330.0,75.0 350.0,90.0 370.0,75.0 350.0,60.0' filter='url(#drop-shadow)' />
		</g>
	</g>
	<!-- uml-flow from check to act1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,55.0 80.0,35.0 200.0,35.0' />
	<text x='130.0' y='27.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >[OK]</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='191.33975,40.0 200,35 191.33975,30.0' />
	<!-- uml-flow from check to act2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,95.0 80.0,115.0 200.0,115.0' />
	<text x='130.0' y='107.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >[NG]</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='191.33975,120.0 200,115 191.33975,110.0' />
	<!-- uml-flow from act1 to merge -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 280.0,35.0 350.0,35.0 350.0,60.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='345.0,51.339745 350,60 355.0,51.339745' />
	<!-- uml-flow from act2 to merge -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 280.0,115.0 350.0,115.0 350.0,90.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='355.0,98.660255 350,90 345.0,98.660255' />

</svg>
</div>

<p class='fig_title'><a name='6yptTOoW7np'></a>Figure.13-36 uml-merge のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 150)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (with-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-decision (x+ canvas.cc -120)
                    <span class='keyword3'>:text</span> <span class='literal'>"check~%status"</span> <span class='keyword3'>:width</span> 80 <span class='keyword3'>:height</span> 40 <span class='keyword3'>:id</span> <span class='keyword3'>:check</span>)
      (uml-action   (xy+ canvas.cc 40 -40) <span class='literal'>"action1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act1</span>)
      (uml-action   (xy+ canvas.cc 40  40) <span class='literal'>"action2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act2</span>)
      (uml-merge    (x+ canvas.cc  150) <span class='keyword3'>:id</span> <span class='keyword3'>:merge</span>))
    (uml-flow <span class='keyword3'>:check</span> <span class='keyword3'>:act1</span> <span class='keyword3'>:style</span> <span class='keyword3'>:TL</span> <span class='keyword3'>:spec</span> <span class='literal'>"OK"</span>)
    (uml-flow <span class='keyword3'>:check</span> <span class='keyword3'>:act2</span> <span class='keyword3'>:style</span> <span class='keyword3'>:BL</span> <span class='keyword3'>:spec</span> <span class='literal'>"NG"</span>)
    (uml-flow <span class='keyword3'>:act1</span> <span class='keyword3'>:merge</span> <span class='keyword3'>:style</span> <span class='keyword3'>:RT</span>)
    (uml-flow <span class='keyword3'>:act2</span> <span class='keyword3'>:merge</span> <span class='keyword3'>:style</span> <span class='keyword3'>:RB</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#4OsqWlN0N0o'>uml-decision マクロ</a></li>
<li><a class='autolink' href='#jFepxnqBIdp'>uml-merge マクロ</a></li>
<li><a class='autolink' href='#izhz8eDjPe0'>with-uml-decision-merge-options マクロ</a></li>
</ul>
<h4><a name='g6kEHGpHjhy'></a>13.8.29 uml-multiplicity-info</h4>
<ul>
<li><span style='background:red;color:white;'>ToDo : uml-class では uml-multiplicity-info の offset が利用されていない疑いあり。</span></li>
</ul>
<p>　<a class='autolink' href='#g6kEHGpHjhy'>uml-multiplicity-info</a> は UML のクラスや関連において使用される多重度の記述をするための要素です。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='140'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-class -->
	<rect x='20' y='20' width='80' height='40' fill='beige' stroke='maroon' stroke-width='1' filter='url(#drop-shadow)' />
	<text x='60' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >app</text>
	<text x='95' y='35' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >1</text>
	<!-- uml-class -->
	<rect x='20' y='80' width='80' height='40' fill='beige' stroke='maroon' stroke-width='1' filter='url(#drop-shadow)' />
	<text x='60' y='105' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	<!-- uml-class -->
	<rect x='200' y='80' width='80' height='40' fill='beige' stroke='maroon' stroke-width='1' filter='url(#drop-shadow)' />
	<text x='240' y='105' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	<!-- uml-association -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,100.0 200.0,100.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='191.33975,105.0 200,100.0 191.33975,95.0' />
	<text x='195.0' y='117.660255' text-anchor='end' font-family='sans-serif' font-size='9pt' fill='black' >2..*</text>

</svg>
</div>

<p class='fig_title'><a name='kzMXfyDkRUO'></a>Figure.13-37 uml-multiplicity-info のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (300 140)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (with-uml-class-options (<span class='keyword3'>:width</span> 80 <span class='keyword3'>:height</span> 40 <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-class (xy+ canvas.tl  60  40) <span class='literal'>"app"</span> <span class='keyword3'>:multiplicity</span> 1)
      (uml-class (xy+ canvas.bl  60 -40) <span class='literal'>"foo"</span>)
      (uml-class (xy+ canvas.br -60 -40) <span class='literal'>"bar"</span>)
      (uml-association $2.id $1.id <span class='keyword3'>:arrows</span> 1 <span class='keyword3'>:mult2</span> '(<span class='keyword3'>:min</span> 2 <span class='keyword3'>:max</span> <span class='keyword3'>:*</span> <span class='keyword3'>:font</span> 9)))))
</pre>
<p>　<a class='autolink' href='#fkYROSV9994'>uml-class</a> では、多重度は <code>:multiplicity</code> パラメータで指定します。関連などでは両端に多重度の指定がありうるため、 <code>:mult1 :mult2</code> で指定を行ないます。いずれにおいても、指定されたパラメータは <a class='autolink' href='#8qfGG61let2'>make-uml-multiplicity 関数</a>に渡されます。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#8qfGG61let2'>make-uml-multiplicity 関数</a></li>
</ul>
<h4><a name='jOvc70hxXQE'></a>13.8.30 uml-node</h4>
<p>　<a class='autolink' href='#jOvc70hxXQE'>uml-node</a> は UML の<a class='autolink' href='#6DAfYJjISDb'>配置図</a>などにおけるノードを表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='160'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-node -->
	<g stroke='none' >
		<polygon fill='#D9D9D9' points='20.0,47.5 35.0,32.5 107.5,32.5 107.5,105.0 92.5,120.0 92.5,47.5' />
		<rect x='20' y='47.5' width='72.5' height='72.5' fill='#F7F7F7' />
		<path fill='none' stroke='black' stroke-width='1' d='M 20 47.5 L 92.5 47.5 L 92.5 120 L 20 120 L 20 47.5 L 35 32.5 L 107.5 32.5 L 107.5 105 L 92.5 120 M 92.5 47.5 L 107.5 32.5' />
		<text x='56.25' y='88.75' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >client</text>
	</g>
	<!-- uml-node -->
	<g stroke='none' >
		<polygon fill='#D9D9D9' points='150.0,27.5 165.0,12.5 277.5,12.5 277.5,125.0 262.5,140.0 262.5,27.5' />
		<rect x='150' y='27.5' width='112.5' height='112.5' fill='#F7F7F7' />
		<path fill='none' stroke='black' stroke-width='1' d='M 150 27.5 L 262.5 27.5 L 262.5 140 L 150 140 L 150 27.5 L 165 12.5 L 277.5 12.5 L 277.5 125 L 262.5 140 M 262.5 27.5 L 277.5 12.5' />
		<text x='206.25' y='42.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >server</text>
		<polyline fill='none' stroke='black' stroke-width='1' points=' 150.0,47.5 262.5,47.5' />
	</g>
	<!-- paragraph -->
	<g text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >
		<text x='155' y='62.5' >* Web server</text>
		<text x='155' y='74.5' >* Postgre SQL</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='dCWihE5tKQQ'></a>Figure.13-38 uml-node のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (300 160)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-deployment-default</span>)
    (uml-node (x+ canvas.cl  60) <span class='literal'>"client"</span>)
    (uml-node (x+ canvas.cr -90) <span class='literal'>"server"</span> <span class='keyword3'>:width</span> 120 <span class='keyword3'>:height</span> 120
      <span class='keyword3'>:contents</span>
      ((paragraph (xy+ canvas.tl 5 5)
                  <span class='literal'>"* Web server~%* Postgre SQL"</span>
                  <span class='keyword3'>:align</span> <span class='keyword3'>:left</span> <span class='keyword3'>:valign</span> <span class='keyword3'>:top</span>)))))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#hMkh04dArCc'>uml-node マクロ</a></li>
<li><a class='autolink' href='#8ofUYOHf2dy'>with-uml-node-options マクロ</a></li>
</ul>
<h4><a name='jFViCKeUWqC'></a>13.8.31 uml-note</h4>
<p>　<a class='autolink' href='#jFViCKeUWqC'>uml-note</a> は UML において汎用的にノートを付加させる図形要素です。ほぼ<a class='autolink' href='#0AVJhEKnK1M'>メモ</a>と同じように使えますが、targets パラメータによって複数の図形要素に接続することが可能です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='170'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- foo : uml-class -->
	<g id='foo'>
		<rect x='45' y='30' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='80' y='50' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Foo</text>
	</g>
	<!-- bar : uml-class -->
	<g id='bar'>
		<rect x='265' y='10' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='300' y='30' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >Bar</text>
	</g>
	<!-- uml-note -->
	<g stroke='olive' stroke-width='1' >
		<polygon fill='ivory' points='230.0,105.0 230.0,135.0 350.0,135.0 350.0,95.0 330.0,75.0 230.0,75.0 230.0,105.0' />
		<polyline fill='none' points=' 350.0,95.0 330.0,95.0 330.0,75.0' />
	</g>
	<text x='240' y='95' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >«memo»</text>
	<text x='240' y='107' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >test note.</text>
	<g stroke='olive' stroke-width='1' stroke-dasharray='3 3 ' >
		<polyline fill='none' points=' 230.0,87.85714 115.0,55.0' />
		<polyline fill='none' points=' 293.75,75.0 298.125,40.0' />
	</g>
	<!-- uml-note -->
	<g stroke='olive' stroke-width='1' >
		<polygon fill='ivory' points='20.0,125.0 20.0,155.0 180.0,155.0 180.0,115.0 160.0,95.0 20.0,95.0 20.0,125.0' />
		<polyline fill='none' points=' 180.0,115.0 160.0,115.0 160.0,95.0' />
	</g>
	<text x='30' y='115' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >«spec»</text>
	<g text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >
		<text x='30' y='127' >this is spec memo.</text>
		<text x='30' y='139' >multi line is OK.</text>
	</g>
	<polyline fill='none' stroke='olive' stroke-width='1' stroke-dasharray='3 3 ' points=' 92.5,95.0 83.75,60.0' />

</svg>
</div>

<p class='fig_title'><a name='i2gBN2RhnHw'></a>Figure.13-39 uml-note のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。targets パラメータは、単一の要素だけを指定する場合はリストである必要はありません。また、図面中で <a class='autolink' href='#jFViCKeUWqC'>uml-note</a> のスタイルを統一するために <a class='autolink' href='#bKpfdfxlm28'>with-uml-note-options マクロ</a>を使用しています。</p>
<pre class='code'>
(diagram (400 170)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class '( 80 45) <span class='literal'>"Foo"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:foo</span>)
    (uml-class '(300 25) <span class='literal'>"Bar"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:bar</span>)
    (uml-note (xy+ bar.center -10 80) 120 60
              <span class='literal'>"test note."</span>
              <span class='keyword3'>:targets</span> '(<span class='keyword3'>:foo</span> <span class='keyword3'>:bar</span>) <span class='keyword3'>:keyword</span> <span class='literal'>"memo"</span>)
    (uml-note (xy+ foo.center 20 80) 160 60
              <span class='literal'>"this is spec memo.~%multi line is OK."</span>
              <span class='keyword3'>:targets</span> <span class='keyword3'>:foo</span> <span class='keyword3'>:keyword</span> <span class='literal'>"spec"</span>)))
</pre>
<p>　version 0.022 より、targets パラメータに指定する接続先として、図形要素の ID だけでなく座標の直接指定も可能になりました。図形要素の ID を指定した場合は<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>で <code>:style :CC</code> を指定したイメージで接続されますが、座標の直接指定では任意の位置に接続線をひくことが可能になります。</p>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#hAV2OPdOjGW'>uml-note マクロ</a></li>
<li><a class='autolink' href='#bKpfdfxlm28'>with-uml-note-options マクロ</a></li>
</ul>
<h4><a name='algAxSoZB1Z'></a>13.8.32 uml-package</h4>
<p>　<a class='autolink' href='#algAxSoZB1Z'>uml-package</a> は UML の<a class='autolink' href='#la7Xa1OTF3W'>パッケージ図</a>などにおけるパッケージを表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='160'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-package -->
	<g >
		<rect x='10' y='60' width='100' height='60' fill='beige' />
		<rect x='10' y='45' width='40' height='15' fill='beige' />
		<polyline fill='none' stroke='maroon' stroke-width='1' points=' 50.0,60.0 50.0,45.0 10.0,45.0 10.0,120.0 110.0,120.0 110.0,60.0 10.0,60.0' />
		<text x='60' y='95' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >app</text>
	</g>
	<!-- uml-package -->
	<g >
		<rect x='150' y='40' width='120' height='100' fill='beige' />
		<rect x='150' y='20' width='40' height='20' fill='beige' />
		<polyline fill='none' stroke='maroon' stroke-width='1' points=' 190.0,40.0 190.0,20.0 150.0,20.0 150.0,140.0 270.0,140.0 270.0,40.0 150.0,40.0' />
		<text x='164.75' y='35' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >lib</text>
	</g>
	<!-- paragraph -->
	<g text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >
		<text x='155' y='60' >* pattern match</text>
		<text x='155' y='72' >* multi threads</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='4tLfM2uCDx0'></a>Figure.13-40 uml-package のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (300 160)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-package-default</span>)
    (uml-package (xy+ canvas.cl  60 10) <span class='literal'>"app"</span>)
    (uml-package (xy+ canvas.cr -90 10) <span class='literal'>"lib"</span> <span class='keyword3'>:width</span> 120 <span class='keyword3'>:height</span> 100
      <span class='keyword3'>:contents</span>
      ((paragraph (xy+ canvas.tl 5 10)
                  <span class='literal'>"* pattern match~%* multi threads"</span>
                  <span class='keyword3'>:align</span> <span class='keyword3'>:left</span> <span class='keyword3'>:valign</span> <span class='keyword3'>:top</span>)))))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#6744Q7c1KZQ'>uml-package マクロ</a></li>
<li><a class='autolink' href='#5W98YlueCaH'>with-uml-package-options マクロ</a></li>
</ul>
<h4><a name='hDY1LBkmvKv'></a>13.8.33 uml-partition</h4>
<p>　<a class='autolink' href='#hDY1LBkmvKv'>uml-partition</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>における区画（パーティション）を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='560' height='300'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- lanes : uml-partition -->
	<g id='lanes'>
		<g stroke='none'>
			<rect x='10' y='10' width='540' height='280' fill='white' />
		</g>
		<polyline fill='none' stroke='black' stroke-width='1' points=' 10.0,150.0 550.0,150.0' />
		<polyline fill='none' stroke='black' stroke-width='1' points=' 10.0,10.0 550.0,10.0' />
		<polyline fill='none' stroke='black' stroke-width='1' points=' 10.0,290.0 550.0,290.0' />
		<polyline fill='none' stroke='black' stroke-width='1' points=' 40.0,10.0 40.0,290.0' />
		<g transform='rotate(-90,25,80)'>
			<text x='25' y='85' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >FrontEnd</text>
		</g>
		<g transform='rotate(-90,25,220)'>
			<text x='25' y='225' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >BackEnd</text>
		</g>
	</g>
	<!-- start : uml-activity-start -->
	<circle id='start' cx='70' cy='80' r='10' fill='maroon' stroke='none' stroke-width='1' />
	<!-- act1 : uml-action -->
	<g id='act1'>
		<g >
			<rect x='130' y='60' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='170' y='85' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action1</text>
		</g>
	</g>
	<!-- act3 : uml-action -->
	<g id='act3'>
		<g >
			<rect x='260' y='60' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='300' y='85' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action3</text>
		</g>
	</g>
	<!-- merge : uml-decision-merge -->
	<g id='merge'>
		<polygon fill='wheat' stroke='brown' stroke-width='1' points='420.0,65.0 400.0,80.0 420.0,95.0 440.0,80.0 420.0,65.0' />
	</g>
	<!-- final : uml-activity-final -->
	<circle id='final' cx='510' cy='80' r='15' fill='linen' stroke='maroon' stroke-width='1' />
	<circle cx='510' cy='80' r='9.0' fill='maroon' stroke='none' stroke-width='1' />
	<!-- act2 : uml-action -->
	<g id='act2'>
		<g >
			<rect x='130' y='200' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='170' y='225' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action2</text>
		</g>
	</g>
	<!-- decision : uml-decision-merge -->
	<g id='decision'>
		<polygon fill='wheat' stroke='brown' stroke-width='1' points='300.0,205.0 280.0,220.0 300.0,235.0 320.0,220.0 300.0,205.0' />
	</g>
	<!-- act4 : uml-action -->
	<g id='act4'>
		<g >
			<rect x='380' y='200' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='420' y='225' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action4</text>
		</g>
	</g>
	<!-- uml-flow from decision to act4 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 320.0,220.0 380.0,220.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='371.33975,225.0 380,220.0 371.33975,215.0' />
	<!-- uml-flow from act4 to merge -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 420.0,200.0 420.0,95.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='425.0,103.660255 420,95 415.0,103.660255' />
	<!-- uml-flow from start to act1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 80.0,80.0 130.0,80.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='121.339745,85.0 130,80.0 121.339745,75.0' />
	<!-- uml-flow from act1 to act2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 170.0,100.0 170.0,200.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='165.0,191.33975 170.0,200 175.0,191.33975' />
	<!-- uml-flow from act2 to decision -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 210.0,220.0 280.0,220.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='271.33975,225.0 280,220 271.33975,215.0' />
	<!-- uml-flow from decision to act3 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 300.0,205.0 300.0,100.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='305.0,108.660255 300.0,100 295.0,108.660255' />
	<!-- uml-flow from act3 to merge -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 340.0,80.0 400.0,80.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='391.33975,85.0 400,80 391.33975,75.0' />
	<!-- uml-flow from merge to final -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 440.0,80.0 495.0,80.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='486.33975,85.0 495.0,80.0 486.33975,75.0' />

</svg>
</div>

<p class='fig_title'><a name='ciTM0GPrOeW'></a>Figure.13-41 uml-partition のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (560 300)
  (grid)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (uml-partition canvas.center '((<span class='literal'>"FrontEnd"</span> 140)
                                   (<span class='literal'>"BackEnd"</span>  140)) 540 <span class='keyword3'>:id</span> <span class='keyword3'>:lanes</span>)
    (with-uml-partition-lane (<span class='keyword3'>:lanes</span> <span class='literal'>"FrontEnd"</span>)
      (uml-activity-start (x+ canvas.left 30)  <span class='keyword3'>:id</span> <span class='keyword3'>:start</span>)
      (uml-action (x+ $1.center 100) <span class='literal'>"action1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act1</span>)
      (uml-action (x+ $1.center 130) <span class='literal'>"action3"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act3</span>)
      (uml-merge  (x+ $1.center 120)           <span class='keyword3'>:id</span> <span class='keyword3'>:merge</span>)
      (uml-activity-final (x+ $1.center 90)   <span class='keyword3'>:id</span> <span class='keyword3'>:final</span>))
    (with-uml-partition-lane (<span class='keyword3'>:lanes</span> <span class='literal'>"BackEnd"</span>)
      (uml-action   (y+ act1.center 140)  <span class='literal'>"action2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act2</span>)
      (uml-decision (y+ act3.center 140)            <span class='keyword3'>:id</span> <span class='keyword3'>:decision</span>)
      (uml-action   (y+ merge.center 140) <span class='literal'>"action4"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act4</span>))
    (<span class='keyword1'>labels</span> ((route (lst)
               (<span class='keyword1'>when</span> (and (car lst) (cadr lst))
                 (uml-flow (car lst) (cadr lst))
                 (route (cdr lst)))))
      (route '(<span class='keyword3'>:decision</span> <span class='keyword3'>:act4</span> <span class='keyword3'>:merge</span>))
      (route '(<span class='keyword3'>:start</span> <span class='keyword3'>:act1</span> <span class='keyword3'>:act2</span> <span class='keyword3'>:decision</span> <span class='keyword3'>:act3</span> <span class='keyword3'>:merge</span> <span class='keyword3'>:final</span>)))))
</pre>
<p>　　</p>
<p>　<a class='autolink' href='#hDY1LBkmvKv'>uml-partition</a> のパラメータとして必須なのは <code>center rows cols</code> の３つで、 <code>rows cols</code> の指定の仕方で垂直・水平方向のスイムレーンとマトリクス状の区画を作成することができます。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='600' height='140'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='10' y='10' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 70.0,10.0 70.0,130.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 130.0,10.0 130.0,130.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 10.0,10.0 10.0,130.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 190.0,10.0 190.0,130.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 10.0,40.0 190.0,40.0' />
	<text x='40' y='31' text-anchor='middle' font-size='12pt' fill='black' >A</text>
	<text x='100' y='31' text-anchor='middle' font-size='12pt' fill='black' >B</text>
	<text x='160' y='31' text-anchor='middle' font-size='12pt' fill='black' >C</text>
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='210' y='10' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 210.0,50.0 390.0,50.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 210.0,90.0 390.0,90.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 210.0,10.0 390.0,10.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 210.0,130.0 390.0,130.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,10.0 240.0,130.0' />
	<g transform='rotate(-90,225,30)'>
		<text x='225' y='36' text-anchor='middle' font-size='12pt' fill='black' >X</text>
	</g>
	<g transform='rotate(-90,225,70)'>
		<text x='225' y='76' text-anchor='middle' font-size='12pt' fill='black' >Y</text>
	</g>
	<g transform='rotate(-90,225,110)'>
		<text x='225' y='116' text-anchor='middle' font-size='12pt' fill='black' >Z</text>
	</g>
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='410' y='10' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 440.0,10.0 440.0,130.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 490.0,10.0 490.0,130.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 540.0,10.0 540.0,130.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 410.0,40.0 590.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 410.0,70.0 590.0,70.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 410.0,100.0 590.0,100.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 590.0,10.0 590.0,130.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 410.0,130.0 590.0,130.0' />
	<text x='465' y='31' text-anchor='middle' font-size='12pt' fill='black' >A</text>
	<text x='515' y='31' text-anchor='middle' font-size='12pt' fill='black' >B</text>
	<text x='565' y='31' text-anchor='middle' font-size='12pt' fill='black' >C</text>
	<g transform='rotate(-90,425,55)'>
		<text x='425' y='61' text-anchor='middle' font-size='12pt' fill='black' >X</text>
	</g>
	<g transform='rotate(-90,425,85)'>
		<text x='425' y='91' text-anchor='middle' font-size='12pt' fill='black' >Y</text>
	</g>
	<g transform='rotate(-90,425,115)'>
		<text x='425' y='121' text-anchor='middle' font-size='12pt' fill='black' >Z</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='az9Gf58gMEB'></a>Figure.13-42 uml-partition のサンプル - 2</p>
<p>　上記の作図は以下のコードで行なっています。左の縦方向のスイムレーンでは、 <code>cols</code> に <code>'((A 60) (B 60) (C 60))</code> を、 <code>rows</code> に <code>120</code> を指定しています。中央の横方向のスイムレーンでは、 <code>cols</code> に <code>180</code> を、 <code>rows</code> に <code>'((X 40) (Y 40) (Z 40))</code> を指定しています。このように <code>rows cols</code> の一方を数値にして他方をリストにすると縦または横のスイムレーンになります。両方をリストにするとマトリクス状の区画になります。</p>
<pre class='code'>
(diagram (600 140)
  (grid)
  (with-uml-partition-options (<span class='keyword3'>:stroke</span> <span class='keyword3'>:black</span> <span class='keyword3'>:fill</span> <span class='keyword3'>:azure</span> <span class='keyword3'>:lines</span> <span class='keyword3'>:mid</span>)
    (with-subcanvas ('( 0 0) 200 140)
      (uml-partition canvas.center 120 '((A 60) (B 60) (C 60))))
    (with-subcanvas ('(200 0) 200 140)
      (uml-partition canvas.center '((X 40) (Y 40) (Z 40)) 180))
    (with-subcanvas ('(400 0) 200 140)
      (uml-partition canvas.center
                     '((X 30) (Y 30) (Z 30)) '((A 50) (B 50) (C 50))))))
</pre>
<p>　注意が必要なのは、区画の全体サイズを決めるルールです。</p>
<ul>
<li>スイムレーンになる場合、
<ul>
<li><code>rows</code> または <code>cols</code> に数値を指定した側は、その値がそのまま幅または高さになります</li>
<li>レーンの名前部分の領域は、 <code>header</code> で指定されたサイズが上記の中で確保されます</li>
<li><code>rows</code> または <code>cols</code> にリストを指定した側はその幅の合計が幅または高さになります</li>
</ul>
</li>
<li>マトリクスになる場合、
<ul>
<li><code>rows</code> または <code>cols</code> に指定したリストに含まれる幅の合計に <code>header</code> の指定値を加えたものが幅または高さになります</li>
</ul>
</li>
</ul>
<p>　　</p>
<p>　<a class='autolink' href='#hDY1LBkmvKv'>uml-partition</a> は<a class='autolink' href='#g6xjP526KX7'>テーブル</a>をベースに作成されていますが、描画される「罫線」は <code>lines</code> パラメータによってカスタマイズすることができます。指定する値は <code>:min :mid :max</code> のいずれかです。区画の形状別のサンプルを以下に示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='630' height='450'>
	
	<!-- textbox -->
	<text x='130.0' y='30' text-anchor='middle' font-size='20pt' fill='brown' >:lines :min</text>
	<!-- textbox -->
	<text x='330.0' y='30' text-anchor='middle' font-size='20pt' fill='brown' >:lines :mid</text>
	<!-- textbox -->
	<text x='530.0' y='30' text-anchor='middle' font-size='20pt' fill='brown' >:lines :max</text>
	<!-- textbox -->
	<g transform='rotate(-90,20,100)'>
		<text x='20.0' y='110' text-anchor='middle' font-size='20pt' fill='brown' >vertical</text>
	</g>
	<!-- textbox -->
	<g transform='rotate(-90,20,240)'>
		<text x='20.0' y='250' text-anchor='middle' font-size='20pt' fill='brown' >horizontal</text>
	</g>
	<!-- textbox -->
	<g transform='rotate(-90,20,380)'>
		<text x='20.0' y='390' text-anchor='middle' font-size='20pt' fill='brown' >matrix</text>
	</g>
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='40' y='40' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,40.0 100.0,160.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 160.0,40.0 160.0,160.0' />
	<text x='70' y='61' text-anchor='middle' font-size='12pt' fill='black' >A</text>
	<text x='130' y='61' text-anchor='middle' font-size='12pt' fill='black' >B</text>
	<text x='190' y='61' text-anchor='middle' font-size='12pt' fill='black' >C</text>
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='240' y='40' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 300.0,40.0 300.0,160.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 360.0,40.0 360.0,160.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,40.0 240.0,160.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 420.0,40.0 420.0,160.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,70.0 420.0,70.0' />
	<text x='270' y='61' text-anchor='middle' font-size='12pt' fill='black' >A</text>
	<text x='330' y='61' text-anchor='middle' font-size='12pt' fill='black' >B</text>
	<text x='390' y='61' text-anchor='middle' font-size='12pt' fill='black' >C</text>
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='440' y='40' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 500.0,40.0 500.0,160.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 560.0,40.0 560.0,160.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 440.0,70.0 620.0,70.0' />
	<rect x='440' y='40' width='180' height='120' fill='none' stroke='black' stroke-width='1' />
	<text x='470' y='61' text-anchor='middle' font-size='12pt' fill='black' >A</text>
	<text x='530' y='61' text-anchor='middle' font-size='12pt' fill='black' >B</text>
	<text x='590' y='61' text-anchor='middle' font-size='12pt' fill='black' >C</text>
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='40' y='180' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 40.0,220.0 220.0,220.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 40.0,260.0 220.0,260.0' />
	<g transform='rotate(-90,55,200)'>
		<text x='55' y='206' text-anchor='middle' font-size='12pt' fill='black' >X</text>
	</g>
	<g transform='rotate(-90,55,240)'>
		<text x='55' y='246' text-anchor='middle' font-size='12pt' fill='black' >Y</text>
	</g>
	<g transform='rotate(-90,55,280)'>
		<text x='55' y='286' text-anchor='middle' font-size='12pt' fill='black' >Z</text>
	</g>
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='240' y='180' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,220.0 420.0,220.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,260.0 420.0,260.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,180.0 420.0,180.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,300.0 420.0,300.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 270.0,180.0 270.0,300.0' />
	<g transform='rotate(-90,255,200)'>
		<text x='255' y='206' text-anchor='middle' font-size='12pt' fill='black' >X</text>
	</g>
	<g transform='rotate(-90,255,240)'>
		<text x='255' y='246' text-anchor='middle' font-size='12pt' fill='black' >Y</text>
	</g>
	<g transform='rotate(-90,255,280)'>
		<text x='255' y='286' text-anchor='middle' font-size='12pt' fill='black' >Z</text>
	</g>
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='440' y='180' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 440.0,220.0 620.0,220.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 440.0,260.0 620.0,260.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 470.0,180.0 470.0,300.0' />
	<rect x='440' y='180' width='180' height='120' fill='none' stroke='black' stroke-width='1' />
	<g transform='rotate(-90,455,200)'>
		<text x='455' y='206' text-anchor='middle' font-size='12pt' fill='black' >X</text>
	</g>
	<g transform='rotate(-90,455,240)'>
		<text x='455' y='246' text-anchor='middle' font-size='12pt' fill='black' >Y</text>
	</g>
	<g transform='rotate(-90,455,280)'>
		<text x='455' y='286' text-anchor='middle' font-size='12pt' fill='black' >Z</text>
	</g>
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='40' y='320' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 70.0,320.0 70.0,440.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 120.0,320.0 120.0,440.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 170.0,320.0 170.0,440.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 40.0,350.0 220.0,350.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 40.0,380.0 220.0,380.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 40.0,410.0 220.0,410.0' />
	<text x='95' y='341' text-anchor='middle' font-size='12pt' fill='black' >A</text>
	<text x='145' y='341' text-anchor='middle' font-size='12pt' fill='black' >B</text>
	<text x='195' y='341' text-anchor='middle' font-size='12pt' fill='black' >C</text>
	<g transform='rotate(-90,55,365)'>
		<text x='55' y='371' text-anchor='middle' font-size='12pt' fill='black' >X</text>
	</g>
	<g transform='rotate(-90,55,395)'>
		<text x='55' y='401' text-anchor='middle' font-size='12pt' fill='black' >Y</text>
	</g>
	<g transform='rotate(-90,55,425)'>
		<text x='55' y='431' text-anchor='middle' font-size='12pt' fill='black' >Z</text>
	</g>
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='240' y='320' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 270.0,320.0 270.0,440.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 320.0,320.0 320.0,440.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 370.0,320.0 370.0,440.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,350.0 420.0,350.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,380.0 420.0,380.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,410.0 420.0,410.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 420.0,320.0 420.0,440.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,440.0 420.0,440.0' />
	<text x='295' y='341' text-anchor='middle' font-size='12pt' fill='black' >A</text>
	<text x='345' y='341' text-anchor='middle' font-size='12pt' fill='black' >B</text>
	<text x='395' y='341' text-anchor='middle' font-size='12pt' fill='black' >C</text>
	<g transform='rotate(-90,255,365)'>
		<text x='255' y='371' text-anchor='middle' font-size='12pt' fill='black' >X</text>
	</g>
	<g transform='rotate(-90,255,395)'>
		<text x='255' y='401' text-anchor='middle' font-size='12pt' fill='black' >Y</text>
	</g>
	<g transform='rotate(-90,255,425)'>
		<text x='255' y='431' text-anchor='middle' font-size='12pt' fill='black' >Z</text>
	</g>
	<!-- uml-partition -->
	<g stroke='none'>
		<rect x='440' y='320' width='180' height='120' fill='azure' />
	</g>
	<polyline fill='none' stroke='black' stroke-width='1' points=' 470.0,320.0 470.0,440.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 520.0,320.0 520.0,440.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 570.0,320.0 570.0,440.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 440.0,350.0 620.0,350.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 440.0,380.0 620.0,380.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points=' 440.0,410.0 620.0,410.0' />
	<rect x='440' y='320' width='180' height='120' fill='none' stroke='black' stroke-width='1' />
	<text x='495' y='341' text-anchor='middle' font-size='12pt' fill='black' >A</text>
	<text x='545' y='341' text-anchor='middle' font-size='12pt' fill='black' >B</text>
	<text x='595' y='341' text-anchor='middle' font-size='12pt' fill='black' >C</text>
	<g transform='rotate(-90,455,365)'>
		<text x='455' y='371' text-anchor='middle' font-size='12pt' fill='black' >X</text>
	</g>
	<g transform='rotate(-90,455,395)'>
		<text x='455' y='401' text-anchor='middle' font-size='12pt' fill='black' >Y</text>
	</g>
	<g transform='rotate(-90,455,425)'>
		<text x='455' y='431' text-anchor='middle' font-size='12pt' fill='black' >Z</text>
	</g>

</svg>
</div>

<p class='fig_title'><a name='52lWmm72SQc'></a>Figure.13-43 uml-partition における lines パラメータのサンプル</p>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#cPEgYZoifRN'>uml-partition マクロ</a></li>
<li><a class='autolink' href='#gdVz9m0bWf1'>with-uml-partition-lane マクロ</a></li>
<li><a class='autolink' href='#3188U3eHIfD'>with-uml-partition-options マクロ</a></li>
</ul>
<h4><a name='axhW9kmgXg3'></a>13.8.34 uml-pin</h4>
<p>　<a class='autolink' href='#axhW9kmgXg3'>uml-pin</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるピンを表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='620' height='120'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- act1 : uml-action -->
	<g id='act1'>
		<g filter='url(#drop-shadow)' >
			<rect x='20' y='40' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='60' y='65' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action1</text>
		</g>
	</g>
	<!-- act2 : uml-action -->
	<g id='act2'>
		<g filter='url(#drop-shadow)' >
			<rect x='220' y='20' width='80' height='80' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='260' y='65' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action2</text>
		</g>
	</g>
	<!-- act3 : uml-action -->
	<g id='act3'>
		<g filter='url(#drop-shadow)' >
			<rect x='380' y='30' width='80' height='60' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='420' y='65' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action3</text>
		</g>
	</g>
	<!-- act4 : uml-action -->
	<g id='act4'>
		<g filter='url(#drop-shadow)' >
			<rect x='520' y='40' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='560' y='65' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action4</text>
		</g>
	</g>
	<!-- foo : uml-pin -->
	<g id='foo'>
		<rect x='100' y='55' width='10' height='10' fill='white' stroke='brown' stroke-width='1' />
		<text x='105' y='50' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	</g>
	<!-- bar : uml-pin -->
	<g id='bar'>
		<rect x='210' y='35' width='10' height='10' fill='white' stroke='brown' stroke-width='1' />
		<text x='215' y='55' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	</g>
	<!-- baz : uml-pin -->
	<g id='baz'>
		<rect x='210' y='75' width='10' height='10' fill='white' stroke='brown' stroke-width='1' />
		<text x='215' y='95' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >baz</text>
	</g>
	<!-- quux1 : uml-pin -->
	<g id='quux1'>
		<rect x='370' y='40' width='10' height='40' fill='white' stroke='brown' stroke-width='1' />
		<path fill='white' stroke='brown' stroke-width='1' d='M 370 50 L 380 50 M 370 60 L 380 60 M 370 70 L 380 70' />
		<text x='365' y='80' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >quux</text>
	</g>
	<!-- quux2 : uml-pin -->
	<g id='quux2'>
		<rect x='460' y='40' width='10' height='40' fill='white' stroke='brown' stroke-width='1' />
		<path fill='white' stroke='brown' stroke-width='1' d='M 460 50 L 470 50 M 460 60 L 470 60 M 460 70 L 470 70' />
	</g>
	<!-- uml-flow from foo to bar -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 110.0,60.0 160.0,60.0 160.0,40.0 210.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='201.33975,45.0 210,40 201.33975,35.0' />
	<!-- uml-flow from foo to baz -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 110.0,60.0 160.0,60.0 160.0,80.0 210.0,80.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='201.33975,85.0 210,80 201.33975,75.0' />
	<!-- uml-flow from act2 to quux1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 300.0,60.0 370.0,60.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='361.33975,65.0 370,60.0 361.33975,55.0' />
	<!-- uml-flow from quux2 to act4 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 470.0,60.0 520.0,60.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='511.33975,65.0 520,60.0 511.33975,55.0' />

</svg>
</div>

<p class='fig_title'><a name='2vEaeqb4vdx'></a>Figure.13-44 uml-pin のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。ピンはフローの接続点に付けるものなので、対象アクションの位置とその接続点を指定します。接続点は、<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>であれば <code>:RL</code> などと記述する表記の片側分なので、 <code>:R</code> や <code>:T3</code> などと記述することになります。また、通常は<a href='#gbfzFbCEQb7'>拡張領域</a>に渡すことになる入出力コレクションは <code>:multi t</code> とすることで表現できます。</p>
<pre class='code'>
(diagram (620 120)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (with-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-action (x+ canvas.left 60) <span class='literal'>"action1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act1</span>)
      (uml-action (x+ $1.center  200) <span class='literal'>"action2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act2</span> <span class='keyword3'>:height</span> 80)
      (uml-action (x+ $1.center  160) <span class='literal'>"action3"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act3</span> <span class='keyword3'>:height</span> 60)
      (uml-action (x+ $1.center  140) <span class='literal'>"action4"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:act4</span>))
    (uml-pin <span class='keyword3'>:act1</span> <span class='keyword3'>:R</span>  <span class='literal'>"foo"</span>  <span class='keyword3'>:id</span> <span class='keyword3'>:foo</span>)
    (uml-pin <span class='keyword3'>:act2</span> <span class='keyword3'>:L1</span> <span class='literal'>"bar"</span>  <span class='keyword3'>:id</span> <span class='keyword3'>:bar</span>)
    (uml-pin <span class='keyword3'>:act2</span> <span class='keyword3'>:L3</span> <span class='literal'>"baz"</span>  <span class='keyword3'>:id</span> <span class='keyword3'>:baz</span>)
    (uml-pin <span class='keyword3'>:act3</span> <span class='keyword3'>:L</span>  <span class='literal'>"quux"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:quux1</span> <span class='keyword3'>:multi</span> t <span class='keyword3'>:offset</span> '(-10 5))
    (uml-pin <span class='keyword3'>:act3</span> <span class='keyword3'>:R</span>  nil    <span class='keyword3'>:id</span> <span class='keyword3'>:quux2</span> <span class='keyword3'>:multi</span> t)
    (uml-flow <span class='keyword3'>:foo</span>   <span class='keyword3'>:bar</span>  <span class='keyword3'>:style</span> <span class='keyword3'>:RL</span>)
    (uml-flow <span class='keyword3'>:foo</span>   <span class='keyword3'>:baz</span>  <span class='keyword3'>:style</span> <span class='keyword3'>:RL</span>)
    (uml-flow <span class='keyword3'>:act2</span>  <span class='keyword3'>:quux1</span>)
    (uml-flow <span class='keyword3'>:quux2</span> <span class='keyword3'>:act4</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#3QBsYVXqy6S'>uml-pin マクロ</a></li>
<li><a class='autolink' href='#iKNb1fFHcnJ'>with-uml-pin-options マクロ</a></li>
</ul>
<h4><a name='froC5uEo6hu'></a>13.8.35 uml-port</h4>
<p>　<a class='autolink' href='#froC5uEo6hu'>uml-port</a> は UML の<a class='autolink' href='#evUs70Itwyp'>コンポーネント図</a>などにおけるポートを表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='200'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- svr : uml-component -->
	<g id='svr'>
		<g >
			<rect x='140' y='25' width='200' height='150' fill='white' stroke='black' stroke-width='1' />
			<rect x='318' y='33' width='14' height='14' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='312.75' y='35.45' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='312.75' y='41.05' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<text x='240' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >server</text>
		</g>
	</g>
	<!-- port1 : uml-port -->
	<g id='port1'>
		<rect x='132' y='92' width='16' height='16' fill='#EEE5DE' stroke='black' stroke-width='1' />
		<text x='120' y='122' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >port</text>
	</g>
	<!-- tran : uml-component -->
	<g id='tran'>
		<g >
			<rect x='190' y='65' width='100' height='70' fill='white' stroke='black' stroke-width='1' />
			<rect x='268' y='73' width='14' height='14' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='262.75' y='75.45' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<rect x='262.75' y='81.05' width='10.5' height='3.5' fill='lightgray' stroke='dimgray' stroke-width='1' />
			<text x='240' y='105' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >transactor</text>
		</g>
	</g>
	<!-- uml-dependency from port1 to tran -->
	<polyline fill='none' stroke='black' stroke-width='1' stroke-dasharray='4 2 ' points=' 148.0,100.0 190.0,100.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='181.33975,105.0 190,100.0 181.33975,95.0' />
	<!-- interface : uml-interface -->
	<g id='interface'>
		<circle cx='40' cy='100' r='10' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='40' y='122' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >interface</text>
	</g>
	<!-- uml-association from port1 to interface -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 132.0,100.0 50.0,100.0' />

</svg>
</div>

<p class='fig_title'><a name='gg8F0vevaD8'></a>Figure.13-45 uml-port のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 200)
  (grid)
  (with-theme (<span class='keyword3'>:uml-component-default</span>)
    (uml-component (x+ canvas.cc 40) <span class='literal'>"server"</span>
                   <span class='keyword3'>:width</span> 200 <span class='keyword3'>:height</span> 150 <span class='keyword3'>:contents</span> t <span class='keyword3'>:id</span> <span class='keyword3'>:svr</span>)
    (uml-port svr.CL <span class='keyword3'>:name</span> '(<span class='literal'>"port"</span> <span class='keyword3'>:offset</span> (-20 2)) <span class='keyword3'>:id</span> <span class='keyword3'>:port1</span>)
    (with-subcanvas-of (<span class='keyword3'>:svr</span>)
      (uml-component (xy+ port1.cc 100 0)
                     <span class='literal'>"transactor"</span> <span class='keyword3'>:height</span> 70 <span class='keyword3'>:id</span> <span class='keyword3'>:tran</span>)
      (uml-dependency <span class='keyword3'>:port1</span> <span class='keyword3'>:tran</span>))
    (uml-interface (xy+ port1.cc -100 0) <span class='literal'>"interface"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:interface</span>)
    (uml-association <span class='keyword3'>:port1</span> <span class='keyword3'>:interface</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#ddK61IWocJ6'>uml-port マクロ</a></li>
<li><a class='autolink' href='#4gpOhhEbKrc'>with-uml-port-options マクロ</a></li>
</ul>
<h4><a name='bn5BLn6Qb3Y'></a>13.8.36 uml-realization</h4>
<p>　<a class='autolink' href='#bn5BLn6Qb3Y'>uml-realization</a> は UML の<a class='autolink' href='#khgkJB6xK95'>クラス図</a>などにおける実現関係を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- foo : uml-class -->
	<g id='foo'>
		<rect x='15' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='50' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	</g>
	<!-- bar : uml-class -->
	<g id='bar'>
		<rect x='315' y='25' width='70' height='30' fill='beige' stroke='maroon' stroke-width='1' />
		<text x='350' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	</g>
	<!-- uml-realization from foo to bar -->
	<polyline fill='none' stroke='black' stroke-width='1' stroke-dasharray='4 2 ' points=' 85.0,40.0 315.0,40.0' />
	<text x='200.0' y='22.5' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='black' >«stereotype»</text>
	<text x='200.0' y='34.5' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >name</text>
	<path fill='white' stroke='black' stroke-width='1' d='M 315 40.0 l -9.063078 -4.2261825 l 0.0000000000000017763568 8.452365 z' />

</svg>
</div>

<p class='fig_title'><a name='1ssaGju1LmT'></a>Figure.13-46 uml-realization のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (uml-class   (x+ canvas.cl  50) <span class='literal'>"foo"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:foo</span>)
    (uml-class   (x+ canvas.cr -50) <span class='literal'>"bar"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:bar</span>)
    (uml-realization <span class='keyword3'>:foo</span> <span class='keyword3'>:bar</span>
                     <span class='keyword3'>:stereotype</span> '(<span class='literal'>"stereotype"</span> <span class='keyword3'>:font</span> 9)
                     <span class='keyword3'>:name</span>       '(<span class='literal'>"name"</span> <span class='keyword3'>:offset</span> (0 5)))))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#1fseuHWNLXr'>uml-realization マクロ</a></li>
<li><a class='autolink' href='#dhb9h5mcHOW'>with-uml-realization-options マクロ</a></li>
</ul>
<h4><a name='9ugZNtgVL4J'></a>13.8.37 uml-role-info</h4>
<p>　<a class='autolink' href='#9ugZNtgVL4J'>uml-role-info</a> は UML の関連などにおいて使用されるロール情報の記述をするための要素です。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='340' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-class -->
	<rect x='20' y='30' width='80' height='40' fill='beige' stroke='maroon' stroke-width='1' filter='url(#drop-shadow)' />
	<text x='60' y='55' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	<!-- uml-class -->
	<rect x='240' y='30' width='80' height='40' fill='beige' stroke='maroon' stroke-width='1' filter='url(#drop-shadow)' />
	<text x='280' y='55' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	<!-- uml-association -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,50.0 240.0,50.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='231.33975,55.0 240,50.0 231.33975,45.0' />
	<text x='105.0' y='68.660255' text-anchor='start' font-family='sans-serif' font-size='10pt' fill='black' >parent</text>
	<text x='235.0' y='41.339745' text-anchor='end' font-family='sans-serif' font-size='10pt' fill='black' >child</text>

</svg>
</div>

<p class='fig_title'><a name='cIrUa9Rtvoh'></a>Figure.13-47 uml-role-info のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (340 100)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (with-uml-class-options (<span class='keyword3'>:width</span> 80 <span class='keyword3'>:height</span> 40 <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-class (x+ canvas.cl  60) <span class='literal'>"foo"</span>)
      (uml-class (x+ canvas.cr -60) <span class='literal'>"bar"</span>)
      (uml-association $2.id $1.id <span class='keyword3'>:arrows</span> 1 <span class='keyword3'>:role1</span> <span class='keyword3'>:parent</span> <span class='keyword3'>:role2</span> <span class='keyword3'>:child</span>))))
</pre>
<p>　関連などでは両端にロール情報の指定がありうるため、 <code>:role1 :role2</code> で指定を行ないます。指定されたパラメータは <a class='autolink' href='#iC62f7YUIgx'>make-uml-role 関数</a>に渡されます。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#iC62f7YUIgx'>make-uml-role 関数</a></li>
</ul>
<h4><a name='9eWb5bnq5W3'></a>13.8.38 uml-signal</h4>
<p>　<a class='autolink' href='#9eWb5bnq5W3'>uml-signal</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるシグナル送受信を表記するための図形要素です。ほぼ<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>と同じように使えますが、少なくとも送信か受信かの区別をパラメータで与える必要があります。また、形状は <code>:direction</code> パラメータで <code>:left</code> か <code>:right</code> で与えます。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='160'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- start : uml-activity-start -->
	<circle id='start' cx='50' cy='40' r='10' fill='maroon' stroke='none' stroke-width='1' />
	<!-- step1 : uml-signal -->
	<g id='step1'>
		<polygon fill='powderblue' stroke='darkslateblue' stroke-width='1' points='160.0,19.0 160.0,61.0 232.5,61.0 247.5,40.0 232.5,19.0 160.0,19.0' filter='url(#drop-shadow)' />
		<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
			<text x='200' y='39' >sending</text>
			<text x='200' y='51' >signal</text>
		</g>
	</g>
	<!-- step2 : uml-signal -->
	<g id='step2'>
		<polygon fill='powderblue' stroke='darkslateblue' stroke-width='1' points='152.5,99.0 167.5,120.0 152.5,141.0 240.0,141.0 240.0,99.0 152.5,99.0' filter='url(#drop-shadow)' />
		<g text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >
			<text x='200' y='119' >receiving</text>
			<text x='200' y='131' >signal</text>
		</g>
	</g>
	<!-- final : uml-activity-final -->
	<circle id='final' cx='350' cy='120' r='15' fill='linen' stroke='maroon' stroke-width='1' />
	<circle cx='350' cy='120' r='9.0' fill='maroon' stroke='none' stroke-width='1' />
	<!-- uml-flow from start to step1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 60.0,40.0 160.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='151.33975,45.0 160,40.0 151.33975,35.0' />
	<!-- uml-flow from step1 to step2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 200.0,61.0 200.0,99.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='195.0,90.339745 200.0,99 205.0,90.339745' />
	<!-- uml-flow from step2 to final -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 240.0,120.0 335.0,120.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='326.33975,125.0 335.0,120.0 326.33975,115.0' />

</svg>
</div>

<p class='fig_title'><a name='eIatijW5Ws3'></a>Figure.13-48 uml-signal のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 160)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (uml-activity-start '(50 40) <span class='keyword3'>:id</span> <span class='keyword3'>:start</span>)
    (with-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-signal (x+ start.center 150) <span class='keyword3'>:send</span>
                  <span class='literal'>"sending~%signal"</span>   <span class='keyword3'>:direction</span> <span class='keyword3'>:right</span> <span class='keyword3'>:id</span> <span class='keyword3'>:step1</span>)
      (uml-signal (y+ step1.center  80) <span class='keyword3'>:receive</span>
                  <span class='literal'>"receiving~%signal"</span> <span class='keyword3'>:direction</span> <span class='keyword3'>:left</span>  <span class='keyword3'>:id</span> <span class='keyword3'>:step2</span>))
    (uml-activity-final (x+ step2.center 150) <span class='keyword3'>:id</span> <span class='keyword3'>:final</span>)
    (uml-flow <span class='keyword3'>:start</span> <span class='keyword3'>:step1</span>)
    (uml-flow <span class='keyword3'>:step1</span> <span class='keyword3'>:step2</span>)
    (uml-flow <span class='keyword3'>:step2</span> <span class='keyword3'>:final</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#cAZB6pzi0PF'>uml-signal マクロ</a></li>
<li><a class='autolink' href='#kTp6nsb6qSq'>with-uml-signal-options マクロ</a></li>
</ul>
<h4><a name='4Fe1V46854v'></a>13.8.39 uml-state-begin</h4>
<p>　<a class='autolink' href='#4Fe1V46854v'>uml-state-begin</a> は UML の<a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>における開始状態を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- start : uml-state-begin -->
	<circle id='start' cx='40' cy='40' r='10' fill='darkslateblue' stroke='none' stroke-width='1' />
	<!-- state : uml-state -->
	<g id='state'>
		<g >
			<rect x='100' y='20' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='140' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state</text>
		</g>
	</g>
	<!-- uml-transition from start to state -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 50.0,40.0 100.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='91.339745,45.0 100,40.0 91.339745,35.0' />

</svg>
</div>

<p class='fig_title'><a name='gFYxvYPqfFI'></a>Figure.13-49 uml-state-begin のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (200 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-statemachine-default</span>)
    (uml-state-begin (x+ canvas.cc -60) <span class='keyword3'>:id</span> <span class='keyword3'>:start</span>)
    (uml-state (x+ $1.cc 100) <span class='literal'>"state"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:state</span>)
    (uml-transition <span class='keyword3'>:start</span> <span class='keyword3'>:state</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#gcmbjMkYiQg'>uml-state-begin マクロ</a></li>
<li><a class='autolink' href='#dhjnYKCmHBq'>with-uml-state-begin-options マクロ</a></li>
</ul>
<h4><a name='6dfRecys5K7'></a>13.8.40 uml-state-end</h4>
<p>　<a class='autolink' href='#6dfRecys5K7'>uml-state-end</a> は UML の<a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>における終了状態を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='200' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- state : uml-state -->
	<g id='state'>
		<g >
			<rect x='20' y='20' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='60' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state</text>
		</g>
	</g>
	<!-- end : uml-state-end -->
	<circle id='end' cx='160' cy='40' r='15' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
	<circle cx='160' cy='40' r='9.0' fill='darkslateblue' stroke='none' stroke-width='1' />
	<!-- uml-flow from state to end -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,40.0 145.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='132.00961,47.5 145.0,40.0 132.00961,32.5' />

</svg>
</div>

<p class='fig_title'><a name='0Vovxfelmu4'></a>Figure.13-50 uml-state-end のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (200 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-statemachine-default</span>)
    (uml-state (x+ canvas.cc -40) <span class='literal'>"state"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:state</span>)
    (uml-state-end (x+ $1.cc 100) <span class='keyword3'>:id</span> <span class='keyword3'>:end</span>)
    (uml-flow <span class='keyword3'>:state</span> <span class='keyword3'>:end</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#1qryRXVv4ZR'>uml-state-end マクロ</a></li>
<li><a class='autolink' href='#egMWtW3cQM9'>with-uml-state-end-options マクロ</a></li>
</ul>
<h4><a name='dZcuFEPgREn'></a>13.8.41 uml-state-history</h4>
<p>　<a class='autolink' href='#dZcuFEPgREn'>uml-state-history</a> は UML の<a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>における履歴状態を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='500' height='180'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- active : uml-state -->
	<g id='active'>
		<g filter='url(#drop-shadow)' >
			<rect x='20' y='15' width='320' height='150' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='180' y='35' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >active</text>
			<polyline fill='none' stroke='darkslateblue' stroke-width='1' points=' 20.0,45.0 340.0,45.0' />
		</g>
	</g>
	<!-- begin : uml-state-begin -->
	<circle id='begin' cx='40' cy='95' r='10' fill='darkslateblue' stroke='none' stroke-width='1' />
	<!-- state1 : uml-state -->
	<g id='state1'>
		<g filter='url(#drop-shadow)' >
			<rect x='90' y='75' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='130' y='100' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state1</text>
		</g>
	</g>
	<!-- state2 : uml-state -->
	<g id='state2'>
		<g filter='url(#drop-shadow)' >
			<rect x='230' y='75' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='270' y='100' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state2</text>
		</g>
	</g>
	<!-- history : uml-state-history -->
	<circle id='history' cx='300' cy='145' r='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
	<path fill='none' stroke='darkslateblue' stroke-width='1' d='M 296.66666 145 L 303.33334 145 M 296.66666 140 L 296.66666 150 M 303.33334 140 L 303.33334 150' />
	<!-- uml-transition from begin to state1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 50.0,95.0 90.0,95.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='81.339745,100.0 90,95.0 81.339745,90.0' />
	<!-- uml-transition from state1 to state2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 170.0,85.0 230.0,85.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='221.33975,90.0 230,85 221.33975,80.0' />
	<!-- uml-transition from state2 to state1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 230.0,105.0 170.0,105.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='178.66025,100.0 170,105 178.66025,110.0' />
	<!-- sleep : uml-state -->
	<g id='sleep'>
		<g filter='url(#drop-shadow)' >
			<rect x='400' y='70' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='440' y='95' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >sleep</text>
		</g>
	</g>
	<!-- uml-transition from active to sleep -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 340.0,90.0 400.0,90.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='391.33975,95.0 400,90.0 391.33975,85.0' />
	<!-- uml-transition from sleep to history -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 440.0,110.0 440.0,145.0 310.0,145.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='318.66025,140.0 310.0,145.0 318.66025,150.0' />

</svg>
</div>

<p class='fig_title'><a name='aAMCxPsrVD5'></a>Figure.13-51 uml-state-history のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (500 180)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-statemachine-default</span>)
    (with-uml-state-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-state (xy+ canvas.tc -70 90) <span class='literal'>"active"</span>
        <span class='keyword3'>:width</span> 320 <span class='keyword3'>:height</span> 150 <span class='keyword3'>:id</span> <span class='keyword3'>:active</span>
        <span class='keyword3'>:contents</span>
        ((uml-state-begin   (xy+ canvas.tl 20 50) <span class='keyword3'>:id</span> <span class='keyword3'>:begin</span>)
         (uml-state (x+  $1.cc  90) <span class='literal'>"state1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:state1</span>)
         (uml-state (x+  $1.cc 140) <span class='literal'>"state2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:state2</span>)
         (uml-state-history (xy+ canvas.br -40 -20) <span class='keyword3'>:id</span> <span class='keyword3'>:history</span>)
         (uml-transition <span class='keyword3'>:begin</span>  <span class='keyword3'>:state1</span>)
         (uml-transition <span class='keyword3'>:state1</span> <span class='keyword3'>:state2</span> <span class='keyword3'>:style</span> <span class='keyword3'>:R1L1</span>)
         (uml-transition <span class='keyword3'>:state2</span> <span class='keyword3'>:state1</span> <span class='keyword3'>:style</span> <span class='keyword3'>:L3R3</span>)))
      (uml-state (x+ active.cr 100) <span class='literal'>"sleep"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:sleep</span>)
      (uml-transition <span class='keyword3'>:active</span> <span class='keyword3'>:sleep</span>)
      (uml-transition <span class='keyword3'>:sleep</span>  <span class='keyword3'>:history</span> <span class='keyword3'>:style</span> <span class='keyword3'>:BR</span>))))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#6IXmPCuJmAq'>uml-state-history マクロ</a></li>
<li><a class='autolink' href='#btmvKFXWMnJ'>with-uml-state-history-options マクロ</a></li>
</ul>
<h4><a name='a7K2CBytplo'></a>13.8.42 uml-state</h4>
<p>　<a class='autolink' href='#a7K2CBytplo'>uml-state</a> は UML の<a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>における状態を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='220'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- start : uml-state-begin -->
	<circle id='start' cx='50' cy='40' r='10' fill='darkslateblue' stroke='none' stroke-width='1' />
	<!-- state1 : uml-state -->
	<g id='state1'>
		<g >
			<rect x='110' y='20' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='150' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state1</text>
		</g>
	</g>
	<!-- state2 : uml-state -->
	<g id='state2'>
		<g >
			<rect x='260' y='20' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='300' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state2</text>
		</g>
	</g>
	<!-- state3 : uml-state -->
	<g id='state3'>
		<g >
			<rect x='15' y='85' width='250' height='110' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='140' y='105' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state3</text>
			<polyline fill='none' stroke='darkslateblue' stroke-width='1' points=' 15.0,115.0 265.0,115.0' />
		</g>
	</g>
	<!-- uml-state -->
	<g >
		<rect x='27.5' y='135' width='85.0' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
		<text x='70.0' y='160' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >sub-state1</text>
	</g>
	<!-- uml-state -->
	<g >
		<rect x='167.5' y='135' width='85.0' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
		<text x='210.0' y='160' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >sub-state2</text>
	</g>
	<!-- uml-transition -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 112.5,155.0 167.5,155.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='158.83975,160.0 167.5,155.0 158.83975,150.0' />
	<!-- final : uml-state-end -->
	<circle id='final' cx='360' cy='190' r='15' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
	<circle cx='360' cy='190' r='9.0' fill='darkslateblue' stroke='none' stroke-width='1' />
	<!-- uml-transition from start to state1 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 60.0,40.0 110.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='101.339745,45.0 110,40.0 101.339745,35.0' />
	<!-- uml-transition from state1 to state2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 190.0,40.0 260.0,40.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='251.33975,45.0 260,40.0 251.33975,35.0' />
	<!-- uml-transition from state2 to state3 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 300.0,60.0 300.0,112.5 265.0,112.5' />
	<polyline fill='none' stroke='black' stroke-width='1' points='273.66025,107.5 265,112.5 273.66025,117.5' />
	<!-- uml-transition from state3 to final -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 265.0,168.40909 345.37302,186.67569' />
	<polyline fill='none' stroke='black' stroke-width='1' points='335.82,189.63206 345.37302,186.67569 338.03622,179.88074' />

</svg>
</div>

<p class='fig_title'><a name='fPYRjBngVB2'></a>Figure.13-52 uml-state のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 220)
  (grid)
  (with-theme (<span class='keyword3'>:uml-statemachine-default</span>)
    (uml-state-begin '(50 40) <span class='keyword3'>:id</span> <span class='keyword3'>:start</span>)
    (uml-state (x+ start.cc 100) <span class='literal'>"state1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:state1</span>)
    (uml-state (x+ state1.cc 150) <span class='literal'>"state2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:state2</span>)
    (uml-state (xy+ canvas.cc -60 30) <span class='literal'>"state3"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:state3</span> <span class='keyword3'>:width</span> 250 <span class='keyword3'>:height</span> 110
        <span class='keyword3'>:contents</span>
        ((uml-state (x+ canvas.cc -70) <span class='literal'>"sub-state1"</span>)
         (uml-state (x+ canvas.cc  70) <span class='literal'>"sub-state2"</span>)
         (uml-transition $2.id $1.id)))
    (uml-state-end (xy+ state3.cc 220 50) <span class='keyword3'>:id</span> <span class='keyword3'>:final</span>)
    (uml-transition <span class='keyword3'>:start</span> <span class='keyword3'>:state1</span>)
    (uml-transition <span class='keyword3'>:state1</span> <span class='keyword3'>:state2</span>)
    (uml-transition <span class='keyword3'>:state2</span> <span class='keyword3'>:state3</span> <span class='keyword3'>:style</span> <span class='keyword3'>:BR1</span>)
    (uml-transition <span class='keyword3'>:state3</span> <span class='keyword3'>:final</span>)))
</pre>
<p>　<code>:contents</code> パラメータと <a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>は通常は同じように使えますが、<a class='autolink' href='#a7K2CBytplo'>uml-state</a> では違いが存在します。 <code>:contents</code> で内部を描画する場合、<a class='autolink' href='#a7K2CBytplo'>uml-state</a> は<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を上端付近に描画しますが、 <code>:contents</code> を使わずに <a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>を使用した場合、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>は中央に描画されます。この問題を解決するため、<a class='autolink' href='#a7K2CBytplo'>uml-state</a> では <code>:contents t</code> と指定することで<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を上端付近に描画させることができます。</p>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#5YyIF89m1Hw'>uml-state マクロ</a></li>
<li><a class='autolink' href='#gm96ZIuYlAQ'>with-uml-state-options マクロ</a></li>
</ul>
<h4><a name='dd6qYwERoK0'></a>13.8.43 uml-stereotype-info</h4>
<p>　<a class='autolink' href='#dd6qYwERoK0'>uml-stereotype-info</a> は UML の各種要素において使用されるステレオタイプおよびキーワードの指定をするための要素です。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='340' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- uml-class -->
	<rect x='20' y='30' width='80' height='40' fill='beige' stroke='maroon' stroke-width='1' filter='url(#drop-shadow)' />
	<text x='60' y='55' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >foo</text>
	<!-- uml-class -->
	<rect x='240' y='30' width='80' height='40' fill='beige' stroke='maroon' stroke-width='1' filter='url(#drop-shadow)' />
	<text x='280' y='49' text-anchor='middle' font-family='sans-serif' font-size='8pt' fill='black' >«thread»</text>
	<text x='280' y='61' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >bar</text>
	<!-- uml-dependency -->
	<polyline fill='none' stroke='black' stroke-width='1' stroke-dasharray='4 2 ' points=' 100.0,50.0 240.0,50.0' />
	<text x='170.0' y='45.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >«uses»</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='231.33975,55.0 240,50.0 231.33975,45.0' />

</svg>
</div>

<p class='fig_title'><a name='cyqVvx7h6f1'></a>Figure.13-53 uml-stereotype-info のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (340 100)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-class-default</span>)
    (with-uml-class-options (<span class='keyword3'>:width</span> 80 <span class='keyword3'>:height</span> 40 <span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-class (x+ canvas.cl  60) <span class='literal'>"foo"</span>)
      (uml-class (x+ canvas.cr -60) <span class='literal'>"bar"</span> <span class='keyword3'>:keyword</span> '(<span class='keyword3'>:thread</span> <span class='keyword3'>:font</span> 8))
      (uml-dependency $2.id $1.id <span class='keyword3'>:keyword</span> <span class='keyword3'>:uses</span>))))
</pre>
<p>　どの UML 描画要素でも、 <code>:stereotype</code> と <code>:keyword</code> のいずれかのパラメータを使用します。指定されたパラメータは <a class='autolink' href='#gso7yLILXT1'>make-uml-stereotype 関数</a>に渡されます。詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#gso7yLILXT1'>make-uml-stereotype 関数</a></li>
</ul>
<h4><a name='dkYATTKFF3X'></a>13.8.44 uml-time-event</h4>
<p>　<a class='autolink' href='#dkYATTKFF3X'>uml-time-event</a> は UML の<a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>における時間シグナルを表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='300' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- clock : uml-time-event -->
	<g id='clock'>
		<polygon fill='powderblue' stroke='darkslateblue' stroke-width='1' points='55.0,30.0 85.0,30.0 55.0,70.0 85.0,70.0 55.0,30.0' filter='url(#drop-shadow)' />
		<text x='70' y='82' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >wait 20min.</text>
	</g>
	<!-- next : uml-action -->
	<g id='next'>
		<g filter='url(#drop-shadow)' >
			<rect x='170' y='30' width='80' height='40' rx='6' fill='wheat' stroke='brown' stroke-width='1' />
			<text x='210' y='55' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >action</text>
		</g>
	</g>
	<!-- uml-flow from clock to next -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 85.0,50.0 170.0,50.0' />
	<polyline fill='none' stroke='black' stroke-width='1' points='161.33975,55.0 170,50.0 161.33975,45.0' />

</svg>
</div>

<p class='fig_title'><a name='fBmyddlzNhV'></a>Figure.13-54 uml-time-event のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (300 100)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-activity-default</span>)
    (with-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-time-event (x+ canvas.center -80) <span class='keyword3'>:label</span> <span class='literal'>"wait 20min."</span> <span class='keyword3'>:id</span> <span class='keyword3'>:clock</span>)
      (uml-action     (x+ canvas.center  60) <span class='literal'>"action"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:next</span>))
    (uml-flow <span class='keyword3'>:clock</span> <span class='keyword3'>:next</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#4maSSQh7iVN'>uml-time-event マクロ</a></li>
<li><a class='autolink' href='#6F3g2ZSN0ck'>with-uml-time-event-options マクロ</a></li>
</ul>
<h4><a name='8h222SLEnVx'></a>13.8.45 uml-transition</h4>
<p>　<a class='autolink' href='#8h222SLEnVx'>uml-transition</a> は UML の<a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>における状態間の遷移を表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='100'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- state1 : uml-state -->
	<g id='state1'>
		<g filter='url(#drop-shadow)' >
			<rect x='20' y='30' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='60' y='55' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state1</text>
		</g>
	</g>
	<!-- state2 : uml-state -->
	<g id='state2'>
		<g filter='url(#drop-shadow)' >
			<rect x='300' y='30' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='340' y='55' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state2</text>
		</g>
	</g>
	<!-- uml-transition from state1 to state2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,50.0 300.0,50.0' />
	<text x='200.0' y='42.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >on-click/OnClick()</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='291.33975,55.0 300,50.0 291.33975,45.0' />

</svg>
</div>

<p class='fig_title'><a name='1tOFL0hPsvz'></a>Figure.13-55 uml-transition のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 100)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-statemachine-default</span>)
    (with-uml-state-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-state '( 60 50) <span class='literal'>"state1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:state1</span>)
      (uml-state '(340 50) <span class='literal'>"state2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:state2</span>)
      (uml-transition <span class='keyword3'>:state1</span> <span class='keyword3'>:state2</span>
                      <span class='keyword3'>:spec</span> '(<span class='keyword3'>:trigger</span> <span class='keyword3'>:on-click</span>
                              <span class='keyword3'>:action</span>  <span class='literal'>"OnClick()"</span>)))))
</pre>
<p>　必須パラメータは接続元／接続先の指定のみで、それ以外は名前付きパラメータです。そのうち、 <code>:stereotype :keyword :spec</code> 以外はほぼ<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>と同じように使えます。<code>:spec</code> は遷移のトリガーやガード条件、アクションを指定するためのものです。これらについての詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#aiNf7xsL8zY'>uml-transition-spec</a></li>
<li><a class='autolink' href='#hlb10Xbiaq1'>uml-transition マクロ</a></li>
<li><a class='autolink' href='#exkjsBfuS1B'>with-uml-transition-options マクロ</a></li>
</ul>
<h4><a name='aiNf7xsL8zY'></a>13.8.46 uml-transition-spec</h4>
<p>　<a class='autolink' href='#aiNf7xsL8zY'>uml-transition-spec</a> は UML の<a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>における遷移仕様を記述するための、トリガー、ガード条件、アクションなどからなる情報です。以下に例を示します。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='400' height='190'>
	
	<filter id='drop-shadow'>
		<feColorMatrix type='matrix' values=' 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' />
		<feGaussianBlur stdDeviation='2' result='blur' />
		<feOffset in='blur' dx='4' dy='4' result='offsetBlur' />
		<feMerge>
			<feMergeNode in='offsetBlur' />
			<feMergeNode in='SourceGraphic'/>
		</feMerge>
	</filter>
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- st1 : uml-state -->
	<g id='st1'>
		<g filter='url(#drop-shadow)' >
			<rect x='20' y='20' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='60' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state1</text>
		</g>
	</g>
	<!-- st2 : uml-state -->
	<g id='st2'>
		<g filter='url(#drop-shadow)' >
			<rect x='300' y='20' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='340' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state2</text>
		</g>
	</g>
	<!-- uml-transition from st1 to st2 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,40.0 300.0,40.0' />
	<text x='200.0' y='32.0' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >on-idle</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='291.33975,45.0 300,40.0 291.33975,35.0' />
	<!-- st3 : uml-state -->
	<g id='st3'>
		<g filter='url(#drop-shadow)' >
			<rect x='20' y='80' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='60' y='105' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state3</text>
		</g>
	</g>
	<!-- st4 : uml-state -->
	<g id='st4'>
		<g filter='url(#drop-shadow)' >
			<rect x='300' y='130' width='80' height='40' rx='10' fill='aliceblue' stroke='darkslateblue' stroke-width='1' />
			<text x='340' y='155' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >state4</text>
		</g>
	</g>
	<!-- uml-transition from st3 to st4 -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 100.0,100.0 200.0,100.0 200.0,150.0 300.0,150.0' />
	<text x='174.35' y='93.5' text-anchor='middle' font-family='sans-serif' font-size='9pt' fill='brown' >trigger[guard]/state()</text>
	<polyline fill='none' stroke='black' stroke-width='1' points='291.33975,155.0 300,150 291.33975,145.0' />

</svg>
</div>

<p class='fig_title'><a name='gIdIDB020Dj'></a>Figure.13-56 uml-transition-spec のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (400 190)
  (grid)
  (drop-shadow)
  (with-theme (<span class='keyword3'>:uml-statemachine-default</span>)
    (with-uml-state-options (<span class='keyword3'>:filter</span> <span class='keyword3'>:drop-shadow</span>)
      (uml-state '( 60  40) <span class='literal'>"state1"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:st1</span>)
      (uml-state '(340  40) <span class='literal'>"state2"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:st2</span>)
      (uml-transition <span class='keyword3'>:st1</span> <span class='keyword3'>:st2</span> <span class='keyword3'>:spec</span> <span class='keyword3'>:on-idle</span>)
      (uml-state '( 60 100) <span class='literal'>"state3"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:st3</span>)
      (uml-state '(340 150) <span class='literal'>"state4"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:st4</span>)
      (uml-transition <span class='keyword3'>:st3</span> <span class='keyword3'>:st4</span>
                      <span class='keyword3'>:style</span> <span class='keyword3'>:RL</span>
                      <span class='keyword3'>:spec</span> '(<span class='keyword3'>:trigger</span> <span class='literal'>"trigger"</span>
                              <span class='keyword3'>:guard</span>   <span class='literal'>"guard"</span>
                              <span class='keyword3'>:action</span>  <span class='literal'>"state()"</span>
                              <span class='keyword3'>:offset</span>  (-90 -35)
                              <span class='keyword3'>:font</span>    (<span class='keyword3'>:fill</span> <span class='keyword3'>:brown</span> <span class='keyword3'>:size</span> 9))))))
</pre>
<p>　<a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>における遷移仕様は、<a class='autolink' href='#hlb10Xbiaq1'>uml-transition マクロ</a>に渡す <code>:spec</code> パラメータで指定します。このパラメータは <a class='autolink' href='#4T0ZbrMPDuy'>make-uml-transition-spec 関数</a>に渡されます。単一のキーワードシンボルや文字列を与えた場合、トリガーとして扱われます。リストを渡せばトリガーやガード条件、アクション、表示位置の調整や<a class='autolink' href='#3kZ9FkounyK'>フォント</a>指定を行なうことができます。</p>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#8h222SLEnVx'>uml-transition</a></li>
<li><a class='autolink' href='#4T0ZbrMPDuy'>make-uml-transition-spec 関数</a></li>
</ul>
<h4><a name='44mEhv2hQcS'></a>13.8.47 uml-usecase</h4>
<p>　<a class='autolink' href='#44mEhv2hQcS'>uml-usecase</a> は UML の<a class='autolink' href='#e57rLpXY8ah'>ユースケース図</a>におけるユースケースを表記するための図形要素です。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='240' height='80'>
	
	<!-- grid -->
	<pattern id='__grid' width='10' height='10' patternUnits='userSpaceOnUse' >
		<rect x='0' y='0' width='10' height='10' fill='white' />
		<polyline fill='none' stroke='gray' stroke-width='0.2' points='10,0 0,0 0,10' />
	</pattern>
	<rect x='0' y='0' width='100%' height='100%' fill='url(#__grid)' stroke='gray' stroke-width='0.2' />
	<!-- actor : uml-actor -->
	<g id='actor'>
		<circle cx='30' cy='28.0' r='8.0' fill='ivory' stroke='olive' stroke-width='1' />
		<polyline fill='none' stroke='olive' stroke-width='1' points=' 30.0,36.0 30.0,49.6' />
		<polyline fill='none' stroke='olive' stroke-width='1' points=' 17.6,41.0 42.4,41.0' />
		<polyline fill='none' stroke='olive' stroke-width='1' points=' 17.6,60.0 30.0,49.6 42.4,60.0' />
		<text x='30' y='72' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >actor</text>
	</g>
	<!-- usecase : uml-usecase -->
	<g id='usecase'>
		<g>
			<ellipse cx='180.0' cy='40' rx='42.75' ry='25' fill='ivory' stroke='olive' stroke-width='1' />
			<text x='180.0' y='45' text-anchor='middle' font-family='sans-serif' font-size='10pt' fill='black' >usecase</text>
		</g>
	</g>
	<!-- uml-association from actor to usecase -->
	<polyline fill='none' stroke='black' stroke-width='1' points=' 50.0,40.0 137.25,40.0' />

</svg>
</div>

<p class='fig_title'><a name='1a6tENexGp7'></a>Figure.13-57 uml-usecase のサンプル</p>
<p>　上記の作図は以下のコードで行なっています。</p>
<pre class='code'>
(diagram (240 80)
  (grid)
  (with-theme (<span class='keyword3'>:uml-usecase-default</span>)
    (uml-actor   (x+ canvas.cl  30) <span class='literal'>"actor"</span>   <span class='keyword3'>:id</span> <span class='keyword3'>:actor</span>)
    (uml-usecase (x+ canvas.cr -60) <span class='literal'>"usecase"</span> <span class='keyword3'>:id</span> <span class='keyword3'>:usecase</span> <span class='keyword3'>:height</span> 50)
    (uml-association <span class='keyword3'>:actor</span> <span class='keyword3'>:usecase</span>)))
</pre>
<p>　詳細は以下を参照してください。</p>
<ul>
<li><a class='autolink' href='#1nYTXUXcD8L'>uml-usecase マクロ</a></li>
<li><a class='autolink' href='#7BxCmPuBmA9'>with-uml-usecase-options マクロ</a></li>
</ul>
<h2><a name='7TyOD7TaDM2'></a>14 リファレンス</h2>
<h3><a name='gKJ1gWcMPT8'></a>14.1 関数とマクロ</h3>
<h4><a name='kdlPtqqvFfP'></a>14.1.1 macro 2d-curve</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>2d-curve</span> points <span style='color:navy;'>&key</span> stroke end1 end2 layer filter id debug</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>points</code> ---- 曲線を構成する点のリストを指定します</li>
<li><code>stroke</code> ---- 曲線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>end1</code> ---- 始端に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>をつける場合は指定します</li>
<li><code>end2</code> ---- 終端に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>をつける場合は指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>debug</code> ---- <a class='autolink' href='#2tO36YvJCgK'>補助線</a>を描画する場合、 <code>t</code> または色名を指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#iTkYd8KXLYO'>二次ベジェ曲線</a>を描画します。 <code>points</code> で指定する点のリストは最低限でも３要素以上である必要があり、始点、制御点、終点の順で指定します。また、<a class='autolink' href='#4qgt62QVDZl'>パス</a>における <code>:2d-curve-to</code> 同様、任意数の点を追加することが可能です。詳細は <a href='#4qgt62QVDZl'>5.1  節</a>の <code>:2d-curve-to</code> の説明を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#iTkYd8KXLYO'>二次ベジェ曲線</a></li>
<li><a class='autolink' href='#96OcmgsUNzD'>3d-curve マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='96OcmgsUNzD'></a>14.1.2 macro 3d-curve</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>3d-curve</span> points <span style='color:navy;'>&key</span> stroke end1 end2 layer filter id debug</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>points</code> ---- 曲線を構成する点のリストを指定します</li>
<li><code>stroke</code> ---- 曲線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>end1</code> ---- 始端に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>をつける場合は指定します</li>
<li><code>end2</code> ---- 終端に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>をつける場合は指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>debug</code> ---- <a class='autolink' href='#2tO36YvJCgK'>補助線</a>を描画する場合、 <code>t</code> または色名を指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#8PFAoBpi4A9'>三次ベジェ曲線</a>を描画します。 <code>points</code> で指定する点のリストは最低限でも４要素以上である必要があり、始点、制御点1、制御点2、終点の順で指定します。また、<a class='autolink' href='#4qgt62QVDZl'>パス</a>における <code>:3d-curve-to</code> 同様、任意数の点を追加することが可能です。詳細は <a href='#4qgt62QVDZl'>5.1  節</a>の <code>:3d-curve-to</code> の説明を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#8PFAoBpi4A9'>三次ベジェ曲線</a></li>
<li><a class='autolink' href='#kdlPtqqvFfP'>2d-curve マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='7Ru23zWD1UC'></a>14.1.3 macro arc</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>arc</span> center rx ry x-axis-rotation degree1 degree2 <span style='color:navy;'>&key</span> stroke end1 end2 layer filter id debug</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>center</code> ---- ベースとなる<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の中心点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>rx</code> ---- ベースとなる<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の x 軸方向の半径を数値で指定します。</li>
<li><code>ry</code> ---- ベースとなる<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の y 軸方向の半径を数値で指定します。</li>
<li><code>x-axis-rotation</code> ---- ベースとなる<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の<a class='autolink' href='#heEi5Lc5BX9'>回転</a>角（x 軸に対してどれだけ<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させるか）を数値で指定します。</li>
<li><code>degree1</code> ---- <a class='autolink' href='#cp2F91gKG7W'>円弧</a>を「時計回りに描く」場合の開始角度を数値で指定します。</li>
<li><code>degree2</code> ---- <a class='autolink' href='#cp2F91gKG7W'>円弧</a>を「時計回りに描く」場合の終了角度を数値で指定します。</li>
<li><code>stroke</code> ---- 曲線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>end1</code> ---- 始端に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>をつける場合は指定します</li>
<li><code>end2</code> ---- 終端に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>をつける場合は指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>debug</code> ---- <a class='autolink' href='#2tO36YvJCgK'>補助線</a>を描画する場合、 <code>t</code> または色名を指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#cp2F91gKG7W'>円弧</a>を描画します。<a class='autolink' href='#cp2F91gKG7W'>円弧</a>のベースとなる<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>の中心点や始点・終点の角度が明らかな場合の使用を想定しています。始点・終点の座標がわかっている場合は path の使用を検討してください。詳細は <a href='#4qgt62QVDZl'>5.1  節</a>の <code>:arc-to</code> の説明を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#cp2F91gKG7W'>円弧</a></li>
<li><a class='autolink' href='#akKCr0fEV12'>path マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='cpOh7beESsS'></a>14.1.4 macro balloon</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>balloon</span> position text anchor <span style='color:navy;'>&key</span> pivot width height round align valign margin font fill stroke link rotate layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>text</code> ---- 内部に描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列で指定します。改行は "~%" で表現します。</li>
<li><code>anchor</code> ---- 引き出し線の位置を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#5IHcv4bxjLU'>吹き出し</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>round</code> ---- 角を丸くしたい場合に、角の半径を数値で指定します。省略した場合のデフォルト値は 0（つまり角を丸くしない）です。</li>
<li><code>align</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の水平方向のアライメントを <code>:left :center :right</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>valign</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の垂直方向のアライメントを <code>:top :center :bottom</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>描画における「余白」のサイズです。省略した場合のデフォルト値は 10 です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#5IHcv4bxjLU'>吹き出し</a>を描画します。複数の<a class='autolink' href='#5IHcv4bxjLU'>吹き出し</a>でスタイルを統一したい場合、<a class='autolink' href='#5wbX4fvnNyO'>with-balloon-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#5IHcv4bxjLU'>吹き出し</a></li>
<li><a class='autolink' href='#5wbX4fvnNyO'>with-balloon-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='fPXJtSPEV1e'></a>14.1.5 macro block-arrow1</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>block-arrow1</span> pt1 pt2 width <span style='color:navy;'>&key</span> (length nil length-p) (size nil size-p) (margin nil margin-p) fill stroke link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt1, pt2</code> ---- 始点と終点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 矢印の幅を数値で指定します。</li>
<li><code>length</code> ---- 矢印部分の長さを数値で指定します。</li>
<li><code>size</code> ---- 矢印部分の大きさを数値で指定します。</li>
<li><code>margin</code> ---- 始点・終点と<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>の間にあける隙間を数値で指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ----  外枠を描画する線を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>を描画します。複数の<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>でスタイルを統一したい場合、<a class='autolink' href='#2UcFIIIJXWw'>with-block-arrow-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#49KKf97828b'>ブロック矢印</a></li>
<li><a class='autolink' href='#lwcwjW0h2Fi'>block-arrow2 マクロ</a></li>
<li><a class='autolink' href='#2UcFIIIJXWw'>with-block-arrow-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='lwcwjW0h2Fi'></a>14.1.6 macro block-arrow2</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>block-arrow2</span> (pt1 pt2 width <span style='color:navy;'>&key</span> (length nil length-p) (size   nil size-p) (margin nil margin-p) fill stroke link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt1, pt2</code> ---- 始点と終点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 矢印の幅を数値で指定します。</li>
<li><code>length</code> ---- 矢印部分の長さを数値で指定します。</li>
<li><code>size</code> ---- 矢印部分の大きさを数値で指定します。</li>
<li><code>margin</code> ---- 始点・終点と<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>の間にあける隙間を数値で指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ----  外枠を描画する線を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>を描画します。複数の<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>でスタイルを統一したい場合、<a class='autolink' href='#2UcFIIIJXWw'>with-block-arrow-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#49KKf97828b'>ブロック矢印</a></li>
<li><a class='autolink' href='#fPXJtSPEV1e'>block-arrow1 マクロ</a></li>
<li><a class='autolink' href='#2UcFIIIJXWw'>with-block-arrow-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='h2iZ4O9D92X'></a>14.1.7 macro brace</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>brace</span> position direction width height <span style='color:navy;'>&key</span> pivot r point text font stroke layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>direction</code> ---- <a class='autolink' href='#lBS33hNe32a'>波括弧</a>の向きを <code>:upper :bottom :left :right</code> のいずれかで指定します。</li>
<li><code>width</code> ---- 幅を数値で指定します。</li>
<li><code>height</code> ---- 高さを数値で指定します。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#lBS33hNe32a'>波括弧</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>r</code> ---- 曲線部分の半径を数値で指定します。</li>
<li><code>point</code> ---- 中央の「つまみ」の曲線部分の端からの距離を数値で指定します。これは水平の<a class='autolink' href='#lBS33hNe32a'>波括弧</a>の場合は左から、垂直の<a class='autolink' href='#lBS33hNe32a'>波括弧</a>の場合は上からの距離です。</li>
<li><code>text</code> ---- 描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列で指定します。改行は "~%" で表現します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>stroke</code> ----  外枠を描画する線を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#lBS33hNe32a'>波括弧</a>を描画します。複数の<a class='autolink' href='#lBS33hNe32a'>波括弧</a>でスタイルを統一したい場合、<a class='autolink' href='#fZCUOAFAdSr'>with-brace-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#lBS33hNe32a'>波括弧</a></li>
<li><a class='autolink' href='#fZCUOAFAdSr'>with-brace-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='bZBKta7QcXj'></a>14.1.8 macro circle</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>circle</span> position radius <span style='color:navy;'>&key</span> pivot fill stroke link layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>radius</code> ---- 半径を数値で指定します。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#8UQowBxrcaE'>正円</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 円を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#8UQowBxrcaE'>正円</a>を描画します。複数の基本要素でスタイルを統一したい場合、<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#8UQowBxrcaE'>正円</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='dUJMfsL520O'></a>14.1.9 macro connect</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>connect</span> from to <span style='color:navy;'>&key</span> style spacing label stroke end1 end2 layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>from</code> ---- 接続元となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>to</code> ---- 接続先となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>style</code> ---- 接続線の引き方を指定します。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>spacing</code> ---- 2 回以上折れ曲がる接続線における「自由な線分」の位置を調整するためのパラメータです。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>label</code> ---- <a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>を付ける場合は指定します。</li>
<li><code>stroke</code> ---- 接続線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>end1,end2</code> ---- 始端・終端に矢印などの<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>を付ける場合は指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　図形要素同士を接続します。スタイルを統一したい場合、<a class='autolink' href='#cUyjBymyiAi'>with-connector-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a></li>
<li><a class='autolink' href='#9MB3lirlqL9'>終端マーク</a></li>
<li><a class='autolink' href='#cUyjBymyiAi'>with-connector-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='992HedzKaJH'></a>14.1.10 function copy-point</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>copy-point</span> pt =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li>pt ---- コピー対象の座標値を指定します。</li>
<li>result ---- コピーされた座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　座標値をコピーします。あまり使いません。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='3B5moS1yMrX'></a>14.1.11 macro cross</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>cross</span> position width height size <span style='color:navy;'>&key</span> pivot size-v intersection fill stroke filter rotate link layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ----  描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ----  幅を数値で指定します。</li>
<li><code>height</code> ----  高さを数値で指定します。</li>
<li><code>size</code> ----  太さを指定します。size-v を指定しない限り、縦横両方の太さになります。</li>
<li><code>pivot</code> ----  基準点が<a class='autolink' href='#4cZRWkwhYNO'>十字</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>size-v</code> ----  縦棒の太さを指定します。省略した場合、size と同じになります。</li>
<li><code>intersection</code> ----  縦横の棒が交差する点を center からどれだけズラすかを <code>'(x y)</code> の要領で指定します。省略すると <code>'(0 0)</code> として扱われます。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ----  外枠を描画する線を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#4cZRWkwhYNO'>十字</a>を描画します。複数の<a class='autolink' href='#4cZRWkwhYNO'>十字</a>でスタイルを統一したい場合、<a class='autolink' href='#hUUF8VmJZqf'>with-cross-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#4cZRWkwhYNO'>十字</a></li>
<li><a class='autolink' href='#hUUF8VmJZqf'>with-cross-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='eBspaEdxwbc'></a>14.1.12 macro cube</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>cube</span> position width height text <span style='color:navy;'>&key</span> pivot depth align valign margin font fill fill2 stroke link rotate layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ----  幅を数値で指定します。</li>
<li><code>height</code> ----  高さを数値で指定します。</li>
<li><code>text</code> ----  内部に描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列で指定します。改行は "~%" で表現します。</li>
<li><code>pivot</code> ----  基準点が<a class='autolink' href='#hja1QJC0Ivb'>キューブ</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>depth</code> ----  上面および側面の大きさを数値で指定します。省略した場合のデフォルト値は height の 1/5 です。</li>
<li><code>align</code> ----  <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の水平方向のアライメントを <code>:left :center :right</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>valign</code> ----  <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の垂直方向のアライメントを <code>:top :center :bottom</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>margin</code> ----  <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>描画における「余白」のサイズです。省略した場合のデフォルト値は 10 です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>fill2</code> ----  上面および側面の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ----  外枠を描画する線を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#hja1QJC0Ivb'>キューブ</a>を描画します。複数の<a class='autolink' href='#hja1QJC0Ivb'>キューブ</a>でスタイルを統一したい場合、<a class='autolink' href='#gj4u2NRMqLq'>with-cube-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#hja1QJC0Ivb'>キューブ</a></li>
<li><a class='autolink' href='#gj4u2NRMqLq'>with-cube-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='0kdw9fTRleF'></a>14.1.13 macro cylinder</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>cylinder</span> position width height text <span style='color:navy;'>&key</span> pivot depth align valign margin font fill stroke link rotate layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ----  幅を数値で指定します。</li>
<li><code>height</code> ----  高さを数値で指定します。</li>
<li><code>text</code> ----  内部に描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列で指定します。改行は "~%" で表現します。</li>
<li><code>pivot</code> ----  基準点が<a class='autolink' href='#5ME1Xv0K4sM'>円柱</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>depth</code> ----  下部の曲線の深さを指定します。省略した場合のデフォルト値は height の 1/5 です。</li>
<li><code>align</code> ----  <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の水平方向のアライメントを <code>:left :center :right</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>valign</code> ----  <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の垂直方向のアライメントを <code>:top :center :bottom</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>margin</code> ----  <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>描画における「余白」のサイズです。省略した場合のデフォルト値は 10 です。</li>
<li><code>font</code> ----  <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ----  内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ----  外枠を描画する線を指定します。</li>
<li><code>link</code> ----  <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ----  <a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#5ME1Xv0K4sM'>円柱</a>を描画します。複数の<a class='autolink' href='#5ME1Xv0K4sM'>円柱</a>でスタイルを統一したい場合、<a class='autolink' href='#0EzzPQAHjpS'>with-cylinder-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#5ME1Xv0K4sM'>円柱</a></li>
<li><a class='autolink' href='#0EzzPQAHjpS'>with-cylinder-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='drHcyK8ztR6'></a>14.1.14 macro defgradient</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>defgradient</span> (type id <span style='color:navy;'>&rest</span> params) <span style='color:navy;'>&rest</span> stops</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>type</code> ---- <a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>の種類を <code>:linear</code> または <code>:radial</code> から選択します。</li>
<li><code>id</code> ---- ID をキーワードで指定します。</li>
<li><code>params</code> ---- <a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>の付加パラメータを指定します。 <code>type</code> により異なるため後述します。</li>
<li><code>stops</code> ---- <a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>ストップをリストで指定します。詳細は <a href='#4p1J7EWjD3m'>10.2  節</a>を参照してください。後述する <code>href</code> パラメータで他の定義を参照する場合は指定する必要はありません。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　与えられたパラメータで<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>を定義します。<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>の詳細は <a href='#4p1J7EWjD3m'>10.2  節</a>を参照してください。説明不足ですが、基本的に SVG 規格に沿っていますので必要に応じて書籍や規格にあたってください。</p>
<p>　<code>params</code> は<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>の種類（linear/radial）によって異なりますが、いずれの場合でも名前付きパラメータとして扱われます。まず、共通のパラメータを以下に示します。</p>
<ul>
<li><code>href</code> ---- 他の<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>定義を参照する場合、その ID をキーワードで指定します。</li>
<li><code>units</code> ---- patternUnits 属性を <code>:userSpaceOnUse</code> または <code>:objectBoundingBox</code> から選択します。</li>
<li><code>spread</code> ---- spreadMethod 属性を指定する場合、 <code>:pad :repeat :reflect</code> から選択します。</li>
<li><code>transform</code> ---- gradientTtransform 属性を指定する場合、文字列で指定します。</li>
</ul>
<p>　　</p>
<p>　線型<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>特有の付加パラメータは以下の通りです。</p>
<ul>
<li><code>x1</code> ---- x1 属性を指定する場合、数値または文字列で指定します。</li>
<li><code>y1</code> ---- y1 属性を指定する場合、数値または文字列で指定します。</li>
<li><code>x2</code> ---- x2 属性を指定する場合、数値または文字列で指定します。</li>
<li><code>y2</code> ---- y2 属性を指定する場合、数値または文字列で指定します。</li>
</ul>
<p>　円形<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>特有の付加パラメータは以下の通りです。</p>
<ul>
<li><code>cx</code> ---- cx 属性を指定する場合、数値または文字列で指定します。</li>
<li><code>cy</code> ---- cy 属性を指定する場合、数値または文字列で指定します。</li>
<li><code>fx</code> ---- fx 属性を指定する場合、数値または文字列で指定します。</li>
<li><code>fy</code> ---- fy 属性を指定する場合、数値または文字列で指定します。</li>
<li><code>radius</code> ---- r 属性を指定する場合、数値または文字列で指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#4p1J7EWjD3m'>10.2  グラデーション</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='5hmH4Z1JfiN'></a>14.1.15 macro defgroup</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>defgroup</span> (width height id) <span style='color:navy;'>&body</span> body</li>
<li class='syntax'><span style='font-weight:bold;'>defs</span> (width height id) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>width</code> ---- 幅を数値で指定します。</li>
<li><code>height</code> ---- 高さを数値で指定します。</li>
<li><code>id</code> ---- 定義に与える ID をキーワードで指定します。</li>
<li><code>body</code> ---- 定義内での描画コードを記述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　幅 <code>width</code> 、高さ <code>height</code> の定義を作成し、内部を <code>body</code> のコードで描画します。作成された定義は <a class='autolink' href='#3ABOLb3a4Yl'>use マクロ</a>で <code>id</code> を指定することで繰り返し利用できます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#hwRhCz9Gn9t'>9  定義と再使用</a></li>
<li><a class='autolink' href='#3ABOLb3a4Yl'>use マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='c7I5kIEPU49'></a>14.1.16 macro defpattern</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>defpattern</span> (id <span style='color:navy;'>&key</span> x y width height href units content-units view-box transform) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>id</code> ---- ID をキーワードで指定します。</li>
<li><code>x</code> ---- x 座標を数値で指定します。SVG の pattern タグにおける x 属性として使用されます。省略した場合のデフォルト値は 0 です。</li>
<li><code>y</code> ---- y 座標を数値で指定します。SVG の pattern タグにおける y 属性として使用されます。省略した場合のデフォルト値は 0 です。</li>
<li><code>width</code> ---- 幅を数値で指定します。</li>
<li><code>height</code> ---- 高さを数値で指定します。</li>
<li><code>href</code> ---- SVG の pattern タグにおける xlink:href 属性として使用されます。</li>
<li><code>units</code> ---- patternUnits 属性を <code>:userSpaceOnUse</code> または <code>:objectBoundingBox</code> から選択します。</li>
<li><code>content-units</code> ---- patternContentUnits 属性を <code>:userSpaceOnUse</code> または <code>:objectBoundingBox</code> から選択します。</li>
<li><code>view-box</code> ---- viewBox 属性を 4 つの数値からなるリストで指定します。</li>
<li><code>transform</code> ---- patternTtransform 属性を指定する場合、文字列で指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　与えられたパラメータで<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>を定義します。<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>の詳細は「<a href='#dmYFJAv81Kl'>10.1  節</a>」を参照してください。説明不足ですが、基本的に SVG 規格に沿っていますので必要に応じて書籍や規格にあたってください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#dmYFJAv81Kl'>10.1  パターン</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　現在、 <code>preserveAspectRatio</code> 属性には対応していません。将来対応する可能性はありますが、未確定です。</p>
<p>　　</p>
<h4><a name='3dkLpAyOj5o'></a>14.1.17 macro diagram</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>diagram</span> (width height <span style='color:navy;'>&key</span> fill) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>width</code> ---- 幅を数値で指定します。</li>
<li><code>height</code> ---- 高さを数値で指定します。</li>
<li><code>fill</code> ---- 背景全体の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>が必要な場合は指定します。</li>
<li><code>body</code> ---- 描画コードを記述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　幅 <code>width</code> 、高さ <code>height</code> の SVG 画像を作成し、内部を <code>body</code> のコードで描画します。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='dhcYablOIIY'></a>14.1.18 macro diamond</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>diamond</span> position width height <span style='color:navy;'>&key</span> pivot fill stroke rotate link layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を数値で指定します。</li>
<li><code>height</code> ---- 高さを数値で指定します。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#4dFMjynUMYw'>ひし形</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#4dFMjynUMYw'>ひし形</a>を描画します。複数の基本要素でスタイルを統一したい場合、<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#4dFMjynUMYw'>ひし形</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='8otKibFY5LC'></a>14.1.19 macro document</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>document</span> position width height text <span style='color:navy;'>&key</span> pivot depth align valign margin font fill stroke link rotate layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を数値で指定します。</li>
<li><code>height</code> ---- 高さを数値で指定します。</li>
<li><code>text</code> ---- 内部に描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列で指定します。改行は "~%" で表現します。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>depth</code> ---- 下部の曲線の深さを指定します。省略した場合のデフォルト値は height の 1/3 です。</li>
<li><code>align</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の水平方向のアライメントを <code>:left :center :right</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>valign</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の垂直方向のアライメントを <code>:top :center :bottom</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>描画における「余白」のサイズです。省略した場合のデフォルト値は 10 です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>を描画します。複数の<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>でスタイルを統一したい場合、<a class='autolink' href='#7UW0pe7NluY'>with-document-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#jRjILbbJATV'>ドキュメント</a></li>
<li><a class='autolink' href='#7UW0pe7NluY'>with-document-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='4L4hGTnCpBr'></a>14.1.20 macro drop-shadow</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>drop-shadow</span> <span style='color:navy;'>&key</span> id color-matrix deviation dx dy</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>id</code> ---- ID をキーワードで指定します。省略した場合のデフォルト値は <code>:drop-shadow</code> です。</li>
<li><code>color-matrix</code> ---- <code>&lt;feColorMatrix&gt;</code> の values 値を数値のリストで指定します。詳細は SVG 規格を参照してください。省略した場合のデフォルト値は <code>'(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0)</code> です。</li>
<li><code>deviation</code> ---- <code>&lt;feGaussianBlur&gt;</code> における <code>stdDeviation</code> 値を指定します。詳細は SVG 規格を参照してください。省略した場合のデフォルト値は 2 です。</li>
<li><code>dx</code> ---- <code>&lt;feOffset&gt;</code> における <code>dx</code> 値を指定します。詳細は SVG 規格を参照してください。省略した場合のデフォルト値は 4 です。</li>
<li><code>dy</code> ---- <code>&lt;feOffset&gt;</code> における <code>dy</code> 値を指定します。詳細は SVG 規格を参照してください。省略した場合のデフォルト値は 4 です。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　生成画像にドロップシャドウを導入します。詳細は SVG 規格を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#gPGlqSbIfdL'>12.7  フィルタ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='hsg6m1zvfoj'></a>14.1.21 macro ellipse</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>ellipse</span> position rx ry <span style='color:navy;'>&key</span> pivot fill stroke rotate link layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>rx</code> ---- x 軸方向の半径を数値で指定します。</li>
<li><code>ry</code> ---- y 軸方向の半径を数値で指定します。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- <a class='autolink' href='#7YzIcjhyGKN'>楕円</a>を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#7YzIcjhyGKN'>楕円</a>を描画します。複数の基本要素でスタイルを統一したい場合、<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#7YzIcjhyGKN'>楕円</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='b1mSpvnCg7y'></a>14.1.22 macro explosion1</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>explosion1</span> position width height text <span style='color:navy;'>&key</span> pivot font fill stroke link rotate layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ----  描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ----  幅を数値で指定します。</li>
<li><code>height</code> ----  高さを数値で指定します。</li>
<li><code>text</code> ----  内部に描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列で指定します。改行は "~%" で表現します。</li>
<li><code>pivot</code> ----  基準点が<a class='autolink' href='#hjZ26isLw42'>爆発</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ----  外枠を描画する線を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#hjZ26isLw42'>爆発</a>を描画します。複数の<a class='autolink' href='#hjZ26isLw42'>爆発</a>でスタイルを統一したい場合、<a class='autolink' href='#2N1LVsx5TAj'>with-explosion-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#hjZ26isLw42'>爆発</a></li>
<li><a class='autolink' href='#gIBWNJYTozi'>explosion2 マクロ</a></li>
<li><a class='autolink' href='#2N1LVsx5TAj'>with-explosion-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='gIBWNJYTozi'></a>14.1.23 macro explosion2</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>explosion2</span> position width height text <span style='color:navy;'>&key</span> pivot font fill stroke link rotate layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ----  描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ----  幅を数値で指定します。</li>
<li><code>height</code> ----  高さを数値で指定します。</li>
<li><code>text</code> ----  内部に描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列で指定します。改行は "~%" で表現します。</li>
<li><code>pivot</code> ----  基準点が<a class='autolink' href='#hjZ26isLw42'>爆発</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ----  外枠を描画する線を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#hjZ26isLw42'>爆発</a>を描画します。複数の<a class='autolink' href='#hjZ26isLw42'>爆発</a>でスタイルを統一したい場合、<a class='autolink' href='#2N1LVsx5TAj'>with-explosion-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#hjZ26isLw42'>爆発</a></li>
<li><a class='autolink' href='#b1mSpvnCg7y'>explosion1 マクロ</a></li>
<li><a class='autolink' href='#2N1LVsx5TAj'>with-explosion-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='jYqT4ybxQgU'></a>14.1.24 macro folder</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>folder</span> position text <span style='color:navy;'>&key</span> pivot width height tab-width tab-height align valign font fill stroke margin link rotate layer filter id contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>text</code> ---- 内部に描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列で指定します。改行は "~%" で表現します。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#5ZT843xJDiq'>フォルダ</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>tab-width</code> ---- 左上に描画されるタブ部分の幅を指定します。省略した場合のデフォルト値は 50 です。</li>
<li><code>tab-height</code> ---- 左上に描画されるタブ部分の高さを指定します。省略した場合のデフォルト値は 20 です。</li>
<li><code>align</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の水平方向のアライメントを <code>:left :center :right</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>valign</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の垂直方向のアライメントを <code>:top :center :bottom</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>描画における「余白」のサイズです。省略した場合のデフォルト値は 10 です。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#5ZT843xJDiq'>フォルダ</a>を描画します。複数の<a class='autolink' href='#5ZT843xJDiq'>フォルダ</a>でスタイルを統一したい場合、<a class='autolink' href='#hbg0Di1qYwi'>with-folder-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#5ZT843xJDiq'>フォルダ</a></li>
<li><a class='autolink' href='#hbg0Di1qYwi'>with-folder-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='9Uh7JdQfISi'></a>14.1.25 macro glow-shadow</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>glow-shadow</span> <span style='color:navy;'>&key</span> id color-matrix deviation</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>id</code> ---- ID をキーワードで指定します。省略した場合のデフォルト値は <code>:glow-shadow</code> です。</li>
<li><code>color-matrix</code> ---- <code>&lt;feColorMatrix&gt;</code> の values 値を数値のリストで指定します。詳細は SVG 規格を参照してください。省略した場合のデフォルト値は <code>'(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0)</code> です。</li>
<li><code>deviation</code> ---- <code>&lt;feGaussianBlur&gt;</code> における <code>stdDeviation</code> 値を指定します。詳細は SVG 規格を参照してください。省略した場合のデフォルト値は 3 です。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　生成画像にグローシャドウを導入します。詳細は SVG 規格を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#gPGlqSbIfdL'>12.7  フィルタ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='2MPHhIhTRRr'></a>14.1.26 macro grid</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>grid</span> <span style='color:navy;'>&key</span> (size 10) (bgcolor :white) stroke layer</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>size</code> ---- 挿入する SVG コード片を文字列で指定します。</li>
<li><code>bgcolor</code> ---- 背景の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ----  グリッド線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　グリッド線を描画します。現状では常に SVG 画像全体を埋める矩形の<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>となります。（<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>など）特定の領域だけにグリッド線を描画することはできません。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='8X1qKGWyF0t'></a>14.1.27 macro image</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>image</span> position filename <span style='color:navy;'>&key</span> pivot width height label link rotate layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>filename</code> ---- 埋め込む画像のファイル名を指定します。</li>
<li><code>pivot</code> ---- 基準点が画像のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>label</code> ---- <a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>を付ける場合は指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　SVG 図面の中にラスタ画像を埋め込みます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#kSyxpJZzQjY'>画像ファイルの埋め込み</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　ほとんどの場合、kaavio は画像ファイルの実際のサイズを調べる必要があります。そのため、<code>filename</code> で指定した画像ファイルは kaavio が動作する時点で「その場所に」存在していなければなりません。例外は、 <code>width</code> および <code>height</code> パラメータの両方を明示的に指定した場合で、その場合に限り kaavio は画像ファイルにアクセスしません。</p>
<p>　　</p>
<h4><a name='5Ymxg2NeQNs'></a>14.1.28 function layer</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>layer</span> name <span style='color:navy;'>&optional</span> (display :inline)</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>name</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>の名前をキーワードで指定します。</li>
<li><code>display</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>全体の表示を <code>:inline</code> または <code>:none</code> で指定します。省略時のデフォルトは <code>:inline</code> で、<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>全体を表示します。 <code>:none</code> を指定すると、<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>全体を非表示にします。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>の導入を宣言します。<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>については <a href='#1ovJxG7Ie9O'>12.8  節</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#1ovJxG7Ie9O'>12.8  レイヤー</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　<a class='autolink' href='#5Ymxg2NeQNs'>layer 関数</a>は、実際には <a class='autolink' href='#3dkLpAyOj5o'>diagram マクロ</a>内で作成される局所関数です。</p>
<p>　　</p>
<h4><a name='doyrJWCDQyn'></a>14.1.29 macro line</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>line</span> points <span style='color:navy;'>&key</span> stroke label end1 end2 layer id filter</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>points</code> ---- 線を構成する点のリストを指定します。</li>
<li><code>stroke</code> ---- 線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>label</code> ---- <a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>をつける場合に指定します。</li>
<li><code>end1</code> ---- 始端に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>をつける場合は指定します</li>
<li><code>end2</code> ---- 終端に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>をつける場合は指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>points</code> で指定された点を順番に通過する<a class='autolink' href='#fv4OUML78x4'>直線</a>を描画します。 <code>points</code> で指定する点のリストは最低限でも２要素以上である必要があり、始点 [通過点]... 終点の要領で指定します。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='793zIcGmzV1'></a>14.1.30 function make-endmark</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-endmark</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータで<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>情報を生成します。<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>情報の詳細は「<a href='#9MB3lirlqL9'>12.10  終端マーク</a>」を参照してください。上記は簡潔な記述で柔軟な<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 0 の場合
<ul>
<li>nil を返します</li>
</ul>
</li>
<li>パラメータ数が 1 の場合
<ul>
<li><a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>情報が渡された場合、それをそのまま返します</li>
<li>数値 N が渡された場合、 <code>(make-endmark :size N)</code> を返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-endmark lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-endmark :type prm)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#793zIcGmzV1'>make-endmark 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-endmark</span> <span style='color:navy;'>&key</span> type size stroke fill</li>
</ul>
<p>　各パラメータの意味は以下の通りです。詳細は「<a href='#9MB3lirlqL9'>12.10  終端マーク</a>」を参照してください。</p>
<ul>
<li><code>type</code> ---- <a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>の形状を指定します。 <code>:arrow :triangle :diamond :circle :rect</code> のいずれか、またはカスタム描画関数を指定します。</li>
<li><code>size</code> ---- <a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>のサイズを指定します。 <code>:small :medium :large :xlarge</code> のいずれか、または数値を指定します。ここで、 <code>:small</code> は <code>10.0</code> 、 <code>:medium</code> は <code>15.0</code> 、 <code>:large</code> は <code>20.0</code> 、 <code>:xlarge</code> は <code>30.0</code> にそれぞれ相当します。</li>
<li><code>stroke</code> ---- <a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。省略した場合、実際に<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>が描画される対象（<a class='autolink' href='#fv4OUML78x4'>直線</a>や<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>）の<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>が使用されます。ただしその場合、その<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>の <code>:dasharray</code> など一部のパラメータは引き継がれません。</li>
<li><code>fill</code> ---- <a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。省略した場合、<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>と同じ色で塗り潰されます。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#9MB3lirlqL9'>12.10  終端マーク</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　<code>type</code> パラメータでキーワードのかわりに指定するカスタム描画関数ですが、以下のシグネチャの関数を指定する必要があります。これは現状では暫定的で undocumented な状態です。詳細はコードを参照してください。</p>
<pre class='code'>
(<span class='keyword1'>lambda</span> (points size stroke fill writer) ...)
</pre>
<p>　　</p>
<h4><a name='8VjSwPlDaAr'></a>14.1.31 function make-fill</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-fill</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータで<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>情報を生成します。<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>情報の詳細は「<a href='#dBUd7L4C3dx'>12.3  フィル</a>」を参照してください。上記は簡潔な記述で柔軟な<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 0 の場合
<ul>
<li>デフォルトの<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>情報を返します</li>
</ul>
</li>
<li>パラメータ数が 1 の場合
<ul>
<li><a class='autolink' href='#dBUd7L4C3dx'>フィル</a>情報が渡された場合、それをそのまま返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-fill lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-fill :color prm)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#8VjSwPlDaAr'>make-fill 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-fill</span> <span style='color:navy;'>&key</span> color opacity rule url base</li>
</ul>
<p>　各パラメータの意味は以下の通りです。詳細は <a href='#dBUd7L4C3dx'>12.3  節</a>を参照してください。</p>
<ul>
<li><code>color</code> ---- <a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>の色を指定します。<a class='autolink' href='#1rpUB3fre67'>色の指定</a>方法については <a href='#1rpUB3fre67'>12.1  節</a>を、色の名前については <a href='#dR01Jh257Q6'>14.2  節</a>を参照してください。</li>
<li><code>opacity</code> ---- <a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>の不透明度を 0.0 ～ 1.0 の数値で指定します。省略した場合のデフォルト値は 1.0 です。</li>
<li><code>rule</code> ---- 塗りつぶしのルールを <code>:nonzero</code> または <code>:evenodd</code> で指定します。</li>
<li><code>url</code> ---- <a class='autolink' href='#dmYFJAv81Kl'>パターン</a>や<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>を使用する場合、その ID をキーワードシンボルで指定します。詳細は <a href='#7K8A5tBrYlW'>12.3.3  節</a>を参照してください。</li>
<li><code>base</code> ---- <a class='autolink' href='#dBUd7L4C3dx'>フィル</a>情報の作成においてベースとする他の<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>情報があれば指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#dBUd7L4C3dx'>12.3  フィル</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='1LiwgKPPHPV'></a>14.1.32 function make-font</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-font</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータで<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報を生成します。<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報の詳細は「<a href='#3kZ9FkounyK'>12.4  フォント</a>」を参照してください。上記は簡潔な記述で柔軟な<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 0 の場合
<ul>
<li>デフォルトの<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報を返します</li>
</ul>
</li>
<li>パラメータ数が 1 の場合
<ul>
<li><a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報が渡された場合、それをそのまま返します</li>
<li>数値 N が渡された場合、 <code>(make-font :size N)</code> を返します</li>
<li>キーワードシンボル CLR が渡された場合、 <code>(make-font :fill CLR)</code> を返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-font lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-font :family prm)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#1LiwgKPPHPV'>make-font 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-font</span> <span style='color:navy;'>&key</span> family size fill stroke style decoration weight filter line-spacing width-spice base</li>
</ul>
<p>　各パラメータの意味は以下の通りです。詳細は <a href='#3kZ9FkounyK'>12.4  節</a>を参照してください。</p>
<ul>
<li><code>family</code> ---- 使用する<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の名前をカンマで区切って並べた文字列を指定します。</li>
<li><code>size</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>サイズを数値で指定します。</li>
<li><code>fill</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>の輪郭を描く<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。通常、<a class='autolink' href='#3kZ9FkounyK'>フォント</a>では輪郭線は指定しません。</li>
<li><code>style</code> ---- スタイルを <code>:normal, :italic, :oblique</code> のいずれかから指定します。</li>
<li><code>decoration</code> ---- 装飾を <code>:none, :underline, :overline, :line-through</code> のいずれかから指定します。</li>
<li><code>weight</code> ---- 文字の太さを <code>:normal, :bold, :bolder, :lighter</code> のいずれか、または 100 200 300 400 500 600 700 800 900 のいずれかから指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>line-spacing</code> ---- <a class='autolink' href='#4WyMTv59pvw'>パラグラフ</a>などで複数行の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を描画する際の行間を数値で指定します。</li>
<li><code>width-spice</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>サイズと<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>内容から描画幅を計算する際の係数を数値で指定します。</li>
<li><code>base</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報の作成においてベースとする他の<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報があれば指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#3kZ9FkounyK'>12.4  フォント</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='fduKuW1erVu'></a>14.1.33 function make-id</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-id</span> prefix <span style='color:navy;'>&rest</span> args =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>prerix</code> ---- 文字列またはシンボルを指定します。</li>
<li><code>args</code> ---- 任意の数の文字列またはシンボルを指定します。</li>
<li><code>result</code> ---- 結果がキーワードシンボルで返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>prefix</code> および追加の <code>args</code> を連結した ID を生成し、キーワードシンボルのかたちで返します。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='39Bn4oB2Anb'></a>14.1.34 function make-label</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-label</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータで<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>情報を生成します。<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>情報の詳細は「<a href='#lpCVEZ9kMoP'>12.11  ラベル</a>」を参照してください。上記は簡潔な記述で柔軟な<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 0 の場合
<ul>
<li>nil を返します</li>
</ul>
</li>
<li>パラメータ数が 1 の場合
<ul>
<li><a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>情報が渡された場合、それをそのまま返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-label lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-label prm :offset nil)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#39Bn4oB2Anb'>make-label 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-label</span> text <span style='color:navy;'>&key</span> position offset font</li>
</ul>
<p>　各パラメータの意味は以下の通りです。詳細は「<a href='#lpCVEZ9kMoP'>12.11  ラベル</a>」を参照してください。</p>
<ul>
<li><code>text</code> ---- <a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列かキーワードシンボルで指定します。</li>
<li><code>position</code> ---- <a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>を表示する位置を <code>:above :below :left :right</code> のいずれかで指定します。<a class='autolink' href='#fv4OUML78x4'>直線</a>や<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>では無視されます。</li>
<li><code>offset</code> ---- <a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の表示位置を微調整する <code>(x y)</code> 値を指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の描画に使用する<a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#lpCVEZ9kMoP'>12.11  ラベル</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='kHFmcjbmpJJ'></a>14.1.35 function make-link</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-link</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータで<a class='autolink' href='#fbLcMRTVXac'>リンク</a>情報を生成します。<a class='autolink' href='#fbLcMRTVXac'>リンク</a>情報の詳細は「<a href='#fbLcMRTVXac'>12.9  リンク</a>」を参照してください。上記は簡潔な記述で柔軟な<a class='autolink' href='#fbLcMRTVXac'>リンク</a>情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 0 の場合
<ul>
<li>nil を返します</li>
</ul>
</li>
<li>パラメータ数が 1 の場合
<ul>
<li><a class='autolink' href='#fbLcMRTVXac'>リンク</a>情報が渡された場合、それをそのまま返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-link lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-link :url prm)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#kHFmcjbmpJJ'>make-link 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-link</span> <span style='color:navy;'>&key</span> url target</li>
</ul>
<p>　各パラメータの意味は以下の通りです。詳細は「<a href='#fbLcMRTVXac'>12.9  リンク</a>」を参照してください。</p>
<ul>
<li><code>url</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>先の URL を文字列で指定します。  |</li>
<li><code>target</code> ---- <code>a</code> タグにおける <code>target</code> をキーワード <code>:replace :self :parent :top :blank</code> のいずれかで指定します。省略可能です。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#fbLcMRTVXac'>12.9  リンク</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='2S1kQeXPgCc'></a>14.1.36 function make-point</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-point</span> x y <span style='color:navy;'>&optional</span> type =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>x</code> ---- x 座標を数値で指定します。</li>
<li><code>y</code> ---- y 座標を数値で指定します。</li>
<li><code>type</code> ---- <code>:relative</code> または <code>:absolute</code> を指定します。省略した場合のデフォルト値は <code>:relative</code> です。</li>
<li><code>result</code> ---- 座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　座標値を生成します。 <code>type</code> に <code>absolute</code> を指定すると絶対座標に、それ以外の場合は相対座標になります。絶対座標は画像全体を<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>としてその左上を <code>'(0 0)</code> とする座標で、相対座標は「現在の<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>」をの左上を <code>'(0 0)</code> とする座標です。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#h1RNMQY1C0b'>6  座標と位置</a></li>
<li><a href='#kgs1vf3AbTN'>7  サブキャンバス</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='erFvEPTJvvx'></a>14.1.37 function make-stroke</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-stroke</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータで<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>情報を生成します。<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>情報の詳細は「<a href='#4HFjqmTuIU6'>12.2  ストローク</a>」を参照してください。上記は簡潔な記述で柔軟な<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 0 の場合
<ul>
<li>デフォルトの<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>情報を返します</li>
</ul>
</li>
<li>パラメータ数が 1 の場合
<ul>
<li><a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>情報が渡された場合、それをそのまま返します</li>
<li>数値 N が渡された場合、 <code>(make-stroke :width N)</code> を返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-stroke lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-stroke :color prm)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#erFvEPTJvvx'>make-stroke 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-stroke</span> <span style='color:navy;'>&key</span> color width opacity linecap linejoin miterlimit dasharray dashoffset url base</li>
</ul>
<p>　各パラメータの意味は以下の通りです。詳細は <a href='#4HFjqmTuIU6'>12.2  節</a>を参照してください。</p>
<ul>
<li><code>color</code> ---- 線の色を指定します。<a class='autolink' href='#1rpUB3fre67'>色の指定</a>方法については <a href='#1rpUB3fre67'>12.1  節</a>を、色の名前については <a href='#dR01Jh257Q6'>14.2  節</a>を参照してください。</li>
<li><code>width</code> ---- 線の幅を数値で指定します。</li>
<li><code>opacity</code> ---- 線の不透明度を 0.0 ～ 1.0 の数値で指定します。省略した場合のデフォルト値は 1.0 です。</li>
<li><code>linecap</code> ---- 線の両端の形状を <code>:butt, :round, :square</code> から指定します。</li>
<li><code>linejoin</code> ---- 線が折れ曲ってできる角の形状を <code>:miter, :round, :bevel</code> から指定します。</li>
<li><code>miterlimit</code> ---- <code>linejoin</code> が <code>:miter</code> の場合の、結合される線の太さに対する結合部の長さの比率を数値で指定します。デフォルト値は 4 です。</li>
<li><code>dasharray</code> ---- 点線や破線を描画したい場合に、繰り返される線の長さと間隔の長さをリストで指定します。デフォルト値は nil で、<a class='autolink' href='#fv4OUML78x4'>直線</a>になります。</li>
<li><code>dashoffset</code> ---- <code>dasharray</code> を指定する場合に、線の開始を <code>dasharray</code> のどこから始めるかのオフセットを数値で指定します。</li>
<li><code>url</code> ---- <a class='autolink' href='#dmYFJAv81Kl'>パターン</a>や<a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a>を使用する場合、その ID をキーワードシンボルで指定します。詳細は <a href='#cPNmZfLmh3t'>12.2.5  節</a>を参照してください。</li>
<li><code>base</code> ---- <a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>情報の作成においてベースとする他の<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>情報があれば指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#4HFjqmTuIU6'>12.2  ストローク</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='cOZubN9xlDA'></a>14.1.38 function make-uml-class-attribute</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-class-attribute</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータでクラス属性情報を生成します。上記は簡潔な記述で柔軟なクラス属性情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 1 の場合
<ul>
<li><code>:&lt;&lt;STEREOTYPE&gt;&gt;</code>  形式のキーワードシンボルがの場合、ステレオタイプ情報を作成して返します</li>
<li>キーワードシンボル <code>:etc</code> の場合、文字列 <code>...</code> を表示する省略情報を作成して返します</li>
<li>上記のいずれでもないキーワードシンボルまたは文字列 <code>param</code> の場合、 <code>(make-uml-class-attribute :none param)</code> を返します</li>
<li>クラス属性情報オブジェクト <code>obj</code> の場合、それをそのまま返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-uml-class-attribute lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-uml-class-attribute :none param)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#cOZubN9xlDA'>make-uml-class-attribute 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-class-attribute</span> visibility name <span style='color:navy;'>&key</span> type multiplicity default property scope</li>
</ul>
<p>　各パラメータの意味は以下の通りです。</p>
<ul>
<li><code>visibility</code> ---- 可視性を <code>:none :public :private :protected :package :derived</code> のいずれかで指定します。</li>
<li><code>name</code> ---- 属性の名称を文字列またはキーワードシンボルで指定します。</li>
<li><code>type</code> ---- 型を文字列またはキーワードシンボルで指定します。</li>
<li><code>multiplicity</code> ---- 多重度を整数値または文字列で指定します。</li>
<li><code>default</code> ---- 属性のデフォルト値を数値、文字列またはキーワードシンボルで指定します。</li>
<li><code>property</code> ---- 属性のプロパティ値を文字列またはキーワードシンボルで指定します。</li>
<li><code>scope</code> ---- 属性のスコープを <code>:instance :class</code> のいずれかで指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#0h6fmJhiwsl'>make-uml-class-operation 関数</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　通常、この関数を明示的に使用する必要はありません。 <code>uml-class</code> マクロの <code>:attributes</code> に指定されたリストの要素は内部でこの関数に渡されるため、 <code>'(:private "m_data" :type :string)</code> などといった記述でクラス属性情報を指定できます。</p>
<p>　　</p>
<h4><a name='0h6fmJhiwsl'></a>14.1.39 function make-uml-class-operation</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-class-operation</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータでクラス操作情報を生成します。上記は簡潔な記述で柔軟なクラス操作情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 1 の場合
<ul>
<li><code>:&lt;&lt;STEREOTYPE&gt;&gt;</code>  形式のキーワードシンボルがの場合、ステレオタイプ情報を作成して返します</li>
<li>キーワードシンボル <code>:etc</code> の場合、文字列 <code>...</code> を表示する省略情報を作成して返します</li>
<li>上記のいずれでもないキーワードシンボルまたは文字列 <code>param</code> の場合、 <code>(make-uml-class-operation :none param)</code> を返します</li>
<li>クラス操作情報オブジェクト <code>obj</code> の場合、それをそのまま返します</li>
<li>リスト <code>lst</code> が渡された場合、 <code>(apply #'make-uml-class-operation lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-uml-class-operation :none param)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#0h6fmJhiwsl'>make-uml-class-operation 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-class-operation</span> visibility name <span style='color:navy;'>&key</span> abstract parameters type property scope</li>
</ul>
<p>　各パラメータの意味は以下の通りです。</p>
<ul>
<li><code>visibility</code> ---- 可視性を <code>:none :public :private :protected :package</code> のいずれかで指定します。</li>
<li><code>name</code> ---- 操作の名称を文字列またはキーワードシンボルで指定します。</li>
<li><code>abstract</code> ---- 抽象操作か否かを真偽値で指定します。 <code>:scope</code> が <code>:class</code> の場合に真を指定するとエラーになります。</li>
<li><code>parameters</code> ---- パラメータ情報をリストで指定します。このリストの各要素は <code>make-uml-class-operation-param</code> 関数に渡されます。詳細は <a href='#9ACetVBVOg5'>14.1.40  節</a> を参照してください。</li>
<li><code>type</code> ---- 型を文字列またはキーワードシンボルで指定します。</li>
<li><code>property</code> ---- 操作のプロパティ値を文字列またはキーワードシンボルで指定します。</li>
<li><code>scope</code> ---- 操作のスコープを <code>:instance :class</code> のいずれかで指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#9ACetVBVOg5'>make-uml-class-operation-param 関数</a></li>
<li><a class='autolink' href='#cOZubN9xlDA'>make-uml-class-attribute 関数</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　通常、この関数を明示的に使用する必要はありません。 <code>uml-class</code> マクロの <code>:operations</code> に指定されたリストの要素は内部でこの関数に渡されるため、 <code>'(:public "DoSomething" :type :integer)</code> などといった記述でクラス操作情報を指定できます。</p>
<p>　　</p>
<h4><a name='9ACetVBVOg5'></a>14.1.40 function make-uml-class-operation-param</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-class-operation-param</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータでクラス操作パラメータ情報を生成します。上記は簡潔な記述で柔軟なクラス操作パラメータ情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 1 の場合
<ul>
<li>キーワードシンボル <code>:etc</code> の場合、文字列 <code>...</code> を表示する省略情報を作成して返します</li>
<li>上記に該当しないキーワードシンボルまたは文字列 <code>param</code> の場合、 <code>param</code> を名前とするクラス操作パラメータ情報を作成して返します</li>
<li>クラス操作パラメータ情報オブジェクト <code>obj</code> の場合、それをそのまま返します</li>
<li>リスト <code>lst</code> が渡された場合、 <code>(apply #'make-uml-class-operation-param lst)</code> を返します</li>
<li>上記のいずれでもない <code>prm</code> の場合、 <code>prm</code> を名前とするクラス操作パラメータ情報を作成して返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#9ACetVBVOg5'>make-uml-class-operation-param 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-class-operation-param</span> name <span style='color:navy;'>&key</span> io type default</li>
</ul>
<p>　各パラメータの意味は以下の通りです。</p>
<ul>
<li><code>name</code> ---- 操作パラメータの名称を文字列またはキーワードシンボルで指定します。</li>
<li><code>io</code> ---- 入出力に関する指定を <code>:in :out :inout</code> のいずれかで 指定します。省略可能です。</li>
<li><code>type</code> ---- 型を文字列またはキーワードシンボルで指定します。</li>
<li><code>default</code> ---- パラメータのデフォルト値を数値、文字列またはキーワードシンボルで指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#0h6fmJhiwsl'>make-uml-class-operation 関数</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='ci5LvS1eCsb'></a>14.1.41 function make-uml-flow-spec</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-flow-spec</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータでフロー仕様情報を生成します。上記は簡潔な記述で柔軟なフロー仕様情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 1 の場合
<ul>
<li>フロー仕様情報が渡された場合、それをそのまま返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-uml-flow-spec lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-uml-flow-spec :guard prm)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#ci5LvS1eCsb'>make-uml-flow-spec 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-flow-spec</span> <span style='color:navy;'>&key</span> guard action offset font</li>
</ul>
<p>　各パラメータの意味は以下の通りです。</p>
<ul>
<li><code>guard</code> ---- ガード条件をキーワードシンボルまたは文字列で指定します。</li>
<li><code>action</code> ---- 実行アクションをキーワードシンボルまたは文字列で指定します。</li>
<li><code>offset</code> ---- 描画位置調整に使うオフセット情報を座標値で指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#jG6cW6e7gyu'>uml-flow-spec</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　通常、この関数を明示的に使用する必要はありません。<a class='autolink' href='#9i3KzQ9ScEv'>uml-flow マクロ</a>の <code>:spec</code> に指定されたパラメータは内部でこの関数に渡されるため、 <code>:spec '(:guard :when-idle :action :"OnIdle()"</code> といった記述でフロー仕様情報を指定できます。</p>
<p>　　</p>
<h4><a name='1ZEGenUynXh'></a>14.1.42 function make-uml-icon-setting</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-icon-setting</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータでアイコン設定情報を生成します。上記は簡潔な記述で柔軟なアイコン設定情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 1 の場合
<ul>
<li>アイコン設定情報が渡された場合、それをそのまま返します</li>
<li>数値 N が渡された場合、 <code>(make-uml-icon-setting :size N)</code> を返します</li>
<li>キーワードシンボル kwd が渡された場合、 <code>(make-uml-icon-setting :pivot kwd)</code> を返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-uml-icon-setting lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-uml-icon-setting :size prm)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#1ZEGenUynXh'>make-uml-icon-setting 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-icon-setting</span> <span style='color:navy;'>&key</span> fill stroke size pivot offset base</li>
</ul>
<p>　各パラメータの意味は以下の通りです。</p>
<ul>
<li><code>fill</code> ---- アイコン内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- アイコンの線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>size</code> ---- アイコンのサイズを数値で指定します。デフォルト値は 14 です。</li>
<li><code>pivot</code> ---- アイコンの描画位置を <code>:TL :TC :TR :CL :CC :CR :BL :BC :BR</code> のいずれかで指定します。デフォルト値は <code>:TR</code> です。</li>
<li><code>offset</code> ---- アイコンの描画位置調整に使うオフセット情報を座標値で指定します。デフォルト値は <code>pivot</code> によって変化します。</li>
<li><code>base</code> ---- アイコン設定情報の作成においてベースとする他のアイコン設定情報があれば指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#dlZiBdOIRvM'>uml-icon-setting</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　通常、この関数を明示的に使用する必要はありません。各種マクロの <code>:icon</code> などに指定されたパラメータは内部でこの関数に渡されるため、 <code>:icon '(:fill :cyan :stroke :blue)</code> といった記述でアイコン設定情報を指定できます。</p>
<p>　　</p>
<h4><a name='8qfGG61let2'></a>14.1.43 function make-uml-multiplicity</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-multiplicity</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータで多重度情報を生成します。上記は簡潔な記述で柔軟な多重度情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 1 の場合
<ul>
<li>ドットリストを使った多重度指定（ car / cdr それぞれが <code>:*</code> または整数値） <code>cons</code> の場合、 <code>(make-uml-multiplicity :min (car param) :max (cdr param))</code> を返します。</li>
<li>多重度情報が渡された場合、それをそのまま返します。</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-uml-multiplicity lst)</code> を返します。</li>
<li>上記のいずれでもない prm の場合、 <code>(make-uml-multiplicity :min prm :max prm)</code> を返します。</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します。</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#8qfGG61let2'>make-uml-multiplicity 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-multiplicity</span> <span style='color:navy;'>&key</span> min max offset font</li>
</ul>
<p>　各パラメータの意味は以下の通りです。</p>
<ul>
<li><code>min</code> ---- 多重度の最小値を指定します。整数または <code>:*</code> です。</li>
<li><code>max</code> ---- 多重度の最大値を指定します。整数または <code>:*</code> です。</li>
<li><code>offset</code> ---- 描画位置調整のためのオフセット情報を <code>(x y)</code> 形式で指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#g6kEHGpHjhy'>uml-multiplicity-info</a></li>
<li><a href='#881rvOpGoim'>uml-aggregation</a></li>
<li><a href='#0A70k6t8D8T'>uml-association</a></li>
<li><a href='#jswiRdMw2Be'>uml-composition</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　通常、この関数を明示的に使用する必要はありません。uml-assciation マクロの <code>:mult1</code> などに指定されたパラメータは内部でこの関数に渡されるため、 <code>:mult1 1</code> や <code>:mult1 '(0 . 5)</code> 、あるいは <code>:mult1 '(:min 5 :max 100 :offset (-5 3))</code> といった記述で多重度情報を指定できます。</p>
<p>　　</p>
<h4><a name='iC62f7YUIgx'></a>14.1.44 function make-uml-role</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-role</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータでロール情報を生成します。上記は簡潔な記述で柔軟なロール情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 1 の場合
<ul>
<li>ロール情報が渡された場合、それをそのまま返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-uml-role lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-uml-role prm :offset '(0 0))</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#iC62f7YUIgx'>make-uml-role 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-role</span> name <span style='color:navy;'>&key</span> offset font</li>
</ul>
<p>　各パラメータの意味は以下の通りです。</p>
<ul>
<li><code>name</code> ---- ロールの名前をキーワードシンボルまたは文字列で指定します。</li>
<li><code>offset</code> ---- 描画位置調整のためのオフセット情報を <code>(x y)</code> 形式で指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#9ugZNtgVL4J'>uml-role-info</a></li>
<li><a href='#881rvOpGoim'>uml-aggregation</a></li>
<li><a href='#0A70k6t8D8T'>uml-association</a></li>
<li><a href='#jswiRdMw2Be'>uml-composition</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　通常、この関数を明示的に使用する必要はありません。uml-assciation マクロの <code>:role1</code> などに指定されたパラメータは内部でこの関数に渡されるため、 <code>:role1 "target"</code> あるいは <code>:role1 '("target" :offset (-5 3))</code> といった記述でロール情報を指定できます。</p>
<p>　　</p>
<h4><a name='gso7yLILXT1'></a>14.1.45 function make-uml-stereotype</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-stereotype</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータでステレオタイプ情報を生成します。上記は簡潔な記述で柔軟なステレオタイプ情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 1 の場合
<ul>
<li>ステレオタイプ情報が渡された場合、それをそのまま返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-uml-stereotype lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-uml-stereotype prm :font nil)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#gso7yLILXT1'>make-uml-stereotype 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-stereotype</span> name <span style='color:navy;'>&key</span> font</li>
</ul>
<p>　各パラメータの意味は以下の通りです。</p>
<ul>
<li><code>name</code> ---- ステレオタイプの名前をキーワードシンボルまたは文字列で指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#dd6qYwERoK0'>uml-stereotype-info</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　通常、この関数を明示的に使用する必要はありません。各種マクロの <code>:stereotype</code> などに指定されたパラメータは内部でこの関数に渡されるため、 <code>:stereotype "concurrent"</code> あるいは <code>:stereotype '("concurrent" :font 9)</code> といった記述でステレオタイプ情報を指定できます。</p>
<p>　　</p>
<h4><a name='4T0ZbrMPDuy'></a>14.1.46 function make-uml-transition-spec</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-transition-spec</span> <span style='color:navy;'>&rest</span> params</li>
</ul>
<p><strong>Description:</strong></p>
<p>　指定されたパラメータで遷移仕様情報を生成します。上記は簡潔な記述で柔軟な遷移仕様情報の生成を可能にするためのもので、 <code>params</code> として渡されるパラメータ数に応じて以下のことをします。</p>
<ul>
<li>パラメータ数が 1 の場合
<ul>
<li>遷移仕様情報が渡された場合、それをそのまま返します</li>
<li>リスト lst が渡された場合、 <code>(apply #'make-uml-transition-spec lst)</code> を返します</li>
<li>上記のいずれでもない prm の場合、 <code>(make-uml-transition-spec :trigger prm)</code> を返します</li>
</ul>
</li>
<li>パラメータ数が 2 以上の場合
<ul>
<li>後述します</li>
</ul>
</li>
</ul>
<p>　パラメータ数が 2 以上の場合、<a class='autolink' href='#4T0ZbrMPDuy'>make-uml-transition-spec 関数</a>は実質的に以下の関数であるかのように振舞います。</p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>make-uml-transition-spec</span> <span style='color:navy;'>&key</span> trigger guard action offset font</li>
</ul>
<p>　各パラメータの意味は以下の通りです。</p>
<ul>
<li><code>trigger</code> ---- トリガー条件をキーワードシンボルまたは文字列で指定します。</li>
<li><code>guard</code> ---- ガード条件をキーワードシンボルまたは文字列で指定します。</li>
<li><code>action</code> ---- 実行アクションをキーワードシンボルまたは文字列で指定します。</li>
<li><code>offset</code> ---- 描画位置調整に使うオフセット情報を座標値で指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#aiNf7xsL8zY'>uml-transition-spec</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　通常、この関数を明示的に使用する必要はありません。<a class='autolink' href='#hlb10Xbiaq1'>uml-transition マクロ</a>の <code>:spec</code> に指定されたパラメータは内部でこの関数に渡されるため、 <code>:spec '(:trigger :on-click :action :"OnClick()"</code> といった記述で遷移仕様情報を指定できます。</p>
<p>　　</p>
<h4><a name='0Bkt6LtbRAO'></a>14.1.47 macro memo</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>memo</span> position text <span style='color:navy;'>&key</span> pivot width height crease align valign margin font fill fill2 stroke link rotate layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>text</code> ---- 内部に描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列で指定します。改行は "~%" で表現します。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#0AVJhEKnK1M'>メモ</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>crease</code> ---- 右下の折り目のサイズを数値で指定します。省略した場合のデフォルト値は 20 です。</li>
<li><code>align</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の水平方向のアライメントを <code>:left :center :right</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>valign</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の垂直方向のアライメントを <code>:top :center :bottom</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>描画における「余白」のサイズです。省略した場合のデフォルト値は 10 です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>fill2</code> ---- 折り目部分の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#0AVJhEKnK1M'>メモ</a>を描画します。複数の<a class='autolink' href='#0AVJhEKnK1M'>メモ</a>でスタイルを統一したい場合、<a class='autolink' href='#3Z6ItFChKPn'>with-memo-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#0AVJhEKnK1M'>メモ</a></li>
<li><a class='autolink' href='#3Z6ItFChKPn'>with-memo-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='cVVbsretg1q'></a>14.1.48 macro paragraph</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>paragraph</span> position text <span style='color:navy;'>&key</span> align valign rotate font link layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画する<a class='autolink' href='#4WyMTv59pvw'>パラグラフ</a>の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>text</code> ---- 描画する<a class='autolink' href='#4WyMTv59pvw'>パラグラフ</a>を文字列で指定します。改行は "~%" で表現します。</li>
<li><code>align</code> ---- <a class='autolink' href='#4WyMTv59pvw'>パラグラフ</a>の水平方向のアライメントを <code>:left :center :right</code> のいずれかで指定します。</li>
<li><code>valign</code> ---- <a class='autolink' href='#4WyMTv59pvw'>パラグラフ</a>の垂直方向のアライメントを <code>:top :center :bottom</code> のいずれかで指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　複数行に渡る<a class='autolink' href='#4WyMTv59pvw'>パラグラフ</a>を描画します。単一行の<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>であれば <a class='autolink' href='#cSks5rQ0qHz'>text マクロ</a>を、<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>を使いたい場合は <a class='autolink' href='#hmTTSZjUX3S'>textbox マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#4WyMTv59pvw'>パラグラフ</a></li>
<li><a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a></li>
<li><a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='4ol8IRIe1gI'></a>14.1.49 macro parallelogram</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>parallelogram</span> position width height direction offset <span style='color:navy;'>&key</span> pivot fill stroke rotate link layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を数値で指定します。</li>
<li><code>height</code> ---- 高さを数値で指定します。</li>
<li><code>direction</code> ---- <a class='autolink' href='#8YR8CiywoW8'>平行四辺形</a>の「向き」を <code>:h</code> または <code>:v</code> で指定します。</li>
<li><code>offset</code> ---- <a class='autolink' href='#8YR8CiywoW8'>平行四辺形</a>の形状に関するオフセット値を数値で指定します。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#8YR8CiywoW8'>平行四辺形</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#8YR8CiywoW8'>平行四辺形</a>を描画します。複数の基本要素でスタイルを統一したい場合、<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#8YR8CiywoW8'>平行四辺形</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='akKCr0fEV12'></a>14.1.50 macro path</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>path</span> data <span style='color:navy;'>&key</span> fill stroke layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>data</code> ---- <a class='autolink' href='#4qgt62QVDZl'>パス</a>を構成するデータを指定します。詳細は <a href='#4qgt62QVDZl'>5.1  節</a>を参照してください。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#4qgt62QVDZl'>パス</a>を描画します。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#4qgt62QVDZl'>パス</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='jsvIhwcwkMd'></a>14.1.51 macro person</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>person</span> position size <span style='color:navy;'>&key</span> pivot fill stroke label link rotate layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>size</code> ---- 幅を数値で指定します。高さは自動的にこの 2 倍になります。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#03WwbeGq0eH'>人物</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>label</code> ---- <a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>を付ける場合は指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#03WwbeGq0eH'>人物</a>を描画します。複数の<a class='autolink' href='#03WwbeGq0eH'>人物</a>でスタイルを統一したい場合、<a class='autolink' href='#kLuOHuyuzKQ'>with-person-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#03WwbeGq0eH'>人物</a></li>
<li><a class='autolink' href='#kLuOHuyuzKQ'>with-person-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='57KuEXjwgOh'></a>14.1.52 function point*</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point*</span> pt n =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>n</code> ---- 対象の座標値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt`を `n</code> 倍した座標値を返します。function pt* と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='0vQ0ekhKwfr'></a>14.1.53 function point+</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point+</span> pt1 pt2 =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt1</code> ---- 対象の座標値を指定します。</li>
<li><code>pt2</code> ---- 対象の座標値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　2 つの座標値を足しあわせます。どちらかまたは両方が絶対座標の場合、結果も絶対座標になります。function pt+ と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='b0LbTZSVMDP'></a>14.1.54 function point-</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point-</span> pt1 pt2 =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt1</code> ---- 対象の座標値を指定します。</li>
<li><code>pt2</code> ---- 対象の座標値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt1</code> から <code>pt2</code> を引きます。どちらかまたは両方が絶対座標の場合、結果も絶対座標になります。function pt- と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='54sryPWnhiV'></a>14.1.55 function point-absolute-p</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point-absolute-p</span> pt =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象オブジェクトを指定します。</li>
<li><code>result</code> ---- <code>T</code> または <code>NIL</code> が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt</code> が絶対座標を示す座標値かどうかを調べます。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='iN3USlmMy0C'></a>14.1.56 function point-distance</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point-distance</span> pt1 pt2 =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt1</code> ---- 対象の座標値を指定します。</li>
<li><code>pt2</code> ---- 対象の座標値を指定します。</li>
<li><code>result</code> ---- 結果の値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt1</code> と <code>pt2</code> の間の距離を計算して返します。この時、これらの座標値が絶対座標であるか相対座標であるかは考慮されないので注意が必要です。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='bQomeUcXeDy'></a>14.1.57 function point-p</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point-p</span> pt =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象オブジェクトを指定します。</li>
<li><code>result</code> ---- <code>T</code> または <code>NIL</code> が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt</code> が座標値かどうかを調べます。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='h10DBSdGdsq'></a>14.1.58 function point-relative-p</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point-relative-p</span> pt =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象オブジェクトを指定します。</li>
<li><code>result</code> ---- <code>T</code> または <code>NIL</code> が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt</code> が相対座標を示す座標値かどうかを調べます。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='bvPKeqUaY73'></a>14.1.59 function point-x</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point-x</span> pt =&gt; result</li>
<li class='syntax'>(setf (<span style='font-weight:bold;'>point-x</span> pt) val)</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>result</code> ---- <code>pt</code> の x 座標が返ります。</li>
<li><code>val</code> ---- <code>pt</code> に設定する x 座標値を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　座標値の x 軸の値を取得または設定します。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='fP5Ssvts2k5'></a>14.1.60 function point-y</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point-y</span> pt</li>
<li class='syntax'>(setf <span style='font-weight:bold;'>point-y</span> pt) val)</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>result</code> ---- <code>pt</code> の y 座標が返ります。</li>
<li><code>val</code> ---- <code>pt</code> に設定する y 座標値を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　座標値の y 軸の値を取得または設定します。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='lHK7pfWE40d'></a>14.1.61 function point/</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point/</span> pt n</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>n</code> ---- 対象の座標値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt`を `1/n</code> 倍した座標値を返します。function pt/ と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='0XKkW5OfgY0'></a>14.1.62 function point/x+</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point/x+</span> pt x =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>x</code> ---- 加算する x 軸の値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt</code> に <code>(x 0)</code> を足した座標値を返します。function x+ と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='8hAs0t2cS2R'></a>14.1.63 function point/xy+</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point/xy+</span> pt x y =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>x</code> ---- 加算する x 軸の値を指定します。</li>
<li><code>y</code> ---- 加算する y 軸の値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt</code> に <code>(x y)</code> を足した座標値を返します。function xy+ と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='fxwgCL9UAe4'></a>14.1.64 function point/y+</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>point/y+</span> pt y =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>y</code> ---- 加算する y 軸の値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt</code> に <code>(0 y)</code> を足した座標値を返します。function y+ と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='dyrXpT32Rg1'></a>14.1.65 macro polygon</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>polygon</span> points <span style='color:navy;'>&key</span> fill stroke link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>points</code> ---- <a class='autolink' href='#5vGRm9AMypB'>多角形</a>を構成する点のリストを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#5vGRm9AMypB'>多角形</a>を描画します。複数の基本要素でスタイルを統一したい場合、<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#5vGRm9AMypB'>多角形</a></li>
<li><a class='autolink' href='#6eeF43U3xPh'>正多角形</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='cKLahjjavLp'></a>14.1.66 function pt*</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>pt*</span> pt n =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>n</code> ---- 対象の座標値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt`を `n</code> 倍した座標値を返します。function point* と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='eEZRDxsQS11'></a>14.1.67 function pt+</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>pt+</span> pt1 pt2 =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt1</code> ---- 対象の座標値を指定します。</li>
<li><code>pt2</code> ---- 対象の座標値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　2 つの座標値を足しあわせます。どちらかまたは両方が絶対座標の場合、結果も絶対座標になります。function point+ と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='44KEZOmjrZt'></a>14.1.68 function pt-</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>pt-</span> pt1 pt2 =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt1</code> ---- 対象の座標値を指定します。</li>
<li><code>pt2</code> ---- 対象の座標値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt1</code> から <code>pt2</code> を引きます。どちらかまたは両方が絶対座標の場合、結果も絶対座標になります。function point- と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='7cLBJDb8TMb'></a>14.1.69 function pt/</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>pt/</span> pt n =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>n</code> ---- 対象の座標値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt`を `1/n</code> 倍した座標値を返します。function point/ と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='44CYyox6BTR'></a>14.1.70 macro raw-svg</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>raw-svg</span> svgdata <span style='color:navy;'>&key</span> (layer nil)</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>svgdata</code> ---- 挿入する SVG コード片を文字列で指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　SVG 図面の中に任意の SVG コードを挿入します。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#cNmjD3OiTOH'>生の SVG コード片の挿入</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='hxiiGsQsLt4'></a>14.1.71 macro rect</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>rect</span> position width height <span style='color:navy;'>&key</span> pivot rx ry fill stroke rotate link layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を数値で指定します。</li>
<li><code>height</code> ---- 高さを数値で指定します。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#kJonRG8GtHF'>四角形</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>rx, ry</code> ---- 角を丸くしたい場合に、角の x 半径（rx）と y 半径（ry）を数値で指定します。rx と ry のどちらかだけを指定すると、もう一方も同じであると見なされます。省略した場合のデフォルト値は 0（つまり角を丸くしない）です。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#kJonRG8GtHF'>四角形</a>を描画します。複数の基本要素でスタイルを統一したい場合、<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#kJonRG8GtHF'>四角形</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='1Icvfe8xKRE'></a>14.1.72 macro register-theme</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>register-theme</span> (name <span style='color:navy;'>&optional</span> base) <span style='color:navy;'>&rest</span> settings</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>name</code> ---- 作成する<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>の ID をキーワードシンボルで指定します。</li>
<li><code>base</code> ---- ベースにする<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>がある場合はその ID をキーワードシンボルで指定します。</li>
<li><code>settings</code> ---- <a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>に登録する設定を指定します（<a href='#dY1SXtflNNS'>11.2  節</a>参照）。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　新しい<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>を作成します。詳細は <a href='#dY1SXtflNNS'>11.2  節</a>および<a href='#fgQNJlpxlTm'>11.3  節</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#dY1SXtflNNS'>11.2  新しいテーマの作成</a></li>
<li><a href='#fgQNJlpxlTm'>11.3  テーマのカスタマイズ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='jLTDopnLqyT'></a>14.1.73 macro regular-polygon</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>regular-polygon</span> position n size <span style='color:navy;'>&key</span> pivot fill stroke link layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>n</code> ---- 正Ｎ角形を描く場合の N を指定します。現在、3 4 5 6 8 10 12 が使用できます。</li>
<li><code>size</code> ---- ベースとなる<a class='autolink' href='#8UQowBxrcaE'>正円</a>の半径を数値で指定します。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#8UQowBxrcaE'>正円</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 円を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#6eeF43U3xPh'>正多角形</a>を描画します。複数の基本要素でスタイルを統一したい場合、<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#6eeF43U3xPh'>正多角形</a></li>
<li><a class='autolink' href='#5vGRm9AMypB'>多角形</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　<a class='autolink' href='#jLTDopnLqyT'>regular-polygon マクロ</a>が生成する<a class='autolink' href='#6eeF43U3xPh'>正多角形</a>への接続点は、 <code>size</code> を半径とする<a class='autolink' href='#8UQowBxrcaE'>正円</a>の上に配置されます。</p>
<p>　　</p>
<h4><a name='49Awu7jPI7m'></a>14.1.74 function repeat</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>repeat</span> value count <span style='color:navy;'>&rest</span> customs =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>value</code> ---- 数値、または一引数関数を指定します。</li>
<li><code>count</code> ---- 数値を指定します。</li>
<li><code>customs</code> ---- <code>(n v)</code> 形式のリストを任意数指定します。ここで <code>n v</code> はともに整数です。</li>
<li><code>result</code> ---- 結果がリストで返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>value count customs</code> に従って数値のリストを生成して返します。<a class='autolink' href='#hqebcMypbfk'>table マクロ</a>における<code>rows</code> および <code>cols</code> パラメータでの使用を想定しています。</p>
<p>　基本的には、この関数は <code>count</code> 個の <code>value</code> からなるリストを生成します。ただし、<code>customs</code> が指定されている場合、生成したリストを <code>customs</code> に従って変更します。<code>customs</code> は、 <code>(n v)</code> 形式のリストの羅列であることが期待され、これによって結果の <code>n</code> 番目の要素が <code>v</code> に置き換えられます。</p>
<p>　さらに、 <code>value</code> は数値ではなく一引数関数にすることもできます。この場合、その関数は結果リストの個々の値を生成するためにインデックスを引数としてコールされます。以下にそれぞれの例を示します。</p>
<pre class='code'>
(repeat 50 4)                 <span class='comment'>; =&gt; '(50 50 50 50)</span>
(repeat 40 5 '(0 80) '(3 60)) <span class='comment'>; =&gt; '(80 40 40 60 40)</span>
(repeat #'identity 10)        <span class='comment'>; =&gt; '(0 1 2 3 4 5 6 7 8 9)</span>
(repeat (<span class='keyword1'>lambda</span> (i)
           (* 10 (1+ i))) 10)  <span class='comment'>; =&gt; '(10 20 30 40 50 60 70 80 90 100)</span>
</pre>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#hqebcMypbfk'>table マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='bxjD7EmOfDd'></a>14.1.75 function rgb</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>rgb</span> r g b =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>r</code> ---- 0 ～ 255 の整数値または 0.0 ～ 1.0 の浮動小数点値</li>
<li><code>g</code> ---- 0 ～ 255 の整数値または 0.0 ～ 1.0 の浮動小数点値</li>
<li><code>b</code> ---- 0 ～ 255 の整数値または 0.0 ～ 1.0 の浮動小数点値</li>
<li><code>result</code> ---- 結果が <code>"#RRGGBB"</code> 形式の文字列で返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>r g b</code> の 3 値から色指定の文字列を生成指定返します。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#1rpUB3fre67'>12.1  色の指定</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='hqebcMypbfk'></a>14.1.76 macro table</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>table</span> position rows cols <span style='color:navy;'>&key</span> pivot font fills stroke texts layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>rows</code> ---- 行数と各行の高さを数値のリストで指定します。リストの長さが行数、リスト要素の数値が行の高さです。<a href='#49Awu7jPI7m'>repeat 関数</a>が役に立つかもしれません。</li>
<li><code>cols</code> ---- 列数と各列の幅を数値のリストで指定します。リストの長さが列数、リスト要素の数値が列の幅です。<a href='#49Awu7jPI7m'>repeat 関数</a>が役に立つかもしれません。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#g6xjP526KX7'>テーブル</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>stroke</code> ---- 罫線を描画する線を指定します。</li>
<li><code>fills</code> ---- 表、行、列、またはセル個別の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。詳細は後述します。</li>
<li><code>font</code> ---- 表内で<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を描画する際に使用する<a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。省略した場合、 <code>*default-table-font*, *default-font*</code> の順でデフォルト<a class='autolink' href='#3kZ9FkounyK'>フォント</a>が使用されます。また、 <code>texts</code> パラメータ指定の中でセル毎に個別に<a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定することもできます。</li>
<li><code>texts</code> ---- 表内の各セルに設定する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>をリストで指定します。正確には、行のリストを連ねたリストで指定します。<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>情報はキーワードなどのシンボル、数値、文字列を指定できますが、アライメントや<a class='autolink' href='#3kZ9FkounyK'>フォント</a>情報を指定する場合は <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>情報自体をリストにする必要があります。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#g6xjP526KX7'>テーブル</a>を描画します。複数の<a class='autolink' href='#g6xjP526KX7'>テーブル</a>でスタイルを統一したい場合、<a class='autolink' href='#50lQokEAysO'>with-table-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#g6xjP526KX7'>テーブル</a></li>
<li><a class='autolink' href='#50lQokEAysO'>with-table-options マクロ</a></li>
<li><a class='autolink' href='#8rELk1LL2bC'>with-table-cell マクロ</a></li>
<li><a class='autolink' href='#8n9SABCEJKZ'>with-table-range マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　<code>fills</code> パラメータは、位置を示すキーワードと<a class='autolink' href='#dBUd7L4C3dx'>フィル</a>情報の２つの値を繰り返すリストで指定してください。位置は、表全体であれば <code>:rc</code> 、列や行全体を指定する場合は <code>:rN</code> や <code>:cM</code> を指定します。ここで、 <code>N,M</code> は行や列の番号を示す整数です（上または左から０で始まります）。 <code>:rN-M</code> といった範囲指定も可能です。単独のセルを指定する場合、同じ要領で <code>:rNcM</code> と指定してください。 <code>:rK-LcN-M</code> 形式の範囲指定も可能です。 <code>fills</code> パラメータ全体が省略された場合、表の背景は塗り潰されません。</p>
<p>　　</p>
<h4><a name='cSks5rQ0qHz'></a>14.1.77 macro text</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>text</span> position text <span style='color:navy;'>&key</span> align font link layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>text</code> ---- 描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列で指定します。</li>
<li><code>align</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>のアライメントを <code>:left :center :right</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:left</code> です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を描画します。複数の基本要素でスタイルを統一したい場合、<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='hmTTSZjUX3S'></a>14.1.78 macro textbox</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>textbox</span> position text <span style='color:navy;'>&key</span> pivot width height no-frame rx ry align valign margin font fill stroke link rotate layer id filter contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>text</code> ---- 内部に描画する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を文字列で指定します。改行は "~%" で表現します。</li>
<li><code>pivot</code> ---- 基準点が<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>no-frame</code> ---- ボックスを描画せず、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>のみにしたい場合には <code>:no-frame t</code> と指定してください。</li>
<li><code>rx, ry</code> ---- 角を丸くしたい場合に、角の x 半径と y 半径を数値で指定します。rx と ry のどちらかだけを指定すると、もう一方も同じであると見なされます。省略した場合のデフォルト値は 0（つまり角を丸くしない）です。</li>
<li><code>align</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の水平方向のアライメントを <code>:left :center :right</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>valign</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の垂直方向のアライメントを <code>:top :center :bottom</code> のいずれかで指定します。省略した場合のデフォルト値は <code>:center</code> です。</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>描画における「余白」のサイズです。省略した場合のデフォルト値は 10 です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>を描画します。複数の<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>でスタイルを統一したい場合、<a class='autolink' href='#5oL7bKJkowz'>with-textbox-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a></li>
<li><a class='autolink' href='#5oL7bKJkowz'>with-textbox-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='h5Ic0bvUIs7'></a>14.1.79 macro uml-action</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-action</span> position name <span style='color:navy;'>&key</span> stereotype keyword pivot width height margin corner-r rake font fill stroke icon link layer filter id contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>name</code> ---- アクションの名前を文字列で指定します。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>描画における「余白」のサイズです。省略した場合のデフォルト値は 5 です。</li>
<li><code>corner-r</code> ---- 角の丸みの半径を数値で指定します。省略した場合のデフォルト値は 6 です。</li>
<li><code>rake</code> ---- レーキアイコンを表示するか否かを真偽値で指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>icon</code> ---- アイコンの描画設定を変更する場合は指定します。 <a href='#1ZEGenUynXh'>14.1.42  節</a> を参照してください。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。 <code>:contents t</code> とすることも可能です。詳細は後述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるアクションを描画します。スタイルを統一したい場合、<a class='autolink' href='#kqRLmxG6cu2'>with-uml-action-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#5kkSlhsbaIn'>uml-action</a></li>
<li><a class='autolink' href='#kqRLmxG6cu2'>with-uml-action-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<ul>
<li><a class='autolink' href='#5kkSlhsbaIn'>uml-action</a> では <code>:contents</code> パラメータを指定した場合、 <code>name</code> で指定された<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を（中央でなく）上部に描画します。しかし、（ <code>:contents</code> パラメータでなく）<a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>を使う場合、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>は中央に描画されてしまいます。これを避けるためには、 <code>:contents t</code> を指定してください。これは<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を上端付近に描画させる効果だけを持ちます。</li>
</ul>
<p>　　</p>
<h4><a name='fqECxhnnBJh'></a>14.1.80 macro uml-activity-final</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-activity-final</span> position <span style='color:navy;'>&key</span> radius ratio pivot fill stroke link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>radius</code> ---- 終了アクションの半径を数値で指定します。省略した場合のデフォルト値は 15 です。</li>
<li><code>ratio</code> ---- 内部の（塗り潰される）円の半径を <code>radius</code> に対する比で指定します。省略した場合のデフォルト値は 0.6 です。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>fill</code> ---- 外側の円と内側の円の間を塗り潰す色を指定します。省略した場合のデフォルト値は <code>:white</code> です。</li>
<li><code>stroke</code> ---- 外側の円を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。内側の（塗り潰される）円の色としても使用されます。省略した場合のデフォルト値は <code>:black</code> です。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>における終了アクションを描画します。スタイルを統一したい場合、<a class='autolink' href='#ixy0Rc930O0'>with-uml-activity-final-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#gfsl4uecBoY'>uml-activity-final</a></li>
<li><a class='autolink' href='#ixy0Rc930O0'>with-uml-activity-final-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='ff3fz3G29Ce'></a>14.1.81 macro uml-activity-start</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-activity-start</span> position <span style='color:navy;'>&key</span> radius pivot fill link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>radius</code> ---- 開始アクションの半径を数値で指定します。省略した場合のデフォルト値は 10 です。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>fill</code> ---- 円を塗り潰す色を指定します。省略した場合のデフォルト値は <code>:black</code> です。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>における開始アクションを描画します。スタイルを統一したい場合、<a class='autolink' href='#fiKYEk7l3vl'>with-uml-activity-start-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#gr8RKSxFalf'>uml-activity-start</a></li>
<li><a class='autolink' href='#fiKYEk7l3vl'>with-uml-activity-start-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='0jrm0BGl279'></a>14.1.82 macro uml-actor</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-actor</span> position name <span style='color:navy;'>&key</span> pivot size fill stroke link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>name</code> ---- アクターの名前を<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>size</code> ---- 大きさを明示的に指定したい場合に、高さを数値で指定します。幅は高さから自動的に決定されます。省略した場合のデフォルト値は 40 です。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#e57rLpXY8ah'>ユースケース図</a>におけるアクターを描画します。スタイルを統一したい場合、<a class='autolink' href='#6E6RgdGy314'>with-uml-actor-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#e57rLpXY8ah'>ユースケース図</a></li>
<li><a href='#4rUQqcq4sKb'>uml-actor</a></li>
<li><a class='autolink' href='#6E6RgdGy314'>with-uml-actor-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='ie20bBGavpf'></a>14.1.83 macro uml-aggregation</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-aggregation</span> from to <span style='color:navy;'>&key</span> arrow stereotype keyword name style spacing role1 role2 mult1 mult2 filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>from</code> ---- 接続元となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>to</code> ---- 接続先となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>arrow</code> ---- 集約関連の終端に矢印を描画する場合は <code>t</code> を指定します</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>name</code> ---- 集約関連に名前をつける場合、<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。</li>
<li><code>style</code> ---- 接続線の引き方を指定します。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>spacing</code> ---- 2 回以上折れ曲がる接続線における「自由な線分」の位置を調整するためのパラメータです。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>role1</code> ---- <code>from</code> 側にロールを明示する場合はロール情報を指定します。詳細は <a href='#9ugZNtgVL4J'>13.8.37  節</a> を参照してください。</li>
<li><code>role2</code> ---- <code>to</code> 側にロールを明示する場合はロール情報を指定します。詳細は <a href='#9ugZNtgVL4J'>13.8.37  節</a> を参照してください。</li>
<li><code>mult1</code> ---- <code>from</code> 側に多重度を明示する場合は多重度情報を指定します。詳細は <a href='#g6kEHGpHjhy'>13.8.29  節</a> を参照してください。</li>
<li><code>mult2</code> ---- <code>to</code> 側に多重度を明示する場合は多重度情報を指定します。詳細は <a href='#g6kEHGpHjhy'>13.8.29  節</a> を参照してください。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#khgkJB6xK95'>クラス図</a>における集約関連を描画します。スタイルを統一したい場合、<a class='autolink' href='#g2Q9l90IWR5'>with-uml-aggregation-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#khgkJB6xK95'>クラス図</a></li>
<li><a href='#881rvOpGoim'>uml-aggregation</a></li>
<li><a class='autolink' href='#g2Q9l90IWR5'>with-uml-aggregation-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='29j3NypNjE1'></a>14.1.84 macro uml-artifact</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-artifact</span> position name <span style='color:navy;'>&key</span> pivot stereotype keyword width height font fill stroke margin link layer filter id contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>name</code> ---- 生成物の名前を文字列で指定します。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>icon</code> ---- アイコンの描画設定を変更する場合は指定します。 <a href='#1ZEGenUynXh'>14.1.42  節</a> を参照してください。</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の余白を指定します。幅や高さを明示的に指定した場合は無視されます。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。 <code>:contents t</code> とすることも可能です。詳細は後述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#6DAfYJjISDb'>配置図</a>における生成物を描画します。スタイルを統一したい場合、<a class='autolink' href='#lbGYWLxwRmP'>with-uml-artifact-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#6DAfYJjISDb'>配置図</a></li>
<li><a href='#1ryiWMoWWul'>uml-artifact</a></li>
<li><a class='autolink' href='#lbGYWLxwRmP'>with-uml-artifact-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='c2inmUVDBj2'></a>14.1.85 macro uml-association</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>umL-association</span> from to <span style='color:navy;'>&key</span> arrows stereotype keyword name style spacing role1 role2 mult1 mult2 filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>from</code> ---- 接続元となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>to</code> ---- 接続先となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>arrow</code> ---- 関連の終端に矢印を描画する場合は 1 を、両端に矢印を描画する場合は 2 を指定します。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>name</code> ---- 関連に名前をつける場合、<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。</li>
<li><code>style</code> ---- 接続線の引き方を指定します。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>spacing</code> ---- 2 回以上折れ曲がる接続線における「自由な線分」の位置を調整するためのパラメータです。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>role1</code> ---- <code>from</code> 側にロールを明示する場合はロール情報を指定します。詳細は <a href='#9ugZNtgVL4J'>13.8.37  節</a> を参照してください。</li>
<li><code>role2</code> ---- <code>to</code> 側にロールを明示する場合はロール情報を指定します。詳細は <a href='#9ugZNtgVL4J'>13.8.37  節</a> を参照してください。</li>
<li><code>mult1</code> ---- <code>from</code> 側に多重度を明示する場合は多重度情報を指定します。詳細は <a href='#g6kEHGpHjhy'>13.8.29  節</a> を参照してください。</li>
<li><code>mult2</code> ---- <code>to</code> 側に多重度を明示する場合は多重度情報を指定します。詳細は <a href='#g6kEHGpHjhy'>13.8.29  節</a> を参照してください。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#khgkJB6xK95'>クラス図</a>を始めとする各種の UML ダイアグラムにおける関連を描画します。スタイルを統一したい場合、<a class='autolink' href='#76cvwodLVQW'>with-uml-association-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#khgkJB6xK95'>クラス図</a></li>
<li><a href='#0A70k6t8D8T'>uml-association</a></li>
<li><a class='autolink' href='#76cvwodLVQW'>with-uml-association-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='bepvr4okFYe'></a>14.1.86 macro uml-class</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-class</span> position name <span style='color:navy;'>&key</span> pivot width height stereotype keyword multiplicity abstract active template attributes operations responsibilities emptybox font fill stroke link filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>name</code> ---- クラスの名前を文字列で指定します。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>multiplicity</code> ---- 多重度を数値または文字列で指定します。</li>
<li><code>abstract</code> ---- 抽象クラスであることを明示する場合は <code>t</code> を指定します。</li>
<li><code>active</code> ---- アクティブクラスであることを明示する場合は <code>t</code> を指定します。</li>
<li><code>template</code> ---- クラステンプレートの場合、そのテンプレート引数を文字列で指定します。</li>
<li><code>attributes</code> ---- クラスの属性を明示する場合、クラス属性情報のリストを指定します。指定方法については <a href='#fkYROSV9994'>13.8.8  節</a>を参照してください。</li>
<li><code>operations</code> ---- クラスの操作を明示する場合、クラス操作情報のリストを指定します。指定方法については <a href='#fkYROSV9994'>13.8.8  節</a>を参照してください。</li>
<li><code>responsibilities</code> ---- クラスの責務を明示する場合、文字列で指定します。改行コードを含むことで複数行を記述できます。</li>
<li><code>emptybox</code> ---- 属性、操作、責務で空になるボックスを描画する場合は <code>t</code> を指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#khgkJB6xK95'>クラス図</a>などで使用されるクラスを描画します。スタイルを統一したい場合、<a class='autolink' href='#8POSSKTKzFu'>with-uml-class-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#khgkJB6xK95'>クラス図</a></li>
<li><a href='#fkYROSV9994'>uml-class</a></li>
<li><a class='autolink' href='#8POSSKTKzFu'>with-uml-class-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='cC1mrTiDRg0'></a>14.1.87 macro uml-component</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-component</span> position name <span style='color:navy;'>&key</span> pivot stereotype keyword width height font fill stroke icon margin link layer filter id contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>name</code> ---- コンポーネントの名前を文字列で指定します。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>icon</code> ---- アイコンの描画設定を変更する場合は指定します。 <a href='#1ZEGenUynXh'>14.1.42  節</a> を参照してください。</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の余白を指定します。幅や高さを明示的に指定した場合は無視されます。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。 <code>:contents t</code> とすることも可能です。詳細は後述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#evUs70Itwyp'>コンポーネント図</a>におけるコンポーネントを描画します。スタイルを統一したい場合、<a class='autolink' href='#40gYpXP3NCx'>with-uml-component-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#evUs70Itwyp'>コンポーネント図</a></li>
<li><a href='#hlJEas6GjYs'>uml-component</a></li>
<li><a class='autolink' href='#40gYpXP3NCx'>with-uml-component-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='8Xj1ijpUjgr'></a>14.1.88 macro uml-composition</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-composition</span> from to <span style='color:navy;'>&key</span> arrow stereotype keyword name style spacing role1 role2 mult1 mult2 filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>from</code> ---- 接続元となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>to</code> ---- 接続先となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>arrow</code> ---- コンポジションの終端に矢印を描画する場合は <code>t</code> を指定します</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>name</code> ---- コンポジションに名前をつける場合、<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。</li>
<li><code>style</code> ---- 接続線の引き方を指定します。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>spacing</code> ---- 2 回以上折れ曲がる接続線における「自由な線分」の位置を調整するためのパラメータです。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>role1</code> ---- <code>from</code> 側にロールを明示する場合はロール情報を指定します。詳細は <a href='#9ugZNtgVL4J'>13.8.37  節</a> を参照してください。</li>
<li><code>role2</code> ---- <code>to</code> 側にロールを明示する場合はロール情報を指定します。詳細は <a href='#9ugZNtgVL4J'>13.8.37  節</a> を参照してください。</li>
<li><code>mult1</code> ---- <code>from</code> 側に多重度を明示する場合は多重度情報を指定します。詳細は <a href='#g6kEHGpHjhy'>13.8.29  節</a> を参照してください。</li>
<li><code>mult2</code> ---- <code>to</code> 側に多重度を明示する場合は多重度情報を指定します。詳細は <a href='#g6kEHGpHjhy'>13.8.29  節</a> を参照してください。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#khgkJB6xK95'>クラス図</a>におけるコンポジション関連を描画します。スタイルを統一したい場合、<a class='autolink' href='#8xVEIr1yYBY'>with-uml-composition-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#khgkJB6xK95'>クラス図</a></li>
<li><a href='#jswiRdMw2Be'>uml-composition</a></li>
<li><a class='autolink' href='#8xVEIr1yYBY'>with-uml-composition-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='f2NYv8Z2P8m'></a>14.1.89 macro uml-connector</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-connector</span> position1 position2 id <span style='color:navy;'>&key</span> pivot1 pivot2 name size fill stroke font filter layer</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position1</code> ---- ひとつめの描画要素の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>position2</code> ---- ふたつめの描画要素の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>id</code> ---- 付与するID をキーワードシンボルで指定します。</li>
<li><code>pivot1</code> ---- <code>position1</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>pivot2</code> ---- <code>position2</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>name</code> ---- 描画される<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>内部に表示される（１文字の）名前を <code>:A</code> などのキーワードシンボルで指定します。</li>
<li><code>size</code> ---- 描画される<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>のサイズを数値で指定します。省略した場合のデフォルト値は20です。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>における<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>を描画します。スタイルを統一したい場合、<a class='autolink' href='#cjmXVBgVQzD'>with-uml-connector-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#lgLGZTmFJ4a'>uml-connector</a></li>
<li><a class='autolink' href='#cjmXVBgVQzD'>with-uml-connector-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<ul>
<li><a class='autolink' href='#lgLGZTmFJ4a'>uml-connector</a> は（フローなどの<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>での）接続に使用する前提のため、 <code>:id</code> パラメータは省略できません。</li>
<li><code>:name</code> に２文字以上からなるキーワードシンボルを指定した場合、最初の１文字だけが使用されます。</li>
<li><code>:name</code> を省略した場合、 <code>id</code> の「最後の１文字」が使用されます。</li>
</ul>
<p>　　</p>
<h4><a name='4OsqWlN0N0o'></a>14.1.90 macro uml-decision</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-decision</span> position <span style='color:navy;'>&key</span> pivot text width height margin font fill stroke link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>text</code> ---- 分岐に関する情報を<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>で指定します。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>描画における「余白」のサイズです。省略した場合のデフォルト値は 5 です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるデジジョン（条件による分岐）を描画します。スタイルを統一したい場合、<a class='autolink' href='#izhz8eDjPe0'>with-uml-decision-merge-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#4gZkeXtP8bm'>uml-decision</a></li>
<li><a href='#ikpYK2ZSZov'>uml-merge</a></li>
<li><a class='autolink' href='#izhz8eDjPe0'>with-uml-decision-merge-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='0AOc4Hz7cU9'></a>14.1.91 macro uml-dependency</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-dependency</span> from to <span style='color:navy;'>&key</span> stereotype keyword name style spacing filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>from</code> ---- 接続元となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>to</code> ---- 接続先となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>name</code> ---- 依存関係に名前をつける場合、<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。</li>
<li><code>style</code> ---- 接続線の引き方を指定します。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>spacing</code> ---- 2 回以上折れ曲がる接続線における「自由な線分」の位置を調整するためのパラメータです。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#khgkJB6xK95'>クラス図</a>を始めとする各種の UML ダイアグラムにおける依存関係を描画します。スタイルを統一したい場合、<a class='autolink' href='#8I8CeZX7FA2'>with-uml-dependency-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#khgkJB6xK95'>クラス図</a></li>
<li><a href='#f40Gf0pqB5B'>uml-dependency</a></li>
<li><a class='autolink' href='#8I8CeZX7FA2'>with-uml-dependency-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='5Ql5zK0cMwk'></a>14.1.92 macro uml-expansion-region</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-expansion-region</span> position width height <span style='color:navy;'>&key</span> pivot stereotype keyword offset corner-r fill stroke link layer filter id contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を数値で指定します。</li>
<li><code>height</code> ---- 高さを数値で指定します。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>offset</code> ---- キーワードの表示位置を調整するためのオフセットを座標値で指定します。</li>
<li><code>corner-r</code> ---- 四隅の角の丸みの大きさを数値で指定します。デフォルト値は 10 です。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>における拡張領域を描画します。スタイルを統一したい場合、<a class='autolink' href='#8SWwZSuNPRo'>with-uml-expansion-region-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#gbfzFbCEQb7'>uml-expansion-region</a></li>
<li><a class='autolink' href='#8SWwZSuNPRo'>with-uml-expansion-region-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　キーワードはデフォルト値で拡張領域の左上に表示されます。この位置を調整したい場合、<code>:offset '(20 3)</code> といった要領で移動させたいオフセット値を指定してください。 </p>
<p>　　</p>
<h4><a name='9i3KzQ9ScEv'></a>14.1.93 macro uml-flow</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-flow</span> from to <span style='color:navy;'>&key</span> stereotype keyword spec style spacing filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>from</code> ---- 接続元となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>to</code> ---- 接続先となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>spec</code> ---- フローにガード条件やアクションを明示する場合に指定します。詳細は後述します。</li>
<li><code>style</code> ---- 接続線の引き方を指定します。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>spacing</code> ---- 2 回以上折れ曲がる接続線における「自由な線分」の位置を調整するためのパラメータです。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるフローを描画します。スタイルを統一したい場合、<a class='autolink' href='#eSqOz44b8wF'>with-uml-flow-options マクロ</a>を使うことができます。</p>
<p>　<code>spec</code> パラメータに指定するフロー仕様は、 <code>:spec '(:guard "v = 666" :action "foo()")</code> といった要領で指定します。リスト内に名前付きパラメータを並べる形式で、以下のパラメータが指定できます。</p>
<ul>
<li class='syntax'><span style='color:navy;'>&key</span> guard action offset font</li>
</ul>
<p>　<code>:guard :action</code> はそれぞれガード条件とアクションで、それぞれ文字列で指定します。これによって、先ほどの例で言えば <code>[v = 666]/foo()</code> といったフロー仕様が表示されることになります。 <code>:offset</code> は表示位置の調整を <code>(x y)</code> 形式で指定します。 <code>:font</code> は<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の指定が必要な場合に使用します。<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の指定を省略した場合、<a class='autolink' href='#eSqOz44b8wF'>with-uml-flow-options マクロ</a>で指定されている<a class='autolink' href='#3kZ9FkounyK'>フォント</a>が使用されます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#602QxE3z6rZ'>uml-flow</a></li>
<li><a class='autolink' href='#eSqOz44b8wF'>with-uml-flow-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='hesl6zCtKGG'></a>14.1.94 macro uml-flow-final</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-flow-final</span> position <span style='color:navy;'>&key</span> pivot radius fill stroke link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>radius</code> ---- 大きさを半径で指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるフロー終了を描画します。スタイルを統一したい場合、<a class='autolink' href='#iBvtd62FNd1'>with-uml-flow-final-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#8l54mEIg2yA'>uml-flow-final</a></li>
<li><a class='autolink' href='#iBvtd62FNd1'>with-uml-flow-final-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='fF3E03hjzKt'></a>14.1.95 macro uml-fork</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-fork</span> position direction <span style='color:navy;'>&key</span> pivot width length fill link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>direction</code> ---- 向きを <code>:h</code> か <code>:v</code> で指定します。横方向に流れるフローで使用する場合は <code>:h</code> 、縦方向なら <code>:v</code> です。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を数値で指定します。省略した場合のデフォルト値は 10 です。</li>
<li><code>length</code> ---- 長さを数値で指定します。省略した場合のデフォルト値は 40 です。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるフォークを描画します。スタイルを統一したい場合、<a class='autolink' href='#aT9JaFCRs0a'>with-uml-fork-join-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#dI34u24Hxh3'>uml-fork</a></li>
<li><a href='#eTHeBBfGtFF'>uml-join</a></li>
<li><a class='autolink' href='#aT9JaFCRs0a'>with-uml-fork-join-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='5mxCyQhUUgs'></a>14.1.96 macro uml-frame</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-frame</span> position width height title <span style='color:navy;'>&key</span> pivot margin fragments font fill stroke link layer filter id contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を数値で指定します。</li>
<li><code>height</code> ---- 高さを数値で指定します。</li>
<li><code>title</code> ---- 名前をキーワードまたは文字列で指定します。内部的に<a class='autolink' href='#4WyMTv59pvw'>パラグラフ</a>として処理されるため、改行を含む複数行の文字列が使用できます。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>margin</code> ---- フレームの左上に表示される名前部分の余白の大きさを数値で指定します。</li>
<li><code>fragments</code> ---- フレーム内部を点線で複数の領域に区切る場合、各領域の高さをリストで与えます。区切られた個々の領域には <a class='autolink' href='#aqZzAjhns3j'>with-uml-frame-fragment マクロ</a>を使ってアクセスできます。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　各種の UML ダイアグラムで使用されるフレームを描画します。スタイルを統一したい場合、<a class='autolink' href='#bKkNt5lQdCz'>with-uml-frame-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#1cJtoPoE2w0'>uml-frame</a></li>
<li><a class='autolink' href='#aqZzAjhns3j'>with-uml-frame-fragment マクロ</a></li>
<li><a class='autolink' href='#bKkNt5lQdCz'>with-uml-frame-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='j26H32Vq33s'></a>14.1.97 macro uml-generalization</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-generalization</span> from to <span style='color:navy;'>&key</span> stereotype keyword name style spacing filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>from</code> ---- 接続元となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>to</code> ---- 接続先となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>name</code> ---- 汎化関係に名前をつける場合、<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。</li>
<li><code>style</code> ---- 接続線の引き方を指定します。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>spacing</code> ---- 2 回以上折れ曲がる接続線における「自由な線分」の位置を調整するためのパラメータです。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#khgkJB6xK95'>クラス図</a>を始めとする各種の UML ダイアグラムにおける汎化関係を描画します。スタイルを統一したい場合、<a class='autolink' href='#9voMgsjpww9'>with-uml-generalization-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#khgkJB6xK95'>クラス図</a></li>
<li><a href='#i8NSsns8du9'>uml-generalization</a></li>
<li><a class='autolink' href='#9voMgsjpww9'>with-uml-generalization-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='00gSBM6e17a'></a>14.1.98 macro uml-interface</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-interface</span> position name <span style='color:navy;'>&key</span> pivot fill stroke link filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>name</code> ---- インターフェース名を<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。明示する必要が無い場合、 <code>nil</code> を指定してください。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#khgkJB6xK95'>クラス図</a>などで使用されるインターフェースを描画します。スタイルを統一したい場合、<a class='autolink' href='#ilshLKYJM4Y'>with-uml-interface-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#khgkJB6xK95'>クラス図</a></li>
<li><a href='#7DqwJ3CtaoY'>uml-interface</a></li>
<li><a href='#iND5crw5iJu'>uml-interface-request</a></li>
<li><a class='autolink' href='#ilshLKYJM4Y'>with-uml-interface-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='gOnL4iRiMam'></a>14.1.99 macro uml-interface-request</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-interface-request</span> from to <span style='color:navy;'>&key</span> arrow-p name style spacing stroke filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>from</code> ---- インターフェースを要求する側の図形要素の ID をキーワードで指定します。任意の座標を指定することも可能です。</li>
<li><code>to</code> ---- 要求されるインターフェースの ID をキーワードで指定します。任意の座標を指定することも可能です。</li>
<li><code>arrow-p</code> ---- 描画されるソケットから対象のインターフェースに依存関係の矢印を描画するか否かを真偽値で指定します。省略した場合のデフォルト値は nil です。</li>
<li><code>name</code> ---- 要求するインターフェースの名前を<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。インターフェース側で明示してある場合は指定する必要はありません。</li>
<li><code>style</code> ---- 接続線のスタイルを指定します。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>spacing</code> ---- 接続線が折れ曲がる場合の調整を指定します。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>stroke</code> ---- 線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#khgkJB6xK95'>クラス図</a>などで使用されるインターフェース要求を描画します。 <code>to</code> には <a class='autolink' href='#7DqwJ3CtaoY'>uml-interface</a> で描画されたインターフェースの ID を指定することが想定されています。スタイルを統一したい場合、<a class='autolink' href='#cyCw9NM4rtX'>with-uml-interface-request-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#khgkJB6xK95'>クラス図</a></li>
<li><a href='#7DqwJ3CtaoY'>uml-interface</a></li>
<li><a href='#iND5crw5iJu'>uml-interface-request</a></li>
<li><a class='autolink' href='#cyCw9NM4rtX'>with-uml-interface-request-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　このマクロは２種類の使い方が想定されています。ひとつは <a class='autolink' href='#7DqwJ3CtaoY'>uml-interface</a> によるインターフェースアイコンに接続する方法で、この場合は <code>to</code> パラメータにインターフェースの ID をキーワードで指定します。この場合、名前はインターフェース側で明示してあることが想定されるため、 <code>name</code> パラメータは無視されます。</p>
<p>　もうひとつはソケットを単独で表記する方法で、この場合は <code>to</code> パラメータにソケットを描画する位置を座標値で指定します。この場合、依存関係の矢印を使う意味は無いため、 <code>arrow-p</code> は無視されます。</p>
<p>　　</p>
<h4><a name='bmxOutyzIGv'></a>14.1.100 macro uml-join</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-join</span> position direction <span style='color:navy;'>&key</span> pivot spec width length fill link filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>direction</code> ---- 向きを <code>:h</code> か <code>:v</code> で指定します。横方向に流れるフローで使用する場合は <code>:h</code> 、縦方向なら <code>:v</code> です。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>spec</code> ---- ジョイン仕様の指定をする場合、その<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。指定方法は <a href='#lpCVEZ9kMoP'>12.11  節</a>を参照してください。</li>
<li><code>width</code> ---- 幅を数値で指定します。省略した場合のデフォルト値は 10 です。</li>
<li><code>length</code> ---- 長さを数値で指定します。省略した場合のデフォルト値は 40 です。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるジョインを描画します。スタイルを統一したい場合、<a class='autolink' href='#aT9JaFCRs0a'>with-uml-fork-join-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#dI34u24Hxh3'>uml-fork</a></li>
<li><a href='#eTHeBBfGtFF'>uml-join</a></li>
<li><a class='autolink' href='#aT9JaFCRs0a'>with-uml-fork-join-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='jFepxnqBIdp'></a>14.1.101 macro uml-merge</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-merge</span> position <span style='color:navy;'>&key</span> pivot width height font fill stroke link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるマージを描画します。スタイルを統一したい場合、<a class='autolink' href='#izhz8eDjPe0'>with-uml-decision-merge-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#4gZkeXtP8bm'>uml-decision</a></li>
<li><a href='#ikpYK2ZSZov'>uml-merge</a></li>
<li><a class='autolink' href='#izhz8eDjPe0'>with-uml-decision-merge-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='hMkh04dArCc'></a>14.1.102 macro uml-node</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-node</span> position name <span style='color:navy;'>&key</span> pivot stereotype keyword width height depth margin font fill1 fill2 stroke link layer id contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>name</code> ---- ノードの名前を文字列で指定します。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>depth</code> ---- 上面および側面の大きさを明示的に指定したい場合に数値で指定します。</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>描画における「余白」のサイズです。省略した場合のデフォルト値は 5 です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill1</code> ---- 前面内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>fill2</code> ---- 側面・上面部分の内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。 <code>:contents t</code> とすることも可能です。詳細は後述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#6DAfYJjISDb'>配置図</a>などにおけるノードを描画します。スタイルを統一したい場合、<a class='autolink' href='#8ofUYOHf2dy'>with-uml-node-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#6DAfYJjISDb'>配置図</a></li>
<li><a class='autolink' href='#hMkh04dArCc'>uml-node マクロ</a></li>
<li><a class='autolink' href='#8ofUYOHf2dy'>with-uml-node-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<ul>
<li><a class='autolink' href='#jOvc70hxXQE'>uml-node</a> では <code>:contents</code> パラメータを指定した場合、 <code>name</code> で指定された<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を（中央でなく）上部に描画します。しかし、（ <code>:contents</code> パラメータでなく）<a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>を使う場合、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>は中央に描画されてしまいます。これを避けるためには、 <code>:contents t</code> を指定してください。これは<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を上端付近に描画させる効果だけを持ちます。</li>
</ul>
<p>　　</p>
<h4><a name='hAV2OPdOjGW'></a>14.1.103 macro uml-note</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-note</span> position width height text <span style='color:navy;'>&key</span> pivot stereotype keyword targets margin crease font fill stroke link layer filter id contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を数値で指定します。</li>
<li><code>height</code> ---- 高さを数値で指定します。</li>
<li><code>text</code> ---- 内部に配置する<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を指定します。改行を含む複数行の文字列が使用できます。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>targets</code> ---- 点線で接続する対象を指定します。対象はその ID をキーワードシンボルで指定するか、接続点の具体的な座標値です。対象が単一の場合はそのまま指定可能しますが、複数の対象に（複数の点線で）接続する場合、リストにして指定してください。</li>
<li><code>margin</code> ---- 余白の大きさを指定します。省略した場合のデフォルト値は10です。</li>
<li><code>crease</code> ---- 右上部分の折り返しの大きさを変更したい場合、その大きさを数値で指定します。省略した場合のデフォルト値は20です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　各種の UML ダイアグラムで使用されるノートを描画します。スタイルを統一したい場合、<a class='autolink' href='#bKpfdfxlm28'>with-uml-note-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#jFViCKeUWqC'>uml-note</a></li>
<li><a class='autolink' href='#bKpfdfxlm28'>with-uml-note-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　ノートから <code>targets</code> に引かれる点線は、 <code>stroke</code> で指定した<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>の <code>dasharray</code> を差し替えたものが使用されます。これはデフォルトで <code>'(3 3)</code> ですが、<a class='autolink' href='#hAV2OPdOjGW'>uml-note マクロ</a>ではこれを個別に指定することはできません。 <code>dasharray</code> を変更したい場合、<a class='autolink' href='#bKpfdfxlm28'>with-uml-note-options マクロ</a>を使用してください。</p>
<p>　　</p>
<h4><a name='6744Q7c1KZQ'></a>14.1.104 macro uml-package</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-package</span> position name <span style='color:navy;'>&key</span> pivot stereotype keyword width height font fill stroke margin link layer filter id contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>name</code> ---- アクションの名前を文字列で指定します。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の余白を指定します。幅や高さを明示的に指定した場合は無視されます。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。 <code>:contents t</code> とすることも可能です。詳細は後述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML パッケージなどにおけるパッケージを描画します。スタイルを統一したい場合、<a class='autolink' href='#5W98YlueCaH'>with-uml-package-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#la7Xa1OTF3W'>パッケージ図</a></li>
<li><a class='autolink' href='#6744Q7c1KZQ'>uml-package マクロ</a></li>
<li><a class='autolink' href='#5W98YlueCaH'>with-uml-package-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<ul>
<li><a class='autolink' href='#algAxSoZB1Z'>uml-package</a> では <code>:contents</code> パラメータを指定した場合、 <code>name</code> で指定された<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を（中央でなく）上部に描画します。しかし、（ <code>:contents</code> パラメータでなく）<a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>を使う場合、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>は中央に描画されてしまいます。これを避けるためには、 <code>:contents t</code> を指定してください。これは<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を上端付近に描画させる効果だけを持ちます。</li>
</ul>
<p>　　</p>
<h4><a name='cPEgYZoifRN'></a>14.1.105 macro uml-partition</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-partition</span> position rows cols <span style='color:navy;'>&key</span> pivot lines header fills stroke font layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>rows</code> ---- 各レーンの名前と高さの情報をリストで与えるか、または全体の高さを数値で与えます。詳細は <a href='#hDY1LBkmvKv'>13.8.33  節</a>を参照してください。</li>
<li><code>cols</code> ---- 各レーンの名前と幅の情報をリストで与えるか、または全体の幅を数値で与えます。詳細は <a href='#hDY1LBkmvKv'>13.8.33  節</a>を参照してください。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>lines</code> ---- 枠線の描画の仕方を <code>:min :mid :max</code> のいずれかで指定します。それぞれのサンプルは <a href='#52lWmm72SQc'>Figure.13-43</a> を参照してください。</li>
<li><code>header</code> ---- ヘッダ部分の幅または高さを数値で指定します。省略した場合のデフォルト値は 30 です。</li>
<li><code>fills</code> ---- パーティションを<a class='autolink' href='#g6xjP526KX7'>テーブル</a>として見た場合の、各セルの背景色を <a class='autolink' href='#hqebcMypbfk'>table マクロ</a>の <code>fills</code> パラメータの要領で指定します。詳細は <a href='#hqebcMypbfk'>14.1.76  節</a>を参照してください。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるパーティションを描画します。各レーン内部の描画には<a class='autolink' href='#gdVz9m0bWf1'>with-uml-partition-lane マクロ</a>を使用してください。また、スタイルを統一したい場合、<a class='autolink' href='#kqRLmxG6cu2'>with-uml-action-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#hDY1LBkmvKv'>uml-partition</a></li>
<li><a class='autolink' href='#gdVz9m0bWf1'>with-uml-partition-lane マクロ</a></li>
<li><a class='autolink' href='#3188U3eHIfD'>with-uml-partition-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='3QBsYVXqy6S'></a>14.1.106 macro uml-pin</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-pin</span> target position name <span style='color:navy;'>&key</span> offset multi size fill stroke font filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>target</code> ---- ピンを追加する対象の ID をキーワードシンボルで指定します。</li>
<li><code>position</code> ---- 対象にポートを追加する位置をキーワードシンボルで指定します。詳細は後述します。</li>
<li><code>name</code> ---- ピンの名前を文字列またはキーワードシンボルで指定します。</li>
<li><code>offset</code> ---- 名前の描画位置を調整するためのオフセット値を <code>(x y)</code> 形式で指定します。</li>
<li><code>multi</code> ---- 拡張領域などに渡すマルチピンを使用する場合は <code>t</code> を指定します。</li>
<li><code>size</code> ---- 描画されるポートのサイズを指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるピンを描画します。スタイルを統一したい場合、<a class='autolink' href='#iKNb1fFHcnJ'>with-uml-pin-options マクロ</a>を使うことができます。</p>
<p>　<code>position</code> は<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>における接続位置の指定と同じ要領で <code>:L</code> などと指定します（<a href='#eFhVs4WwYUG'>4.1  節</a>参照）。<a class='autolink' href='#axhW9kmgXg3'>uml-pin</a> においてはさらに <code>'(:L1 5)</code> などとして微調整が可能です。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#axhW9kmgXg3'>uml-pin</a></li>
<li><a class='autolink' href='#iKNb1fFHcnJ'>with-uml-pin-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='ddK61IWocJ6'></a>14.1.107 macro uml-port</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-port</span> position <span style='color:navy;'>&key</span> name size fill stroke layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>name</code> ---- ポート名を文字列またはキーワードシンボルで指定します。</li>
<li><code>size</code> ---- 描画されるポートのサイズを指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#evUs70Itwyp'>コンポーネント図</a>などにおけるポートを描画します。スタイルを統一したい場合、<a class='autolink' href='#4gpOhhEbKrc'>with-uml-port-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#evUs70Itwyp'>コンポーネント図</a></li>
<li><a href='#froC5uEo6hu'>uml-port</a></li>
<li><a class='autolink' href='#4gpOhhEbKrc'>with-uml-port-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='1fseuHWNLXr'></a>14.1.108 macro uml-realization</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-realization</span> from to <span style='color:navy;'>&key</span> stereotype keyword name style spacing filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>from</code> ---- 接続元となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>to</code> ---- 接続先となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>name</code> ---- 実現関係に名前をつける場合、<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。</li>
<li><code>style</code> ---- 接続線の引き方を指定します。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>spacing</code> ---- 2 回以上折れ曲がる接続線における「自由な線分」の位置を調整するためのパラメータです。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#khgkJB6xK95'>クラス図</a>を始めとする各種の UML ダイアグラムにおける実現関係を描画します。スタイルを統一したい場合、<a class='autolink' href='#dhb9h5mcHOW'>with-uml-realization-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#khgkJB6xK95'>クラス図</a></li>
<li><a href='#bn5BLn6Qb3Y'>uml-realization</a></li>
<li><a class='autolink' href='#dhb9h5mcHOW'>with-uml-realization-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='cAZB6pzi0PF'></a>14.1.109 macro uml-signal</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-signal</span> position type text <span style='color:navy;'>&key</span> pivot stereotype keyword width height direction depth font fill stroke margin link filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>type</code> ---- シグナルの送信か受信かに応じて <code>:send</code> または <code>:receive</code> のいずれかを指定します。</li>
<li><code>text</code> ---- 送信／受信アクションの名前を文字列で指定します。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>direction</code> ---- 送信／受信を示す ＜ や Σ を描画する方向を <code>:left</code> または <code>:right</code> で指定します。</li>
<li><code>depth</code> ---- 送信／受信を示す ＜ や Σ の大きさを数値で指定します。デフォルト値は 15 です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の余白を指定します。幅や高さを明示的に指定した場合は無視されます。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるシグナルの送信／受信アクションを描画します。スタイルを統一したい場合、<a class='autolink' href='#kTp6nsb6qSq'>with-uml-signal-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#9eWb5bnq5W3'>uml-signal</a></li>
<li><a class='autolink' href='#kTp6nsb6qSq'>with-uml-signal-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='5YyIF89m1Hw'></a>14.1.110 macro uml-state</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-state</span> position text <span style='color:navy;'>&key</span> pivot stereotype keyword width height activities margin corner-r font fill stroke link layer filter id contents</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>text</code> ---- 状態名を文字列で指定します。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>activities</code> ---- 状態にアクティビティの一覧を含める場合、遷移指定のリストを記述します。このリストの個々の要素は、<a class='autolink' href='#8h222SLEnVx'>uml-transition</a> における <code>:spec</code> パラメータに指定するものと同じ形式です。<a href='#hlb10Xbiaq1'>14.1.115  節</a> を参照してください。</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>描画における「余白」のサイズです。省略した場合のデフォルト値は 5 です。</li>
<li><code>corner-r</code> ---- 角の丸みの半径を数値で指定します。省略した場合のデフォルト値は 6 です。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。 <code>:contents t</code> とすることも可能です。詳細は後述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>における状態を描画します。スタイルを統一したい場合、<a class='autolink' href='#gm96ZIuYlAQ'>with-uml-state-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#kYsauEETY6n'>状態マシン図</a></li>
<li><a href='#a7K2CBytplo'>uml-state</a></li>
<li><a class='autolink' href='#gm96ZIuYlAQ'>with-uml-state-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<ul>
<li><a class='autolink' href='#a7K2CBytplo'>uml-state</a> では <code>:contents</code> パラメータを指定した場合、 <code>tesxt</code> で指定された<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を（中央でなく）上部に描画します。しかし、（ <code>:contents</code> パラメータでなく）<a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>を使う場合、<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>は中央に描画されてしまいます。これを避けるためには、 <code>:contents t</code> を指定してください。これは<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を上端付近に描画させる効果だけを持ちます。</li>
</ul>
<p>　　</p>
<h4><a name='gcmbjMkYiQg'></a>14.1.111 macro uml-state-begin</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-state-begin</span> position <span style='color:navy;'>&key</span> radius pivot fill link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>radius</code> ---- 開始状態の半径を数値で指定します。省略した場合のデフォルト値は 10 です。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>fill</code> ---- 円を塗り潰す色を指定します。省略した場合のデフォルト値は <code>:black</code> です。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>における開始状態を描画します。スタイルを統一したい場合、<a class='autolink' href='#dhjnYKCmHBq'>with-uml-state-begin-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#kYsauEETY6n'>状態マシン図</a></li>
<li><a href='#4Fe1V46854v'>uml-state-begin</a></li>
<li><a class='autolink' href='#dhjnYKCmHBq'>with-uml-state-begin-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='1qryRXVv4ZR'></a>14.1.112 macro uml-state-end</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-state-end</span> position <span style='color:navy;'>&key</span> pivot radius ratio fill stroke link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>radius</code> ---- 終了状態の半径を数値で指定します。省略した場合のデフォルト値は 15 です。</li>
<li><code>ratio</code> ---- 内部の（塗り潰される）円の半径を <code>radius</code> に対する比で指定します。省略した場合のデフォルト値は 0.6 です。</li>
<li><code>fill</code> ---- 外側の円と内側の円の間を塗り潰す色を指定します。省略した場合のデフォルト値は <code>:white</code> です。</li>
<li><code>stroke</code> ---- 外側の円を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。内側の（塗り潰される）円の色としても使用されます。省略した場合のデフォルト値は <code>:black</code> です。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>における終了状態を描画します。スタイルを統一したい場合、<a class='autolink' href='#egMWtW3cQM9'>with-uml-state-end-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#kYsauEETY6n'>状態マシン図</a></li>
<li><a href='#6dfRecys5K7'>uml-state-end</a></li>
<li><a class='autolink' href='#egMWtW3cQM9'>with-uml-state-end-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='6IXmPCuJmAq'></a>14.1.113 macro uml-state-history</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-state-history</span> position <span style='color:navy;'>&key</span> pivot radius fill stroke link layer filter id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li class='syntax'><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li class='syntax'><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li class='syntax'><code>radius</code> ---- 半径を数値で指定します。省略した場合のデフォルト値は 15 です。</li>
<li class='syntax'><code>fill</code> ---- 内側の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。省略した場合のデフォルト値は <code>:white</code> です。</li>
<li class='syntax'><code>stroke</code> ---- 線を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。省略した場合のデフォルト値は <code>:black</code> です。</li>
<li class='syntax'><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li class='syntax'><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li class='syntax'><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li class='syntax'><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>におけるヒストリアイコンを描画します。スタイルを統一したい場合、<a class='autolink' href='#btmvKFXWMnJ'>with-uml-state-history-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#kYsauEETY6n'>状態マシン図</a></li>
<li><a href='#dZcuFEPgREn'>uml-state-history</a></li>
<li><a class='autolink' href='#btmvKFXWMnJ'>with-uml-state-history-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='4maSSQh7iVN'></a>14.1.114 macro uml-time-event</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-time-event</span> position <span style='color:navy;'>&key</span> label pivot width height fill stroke link filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>label</code> ---- イベント名を<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>形式で指定します。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>におけるタイムイベントを描画します。スタイルを統一したい場合、<a class='autolink' href='#6F3g2ZSN0ck'>with-uml-time-event-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li><a href='#dkYATTKFF3X'>uml-time-event</a></li>
<li><a class='autolink' href='#6F3g2ZSN0ck'>with-uml-time-event-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='hlb10Xbiaq1'></a>14.1.115 macro uml-transition</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-transition</span> from to <span style='color:navy;'>&key</span> stereotype keyword spec style spacing filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>from</code> ---- 接続元となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>to</code> ---- 接続先となる要素の ID をキーワードで指定します。point 値も指定できます。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>spec</code> ---- 遷移にトリガーやガード条件、アクションを明示する場合に指定します。詳細は後述します。</li>
<li><code>style</code> ---- 接続線の引き方を指定します。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>spacing</code> ---- 2 回以上折れ曲がる接続線における「自由な線分」の位置を調整するためのパラメータです。詳細は <a href='#eFhVs4WwYUG'>4.1  節</a>を参照してください。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#kYsauEETY6n'>状態マシン図</a>における遷移を描画します。スタイルを統一したい場合、<a class='autolink' href='#exkjsBfuS1B'>with-uml-transition-options マクロ</a>を使うことができます。</p>
<p>　<code>spec</code> に指定する遷移仕様は、 <code>:spec '(:trigger "event" :guard "v = 666" :action "foo()")</code> といった要領で指定します。リスト内に名前付きパラメータを並べる形式で、以下のパラメータが指定できます。</p>
<ul>
<li class='syntax'><span style='color:navy;'>&key</span> trigger guard action offset font</li>
</ul>
<p>　<code>:trigger :guard :action</code> はそれぞれトリガーとガード条件、アクションで、それぞれ文字列で指定します。これによって、先ほどの例で言えば <code>event[v = 666]/foo()</code> といった仕様が表示されることになります。 <code>:offset</code> は表示位置の調整を <code>(x y)</code> 形式で指定します。 <code>:font</code> は<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の指定が必要な場合に使用します。<a class='autolink' href='#3kZ9FkounyK'>フォント</a>の指定を省略した場合、<a class='autolink' href='#exkjsBfuS1B'>with-uml-transition-options マクロ</a>で指定されている<a class='autolink' href='#3kZ9FkounyK'>フォント</a>が使用されます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#kYsauEETY6n'>状態マシン図</a></li>
<li><a href='#8h222SLEnVx'>uml-transition</a></li>
<li><a class='autolink' href='#exkjsBfuS1B'>with-uml-transition-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='1nYTXUXcD8L'></a>14.1.116 macro uml-usecase</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>uml-usecase</span> position text <span style='color:navy;'>&key</span> pivot stereotype keyword width height font fill stroke margin link filter layer id</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>text</code> ---- ユースケースの<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を指定します。改行を含むことで複数行を記述できます。</li>
<li><code>pivot</code> ---- <code>position</code> で指定した基準点が図形要素のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>stereotype</code> ---- ステレオタイプを明示する場合はステレオタイプ情報を指定します。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>keyword</code> ---- キーワードを明示する場合はステレオタイプ情報を指定します。 <code>stereotype</code> が指定されている場合は無視されます。詳細は <a href='#dd6qYwERoK0'>13.8.43  節</a> を参照してください。</li>
<li><code>width</code> ---- 幅を自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>height</code> ---- 高さを自動決定せず、明示的に指定したい場合に数値で指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します</li>
<li><code>margin</code> ---- <a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>の周囲に確保する余白を数値で指定します。デフォルト値は 20 です。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　UML <a class='autolink' href='#e57rLpXY8ah'>ユースケース図</a>におけるユースケースを描画します。スタイルを統一したい場合、<a class='autolink' href='#kqRLmxG6cu2'>with-uml-action-options マクロ</a>を使うことができます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#e57rLpXY8ah'>ユースケース図</a></li>
<li><a href='#44mEhv2hQcS'>uml-usecase</a></li>
<li><a class='autolink' href='#7BxCmPuBmA9'>with-uml-usecase-options マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='3ABOLb3a4Yl'></a>14.1.117 macro use</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>use</span> ref position <span style='color:navy;'>&key</span> pivot link rotate layer id contents debug</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>ref</code> ---- 再使用する定義の ID をキーワードシンボルで指定します。</li>
<li><code>position</code> ---- 描画の基準点を指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>pivot</code> ---- 基準点が描画矩形のどこにくるように描画するかを指定します。詳細は「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」を参照してください。</li>
<li><code>link</code> ---- <a class='autolink' href='#fbLcMRTVXac'>リンク</a>にする場合、<a class='autolink' href='#fbLcMRTVXac'>リンク</a>先を指定します。</li>
<li><code>rotate</code> ---- 全体を<a class='autolink' href='#heEi5Lc5BX9'>回転</a>させたい場合に、その角度を指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します</li>
<li><code>id</code> ---- ID を付与したい場合、その名前をキーワードシンボルで指定します</li>
<li><code>contents</code> ---- 内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、その内容を指定します。</li>
<li><code>debug</code> ---- <a class='autolink' href='#2tO36YvJCgK'>補助線</a>を描画する場合、 <code>t</code> または色名を指定します</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#5hmH4Z1JfiN'>defgroup マクロ</a>で作成した定義 <code>ref</code> を使用します。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#hwRhCz9Gn9t'>9  定義と再使用</a></li>
<li><a class='autolink' href='#5hmH4Z1JfiN'>defgroup マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='5wbX4fvnNyO'></a>14.1.118 macro with-balloon-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-balloon-options</span> (<span style='color:navy;'>&key</span> round align valign margin font fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　balloon  マクロで描画される<a class='autolink' href='#5IHcv4bxjLU'>吹き出し</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#cpOh7beESsS'>balloon マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#5IHcv4bxjLU'>吹き出し</a></li>
<li><a class='autolink' href='#cpOh7beESsS'>balloon マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='2UcFIIIJXWw'></a>14.1.119 macro with-block-arrow-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-block-arrow-options</span> (<span style='color:navy;'>&key</span> length size margin fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#fPXJtSPEV1e'>block-arrow1 マクロ</a>および <a class='autolink' href='#lwcwjW0h2Fi'>block-arrow2 マクロ</a>で描画される<a class='autolink' href='#49KKf97828b'>ブロック矢印</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#fPXJtSPEV1e'>block-arrow1 マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#49KKf97828b'>ブロック矢印</a></li>
<li><a class='autolink' href='#fPXJtSPEV1e'>block-arrow1 マクロ</a></li>
<li><a class='autolink' href='#lwcwjW0h2Fi'>block-arrow2 マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='fZCUOAFAdSr'></a>14.1.120 macro with-brace-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-brace-options</span> (<span style='color:navy;'>&key</span> font stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#h2iZ4O9D92X'>brace マクロ</a>で描画される<a class='autolink' href='#lBS33hNe32a'>波括弧</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#h2iZ4O9D92X'>brace マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#lBS33hNe32a'>波括弧</a></li>
<li><a class='autolink' href='#h2iZ4O9D92X'>brace マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='juKAz8erPO0'></a>14.1.121 macro with-canvas</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-canvas</span> (sym-center sym-width sym-height) canvas <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>sym-center</code> ---- <code>canvas</code> の center 値を参照するための変数名を指定します。</li>
<li><code>sym-width</code> ---- <code>canvas</code> の幅を参照するための変数名を指定します。</li>
<li><code>sym-height</code> ---- <code>canvas</code> の高さを参照するための変数名を指定します。</li>
<li><code>canvas</code> ---- 対象の<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>を指定します。</li>
<li><code>body</code> ---- 実行するコードを指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>canvas</code> の中心、幅、および高さを変数で直接参照できるかのようなレキシカル環境を確立し、コード <code>body</code> を実行します。コード <code>body</code> 内では、 <code>sym-center sym-width sym-height</code> それぞれで指定した名前の変数で値の取得が可能です。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong></p>
<p>　<a class='autolink' href='#juKAz8erPO0'>with-canvas マクロ</a>は非推奨となりました。今後は <a class='autolink' href='#ibXCLOBvHnZ'>with-current-canvas マクロ</a>を使用してください。</p>
<p>　　</p>
<h4><a name='2GafnTjbeAv'></a>14.1.122 macro with-clipping-current-canvas</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-clipping-current-canvas</span> <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>body</code> ---- <a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>の対象となる描画コードを記述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　現在の<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>を使って<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>を行ないます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a></li>
<li><a class='autolink' href='#gOfMxQSeeNJ'>with-clipping-use マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='gOfMxQSeeNJ'></a>14.1.123 macro with-clipping-use</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-clipping-use</span> (id) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>id</code> ---- <a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a><a class='autolink' href='#4qgt62QVDZl'>パス</a>として扱う既出の図形要素の ID をキーワードシンボルで指定します。</li>
<li><code>body</code> ---- <a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>の対象となる描画コードを記述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　既出の図形要素の ID を指定し、その描画<a class='autolink' href='#4qgt62QVDZl'>パス</a>を使って<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>を行ないます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a></li>
<li><a class='autolink' href='#2GafnTjbeAv'>with-clipping-current-canvas マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　<code>id</code> で指定する図形要素の ID は、その図形要素の記述において明示的に指定されていなければなりません。たとえば<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>などでは <code>$1.id</code> といった記述で ID が明示的に指定されていない図形要素を指定できますが、 <a class='autolink' href='#gOfMxQSeeNJ'>with-clipping-use マクロ</a>ではそれはできません<sup><a name='footnote_ref20' href='#footnote20'>20</a></sup>。</p>
<p>　　</p>
<h4><a name='cUyjBymyiAi'></a>14.1.124 macro with-connector-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-connector-options</span> (<span style='color:navy;'>&key</span> style spacing stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#dUJMfsL520O'>connect マクロ</a>で描画される<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#dUJMfsL520O'>connect マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a></li>
<li>connector マクロ</li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='hUUF8VmJZqf'></a>14.1.125 macro with-cross-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-cross-options</span> (<span style='color:navy;'>&key</span> fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#3B5moS1yMrX'>cross マクロ</a>で描画される<a class='autolink' href='#4cZRWkwhYNO'>十字</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#3B5moS1yMrX'>cross マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#4cZRWkwhYNO'>十字</a></li>
<li><a class='autolink' href='#3B5moS1yMrX'>cross マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='gj4u2NRMqLq'></a>14.1.126 macro with-cube-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-cube-options</span> (<span style='color:navy;'>&key</span> depth align valign margin font fill fill2 stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#eBspaEdxwbc'>cube マクロ</a>で描画される<a class='autolink' href='#hja1QJC0Ivb'>キューブ</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#eBspaEdxwbc'>cube マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#hja1QJC0Ivb'>キューブ</a></li>
<li><a class='autolink' href='#eBspaEdxwbc'>cube マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='ibXCLOBvHnZ'></a>14.1.127 macro with-current-canvas</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-current-canvas</span> (<span style='color:navy;'>&rest</span> vars) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>vars</code> ---- <code>canvas</code> における各種の値を参照するための変数を指定します。</li>
<li><code>body</code> ---- 実行するコードを指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　現在の<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>の中心、幅、高さなど各種の値を直接参照できるかのようなレキシカル環境を確立し、コード <code>body</code> を実行します。使用例は <a href='#kgs1vf3AbTN'>7  章</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#kgs1vf3AbTN'>7  サブキャンバス</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='0EzzPQAHjpS'></a>14.1.128 macro with-cylinder-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-cylinder-options</span> (<span style='color:navy;'>&key</span> depth align valign margin font fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#0kdw9fTRleF'>cylinder マクロ</a>で描画される<a class='autolink' href='#5ME1Xv0K4sM'>円柱</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#0kdw9fTRleF'>cylinder マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#5ME1Xv0K4sM'>円柱</a></li>
<li><a class='autolink' href='#0kdw9fTRleF'>cylinder マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='7UW0pe7NluY'></a>14.1.129 macro with-document-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-document-options</span> (<span style='color:navy;'>&key</span> align valign margin font fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#8otKibFY5LC'>document マクロ</a>で描画される<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#8otKibFY5LC'>document マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#jRjILbbJATV'>ドキュメント</a></li>
<li><a class='autolink' href='#8otKibFY5LC'>document マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='i3AN3FOExuU'></a>14.1.130 macro with-endmark-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-endmark-options</span> (<span style='color:navy;'>&key</span> type size fill end1 end2) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#9MB3lirlqL9'>終端マーク</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a href='#9MB3lirlqL9'>12.10  節</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#9MB3lirlqL9'>12.10  終端マーク</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='2N1LVsx5TAj'></a>14.1.131 macro with-explosion-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-explosion-options</span> (<span style='color:navy;'>&key</span> font fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#b1mSpvnCg7y'>explosion1 マクロ</a>および <a class='autolink' href='#gIBWNJYTozi'>explosion2 マクロ</a>で描画される<a class='autolink' href='#hjZ26isLw42'>爆発</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#b1mSpvnCg7y'>explosion1 マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#hjZ26isLw42'>爆発</a></li>
<li><a class='autolink' href='#b1mSpvnCg7y'>explosion1 マクロ</a></li>
<li><a class='autolink' href='#gIBWNJYTozi'>explosion2 マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='hbg0Di1qYwi'></a>14.1.132 macro with-folder-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-folder-options</span> (<span style='color:navy;'>&key</span> tab-width tab-height align valign margin font fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#jYqT4ybxQgU'>folder マクロ</a>で描画される<a class='autolink' href='#5ZT843xJDiq'>フォルダ</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#jYqT4ybxQgU'>folder マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#5ZT843xJDiq'>フォルダ</a></li>
<li><a class='autolink' href='#jYqT4ybxQgU'>folder マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='3s1ciXCdtTy'></a>14.1.133 macro with-label-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-label-options</span> (<span style='color:navy;'>&key</span> position offset font) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a href='#lpCVEZ9kMoP'>12.11  節</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#lpCVEZ9kMoP'>12.11  ラベル</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='3Z6ItFChKPn'></a>14.1.134 macro with-memo-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-memo-options</span> (<span style='color:navy;'>&key</span> crease align valign margin font fill fill2 stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#0Bkt6LtbRAO'>memo マクロ</a>で描画される<a class='autolink' href='#0AVJhEKnK1M'>メモ</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#0Bkt6LtbRAO'>memo マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#0AVJhEKnK1M'>メモ</a></li>
<li><a class='autolink' href='#0Bkt6LtbRAO'>memo マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='cTbK0huuMTl'></a>14.1.135 macro with-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-options</span> (<span style='color:navy;'>&key</span> fill stroke font filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>fill</code> ---- 内部の<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>を指定します。</li>
<li><code>stroke</code> ---- 外枠を描画する<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>を指定します。</li>
<li><code>font</code> ---- <a class='autolink' href='#3kZ9FkounyK'>フォント</a>を指定します。</li>
<li><code>filter</code> ---- <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を適用したい場合、その ID をキーワードシンボルで指定します。</li>
<li><code>layer</code> ---- <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>を指定する場合、その ID をキーワードシンボルで指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#4HFjqmTuIU6'>ストローク</a>、<a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a>、<a class='autolink' href='#3kZ9FkounyK'>フォント</a>などのデフォルト設定を変更します。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='aLgBKwLpsap'></a>14.1.136 macro with-paragraph-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-paragraph-options</span> (<span style='color:navy;'>&key</span> align valign font layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#cVVbsretg1q'>paragraph マクロ</a>で描画される<a class='autolink' href='#jRjILbbJATV'>ドキュメント</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#cVVbsretg1q'>paragraph マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#jRjILbbJATV'>ドキュメント</a></li>
<li><a class='autolink' href='#cVVbsretg1q'>paragraph マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='kLuOHuyuzKQ'></a>14.1.137 macro with-person-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-person-options</span> (<span style='color:navy;'>&key</span> fill stroke layer filter) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#jsvIhwcwkMd'>person マクロ</a>で描画される<a class='autolink' href='#03WwbeGq0eH'>人物</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#jsvIhwcwkMd'>person マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#03WwbeGq0eH'>人物</a></li>
<li><a class='autolink' href='#jsvIhwcwkMd'>person マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='lbAdsfqVtbS'></a>14.1.138 macro with-point</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-point</span> (sym-x sym-y) pt <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>sym-x</code> ---- <code>pt</code> の x 値を参照するための変数名を指定します。</li>
<li><code>sym-y</code> ---- <code>pt</code> の y 値を参照するための変数名を指定します。</li>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>body</code> ---- 実行するコードを指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt</code> の x および y の値を変数で直接参照できるかのようなレキシカル環境を確立し、コード <code>body</code> を実行します。コード <code>body</code> 内では、 <code>sym-x sym-y</code> それぞれで指定した名前の変数で値の取得と設定が可能です。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='5cY34BaMQhr'></a>14.1.139 macro with-subcanvas</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-subcanvas</span> (top-left width height <span style='color:navy;'>&key</span> debug) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>top-left</code> ---- 作成する<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>の（現在の<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>から見た）左上の座標を指定します。</li>
<li><code>width</code> ---- 作成する<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>の幅を指定します。</li>
<li><code>height</code> ---- 作成する<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>の高さ指定します。</li>
<li><code>debug</code> ---- <code>T</code> または色名を示すキーワードシンボルを指定すると<a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a>の領域を明示する<a class='autolink' href='#2tO36YvJCgK'>補助線</a>が描画されます。</li>
<li><code>body</code> ---- 作成した<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>内部に描画するコードを指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　任意の位置とサイズで<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>を確立し、その内部に描画を行ないます。既存の図形要素の内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、<a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>を使用してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#kgs1vf3AbTN'>7  サブキャンバス</a></li>
<li><a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='c9lZIyRpbeF'></a>14.1.140 macro with-subcanvas-of</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-subcanvas-of</span> (id) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>id</code> ---- 対象となる図形要素の ID をキーワードシンボルで指定します。</li>
<li><code>body</code> ---- 作成した<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>内部に描画するコードを指定します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　既存の図形要素の内部を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>として、その内部に描画を行ないます。任意の領域を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画をしたい場合、<a class='autolink' href='#5cY34BaMQhr'>with-subcanvas マクロ</a>を使用してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#kgs1vf3AbTN'>7  サブキャンバス</a></li>
<li><a class='autolink' href='#5cY34BaMQhr'>with-subcanvas マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='8rELk1LL2bC'></a>14.1.141 macro with-table-cell</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-table-cell</span> (id r c) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>id</code> ---- 対象となる<a class='autolink' href='#g6xjP526KX7'>テーブル</a>の ID をキーワードシンボルで指定します。</li>
<li><code>r</code> ---- 対象となる<a class='autolink' href='#g6xjP526KX7'>テーブル</a>セルの（０から始まる）行番号を数値で指定します。</li>
<li><code>c</code> ---- 対象となる<a class='autolink' href='#g6xjP526KX7'>テーブル</a>セルの（０から始まる）列番号を数値で指定します。</li>
<li><code>body</code> ---- 対象となる<a class='autolink' href='#g6xjP526KX7'>テーブル</a>セル内で行なう描画コードを記述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#g6xjP526KX7'>テーブル</a>の ID とセルの行・列番号を指定して該当するセル内を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画を行ないます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#3qNm5uHdKTZ'>4.15.1  with-table-cell を使ったセル内描画</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='50lQokEAysO'></a>14.1.142 macro with-table-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-table-options</span> (<span style='color:navy;'>&key</span> font fill stroke layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#hqebcMypbfk'>table マクロ</a>で描画される<a class='autolink' href='#g6xjP526KX7'>テーブル</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#hqebcMypbfk'>table マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#g6xjP526KX7'>テーブル</a></li>
<li><a class='autolink' href='#hqebcMypbfk'>table マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='8n9SABCEJKZ'></a>14.1.143 macro with-table-range</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-table-range</span> (id range) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>id</code> ---- 対象となる<a class='autolink' href='#g6xjP526KX7'>テーブル</a>の ID をキーワードシンボルで指定します。</li>
<li><code>range</code> ---- 対象となる<a class='autolink' href='#g6xjP526KX7'>テーブル</a>内の部分領域をキーワードシンボルで指定します。これは <a class='autolink' href='#hqebcMypbfk'>table マクロ</a>における <code>fills</code> パラメータの指定方法と同様です。</li>
<li><code>body</code> ---- 対象となる<a class='autolink' href='#g6xjP526KX7'>テーブル</a>セル内で行なう描画コードを記述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#g6xjP526KX7'>テーブル</a>の一部の領域を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画を行ないます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#2sVUYL4zgkO'>4.15.2  with-table-range を使った範囲取得</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='5oL7bKJkowz'></a>14.1.144 macro with-textbox-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-textbox-options</span> (<span style='color:navy;'>&key</span> rx ry align valign margin font fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#hmTTSZjUX3S'>textbox マクロ</a>で描画される<a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a>のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#hmTTSZjUX3S'>textbox マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a></li>
<li><a class='autolink' href='#hmTTSZjUX3S'>textbox マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='24jZuSCTwIB'></a>14.1.145 macro with-theme</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-theme</span> (name) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>name</code> ---- 使用する<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>の ID をキーワードシンボルで指定します。</li>
<li><code>body</code> ---- <code>name</code> で指定した<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>を使用して描画を行なうコードを記述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>を指定した描画を行ないます。詳細は <a href='#4z8VHZK3CSo'>11  章</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#4z8VHZK3CSo'>11  テーマ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='kqRLmxG6cu2'></a>14.1.146 macro with-uml-action-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-action-options</span> (<span style='color:navy;'>&key</span> font fill stroke icon width height corner-r margin filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#h5Ic0bvUIs7'>uml-action マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#h5Ic0bvUIs7'>uml-action マクロ</a>を参照してください。</p>
<p>　なお、ここで指定する width および height はデフォルトの最低サイズとして使用されます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#h5Ic0bvUIs7'>uml-action マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='ixy0Rc930O0'></a>14.1.147 macro with-uml-activity-final-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-activity-final-options</span> (<span style='color:navy;'>&key</span> radius ratio fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#fqECxhnnBJh'>uml-activity-final マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#fqECxhnnBJh'>uml-activity-final マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#fqECxhnnBJh'>uml-activity-final マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='fiKYEk7l3vl'></a>14.1.148 macro with-uml-activity-start-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-activity-start-options</span> (<span style='color:navy;'>&key</span> radius fill filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#ff3fz3G29Ce'>uml-activity-start マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#ff3fz3G29Ce'>uml-activity-start マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#ff3fz3G29Ce'>uml-activity-start マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='6E6RgdGy314'></a>14.1.149 macro with-uml-actor-options</h4>
<p><strong>Syntax:</strong>t* <span style='font-weight:bold;'>with-uml-actor-options</span> (<span style='color:navy;'>&key</span> fill stroke size width-ratio head-ratio shoulder-position thigh-position filter layer) <span style='color:navy;'>&body</span> body</p>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#0jrm0BGl279'>uml-actor マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#0jrm0BGl279'>uml-actor マクロ</a>を参照してください。<a class='autolink' href='#0jrm0BGl279'>uml-actor マクロ</a>に現れないパラメータについては後述します。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#0jrm0BGl279'>uml-actor マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　<a class='autolink' href='#0jrm0BGl279'>uml-actor マクロ</a>のパラメータに対応しないものとして、以下があります。これらはアクターのアイコン形状を制御するものです。</p>
<ul>
<li><code>width-ratio</code> : <code>size</code> で指定するサイズに対して描画される人型の幅を決定するための係数です。デフォルト値は 0.620 です。</li>
<li><code>head-ratio</code> : 頭部の円の大きさを高さに対する比で決定するための係数です。デフォルト値は 0.4 です。</li>
<li><code>shoulder-position</code> : 「肩」の位置（つまり横棒で描画される腕の高さ）を決定するための係数です。デフォルト値は 0.5 です。</li>
<li><code>thigh-position</code> : 「腰」の位置（つまり斜めの棒で描画される二本の脚が胴体から分岐する位置）を決定するための係数です。デフォルト値は 0.7 です。</li>
</ul>
<p>　　</p>
<h4><a name='g2Q9l90IWR5'></a>14.1.150 macro with-uml-aggregation-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-aggregation-options</span> (<span style='color:navy;'>&key</span> stroke arrow-size font filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#ie20bBGavpf'>uml-aggregation マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#ie20bBGavpf'>uml-aggregation マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#ie20bBGavpf'>uml-aggregation マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='lbGYWLxwRmP'></a>14.1.151 macro with-uml-artifact-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-artifact-options</span> (<span style='color:navy;'>&key</span> font fill stroke icon width height margin filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#29j3NypNjE1'>uml-artifact マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#29j3NypNjE1'>uml-artifact マクロ</a>を参照してください。<a class='autolink' href='#29j3NypNjE1'>uml-artifact マクロ</a>に現れないパラメータについては後述します。</p>
<p>　なお、ここで指定する width および height はデフォルトの最低サイズとして使用されます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#29j3NypNjE1'>uml-artifact マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='76cvwodLVQW'></a>14.1.152 macro with-uml-association-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-association-options</span> (<span style='color:navy;'>&key</span> stroke arrow-size font filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#c2inmUVDBj2'>uml-association マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#c2inmUVDBj2'>uml-association マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#c2inmUVDBj2'>uml-association マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='8POSSKTKzFu'></a>14.1.153 macro with-uml-class-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-class-options</span> (<span style='color:navy;'>&key</span> font fill stroke filter layer width height name-margin margin draw-emptybox) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#bepvr4okFYe'>uml-class マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#bepvr4okFYe'>uml-class マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#bepvr4okFYe'>uml-class マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='40gYpXP3NCx'></a>14.1.154 macro with-uml-component-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-component-options</span> (<span style='color:navy;'>&key</span> font fill stroke icon width height margin filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#cC1mrTiDRg0'>uml-component マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#cC1mrTiDRg0'>uml-component マクロ</a>を参照してください。<a class='autolink' href='#cC1mrTiDRg0'>uml-component マクロ</a>に現れないパラメータについては後述します。</p>
<p>　なお、ここで指定する width および height はデフォルトの最低サイズとして使用されます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#cC1mrTiDRg0'>uml-component マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='8xVEIr1yYBY'></a>14.1.155 macro with-uml-composition-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-composition-options</span> (<span style='color:navy;'>&key</span> stroke arrow-size font filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#8Xj1ijpUjgr'>uml-composition マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#8Xj1ijpUjgr'>uml-composition マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#8Xj1ijpUjgr'>uml-composition マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='cjmXVBgVQzD'></a>14.1.156 macro with-uml-connector-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-connector-options</span> (<span style='color:navy;'>&key</span> font fill stroke size filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#f2NYv8Z2P8m'>uml-connector マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#f2NYv8Z2P8m'>uml-connector マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#f2NYv8Z2P8m'>uml-connector マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='izhz8eDjPe0'></a>14.1.157 macro with-uml-decision-merge-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-decision-merge-options</span> (<span style='color:navy;'>&key</span> font fill stroke width height margin filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#4OsqWlN0N0o'>uml-decision マクロ</a>および <a class='autolink' href='#jFepxnqBIdp'>uml-merge マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明はそれぞれのマクロを参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#4OsqWlN0N0o'>uml-decision マクロ</a></li>
<li><a class='autolink' href='#jFepxnqBIdp'>uml-merge マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='8I8CeZX7FA2'></a>14.1.158 macro with-uml-dependency-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-dependency-options</span> (<span style='color:navy;'>&key</span> stroke arrow-size font filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#0AOc4Hz7cU9'>uml-dependency マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#0AOc4Hz7cU9'>uml-dependency マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#0AOc4Hz7cU9'>uml-dependency マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='8SWwZSuNPRo'></a>14.1.159 macro with-uml-expansion-region-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-expansion-region-options</span> (<span style='color:navy;'>&key</span> fill stroke corner-r filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#5Ql5zK0cMwk'>uml-expansion-region マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#5Ql5zK0cMwk'>uml-expansion-region マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#5Ql5zK0cMwk'>uml-expansion-region マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='iBvtd62FNd1'></a>14.1.160 macro with-uml-flow-final-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-flow-final-options</span> (<span style='color:navy;'>&key</span> radius fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#hesl6zCtKGG'>uml-flow-final マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#hesl6zCtKGG'>uml-flow-final マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#hesl6zCtKGG'>uml-flow-final マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='eSqOz44b8wF'></a>14.1.161 macro with-uml-flow-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-flow-options</span> (<span style='color:navy;'>&key</span> stroke arrow-size font filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#9i3KzQ9ScEv'>uml-flow マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#9i3KzQ9ScEv'>uml-flow マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#9i3KzQ9ScEv'>uml-flow マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='aT9JaFCRs0a'></a>14.1.162 macro with-uml-fork-join-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-fork-join-options</span> (<span style='color:navy;'>&key</span> fill width length filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#fF3E03hjzKt'>uml-fork マクロ</a>および <a class='autolink' href='#bmxOutyzIGv'>uml-join マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明はそれぞれのマクロを参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#fF3E03hjzKt'>uml-fork マクロ</a></li>
<li><a class='autolink' href='#bmxOutyzIGv'>uml-join マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='aqZzAjhns3j'></a>14.1.163 macro with-uml-frame-fragment</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-frame-fragment</span> (id index) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>id</code> ---- 対象となる <a class='autolink' href='#1cJtoPoE2w0'>uml-frame</a> の ID を指定します。</li>
<li><code>index</code> ---- 対象となる領域のインデックスを上から順に０から始まる整数で指定します。</li>
<li><code>body</code> ---- 対象となる<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>内で行なう描画コードを記述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#1cJtoPoE2w0'>uml-frame</a> の指定された領域（マトリクス状のパーティションの場合はセル）を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画を行ないます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#1cJtoPoE2w0'>uml-frame</a></li>
<li><a class='autolink' href='#5mxCyQhUUgs'>uml-frame マクロ</a></li>
</ul>
<p><strong>Notes:</strong></p>
<p>　<code>index</code> で指定できる値は、<a class='autolink' href='#1cJtoPoE2w0'>uml-frame</a> の <code>:fragments</code> で指定した要素数が上限となります。たとえば <code>:fragments '(50 40)</code> とした場合、点線が２本引かれて３つの領域に分割されるため、 <code>0 1 2</code> が指定できることになります。</p>
<p>　　</p>
<h4><a name='bKkNt5lQdCz'></a>14.1.164 macro with-uml-frame-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-frame-options</span> (<span style='color:navy;'>&key</span> font fill stroke margin fragment-dasharray filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#5mxCyQhUUgs'>uml-frame マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#5mxCyQhUUgs'>uml-frame マクロ</a>を参照してください。ただし、以下はこのマクロでのみ指定可能です。</p>
<ul>
<li><code>fragment-dasharray</code> ---- <code>:fragments</code> パラメータで領域を区切る際に描画される点線の仕様を指定します。。詳細は <a href='#4HFjqmTuIU6'>12.2  節</a>を参照してください。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#5mxCyQhUUgs'>uml-frame マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='9voMgsjpww9'></a>14.1.165 macro with-uml-generalization-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-generalization-options</span> (<span style='color:navy;'>&key</span> stroke fill arrow-size font filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#j26H32Vq33s'>uml-generalization マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#j26H32Vq33s'>uml-generalization マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#j26H32Vq33s'>uml-generalization マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='ilshLKYJM4Y'></a>14.1.166 macro with-uml-interface-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-interface-options</span> (<span style='color:navy;'>&key</span> radius fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#00gSBM6e17a'>uml-interface マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#00gSBM6e17a'>uml-interface マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#00gSBM6e17a'>uml-interface マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='cyCw9NM4rtX'></a>14.1.167 macro with-uml-interface-request-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-interface-request-options</span> (<span style='color:navy;'>&key</span> stroke filter layer font degree dasharray arrow-size) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#gOnL4iRiMam'>uml-interface-request マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#gOnL4iRiMam'>uml-interface-request マクロ</a>を参照してください。ただし、以下はこのマクロでのみ指定可能です。</p>
<ul>
<li><code>font</code> ---- <code>name</code> で指定する<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>の<a class='autolink' href='#3kZ9FkounyK'>フォント</a>指定を省略した場合に使用されるデフォルト設定です。</li>
<li><code>degree</code> ---- ソケットの<a class='autolink' href='#cp2F91gKG7W'>円弧</a>の角度です。</li>
<li><code>dasharray</code> ---- 依存関係矢印を描画する場合の点線を指定する dasharray パラメータです。</li>
<li><code>arrow-size</code> ---- 依存関係矢印を描画する場合の矢印のサイズです。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#gOnL4iRiMam'>uml-interface-request マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='8ofUYOHf2dy'></a>14.1.168 macro with-uml-node-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-node-options</span> (<span style='color:navy;'>&key</span> font fill1 fill2 stroke width height depth margin filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#hMkh04dArCc'>uml-node マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#hMkh04dArCc'>uml-node マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#hMkh04dArCc'>uml-node マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='bKpfdfxlm28'></a>14.1.169 macro with-uml-note-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-note-options</span> (<span style='color:navy;'>&key</span> margin crease font fill stroke filter layer dasharray) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#hAV2OPdOjGW'>uml-note マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#hAV2OPdOjGW'>uml-note マクロ</a>を参照してください。ただし、以下はこのマクロでのみ指定可能です。</p>
<ul>
<li><code>dasharray</code> ---- <a class='autolink' href='#jFViCKeUWqC'>uml-note</a> からその <code>targets</code> に引かれる点線の仕様を指定します。詳細は <a href='#4HFjqmTuIU6'>12.2  節</a>を参照してください。</li>
</ul>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#hAV2OPdOjGW'>uml-note マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='5W98YlueCaH'></a>14.1.170 macro with-uml-package-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-package-options</span> (<span style='color:navy;'>&key</span> font fill stroke width height tab-width tab-height tab-margin margin filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#6744Q7c1KZQ'>uml-package マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#6744Q7c1KZQ'>uml-package マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#6744Q7c1KZQ'>uml-package マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='gdVz9m0bWf1'></a>14.1.171 macro with-uml-partition-lane</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-partition-lane</span> (id name <span style='color:navy;'>&optional</span> name2) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>id</code> ---- 対象となる <a class='autolink' href='#hDY1LBkmvKv'>uml-partition</a> の ID を指定します。</li>
<li><code>name</code> ---- 対象となるレーンの名前を文字列かキーワードシンボルで指定します。マトリクス状のパーティションの場合、行の名前を指定してください。</li>
<li><code>name2</code> ---- マトリクス状のパーティションの場合、列の名前を文字列かキーワードシンボルで指定します。</li>
<li><code>body</code> ---- 対象となる<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>内で行なう描画コードを記述します。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#hDY1LBkmvKv'>uml-partition</a> の指定されたレーン（マトリクス状のパーティションの場合はセル）を<a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>とした描画を行ないます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a href='#hDY1LBkmvKv'>uml-partition</a></li>
<li><a class='autolink' href='#cPEgYZoifRN'>uml-partition マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='3188U3eHIfD'></a>14.1.172 macro with-uml-partition-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-partition-options</span> (<span style='color:navy;'>&key</span> font fill stroke lines header layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#cPEgYZoifRN'>uml-partition マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#cPEgYZoifRN'>uml-partition マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#cPEgYZoifRN'>uml-partition マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='iKNb1fFHcnJ'></a>14.1.173 macro with-uml-pin-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-pin-options</span> (<span style='color:navy;'>&key</span> font fill stroke size filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#3QBsYVXqy6S'>uml-pin マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#3QBsYVXqy6S'>uml-pin マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#3QBsYVXqy6S'>uml-pin マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='4gpOhhEbKrc'></a>14.1.174 macro with-uml-port-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-port-options</span> (<span style='color:navy;'>&key</span> fill stroke size filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#ddK61IWocJ6'>uml-port マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#ddK61IWocJ6'>uml-port マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#ddK61IWocJ6'>uml-port マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='dhb9h5mcHOW'></a>14.1.175 macro with-uml-realization-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-realization-options</span> (<span style='color:navy;'>&key</span> stroke fill arrow-size font filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#1fseuHWNLXr'>uml-realization マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#1fseuHWNLXr'>uml-realization マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#1fseuHWNLXr'>uml-realization マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='kTp6nsb6qSq'></a>14.1.176 macro with-uml-signal-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-signal-options</span> (<span style='color:navy;'>&key</span> font fill stroke width height direction depth margin filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#cAZB6pzi0PF'>uml-signal マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#cAZB6pzi0PF'>uml-signal マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#cAZB6pzi0PF'>uml-signal マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='dhjnYKCmHBq'></a>14.1.177 macro with-uml-state-begin-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-state-begin-options</span> (<span style='color:navy;'>&key</span> radius fill filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#gcmbjMkYiQg'>uml-state-begin マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#gcmbjMkYiQg'>uml-state-begin マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#gcmbjMkYiQg'>uml-state-begin マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='egMWtW3cQM9'></a>14.1.178 macro with-uml-state-end-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-state-end-options</span> (<span style='color:navy;'>&key</span> radius ratio fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#1qryRXVv4ZR'>uml-state-end マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#1qryRXVv4ZR'>uml-state-end マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#1qryRXVv4ZR'>uml-state-end マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='btmvKFXWMnJ'></a>14.1.179 macro with-uml-state-history-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-state-history-options</span> (<span style='color:navy;'>&key</span> radius fill stroke filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#6IXmPCuJmAq'>uml-state-history マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#6IXmPCuJmAq'>uml-state-history マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#6IXmPCuJmAq'>uml-state-history マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='gm96ZIuYlAQ'></a>14.1.180 macro with-uml-state-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-state-options</span> (<span style='color:navy;'>&key</span> font fill stroke width height corner-r margin filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#5YyIF89m1Hw'>uml-state マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#5YyIF89m1Hw'>uml-state マクロ</a>を参照してください。</p>
<p>　なお、ここで指定する width および height はデフォルトの最低サイズとして使用されます。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#5YyIF89m1Hw'>uml-state マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='6F3g2ZSN0ck'></a>14.1.181 macro with-uml-time-event-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-time-event-options</span> (<span style='color:navy;'>&key</span> fill stroke width height filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#4maSSQh7iVN'>uml-time-event マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#4maSSQh7iVN'>uml-time-event マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#4maSSQh7iVN'>uml-time-event マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='exkjsBfuS1B'></a>14.1.182 macro with-uml-transition-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-transition-options</span> (<span style='color:navy;'>&key</span> stroke arrow-size font filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#hlb10Xbiaq1'>uml-transition マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#hlb10Xbiaq1'>uml-transition マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#hlb10Xbiaq1'>uml-transition マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='7BxCmPuBmA9'></a>14.1.183 macro with-uml-usecase-options</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>with-uml-usecase-options</span> (<span style='color:navy;'>&key</span> font fill stroke margin filter layer) <span style='color:navy;'>&body</span> body</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<a class='autolink' href='#1nYTXUXcD8L'>uml-usecase マクロ</a>で描画される図形要素のデフォルトオプションを変更します。キーワードパラメータ群の説明は <a class='autolink' href='#1nYTXUXcD8L'>uml-usecase マクロ</a>を参照してください。</p>
<p><strong>See Also:</strong></p>
<ul>
<li><a class='autolink' href='#1nYTXUXcD8L'>uml-usecase マクロ</a></li>
</ul>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='kJ410pmJGOY'></a>14.1.184 function x+</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>x+</span> pt x =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>x</code> ---- 加算する x 軸の値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt</code> に <code>(x 0)</code> を足した座標値を返します。function point/x+ と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='9z5A8nE5AJQ'></a>14.1.185 function xy+</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>xy+</span> pt x y =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>x</code> ---- 加算する x 軸の値を指定します。</li>
<li><code>y</code> ---- 加算する y 軸の値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt</code> に <code>(x y)</code> を足した座標値を返します。function xy+ と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h4><a name='6ObRbdq5rIQ'></a>14.1.186 function y+</h4>
<p><strong>Syntax:</strong></p>
<ul>
<li class='syntax'><span style='font-weight:bold;'>y+</span> pt y =&gt; result</li>
</ul>
<p><strong>Arguments and Values:</strong></p>
<ul>
<li><code>pt</code> ---- 対象の座標値を指定します。</li>
<li><code>y</code> ---- 加算する y 軸の値を指定します。</li>
<li><code>result</code> ---- 結果の座標値が返ります。</li>
</ul>
<p><strong>Description:</strong></p>
<p>　<code>pt</code> に <code>(0 y)</code> を足した座標値を返します。function point/y+ と同じことをします。</p>
<p><strong>See Also:</strong> None.</p>
<p><strong>Notes:</strong> None.</p>
<p>　　</p>
<h3><a name='dR01Jh257Q6'></a>14.2 色の名前</h3>
<p> <a href='#1rpUB3fre67'>12.1  節</a>ではいくつかの<a class='autolink' href='#1rpUB3fre67'>色の指定</a>方法を紹介しています。ここでは、そのうち色の名前について使用できるものを紹介します。まず、以下は SVG 規格に記載されている色名のサンプルです<sup><a name='footnote_ref21' href='#footnote21'>21</a></sup>。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='750' height='1000'>
	
	<rect x='0' y='0' width='750' height='1000' fill='white' stroke='none' />
	<!-- rectangle -->
	<rect x='7.5' y='12.5' width='15' height='15' fill='black' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='24' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#000000:black</text>
	<!-- rectangle -->
	<rect x='7.5' y='32.5' width='15' height='15' fill='navy' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='44' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#000080:navy</text>
	<!-- rectangle -->
	<rect x='7.5' y='52.5' width='15' height='15' fill='darkblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='64' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00008B:darkblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='72.5' width='15' height='15' fill='mediumblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='84' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#0000CD:mediumblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='92.5' width='15' height='15' fill='blue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#0000FF:blue</text>
	<!-- rectangle -->
	<rect x='7.5' y='112.5' width='15' height='15' fill='darkgreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#006400:darkgreen</text>
	<!-- rectangle -->
	<rect x='7.5' y='132.5' width='15' height='15' fill='green' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='144' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#008000:green</text>
	<!-- rectangle -->
	<rect x='7.5' y='152.5' width='15' height='15' fill='teal' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='164' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#008080:teal</text>
	<!-- rectangle -->
	<rect x='7.5' y='172.5' width='15' height='15' fill='darkcyan' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='184' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#008B8B:darkcyan</text>
	<!-- rectangle -->
	<rect x='7.5' y='192.5' width='15' height='15' fill='deepskyblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='204' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00BFFF:deepskyblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='212.5' width='15' height='15' fill='darkturquoise' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='224' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00CED1:darkturquoise</text>
	<!-- rectangle -->
	<rect x='7.5' y='232.5' width='15' height='15' fill='mediumspringgreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='244' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00FA9A:mediumspringgreen</text>
	<!-- rectangle -->
	<rect x='7.5' y='252.5' width='15' height='15' fill='lime' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='264' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00FF00:lime</text>
	<!-- rectangle -->
	<rect x='7.5' y='272.5' width='15' height='15' fill='springgreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='284' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00FF7F:springgreen</text>
	<!-- rectangle -->
	<rect x='7.5' y='292.5' width='15' height='15' fill='aqua' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='304' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00FFFF:aqua</text>
	<!-- rectangle -->
	<rect x='7.5' y='312.5' width='15' height='15' fill='cyan' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='324' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00FFFF:cyan</text>
	<!-- rectangle -->
	<rect x='7.5' y='332.5' width='15' height='15' fill='midnightblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='344' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#191970:midnightblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='352.5' width='15' height='15' fill='dodgerblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='364' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#1E90FF:dodgerblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='372.5' width='15' height='15' fill='lightseagreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='384' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#20B2AA:lightseagreen</text>
	<!-- rectangle -->
	<rect x='7.5' y='392.5' width='15' height='15' fill='forestgreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='404' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#228B22:forestgreen</text>
	<!-- rectangle -->
	<rect x='7.5' y='412.5' width='15' height='15' fill='seagreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='424' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#2E8B57:seagreen</text>
	<!-- rectangle -->
	<rect x='7.5' y='432.5' width='15' height='15' fill='darkslategray' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='444' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#2F4F4F:darkslategray</text>
	<!-- rectangle -->
	<rect x='7.5' y='452.5' width='15' height='15' fill='darkslategrey' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='464' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#2F4F4F:darkslategrey</text>
	<!-- rectangle -->
	<rect x='7.5' y='472.5' width='15' height='15' fill='limegreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='484' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#32CD32:limegreen</text>
	<!-- rectangle -->
	<rect x='7.5' y='492.5' width='15' height='15' fill='mediumseagreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='504' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#3CB371:mediumseagreen</text>
	<!-- rectangle -->
	<rect x='7.5' y='512.5' width='15' height='15' fill='turquoise' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='524' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#40E0D0:turquoise</text>
	<!-- rectangle -->
	<rect x='7.5' y='532.5' width='15' height='15' fill='royalblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='544' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#4169E1:royalblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='552.5' width='15' height='15' fill='steelblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='564' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#4682B4:steelblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='572.5' width='15' height='15' fill='darkslateblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='584' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#483D8B:darkslateblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='592.5' width='15' height='15' fill='mediumturquoise' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='604' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#48D1CC:mediumturquoise</text>
	<!-- rectangle -->
	<rect x='7.5' y='612.5' width='15' height='15' fill='indigo' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='624' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#4B0082:indigo</text>
	<!-- rectangle -->
	<rect x='7.5' y='632.5' width='15' height='15' fill='darkolivegreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='644' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#556B2F:darkolivegreen</text>
	<!-- rectangle -->
	<rect x='7.5' y='652.5' width='15' height='15' fill='cadetblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='664' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#5F9EA0:cadetblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='672.5' width='15' height='15' fill='cornflowerblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='684' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#6495ED:cornflowerblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='692.5' width='15' height='15' fill='mediumaquamarine' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='704' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#66CDAA:mediumaquamarine</text>
	<!-- rectangle -->
	<rect x='7.5' y='712.5' width='15' height='15' fill='dimgray' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='724' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#696969:dimgray</text>
	<!-- rectangle -->
	<rect x='7.5' y='732.5' width='15' height='15' fill='dimgrey' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='744' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#696969:dimgrey</text>
	<!-- rectangle -->
	<rect x='7.5' y='752.5' width='15' height='15' fill='slateblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='764' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#6A5ACD:slateblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='772.5' width='15' height='15' fill='olivedrab' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='784' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#6B8E23:olivedrab</text>
	<!-- rectangle -->
	<rect x='7.5' y='792.5' width='15' height='15' fill='slategray' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='804' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#708090:slategray</text>
	<!-- rectangle -->
	<rect x='7.5' y='812.5' width='15' height='15' fill='slategrey' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='824' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#708090:slategrey</text>
	<!-- rectangle -->
	<rect x='7.5' y='832.5' width='15' height='15' fill='lightslategray' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='844' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#778899:lightslategray</text>
	<!-- rectangle -->
	<rect x='7.5' y='852.5' width='15' height='15' fill='lightslategrey' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='864' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#778899:lightslategrey</text>
	<!-- rectangle -->
	<rect x='7.5' y='872.5' width='15' height='15' fill='mediumslateblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='884' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7B68EE:mediumslateblue</text>
	<!-- rectangle -->
	<rect x='7.5' y='892.5' width='15' height='15' fill='lawngreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='904' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7CFC00:lawngreen</text>
	<!-- rectangle -->
	<rect x='7.5' y='912.5' width='15' height='15' fill='chartreuse' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='924' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7FFF00:chartreuse</text>
	<!-- rectangle -->
	<rect x='7.5' y='932.5' width='15' height='15' fill='aquamarine' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='944' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7FFFD4:aquamarine</text>
	<!-- rectangle -->
	<rect x='7.5' y='952.5' width='15' height='15' fill='maroon' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='964' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#800000:maroon</text>
	<!-- rectangle -->
	<rect x='7.5' y='972.5' width='15' height='15' fill='purple' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='984' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#800080:purple</text>
	<!-- rectangle -->
	<rect x='257.5' y='12.5' width='15' height='15' fill='olive' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='24' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#808000:olive</text>
	<!-- rectangle -->
	<rect x='257.5' y='32.5' width='15' height='15' fill='gray' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='44' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#808080:gray</text>
	<!-- rectangle -->
	<rect x='257.5' y='52.5' width='15' height='15' fill='grey' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='64' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#808080:grey</text>
	<!-- rectangle -->
	<rect x='257.5' y='72.5' width='15' height='15' fill='skyblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='84' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#87CEEB:skyblue</text>
	<!-- rectangle -->
	<rect x='257.5' y='92.5' width='15' height='15' fill='lightskyblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#87CEFA:lightskyblue</text>
	<!-- rectangle -->
	<rect x='257.5' y='112.5' width='15' height='15' fill='blueviolet' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8A2BE2:blueviolet</text>
	<!-- rectangle -->
	<rect x='257.5' y='132.5' width='15' height='15' fill='darkred' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='144' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B0000:darkred</text>
	<!-- rectangle -->
	<rect x='257.5' y='152.5' width='15' height='15' fill='darkmagenta' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='164' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B008B:darkmagenta</text>
	<!-- rectangle -->
	<rect x='257.5' y='172.5' width='15' height='15' fill='saddlebrown' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='184' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B4513:saddlebrown</text>
	<!-- rectangle -->
	<rect x='257.5' y='192.5' width='15' height='15' fill='darkseagreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='204' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8FBC8F:darkseagreen</text>
	<!-- rectangle -->
	<rect x='257.5' y='212.5' width='15' height='15' fill='lightgreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='224' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#90EE90:lightgreen</text>
	<!-- rectangle -->
	<rect x='257.5' y='232.5' width='15' height='15' fill='mediumpurple' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='244' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9370DB:mediumpurple</text>
	<!-- rectangle -->
	<rect x='257.5' y='252.5' width='15' height='15' fill='darkviolet' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='264' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9400D3:darkviolet</text>
	<!-- rectangle -->
	<rect x='257.5' y='272.5' width='15' height='15' fill='palegreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='284' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#98FB98:palegreen</text>
	<!-- rectangle -->
	<rect x='257.5' y='292.5' width='15' height='15' fill='darkorchid' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='304' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9932CC:darkorchid</text>
	<!-- rectangle -->
	<rect x='257.5' y='312.5' width='15' height='15' fill='yellowgreen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='324' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9ACD32:yellowgreen</text>
	<!-- rectangle -->
	<rect x='257.5' y='332.5' width='15' height='15' fill='sienna' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='344' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A0522D:sienna</text>
	<!-- rectangle -->
	<rect x='257.5' y='352.5' width='15' height='15' fill='brown' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='364' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A52A2A:brown</text>
	<!-- rectangle -->
	<rect x='257.5' y='372.5' width='15' height='15' fill='darkgray' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='384' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A9A9A9:darkgray</text>
	<!-- rectangle -->
	<rect x='257.5' y='392.5' width='15' height='15' fill='darkgrey' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='404' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A9A9A9:darkgrey</text>
	<!-- rectangle -->
	<rect x='257.5' y='412.5' width='15' height='15' fill='lightblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='424' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#ADD8E6:lightblue</text>
	<!-- rectangle -->
	<rect x='257.5' y='432.5' width='15' height='15' fill='greenyellow' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='444' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#ADFF2F:greenyellow</text>
	<!-- rectangle -->
	<rect x='257.5' y='452.5' width='15' height='15' fill='paleturquoise' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='464' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#AFEEEE:paleturquoise</text>
	<!-- rectangle -->
	<rect x='257.5' y='472.5' width='15' height='15' fill='lightsteelblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='484' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B0C4DE:lightsteelblue</text>
	<!-- rectangle -->
	<rect x='257.5' y='492.5' width='15' height='15' fill='powderblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='504' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B0E0E6:powderblue</text>
	<!-- rectangle -->
	<rect x='257.5' y='512.5' width='15' height='15' fill='firebrick' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='524' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B22222:firebrick</text>
	<!-- rectangle -->
	<rect x='257.5' y='532.5' width='15' height='15' fill='darkgoldenrod' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='544' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B8860B:darkgoldenrod</text>
	<!-- rectangle -->
	<rect x='257.5' y='552.5' width='15' height='15' fill='mediumorchid' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='564' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BA55D3:mediumorchid</text>
	<!-- rectangle -->
	<rect x='257.5' y='572.5' width='15' height='15' fill='rosybrown' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='584' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BC8F8F:rosybrown</text>
	<!-- rectangle -->
	<rect x='257.5' y='592.5' width='15' height='15' fill='darkkhaki' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='604' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BDB76B:darkkhaki</text>
	<!-- rectangle -->
	<rect x='257.5' y='612.5' width='15' height='15' fill='silver' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='624' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#C0C0C0:silver</text>
	<!-- rectangle -->
	<rect x='257.5' y='632.5' width='15' height='15' fill='mediumvioletred' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='644' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#C71585:mediumvioletred</text>
	<!-- rectangle -->
	<rect x='257.5' y='652.5' width='15' height='15' fill='indianred' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='664' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD5C5C:indianred</text>
	<!-- rectangle -->
	<rect x='257.5' y='672.5' width='15' height='15' fill='peru' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='684' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD853F:peru</text>
	<!-- rectangle -->
	<rect x='257.5' y='692.5' width='15' height='15' fill='chocolate' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='704' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D2691E:chocolate</text>
	<!-- rectangle -->
	<rect x='257.5' y='712.5' width='15' height='15' fill='tan' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='724' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D2B48C:tan</text>
	<!-- rectangle -->
	<rect x='257.5' y='732.5' width='15' height='15' fill='lightgray' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='744' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D3D3D3:lightgray</text>
	<!-- rectangle -->
	<rect x='257.5' y='752.5' width='15' height='15' fill='lightgrey' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='764' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D3D3D3:lightgrey</text>
	<!-- rectangle -->
	<rect x='257.5' y='772.5' width='15' height='15' fill='thistle' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='784' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D8BFD8:thistle</text>
	<!-- rectangle -->
	<rect x='257.5' y='792.5' width='15' height='15' fill='orchid' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='804' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#DA70D6:orchid</text>
	<!-- rectangle -->
	<rect x='257.5' y='812.5' width='15' height='15' fill='goldenrod' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='824' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#DAA520:goldenrod</text>
	<!-- rectangle -->
	<rect x='257.5' y='832.5' width='15' height='15' fill='palevioletred' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='844' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#DB7093:palevioletred</text>
	<!-- rectangle -->
	<rect x='257.5' y='852.5' width='15' height='15' fill='crimson' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='864' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#DC143C:crimson</text>
	<!-- rectangle -->
	<rect x='257.5' y='872.5' width='15' height='15' fill='gainsboro' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='884' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#DCDCDC:gainsboro</text>
	<!-- rectangle -->
	<rect x='257.5' y='892.5' width='15' height='15' fill='plum' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='904' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#DDA0DD:plum</text>
	<!-- rectangle -->
	<rect x='257.5' y='912.5' width='15' height='15' fill='burlywood' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='924' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#DEB887:burlywood</text>
	<!-- rectangle -->
	<rect x='257.5' y='932.5' width='15' height='15' fill='lightcyan' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='944' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#E0FFFF:lightcyan</text>
	<!-- rectangle -->
	<rect x='257.5' y='952.5' width='15' height='15' fill='lavender' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='964' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#E6E6FA:lavender</text>
	<!-- rectangle -->
	<rect x='257.5' y='972.5' width='15' height='15' fill='darksalmon' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='275' y='984' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#E9967A:darksalmon</text>
	<!-- rectangle -->
	<rect x='507.5' y='12.5' width='15' height='15' fill='violet' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='24' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE82EE:violet</text>
	<!-- rectangle -->
	<rect x='507.5' y='32.5' width='15' height='15' fill='palegoldenrod' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='44' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEE8AA:palegoldenrod</text>
	<!-- rectangle -->
	<rect x='507.5' y='52.5' width='15' height='15' fill='lightcoral' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='64' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F08080:lightcoral</text>
	<!-- rectangle -->
	<rect x='507.5' y='72.5' width='15' height='15' fill='khaki' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='84' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F0E68C:khaki</text>
	<!-- rectangle -->
	<rect x='507.5' y='92.5' width='15' height='15' fill='aliceblue' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F0F8FF:aliceblue</text>
	<!-- rectangle -->
	<rect x='507.5' y='112.5' width='15' height='15' fill='honeydew' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F0FFF0:honeydew</text>
	<!-- rectangle -->
	<rect x='507.5' y='132.5' width='15' height='15' fill='azure' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='144' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F0FFFF:azure</text>
	<!-- rectangle -->
	<rect x='507.5' y='152.5' width='15' height='15' fill='sandybrown' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='164' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F4A460:sandybrown</text>
	<!-- rectangle -->
	<rect x='507.5' y='172.5' width='15' height='15' fill='wheat' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='184' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F5DEB3:wheat</text>
	<!-- rectangle -->
	<rect x='507.5' y='192.5' width='15' height='15' fill='beige' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='204' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F5F5DC:beige</text>
	<!-- rectangle -->
	<rect x='507.5' y='212.5' width='15' height='15' fill='whitesmoke' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='224' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F5F5F5:whitesmoke</text>
	<!-- rectangle -->
	<rect x='507.5' y='232.5' width='15' height='15' fill='mintcream' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='244' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F5FFFA:mintcream</text>
	<!-- rectangle -->
	<rect x='507.5' y='252.5' width='15' height='15' fill='ghostwhite' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='264' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F8F8FF:ghostwhite</text>
	<!-- rectangle -->
	<rect x='507.5' y='272.5' width='15' height='15' fill='salmon' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='284' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FA8072:salmon</text>
	<!-- rectangle -->
	<rect x='507.5' y='292.5' width='15' height='15' fill='antiquewhite' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='304' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FAEBD7:antiquewhite</text>
	<!-- rectangle -->
	<rect x='507.5' y='312.5' width='15' height='15' fill='linen' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='324' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FAF0E6:linen</text>
	<!-- rectangle -->
	<rect x='507.5' y='332.5' width='15' height='15' fill='lightgoldenrodyellow' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='344' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FAFAD2:lightgoldenrodyellow</text>
	<!-- rectangle -->
	<rect x='507.5' y='352.5' width='15' height='15' fill='oldlace' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='364' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FDF5E6:oldlace</text>
	<!-- rectangle -->
	<rect x='507.5' y='372.5' width='15' height='15' fill='red' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='384' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF0000:red</text>
	<!-- rectangle -->
	<rect x='507.5' y='392.5' width='15' height='15' fill='fuchsia' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='404' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF00FF:fuchsia</text>
	<!-- rectangle -->
	<rect x='507.5' y='412.5' width='15' height='15' fill='magenta' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='424' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF00FF:magenta</text>
	<!-- rectangle -->
	<rect x='507.5' y='432.5' width='15' height='15' fill='deeppink' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='444' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF1493:deeppink</text>
	<!-- rectangle -->
	<rect x='507.5' y='452.5' width='15' height='15' fill='orangered' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='464' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF4500:orangered</text>
	<!-- rectangle -->
	<rect x='507.5' y='472.5' width='15' height='15' fill='tomato' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='484' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF6347:tomato</text>
	<!-- rectangle -->
	<rect x='507.5' y='492.5' width='15' height='15' fill='hotpink' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='504' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF69B4:hotpink</text>
	<!-- rectangle -->
	<rect x='507.5' y='512.5' width='15' height='15' fill='coral' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='524' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF7F50:coral</text>
	<!-- rectangle -->
	<rect x='507.5' y='532.5' width='15' height='15' fill='darkorange' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='544' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF8C00:darkorange</text>
	<!-- rectangle -->
	<rect x='507.5' y='552.5' width='15' height='15' fill='lightsalmon' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='564' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFA07A:lightsalmon</text>
	<!-- rectangle -->
	<rect x='507.5' y='572.5' width='15' height='15' fill='orange' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='584' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFA500:orange</text>
	<!-- rectangle -->
	<rect x='507.5' y='592.5' width='15' height='15' fill='lightpink' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='604' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFB6C1:lightpink</text>
	<!-- rectangle -->
	<rect x='507.5' y='612.5' width='15' height='15' fill='pink' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='624' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFC0CB:pink</text>
	<!-- rectangle -->
	<rect x='507.5' y='632.5' width='15' height='15' fill='gold' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='644' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFD700:gold</text>
	<!-- rectangle -->
	<rect x='507.5' y='652.5' width='15' height='15' fill='peachpuff' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='664' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFDAB9:peachpuff</text>
	<!-- rectangle -->
	<rect x='507.5' y='672.5' width='15' height='15' fill='navajowhite' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='684' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFDEAD:navajowhite</text>
	<!-- rectangle -->
	<rect x='507.5' y='692.5' width='15' height='15' fill='moccasin' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='704' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFE4B5:moccasin</text>
	<!-- rectangle -->
	<rect x='507.5' y='712.5' width='15' height='15' fill='bisque' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='724' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFE4C4:bisque</text>
	<!-- rectangle -->
	<rect x='507.5' y='732.5' width='15' height='15' fill='mistyrose' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='744' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFE4E1:mistyrose</text>
	<!-- rectangle -->
	<rect x='507.5' y='752.5' width='15' height='15' fill='blanchedalmond' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='764' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFEBCD:blanchedalmond</text>
	<!-- rectangle -->
	<rect x='507.5' y='772.5' width='15' height='15' fill='papayawhip' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='784' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFEFD5:papayawhip</text>
	<!-- rectangle -->
	<rect x='507.5' y='792.5' width='15' height='15' fill='lavenderblush' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='804' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFF0F5:lavenderblush</text>
	<!-- rectangle -->
	<rect x='507.5' y='812.5' width='15' height='15' fill='seashell' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='824' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFF5EE:seashell</text>
	<!-- rectangle -->
	<rect x='507.5' y='832.5' width='15' height='15' fill='cornsilk' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='844' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFF8DC:cornsilk</text>
	<!-- rectangle -->
	<rect x='507.5' y='852.5' width='15' height='15' fill='lemonchiffon' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='864' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFACD:lemonchiffon</text>
	<!-- rectangle -->
	<rect x='507.5' y='872.5' width='15' height='15' fill='floralwhite' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='884' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFAF0:floralwhite</text>
	<!-- rectangle -->
	<rect x='507.5' y='892.5' width='15' height='15' fill='snow' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='904' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFAFA:snow</text>
	<!-- rectangle -->
	<rect x='507.5' y='912.5' width='15' height='15' fill='yellow' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='924' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFF00:yellow</text>
	<!-- rectangle -->
	<rect x='507.5' y='932.5' width='15' height='15' fill='lightyellow' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='944' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFFE0:lightyellow</text>
	<!-- rectangle -->
	<rect x='507.5' y='952.5' width='15' height='15' fill='ivory' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='964' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFFF0:ivory</text>
	<!-- rectangle -->
	<rect x='507.5' y='972.5' width='15' height='15' fill='white' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='525' y='984' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFFFF:white</text>

</svg>
</div>

<p class='fig_title'><a name='2sDmAkevog1'></a>Figure.14-1 色の名前とサンプル</p>
<details>
<summary><a href='#2sDmAkevog1'>Figure.14-1</a> のソースはこちら</summary>
<pre class='code'>
(<span class='keyword1'>let</span> ((svg-width   750)
      (svg-height 1000))
  (diagram (svg-width svg-height <span class='keyword3'>:fill</span> <span class='keyword3'>:white</span>)
    (<span class='keyword1'>let</span> ((*default-fill*   (make-fill <span class='keyword3'>:color</span> <span class='keyword3'>:white</span>))
          (*default-font*   (make-font <span class='keyword3'>:family</span> <span class='literal'>"monospace"</span> <span class='keyword3'>:size</span> 10 <span class='keyword3'>:width-spice</span> 0.85))
          (*default-stroke* (make-stroke <span class='keyword3'>:color</span> <span class='keyword3'>:black</span> <span class='keyword3'>:width</span> 1)))
      (<span class='keyword1'>let</span> ((x 15)
            (y  0))
        (<span class='keyword1'>labels</span> ((imp (lst)
                   (incf y 20)
                   (<span class='keyword1'>when</span> (&lt; svg-height (+ y 10))
                     (incf x 250)
                     (setf y  20))
                   (rect (list x y)  15  15 <span class='keyword3'>:fill</span> (fourth lst))
                   (text (list (+ x 10)  (+ y 4))
                         (apply #'format  nil <span class='literal'>"#~2,'0x~2,'0x~2,'0x:~A"</span> lst))))
          (mapcar #'imp '((  0   0   0 <span class='literal'>"black"</span>               )
                          (  0   0 128 <span class='literal'>"navy"</span>                )
                          (  0   0 139 <span class='literal'>"darkblue"</span>            )
                          (  0   0 205 <span class='literal'>"mediumblue"</span>          )
                          (  0   0 255 <span class='literal'>"blue"</span>                )
                          (  0 100   0 <span class='literal'>"darkgreen"</span>           )
                          (  0 128   0 <span class='literal'>"green"</span>               )
                          (  0 128 128 <span class='literal'>"teal"</span>                )
                          (  0 139 139 <span class='literal'>"darkcyan"</span>            )
                          (  0 191 255 <span class='literal'>"deepskyblue"</span>         )
                          (  0 206 209 <span class='literal'>"darkturquoise"</span>       )
                          (  0 250 154 <span class='literal'>"mediumspringgreen"</span>   )
                          (  0 255   0 <span class='literal'>"lime"</span>                )
                          (  0 255 127 <span class='literal'>"springgreen"</span>         )
                          (  0 255 255 <span class='literal'>"aqua"</span>                )
                          (  0 255 255 <span class='literal'>"cyan"</span>                )
                          ( 25  25 112 <span class='literal'>"midnightblue"</span>        )
                          ( 30 144 255 <span class='literal'>"dodgerblue"</span>          )
                          ( 32 178 170 <span class='literal'>"lightseagreen"</span>       )
                          ( 34 139  34 <span class='literal'>"forestgreen"</span>         )
                          ( 46 139  87 <span class='literal'>"seagreen"</span>            )
                          ( 47  79  79 <span class='literal'>"darkslategray"</span>       )
                          ( 47  79  79 <span class='literal'>"darkslategrey"</span>       )
                          ( 50 205  50 <span class='literal'>"limegreen"</span>           )
                          ( 60 179 113 <span class='literal'>"mediumseagreen"</span>      )
                          ( 64 224 208 <span class='literal'>"turquoise"</span>           )
                          ( 65 105 225 <span class='literal'>"royalblue"</span>           )
                          ( 70 130 180 <span class='literal'>"steelblue"</span>           )
                          ( 72  61 139 <span class='literal'>"darkslateblue"</span>       )
                          ( 72 209 204 <span class='literal'>"mediumturquoise"</span>     )
                          ( 75   0 130 <span class='literal'>"indigo"</span>              )
                          ( 85 107  47 <span class='literal'>"darkolivegreen"</span>      )
                          ( 95 158 160 <span class='literal'>"cadetblue"</span>           )
                          (100 149 237 <span class='literal'>"cornflowerblue"</span>      )
                          (102 205 170 <span class='literal'>"mediumaquamarine"</span>    )
                          (105 105 105 <span class='literal'>"dimgray"</span>             )
                          (105 105 105 <span class='literal'>"dimgrey"</span>             )
                          (106  90 205 <span class='literal'>"slateblue"</span>           )
                          (107 142  35 <span class='literal'>"olivedrab"</span>           )
                          (112 128 144 <span class='literal'>"slategray"</span>           )
                          (112 128 144 <span class='literal'>"slategrey"</span>           )
                          (119 136 153 <span class='literal'>"lightslategray"</span>      )
                          (119 136 153 <span class='literal'>"lightslategrey"</span>      )
                          (123 104 238 <span class='literal'>"mediumslateblue"</span>     )
                          (124 252   0 <span class='literal'>"lawngreen"</span>           )
                          (127 255   0 <span class='literal'>"chartreuse"</span>          )
                          (127 255 212 <span class='literal'>"aquamarine"</span>          )
                          (128   0   0 <span class='literal'>"maroon"</span>              )
                          (128   0 128 <span class='literal'>"purple"</span>              )
                          (128 128   0 <span class='literal'>"olive"</span>               )
                          (128 128 128 <span class='literal'>"gray"</span>                )
                          (128 128 128 <span class='literal'>"grey"</span>                )
                          (135 206 235 <span class='literal'>"skyblue"</span>             )
                          (135 206 250 <span class='literal'>"lightskyblue"</span>        )
                          (138  43 226 <span class='literal'>"blueviolet"</span>          )
                          (139   0   0 <span class='literal'>"darkred"</span>             )
                          (139   0 139 <span class='literal'>"darkmagenta"</span>         )
                          (139  69  19 <span class='literal'>"saddlebrown"</span>         )
                          (143 188 143 <span class='literal'>"darkseagreen"</span>        )
                          (144 238 144 <span class='literal'>"lightgreen"</span>          )
                          (147 112 219 <span class='literal'>"mediumpurple"</span>        )
                          (148   0 211 <span class='literal'>"darkviolet"</span>          )
                          (152 251 152 <span class='literal'>"palegreen"</span>           )
                          (153  50 204 <span class='literal'>"darkorchid"</span>          )
                          (154 205  50 <span class='literal'>"yellowgreen"</span>         )
                          (160  82  45 <span class='literal'>"sienna"</span>              )
                          (165  42  42 <span class='literal'>"brown"</span>               )
                          (169 169 169 <span class='literal'>"darkgray"</span>            )
                          (169 169 169 <span class='literal'>"darkgrey"</span>            )
                          (173 216 230 <span class='literal'>"lightblue"</span>           )
                          (173 255  47 <span class='literal'>"greenyellow"</span>         )
                          (175 238 238 <span class='literal'>"paleturquoise"</span>       )
                          (176 196 222 <span class='literal'>"lightsteelblue"</span>      )
                          (176 224 230 <span class='literal'>"powderblue"</span>          )
                          (178  34  34 <span class='literal'>"firebrick"</span>           )
                          (184 134  11 <span class='literal'>"darkgoldenrod"</span>       )
                          (186  85 211 <span class='literal'>"mediumorchid"</span>        )
                          (188 143 143 <span class='literal'>"rosybrown"</span>           )
                          (189 183 107 <span class='literal'>"darkkhaki"</span>           )
                          (192 192 192 <span class='literal'>"silver"</span>              )
                          (199  21 133 <span class='literal'>"mediumvioletred"</span>     )
                          (205  92  92 <span class='literal'>"indianred"</span>           )
                          (205 133  63 <span class='literal'>"peru"</span>                )
                          (210 105  30 <span class='literal'>"chocolate"</span>           )
                          (210 180 140 <span class='literal'>"tan"</span>                 )
                          (211 211 211 <span class='literal'>"lightgray"</span>           )
                          (211 211 211 <span class='literal'>"lightgrey"</span>           )
                          (216 191 216 <span class='literal'>"thistle"</span>             )
                          (218 112 214 <span class='literal'>"orchid"</span>              )
                          (218 165  32 <span class='literal'>"goldenrod"</span>           )
                          (219 112 147 <span class='literal'>"palevioletred"</span>       )
                          (220  20  60 <span class='literal'>"crimson"</span>             )
                          (220 220 220 <span class='literal'>"gainsboro"</span>           )
                          (221 160 221 <span class='literal'>"plum"</span>                )
                          (222 184 135 <span class='literal'>"burlywood"</span>           )
                          (224 255 255 <span class='literal'>"lightcyan"</span>           )
                          (230 230 250 <span class='literal'>"lavender"</span>            )
                          (233 150 122 <span class='literal'>"darksalmon"</span>          )
                          (238 130 238 <span class='literal'>"violet"</span>              )
                          (238 232 170 <span class='literal'>"palegoldenrod"</span>       )
                          (240 128 128 <span class='literal'>"lightcoral"</span>          )
                          (240 230 140 <span class='literal'>"khaki"</span>               )
                          (240 248 255 <span class='literal'>"aliceblue"</span>           )
                          (240 255 240 <span class='literal'>"honeydew"</span>            )
                          (240 255 255 <span class='literal'>"azure"</span>               )
                          (244 164  96 <span class='literal'>"sandybrown"</span>          )
                          (245 222 179 <span class='literal'>"wheat"</span>               )
                          (245 245 220 <span class='literal'>"beige"</span>               )
                          (245 245 245 <span class='literal'>"whitesmoke"</span>          )
                          (245 255 250 <span class='literal'>"mintcream"</span>           )
                          (248 248 255 <span class='literal'>"ghostwhite"</span>          )
                          (250 128 114 <span class='literal'>"salmon"</span>              )
                          (250 235 215 <span class='literal'>"antiquewhite"</span>        )
                          (250 240 230 <span class='literal'>"linen"</span>               )
                          (250 250 210 <span class='literal'>"lightgoldenrodyellow"</span>)
                          (253 245 230 <span class='literal'>"oldlace"</span>             )
                          (255   0   0 <span class='literal'>"red"</span>                 )
                          (255   0 255 <span class='literal'>"fuchsia"</span>             )
                          (255   0 255 <span class='literal'>"magenta"</span>             )
                          (255  20 147 <span class='literal'>"deeppink"</span>            )
                          (255  69   0 <span class='literal'>"orangered"</span>           )
                          (255  99  71 <span class='literal'>"tomato"</span>              )
                          (255 105 180 <span class='literal'>"hotpink"</span>             )
                          (255 127  80 <span class='literal'>"coral"</span>               )
                          (255 140   0 <span class='literal'>"darkorange"</span>          )
                          (255 160 122 <span class='literal'>"lightsalmon"</span>         )
                          (255 165   0 <span class='literal'>"orange"</span>              )
                          (255 182 193 <span class='literal'>"lightpink"</span>           )
                          (255 192 203 <span class='literal'>"pink"</span>                )
                          (255 215   0 <span class='literal'>"gold"</span>                )
                          (255 218 185 <span class='literal'>"peachpuff"</span>           )
                          (255 222 173 <span class='literal'>"navajowhite"</span>         )
                          (255 228 181 <span class='literal'>"moccasin"</span>            )
                          (255 228 196 <span class='literal'>"bisque"</span>              )
                          (255 228 225 <span class='literal'>"mistyrose"</span>           )
                          (255 235 205 <span class='literal'>"blanchedalmond"</span>      )
                          (255 239 213 <span class='literal'>"papayawhip"</span>          )
                          (255 240 245 <span class='literal'>"lavenderblush"</span>       )
                          (255 245 238 <span class='literal'>"seashell"</span>            )
                          (255 248 220 <span class='literal'>"cornsilk"</span>            )
                          (255 250 205 <span class='literal'>"lemonchiffon"</span>        )
                          (255 250 240 <span class='literal'>"floralwhite"</span>         )
                          (255 250 250 <span class='literal'>"snow"</span>                )
                          (255 255   0 <span class='literal'>"yellow"</span>              )
                          (255 255 224 <span class='literal'>"lightyellow"</span>         )
                          (255 255 240 <span class='literal'>"ivory"</span>               )
                          (255 255 255 <span class='literal'>"white"</span>               ))))))))
</pre>
</details>
<p>　　</p>
<p>　kaavio では、上記に加えて以下の名前も使用することができます。これらは規格に含まれていないため、 <code>#RRGGBB</code> 形式に変換されて出力されます<sup><a name='footnote_ref22' href='#footnote22'>22</a></sup>。</p>
<div align='center'>
<?xml version='1.0' encoding='utf-8' ?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' baseProfile='full' xml:space='default' width='760' height='2140'>
	
	<rect x='0' y='0' width='760' height='2140' fill='white' stroke='none' />
	<!-- rectangle -->
	<rect x='7.5' y='12.5' width='15' height='15' fill='#FFEFDB' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='24' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFEFDB:antiquewhite1</text>
	<!-- rectangle -->
	<rect x='7.5' y='32.5' width='15' height='15' fill='#EEDFCC' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='44' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEDFCC:antiquewhite2</text>
	<!-- rectangle -->
	<rect x='7.5' y='52.5' width='15' height='15' fill='#CDC0B0' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='64' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDC0B0:antiquewhite3</text>
	<!-- rectangle -->
	<rect x='7.5' y='72.5' width='15' height='15' fill='#8B8378' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='84' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B8378:antiquewhite4</text>
	<!-- rectangle -->
	<rect x='7.5' y='92.5' width='15' height='15' fill='#7FFFD4' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7FFFD4:aquamarine1</text>
	<!-- rectangle -->
	<rect x='7.5' y='112.5' width='15' height='15' fill='#76EEC6' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#76EEC6:aquamarine2</text>
	<!-- rectangle -->
	<rect x='7.5' y='132.5' width='15' height='15' fill='#66CDAA' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='144' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#66CDAA:aquamarine3</text>
	<!-- rectangle -->
	<rect x='7.5' y='152.5' width='15' height='15' fill='#458B74' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='164' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#458B74:aquamarine4</text>
	<!-- rectangle -->
	<rect x='7.5' y='172.5' width='15' height='15' fill='#F0FFFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='184' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F0FFFF:azure1</text>
	<!-- rectangle -->
	<rect x='7.5' y='192.5' width='15' height='15' fill='#E0EEEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='204' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#E0EEEE:azure2</text>
	<!-- rectangle -->
	<rect x='7.5' y='212.5' width='15' height='15' fill='#C1CDCD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='224' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#C1CDCD:azure3</text>
	<!-- rectangle -->
	<rect x='7.5' y='232.5' width='15' height='15' fill='#838B8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='244' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#838B8B:azure4</text>
	<!-- rectangle -->
	<rect x='7.5' y='252.5' width='15' height='15' fill='#FFE4C4' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='264' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFE4C4:bisque1</text>
	<!-- rectangle -->
	<rect x='7.5' y='272.5' width='15' height='15' fill='#EED5B7' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='284' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EED5B7:bisque2</text>
	<!-- rectangle -->
	<rect x='7.5' y='292.5' width='15' height='15' fill='#CDB79E' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='304' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDB79E:bisque3</text>
	<!-- rectangle -->
	<rect x='7.5' y='312.5' width='15' height='15' fill='#8B7D6B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='324' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B7D6B:bisque4</text>
	<!-- rectangle -->
	<rect x='7.5' y='332.5' width='15' height='15' fill='#0000FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='344' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#0000FF:blue1</text>
	<!-- rectangle -->
	<rect x='7.5' y='352.5' width='15' height='15' fill='#0000EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='364' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#0000EE:blue2</text>
	<!-- rectangle -->
	<rect x='7.5' y='372.5' width='15' height='15' fill='#0000CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='384' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#0000CD:blue3</text>
	<!-- rectangle -->
	<rect x='7.5' y='392.5' width='15' height='15' fill='#00008B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='404' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00008B:blue4</text>
	<!-- rectangle -->
	<rect x='7.5' y='412.5' width='15' height='15' fill='#FF4040' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='424' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF4040:brown1</text>
	<!-- rectangle -->
	<rect x='7.5' y='432.5' width='15' height='15' fill='#EE3B3B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='444' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE3B3B:brown2</text>
	<!-- rectangle -->
	<rect x='7.5' y='452.5' width='15' height='15' fill='#CD3333' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='464' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD3333:brown3</text>
	<!-- rectangle -->
	<rect x='7.5' y='472.5' width='15' height='15' fill='#8B2323' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='484' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B2323:brown4</text>
	<!-- rectangle -->
	<rect x='7.5' y='492.5' width='15' height='15' fill='#FFD39B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='504' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFD39B:burlywood1</text>
	<!-- rectangle -->
	<rect x='7.5' y='512.5' width='15' height='15' fill='#EEC591' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='524' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEC591:burlywood2</text>
	<!-- rectangle -->
	<rect x='7.5' y='532.5' width='15' height='15' fill='#CDAA7D' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='544' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDAA7D:burlywood3</text>
	<!-- rectangle -->
	<rect x='7.5' y='552.5' width='15' height='15' fill='#8B7355' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='564' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B7355:burlywood4</text>
	<!-- rectangle -->
	<rect x='7.5' y='572.5' width='15' height='15' fill='#98F5FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='584' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#98F5FF:cadetblue1</text>
	<!-- rectangle -->
	<rect x='7.5' y='592.5' width='15' height='15' fill='#8EE5EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='604' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8EE5EE:cadetblue2</text>
	<!-- rectangle -->
	<rect x='7.5' y='612.5' width='15' height='15' fill='#7AC5CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='624' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7AC5CD:cadetblue3</text>
	<!-- rectangle -->
	<rect x='7.5' y='632.5' width='15' height='15' fill='#53868B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='644' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#53868B:cadetblue4</text>
	<!-- rectangle -->
	<rect x='7.5' y='652.5' width='15' height='15' fill='#7FFF00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='664' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7FFF00:chartreuse1</text>
	<!-- rectangle -->
	<rect x='7.5' y='672.5' width='15' height='15' fill='#76EE00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='684' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#76EE00:chartreuse2</text>
	<!-- rectangle -->
	<rect x='7.5' y='692.5' width='15' height='15' fill='#66CD00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='704' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#66CD00:chartreuse3</text>
	<!-- rectangle -->
	<rect x='7.5' y='712.5' width='15' height='15' fill='#458B00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='724' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#458B00:chartreuse4</text>
	<!-- rectangle -->
	<rect x='7.5' y='732.5' width='15' height='15' fill='#FF7F24' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='744' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF7F24:chocolate1</text>
	<!-- rectangle -->
	<rect x='7.5' y='752.5' width='15' height='15' fill='#EE7621' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='764' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE7621:chocolate2</text>
	<!-- rectangle -->
	<rect x='7.5' y='772.5' width='15' height='15' fill='#CD661D' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='784' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD661D:chocolate3</text>
	<!-- rectangle -->
	<rect x='7.5' y='792.5' width='15' height='15' fill='#8B4513' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='804' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B4513:chocolate4</text>
	<!-- rectangle -->
	<rect x='7.5' y='812.5' width='15' height='15' fill='#FF7256' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='824' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF7256:coral1</text>
	<!-- rectangle -->
	<rect x='7.5' y='832.5' width='15' height='15' fill='#EE6A50' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='844' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE6A50:coral2</text>
	<!-- rectangle -->
	<rect x='7.5' y='852.5' width='15' height='15' fill='#CD5B45' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='864' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD5B45:coral3</text>
	<!-- rectangle -->
	<rect x='7.5' y='872.5' width='15' height='15' fill='#8B3E2F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='884' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B3E2F:coral4</text>
	<!-- rectangle -->
	<rect x='7.5' y='892.5' width='15' height='15' fill='#FFF8DC' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='904' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFF8DC:cornsilk1</text>
	<!-- rectangle -->
	<rect x='7.5' y='912.5' width='15' height='15' fill='#EEE8CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='924' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEE8CD:cornsilk2</text>
	<!-- rectangle -->
	<rect x='7.5' y='932.5' width='15' height='15' fill='#CDC8B1' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='944' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDC8B1:cornsilk3</text>
	<!-- rectangle -->
	<rect x='7.5' y='952.5' width='15' height='15' fill='#8B8878' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='964' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B8878:cornsilk4</text>
	<!-- rectangle -->
	<rect x='7.5' y='972.5' width='15' height='15' fill='#00FFFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='984' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00FFFF:cyan1</text>
	<!-- rectangle -->
	<rect x='7.5' y='992.5' width='15' height='15' fill='#00EEEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1004' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00EEEE:cyan2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1012.5' width='15' height='15' fill='#00CDCD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1024' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00CDCD:cyan3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1032.5' width='15' height='15' fill='#008B8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1044' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#008B8B:cyan4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1052.5' width='15' height='15' fill='#FFB90F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1064' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFB90F:darkgoldenrod1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1072.5' width='15' height='15' fill='#EEAD0E' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1084' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEAD0E:darkgoldenrod2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1092.5' width='15' height='15' fill='#CD950C' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD950C:darkgoldenrod3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1112.5' width='15' height='15' fill='#8B6508' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B6508:darkgoldenrod4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1132.5' width='15' height='15' fill='#CAFF70' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1144' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CAFF70:darkolivegreen1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1152.5' width='15' height='15' fill='#BCEE68' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1164' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BCEE68:darkolivegreen2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1172.5' width='15' height='15' fill='#A2CD5A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1184' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A2CD5A:darkolivegreen3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1192.5' width='15' height='15' fill='#6E8B3D' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1204' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#6E8B3D:darkolivegreen4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1212.5' width='15' height='15' fill='#FF7F00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1224' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF7F00:darkorange1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1232.5' width='15' height='15' fill='#EE7600' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1244' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE7600:darkorange2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1252.5' width='15' height='15' fill='#CD6600' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1264' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD6600:darkorange3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1272.5' width='15' height='15' fill='#8B4500' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1284' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B4500:darkorange4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1292.5' width='15' height='15' fill='#BF3EFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1304' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BF3EFF:darkorchid1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1312.5' width='15' height='15' fill='#B23AEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1324' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B23AEE:darkorchid2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1332.5' width='15' height='15' fill='#9A32CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1344' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9A32CD:darkorchid3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1352.5' width='15' height='15' fill='#68228B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1364' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#68228B:darkorchid4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1372.5' width='15' height='15' fill='#C1FFC1' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1384' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#C1FFC1:darkseagreen1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1392.5' width='15' height='15' fill='#B4EEB4' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1404' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B4EEB4:darkseagreen2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1412.5' width='15' height='15' fill='#9BCD9B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1424' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9BCD9B:darkseagreen3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1432.5' width='15' height='15' fill='#698B69' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1444' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#698B69:darkseagreen4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1452.5' width='15' height='15' fill='#97FFFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1464' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#97FFFF:darkslategray1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1472.5' width='15' height='15' fill='#8DEEEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1484' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8DEEEE:darkslategray2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1492.5' width='15' height='15' fill='#79CDCD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1504' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#79CDCD:darkslategray3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1512.5' width='15' height='15' fill='#528B8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1524' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#528B8B:darkslategray4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1532.5' width='15' height='15' fill='#FF1493' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1544' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF1493:deeppink1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1552.5' width='15' height='15' fill='#EE1289' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1564' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE1289:deeppink2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1572.5' width='15' height='15' fill='#CD1076' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1584' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD1076:deeppink3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1592.5' width='15' height='15' fill='#8B0A50' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1604' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B0A50:deeppink4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1612.5' width='15' height='15' fill='#00BFFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1624' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00BFFF:deepskyblue1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1632.5' width='15' height='15' fill='#00B2EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1644' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00B2EE:deepskyblue2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1652.5' width='15' height='15' fill='#009ACD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1664' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#009ACD:deepskyblue3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1672.5' width='15' height='15' fill='#00688B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1684' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00688B:deepskyblue4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1692.5' width='15' height='15' fill='#1E90FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1704' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#1E90FF:dodgerblue1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1712.5' width='15' height='15' fill='#1C86EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1724' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#1C86EE:dodgerblue2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1732.5' width='15' height='15' fill='#1874CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1744' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#1874CD:dodgerblue3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1752.5' width='15' height='15' fill='#104E8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1764' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#104E8B:dodgerblue4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1772.5' width='15' height='15' fill='#FF3030' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1784' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF3030:firebrick1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1792.5' width='15' height='15' fill='#EE2C2C' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1804' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE2C2C:firebrick2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1812.5' width='15' height='15' fill='#CD2626' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1824' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD2626:firebrick3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1832.5' width='15' height='15' fill='#8B1A1A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1844' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B1A1A:firebrick4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1852.5' width='15' height='15' fill='#FFD700' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1864' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFD700:gold1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1872.5' width='15' height='15' fill='#EEC900' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1884' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEC900:gold2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1892.5' width='15' height='15' fill='#CDAD00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1904' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDAD00:gold3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1912.5' width='15' height='15' fill='#8B7500' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1924' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B7500:gold4</text>
	<!-- rectangle -->
	<rect x='7.5' y='1932.5' width='15' height='15' fill='#FFC125' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1944' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFC125:goldenrod1</text>
	<!-- rectangle -->
	<rect x='7.5' y='1952.5' width='15' height='15' fill='#EEB422' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1964' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEB422:goldenrod2</text>
	<!-- rectangle -->
	<rect x='7.5' y='1972.5' width='15' height='15' fill='#CD9B1D' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='1984' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD9B1D:goldenrod3</text>
	<!-- rectangle -->
	<rect x='7.5' y='1992.5' width='15' height='15' fill='#8B6914' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='2004' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B6914:goldenrod4</text>
	<!-- rectangle -->
	<rect x='7.5' y='2012.5' width='15' height='15' fill='#00FF00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='2024' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00FF00:green</text>
	<!-- rectangle -->
	<rect x='7.5' y='2032.5' width='15' height='15' fill='#00FF00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='2044' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00FF00:green1</text>
	<!-- rectangle -->
	<rect x='7.5' y='2052.5' width='15' height='15' fill='#00EE00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='2064' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00EE00:green2</text>
	<!-- rectangle -->
	<rect x='7.5' y='2072.5' width='15' height='15' fill='#00CD00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='2084' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00CD00:green3</text>
	<!-- rectangle -->
	<rect x='7.5' y='2092.5' width='15' height='15' fill='#008B00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='2104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#008B00:green4</text>
	<!-- rectangle -->
	<rect x='7.5' y='2112.5' width='15' height='15' fill='#BEBEBE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='25' y='2124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BEBEBE:grey</text>
	<!-- rectangle -->
	<rect x='197.5' y='12.5' width='15' height='15' fill='#000000' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='24' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#000000:grey0</text>
	<!-- rectangle -->
	<rect x='197.5' y='32.5' width='15' height='15' fill='#030303' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='44' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#030303:grey1</text>
	<!-- rectangle -->
	<rect x='197.5' y='52.5' width='15' height='15' fill='#050505' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='64' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#050505:grey2</text>
	<!-- rectangle -->
	<rect x='197.5' y='72.5' width='15' height='15' fill='#080808' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='84' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#080808:grey3</text>
	<!-- rectangle -->
	<rect x='197.5' y='92.5' width='15' height='15' fill='#0A0A0A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#0A0A0A:grey4</text>
	<!-- rectangle -->
	<rect x='197.5' y='112.5' width='15' height='15' fill='#0D0D0D' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#0D0D0D:grey5</text>
	<!-- rectangle -->
	<rect x='197.5' y='132.5' width='15' height='15' fill='#0F0F0F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='144' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#0F0F0F:grey6</text>
	<!-- rectangle -->
	<rect x='197.5' y='152.5' width='15' height='15' fill='#121212' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='164' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#121212:grey7</text>
	<!-- rectangle -->
	<rect x='197.5' y='172.5' width='15' height='15' fill='#141414' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='184' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#141414:grey8</text>
	<!-- rectangle -->
	<rect x='197.5' y='192.5' width='15' height='15' fill='#171717' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='204' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#171717:grey9</text>
	<!-- rectangle -->
	<rect x='197.5' y='212.5' width='15' height='15' fill='#1A1A1A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='224' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#1A1A1A:grey10</text>
	<!-- rectangle -->
	<rect x='197.5' y='232.5' width='15' height='15' fill='#1C1C1C' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='244' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#1C1C1C:grey11</text>
	<!-- rectangle -->
	<rect x='197.5' y='252.5' width='15' height='15' fill='#1F1F1F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='264' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#1F1F1F:grey12</text>
	<!-- rectangle -->
	<rect x='197.5' y='272.5' width='15' height='15' fill='#212121' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='284' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#212121:grey13</text>
	<!-- rectangle -->
	<rect x='197.5' y='292.5' width='15' height='15' fill='#242424' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='304' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#242424:grey14</text>
	<!-- rectangle -->
	<rect x='197.5' y='312.5' width='15' height='15' fill='#262626' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='324' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#262626:grey15</text>
	<!-- rectangle -->
	<rect x='197.5' y='332.5' width='15' height='15' fill='#292929' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='344' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#292929:grey16</text>
	<!-- rectangle -->
	<rect x='197.5' y='352.5' width='15' height='15' fill='#2B2B2B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='364' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#2B2B2B:grey17</text>
	<!-- rectangle -->
	<rect x='197.5' y='372.5' width='15' height='15' fill='#2E2E2E' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='384' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#2E2E2E:grey18</text>
	<!-- rectangle -->
	<rect x='197.5' y='392.5' width='15' height='15' fill='#303030' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='404' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#303030:grey19</text>
	<!-- rectangle -->
	<rect x='197.5' y='412.5' width='15' height='15' fill='#333333' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='424' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#333333:grey20</text>
	<!-- rectangle -->
	<rect x='197.5' y='432.5' width='15' height='15' fill='#363636' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='444' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#363636:grey21</text>
	<!-- rectangle -->
	<rect x='197.5' y='452.5' width='15' height='15' fill='#383838' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='464' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#383838:grey22</text>
	<!-- rectangle -->
	<rect x='197.5' y='472.5' width='15' height='15' fill='#3B3B3B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='484' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#3B3B3B:grey23</text>
	<!-- rectangle -->
	<rect x='197.5' y='492.5' width='15' height='15' fill='#3D3D3D' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='504' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#3D3D3D:grey24</text>
	<!-- rectangle -->
	<rect x='197.5' y='512.5' width='15' height='15' fill='#404040' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='524' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#404040:grey25</text>
	<!-- rectangle -->
	<rect x='197.5' y='532.5' width='15' height='15' fill='#424242' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='544' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#424242:grey26</text>
	<!-- rectangle -->
	<rect x='197.5' y='552.5' width='15' height='15' fill='#454545' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='564' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#454545:grey27</text>
	<!-- rectangle -->
	<rect x='197.5' y='572.5' width='15' height='15' fill='#474747' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='584' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#474747:grey28</text>
	<!-- rectangle -->
	<rect x='197.5' y='592.5' width='15' height='15' fill='#4A4A4A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='604' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#4A4A4A:grey29</text>
	<!-- rectangle -->
	<rect x='197.5' y='612.5' width='15' height='15' fill='#4D4D4D' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='624' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#4D4D4D:grey30</text>
	<!-- rectangle -->
	<rect x='197.5' y='632.5' width='15' height='15' fill='#4F4F4F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='644' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#4F4F4F:grey31</text>
	<!-- rectangle -->
	<rect x='197.5' y='652.5' width='15' height='15' fill='#525252' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='664' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#525252:grey32</text>
	<!-- rectangle -->
	<rect x='197.5' y='672.5' width='15' height='15' fill='#545454' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='684' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#545454:grey33</text>
	<!-- rectangle -->
	<rect x='197.5' y='692.5' width='15' height='15' fill='#575757' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='704' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#575757:grey34</text>
	<!-- rectangle -->
	<rect x='197.5' y='712.5' width='15' height='15' fill='#595959' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='724' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#595959:grey35</text>
	<!-- rectangle -->
	<rect x='197.5' y='732.5' width='15' height='15' fill='#5C5C5C' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='744' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#5C5C5C:grey36</text>
	<!-- rectangle -->
	<rect x='197.5' y='752.5' width='15' height='15' fill='#5E5E5E' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='764' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#5E5E5E:grey37</text>
	<!-- rectangle -->
	<rect x='197.5' y='772.5' width='15' height='15' fill='#616161' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='784' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#616161:grey38</text>
	<!-- rectangle -->
	<rect x='197.5' y='792.5' width='15' height='15' fill='#636363' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='804' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#636363:grey39</text>
	<!-- rectangle -->
	<rect x='197.5' y='812.5' width='15' height='15' fill='#666666' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='824' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#666666:grey40</text>
	<!-- rectangle -->
	<rect x='197.5' y='832.5' width='15' height='15' fill='#696969' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='844' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#696969:grey41</text>
	<!-- rectangle -->
	<rect x='197.5' y='852.5' width='15' height='15' fill='#6B6B6B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='864' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#6B6B6B:grey42</text>
	<!-- rectangle -->
	<rect x='197.5' y='872.5' width='15' height='15' fill='#6E6E6E' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='884' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#6E6E6E:grey43</text>
	<!-- rectangle -->
	<rect x='197.5' y='892.5' width='15' height='15' fill='#707070' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='904' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#707070:grey44</text>
	<!-- rectangle -->
	<rect x='197.5' y='912.5' width='15' height='15' fill='#737373' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='924' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#737373:grey45</text>
	<!-- rectangle -->
	<rect x='197.5' y='932.5' width='15' height='15' fill='#757575' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='944' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#757575:grey46</text>
	<!-- rectangle -->
	<rect x='197.5' y='952.5' width='15' height='15' fill='#787878' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='964' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#787878:grey47</text>
	<!-- rectangle -->
	<rect x='197.5' y='972.5' width='15' height='15' fill='#7A7A7A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='984' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7A7A7A:grey48</text>
	<!-- rectangle -->
	<rect x='197.5' y='992.5' width='15' height='15' fill='#7D7D7D' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1004' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7D7D7D:grey49</text>
	<!-- rectangle -->
	<rect x='197.5' y='1012.5' width='15' height='15' fill='#7F7F7F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1024' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7F7F7F:grey50</text>
	<!-- rectangle -->
	<rect x='197.5' y='1032.5' width='15' height='15' fill='#828282' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1044' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#828282:grey51</text>
	<!-- rectangle -->
	<rect x='197.5' y='1052.5' width='15' height='15' fill='#858585' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1064' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#858585:grey52</text>
	<!-- rectangle -->
	<rect x='197.5' y='1072.5' width='15' height='15' fill='#878787' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1084' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#878787:grey53</text>
	<!-- rectangle -->
	<rect x='197.5' y='1092.5' width='15' height='15' fill='#8A8A8A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8A8A8A:grey54</text>
	<!-- rectangle -->
	<rect x='197.5' y='1112.5' width='15' height='15' fill='#8C8C8C' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8C8C8C:grey55</text>
	<!-- rectangle -->
	<rect x='197.5' y='1132.5' width='15' height='15' fill='#8F8F8F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1144' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8F8F8F:grey56</text>
	<!-- rectangle -->
	<rect x='197.5' y='1152.5' width='15' height='15' fill='#919191' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1164' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#919191:grey57</text>
	<!-- rectangle -->
	<rect x='197.5' y='1172.5' width='15' height='15' fill='#949494' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1184' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#949494:grey58</text>
	<!-- rectangle -->
	<rect x='197.5' y='1192.5' width='15' height='15' fill='#969696' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1204' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#969696:grey59</text>
	<!-- rectangle -->
	<rect x='197.5' y='1212.5' width='15' height='15' fill='#999999' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1224' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#999999:grey60</text>
	<!-- rectangle -->
	<rect x='197.5' y='1232.5' width='15' height='15' fill='#9C9C9C' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1244' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9C9C9C:grey61</text>
	<!-- rectangle -->
	<rect x='197.5' y='1252.5' width='15' height='15' fill='#9E9E9E' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1264' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9E9E9E:grey62</text>
	<!-- rectangle -->
	<rect x='197.5' y='1272.5' width='15' height='15' fill='#A1A1A1' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1284' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A1A1A1:grey63</text>
	<!-- rectangle -->
	<rect x='197.5' y='1292.5' width='15' height='15' fill='#A3A3A3' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1304' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A3A3A3:grey64</text>
	<!-- rectangle -->
	<rect x='197.5' y='1312.5' width='15' height='15' fill='#A6A6A6' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1324' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A6A6A6:grey65</text>
	<!-- rectangle -->
	<rect x='197.5' y='1332.5' width='15' height='15' fill='#A8A8A8' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1344' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A8A8A8:grey66</text>
	<!-- rectangle -->
	<rect x='197.5' y='1352.5' width='15' height='15' fill='#ABABAB' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1364' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#ABABAB:grey67</text>
	<!-- rectangle -->
	<rect x='197.5' y='1372.5' width='15' height='15' fill='#ADADAD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1384' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#ADADAD:grey68</text>
	<!-- rectangle -->
	<rect x='197.5' y='1392.5' width='15' height='15' fill='#B0B0B0' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1404' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B0B0B0:grey69</text>
	<!-- rectangle -->
	<rect x='197.5' y='1412.5' width='15' height='15' fill='#B3B3B3' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1424' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B3B3B3:grey70</text>
	<!-- rectangle -->
	<rect x='197.5' y='1432.5' width='15' height='15' fill='#B5B5B5' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1444' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B5B5B5:grey71</text>
	<!-- rectangle -->
	<rect x='197.5' y='1452.5' width='15' height='15' fill='#B8B8B8' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1464' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B8B8B8:grey72</text>
	<!-- rectangle -->
	<rect x='197.5' y='1472.5' width='15' height='15' fill='#BABABA' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1484' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BABABA:grey73</text>
	<!-- rectangle -->
	<rect x='197.5' y='1492.5' width='15' height='15' fill='#BDBDBD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1504' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BDBDBD:grey74</text>
	<!-- rectangle -->
	<rect x='197.5' y='1512.5' width='15' height='15' fill='#BFBFBF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1524' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BFBFBF:grey75</text>
	<!-- rectangle -->
	<rect x='197.5' y='1532.5' width='15' height='15' fill='#C2C2C2' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1544' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#C2C2C2:grey76</text>
	<!-- rectangle -->
	<rect x='197.5' y='1552.5' width='15' height='15' fill='#C4C4C4' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1564' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#C4C4C4:grey77</text>
	<!-- rectangle -->
	<rect x='197.5' y='1572.5' width='15' height='15' fill='#C7C7C7' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1584' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#C7C7C7:grey78</text>
	<!-- rectangle -->
	<rect x='197.5' y='1592.5' width='15' height='15' fill='#C9C9C9' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1604' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#C9C9C9:grey79</text>
	<!-- rectangle -->
	<rect x='197.5' y='1612.5' width='15' height='15' fill='#CCCCCC' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1624' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CCCCCC:grey80</text>
	<!-- rectangle -->
	<rect x='197.5' y='1632.5' width='15' height='15' fill='#CFCFCF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1644' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CFCFCF:grey81</text>
	<!-- rectangle -->
	<rect x='197.5' y='1652.5' width='15' height='15' fill='#D1D1D1' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1664' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D1D1D1:grey82</text>
	<!-- rectangle -->
	<rect x='197.5' y='1672.5' width='15' height='15' fill='#D4D4D4' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1684' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D4D4D4:grey83</text>
	<!-- rectangle -->
	<rect x='197.5' y='1692.5' width='15' height='15' fill='#D6D6D6' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1704' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D6D6D6:grey84</text>
	<!-- rectangle -->
	<rect x='197.5' y='1712.5' width='15' height='15' fill='#D9D9D9' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1724' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D9D9D9:grey85</text>
	<!-- rectangle -->
	<rect x='197.5' y='1732.5' width='15' height='15' fill='#DBDBDB' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1744' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#DBDBDB:grey86</text>
	<!-- rectangle -->
	<rect x='197.5' y='1752.5' width='15' height='15' fill='#DEDEDE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1764' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#DEDEDE:grey87</text>
	<!-- rectangle -->
	<rect x='197.5' y='1772.5' width='15' height='15' fill='#E0E0E0' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1784' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#E0E0E0:grey88</text>
	<!-- rectangle -->
	<rect x='197.5' y='1792.5' width='15' height='15' fill='#E3E3E3' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1804' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#E3E3E3:grey89</text>
	<!-- rectangle -->
	<rect x='197.5' y='1812.5' width='15' height='15' fill='#E5E5E5' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1824' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#E5E5E5:grey90</text>
	<!-- rectangle -->
	<rect x='197.5' y='1832.5' width='15' height='15' fill='#E8E8E8' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1844' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#E8E8E8:grey91</text>
	<!-- rectangle -->
	<rect x='197.5' y='1852.5' width='15' height='15' fill='#EBEBEB' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1864' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EBEBEB:grey92</text>
	<!-- rectangle -->
	<rect x='197.5' y='1872.5' width='15' height='15' fill='#EDEDED' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1884' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EDEDED:grey93</text>
	<!-- rectangle -->
	<rect x='197.5' y='1892.5' width='15' height='15' fill='#F0F0F0' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1904' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F0F0F0:grey94</text>
	<!-- rectangle -->
	<rect x='197.5' y='1912.5' width='15' height='15' fill='#F2F2F2' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1924' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F2F2F2:grey95</text>
	<!-- rectangle -->
	<rect x='197.5' y='1932.5' width='15' height='15' fill='#F5F5F5' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1944' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F5F5F5:grey96</text>
	<!-- rectangle -->
	<rect x='197.5' y='1952.5' width='15' height='15' fill='#F7F7F7' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1964' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F7F7F7:grey97</text>
	<!-- rectangle -->
	<rect x='197.5' y='1972.5' width='15' height='15' fill='#FAFAFA' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='1984' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FAFAFA:grey98</text>
	<!-- rectangle -->
	<rect x='197.5' y='1992.5' width='15' height='15' fill='#FCFCFC' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='2004' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FCFCFC:grey99</text>
	<!-- rectangle -->
	<rect x='197.5' y='2012.5' width='15' height='15' fill='#FFFFFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='2024' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFFFF:grey100</text>
	<!-- rectangle -->
	<rect x='197.5' y='2032.5' width='15' height='15' fill='#F0FFF0' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='2044' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#F0FFF0:honeydew1</text>
	<!-- rectangle -->
	<rect x='197.5' y='2052.5' width='15' height='15' fill='#E0EEE0' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='2064' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#E0EEE0:honeydew2</text>
	<!-- rectangle -->
	<rect x='197.5' y='2072.5' width='15' height='15' fill='#C1CDC1' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='2084' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#C1CDC1:honeydew3</text>
	<!-- rectangle -->
	<rect x='197.5' y='2092.5' width='15' height='15' fill='#838B83' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='2104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#838B83:honeydew4</text>
	<!-- rectangle -->
	<rect x='197.5' y='2112.5' width='15' height='15' fill='#FF6EB4' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='215' y='2124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF6EB4:hotpink1</text>
	<!-- rectangle -->
	<rect x='387.5' y='12.5' width='15' height='15' fill='#EE6AA7' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='24' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE6AA7:hotpink2</text>
	<!-- rectangle -->
	<rect x='387.5' y='32.5' width='15' height='15' fill='#CD6090' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='44' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD6090:hotpink3</text>
	<!-- rectangle -->
	<rect x='387.5' y='52.5' width='15' height='15' fill='#8B3A62' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='64' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B3A62:hotpink4</text>
	<!-- rectangle -->
	<rect x='387.5' y='72.5' width='15' height='15' fill='#FF6A6A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='84' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF6A6A:indianred1</text>
	<!-- rectangle -->
	<rect x='387.5' y='92.5' width='15' height='15' fill='#EE6363' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE6363:indianred2</text>
	<!-- rectangle -->
	<rect x='387.5' y='112.5' width='15' height='15' fill='#CD5555' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD5555:indianred3</text>
	<!-- rectangle -->
	<rect x='387.5' y='132.5' width='15' height='15' fill='#8B3A3A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='144' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B3A3A:indianred4</text>
	<!-- rectangle -->
	<rect x='387.5' y='152.5' width='15' height='15' fill='#FFFFF0' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='164' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFFF0:ivory1</text>
	<!-- rectangle -->
	<rect x='387.5' y='172.5' width='15' height='15' fill='#EEEEE0' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='184' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEEEE0:ivory2</text>
	<!-- rectangle -->
	<rect x='387.5' y='192.5' width='15' height='15' fill='#CDCDC1' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='204' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDCDC1:ivory3</text>
	<!-- rectangle -->
	<rect x='387.5' y='212.5' width='15' height='15' fill='#8B8B83' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='224' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B8B83:ivory4</text>
	<!-- rectangle -->
	<rect x='387.5' y='232.5' width='15' height='15' fill='#FFF68F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='244' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFF68F:khaki1</text>
	<!-- rectangle -->
	<rect x='387.5' y='252.5' width='15' height='15' fill='#EEE685' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='264' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEE685:khaki2</text>
	<!-- rectangle -->
	<rect x='387.5' y='272.5' width='15' height='15' fill='#CDC673' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='284' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDC673:khaki3</text>
	<!-- rectangle -->
	<rect x='387.5' y='292.5' width='15' height='15' fill='#8B864E' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='304' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B864E:khaki4</text>
	<!-- rectangle -->
	<rect x='387.5' y='312.5' width='15' height='15' fill='#FFF0F5' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='324' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFF0F5:lavenderblush1</text>
	<!-- rectangle -->
	<rect x='387.5' y='332.5' width='15' height='15' fill='#EEE0E5' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='344' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEE0E5:lavenderblush2</text>
	<!-- rectangle -->
	<rect x='387.5' y='352.5' width='15' height='15' fill='#CDC1C5' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='364' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDC1C5:lavenderblush3</text>
	<!-- rectangle -->
	<rect x='387.5' y='372.5' width='15' height='15' fill='#8B8386' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='384' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B8386:lavenderblush4</text>
	<!-- rectangle -->
	<rect x='387.5' y='392.5' width='15' height='15' fill='#FFFACD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='404' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFACD:lemonchiffon1</text>
	<!-- rectangle -->
	<rect x='387.5' y='412.5' width='15' height='15' fill='#EEE9BF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='424' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEE9BF:lemonchiffon2</text>
	<!-- rectangle -->
	<rect x='387.5' y='432.5' width='15' height='15' fill='#CDC9A5' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='444' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDC9A5:lemonchiffon3</text>
	<!-- rectangle -->
	<rect x='387.5' y='452.5' width='15' height='15' fill='#8B8970' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='464' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B8970:lemonchiffon4</text>
	<!-- rectangle -->
	<rect x='387.5' y='472.5' width='15' height='15' fill='#BFEFFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='484' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BFEFFF:lightblue1</text>
	<!-- rectangle -->
	<rect x='387.5' y='492.5' width='15' height='15' fill='#B2DFEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='504' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B2DFEE:lightblue2</text>
	<!-- rectangle -->
	<rect x='387.5' y='512.5' width='15' height='15' fill='#9AC0CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='524' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9AC0CD:lightblue3</text>
	<!-- rectangle -->
	<rect x='387.5' y='532.5' width='15' height='15' fill='#68838B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='544' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#68838B:lightblue4</text>
	<!-- rectangle -->
	<rect x='387.5' y='552.5' width='15' height='15' fill='#E0FFFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='564' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#E0FFFF:lightcyan1</text>
	<!-- rectangle -->
	<rect x='387.5' y='572.5' width='15' height='15' fill='#D1EEEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='584' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D1EEEE:lightcyan2</text>
	<!-- rectangle -->
	<rect x='387.5' y='592.5' width='15' height='15' fill='#B4CDCD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='604' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B4CDCD:lightcyan3</text>
	<!-- rectangle -->
	<rect x='387.5' y='612.5' width='15' height='15' fill='#7A8B8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='624' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7A8B8B:lightcyan4</text>
	<!-- rectangle -->
	<rect x='387.5' y='632.5' width='15' height='15' fill='#EEDD82' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='644' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEDD82:lightgoldenrod</text>
	<!-- rectangle -->
	<rect x='387.5' y='652.5' width='15' height='15' fill='#FFEC8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='664' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFEC8B:lightgoldenrod1</text>
	<!-- rectangle -->
	<rect x='387.5' y='672.5' width='15' height='15' fill='#EEDC82' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='684' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEDC82:lightgoldenrod2</text>
	<!-- rectangle -->
	<rect x='387.5' y='692.5' width='15' height='15' fill='#CDBE70' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='704' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDBE70:lightgoldenrod3</text>
	<!-- rectangle -->
	<rect x='387.5' y='712.5' width='15' height='15' fill='#8B814C' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='724' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B814C:lightgoldenrod4</text>
	<!-- rectangle -->
	<rect x='387.5' y='732.5' width='15' height='15' fill='#FFAEB9' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='744' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFAEB9:lightpink1</text>
	<!-- rectangle -->
	<rect x='387.5' y='752.5' width='15' height='15' fill='#EEA2AD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='764' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEA2AD:lightpink2</text>
	<!-- rectangle -->
	<rect x='387.5' y='772.5' width='15' height='15' fill='#CD8C95' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='784' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD8C95:lightpink3</text>
	<!-- rectangle -->
	<rect x='387.5' y='792.5' width='15' height='15' fill='#8B5F65' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='804' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B5F65:lightpink4</text>
	<!-- rectangle -->
	<rect x='387.5' y='812.5' width='15' height='15' fill='#FFA07A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='824' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFA07A:lightsalmon1</text>
	<!-- rectangle -->
	<rect x='387.5' y='832.5' width='15' height='15' fill='#EE9572' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='844' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE9572:lightsalmon2</text>
	<!-- rectangle -->
	<rect x='387.5' y='852.5' width='15' height='15' fill='#CD8162' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='864' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD8162:lightsalmon3</text>
	<!-- rectangle -->
	<rect x='387.5' y='872.5' width='15' height='15' fill='#8B5742' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='884' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B5742:lightsalmon4</text>
	<!-- rectangle -->
	<rect x='387.5' y='892.5' width='15' height='15' fill='#B0E2FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='904' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B0E2FF:lightskyblue1</text>
	<!-- rectangle -->
	<rect x='387.5' y='912.5' width='15' height='15' fill='#A4D3EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='924' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A4D3EE:lightskyblue2</text>
	<!-- rectangle -->
	<rect x='387.5' y='932.5' width='15' height='15' fill='#8DB6CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='944' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8DB6CD:lightskyblue3</text>
	<!-- rectangle -->
	<rect x='387.5' y='952.5' width='15' height='15' fill='#607B8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='964' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#607B8B:lightskyblue4</text>
	<!-- rectangle -->
	<rect x='387.5' y='972.5' width='15' height='15' fill='#8470FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='984' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8470FF:lightslateblue</text>
	<!-- rectangle -->
	<rect x='387.5' y='992.5' width='15' height='15' fill='#CAE1FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1004' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CAE1FF:lightsteelblue1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1012.5' width='15' height='15' fill='#BCD2EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1024' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BCD2EE:lightsteelblue2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1032.5' width='15' height='15' fill='#A2B5CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1044' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A2B5CD:lightsteelblue3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1052.5' width='15' height='15' fill='#6E7B8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1064' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#6E7B8B:lightsteelblue4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1072.5' width='15' height='15' fill='#FFFFE0' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1084' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFFE0:lightyellow1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1092.5' width='15' height='15' fill='#EEEED1' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEEED1:lightyellow2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1112.5' width='15' height='15' fill='#CDCDB4' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDCDB4:lightyellow3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1132.5' width='15' height='15' fill='#8B8B7A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1144' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B8B7A:lightyellow4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1152.5' width='15' height='15' fill='#FF00FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1164' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF00FF:magenta1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1172.5' width='15' height='15' fill='#EE00EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1184' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE00EE:magenta2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1192.5' width='15' height='15' fill='#CD00CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1204' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD00CD:magenta3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1212.5' width='15' height='15' fill='#8B008B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1224' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B008B:magenta4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1232.5' width='15' height='15' fill='#B03060' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1244' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B03060:maroon</text>
	<!-- rectangle -->
	<rect x='387.5' y='1252.5' width='15' height='15' fill='#FF34B3' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1264' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF34B3:maroon1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1272.5' width='15' height='15' fill='#EE30A7' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1284' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE30A7:maroon2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1292.5' width='15' height='15' fill='#CD2990' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1304' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD2990:maroon3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1312.5' width='15' height='15' fill='#8B1C62' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1324' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B1C62:maroon4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1332.5' width='15' height='15' fill='#E066FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1344' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#E066FF:mediumorchid1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1352.5' width='15' height='15' fill='#D15FEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1364' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D15FEE:mediumorchid2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1372.5' width='15' height='15' fill='#B452CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1384' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B452CD:mediumorchid3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1392.5' width='15' height='15' fill='#7A378B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1404' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7A378B:mediumorchid4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1412.5' width='15' height='15' fill='#AB82FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1424' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#AB82FF:mediumpurple1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1432.5' width='15' height='15' fill='#9F79EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1444' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9F79EE:mediumpurple2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1452.5' width='15' height='15' fill='#8968CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1464' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8968CD:mediumpurple3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1472.5' width='15' height='15' fill='#5D478B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1484' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#5D478B:mediumpurple4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1492.5' width='15' height='15' fill='#FFE4E1' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1504' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFE4E1:mistyrose1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1512.5' width='15' height='15' fill='#EED5D2' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1524' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EED5D2:mistyrose2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1532.5' width='15' height='15' fill='#CDB7B5' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1544' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDB7B5:mistyrose3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1552.5' width='15' height='15' fill='#8B7D7B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1564' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B7D7B:mistyrose4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1572.5' width='15' height='15' fill='#FFDEAD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1584' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFDEAD:navajowhite1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1592.5' width='15' height='15' fill='#EECFA1' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1604' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EECFA1:navajowhite2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1612.5' width='15' height='15' fill='#CDB38B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1624' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDB38B:navajowhite3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1632.5' width='15' height='15' fill='#8B795E' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1644' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B795E:navajowhite4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1652.5' width='15' height='15' fill='#000080' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1664' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#000080:navyblue</text>
	<!-- rectangle -->
	<rect x='387.5' y='1672.5' width='15' height='15' fill='#C0FF3E' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1684' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#C0FF3E:olivedrab1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1692.5' width='15' height='15' fill='#B3EE3A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1704' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B3EE3A:olivedrab2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1712.5' width='15' height='15' fill='#9ACD32' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1724' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9ACD32:olivedrab3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1732.5' width='15' height='15' fill='#698B22' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1744' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#698B22:olivedrab4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1752.5' width='15' height='15' fill='#FFA500' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1764' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFA500:orange1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1772.5' width='15' height='15' fill='#EE9A00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1784' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE9A00:orange2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1792.5' width='15' height='15' fill='#CD8500' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1804' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD8500:orange3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1812.5' width='15' height='15' fill='#8B5A00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1824' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B5A00:orange4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1832.5' width='15' height='15' fill='#FF4500' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1844' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF4500:orangered1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1852.5' width='15' height='15' fill='#EE4000' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1864' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE4000:orangered2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1872.5' width='15' height='15' fill='#CD3700' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1884' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD3700:orangered3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1892.5' width='15' height='15' fill='#8B2500' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1904' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B2500:orangered4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1912.5' width='15' height='15' fill='#FF83FA' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1924' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF83FA:orchid1</text>
	<!-- rectangle -->
	<rect x='387.5' y='1932.5' width='15' height='15' fill='#EE7AE9' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1944' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE7AE9:orchid2</text>
	<!-- rectangle -->
	<rect x='387.5' y='1952.5' width='15' height='15' fill='#CD69C9' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1964' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD69C9:orchid3</text>
	<!-- rectangle -->
	<rect x='387.5' y='1972.5' width='15' height='15' fill='#8B4789' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='1984' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B4789:orchid4</text>
	<!-- rectangle -->
	<rect x='387.5' y='1992.5' width='15' height='15' fill='#9AFF9A' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='2004' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9AFF9A:palegreen1</text>
	<!-- rectangle -->
	<rect x='387.5' y='2012.5' width='15' height='15' fill='#90EE90' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='2024' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#90EE90:palegreen2</text>
	<!-- rectangle -->
	<rect x='387.5' y='2032.5' width='15' height='15' fill='#7CCD7C' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='2044' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7CCD7C:palegreen3</text>
	<!-- rectangle -->
	<rect x='387.5' y='2052.5' width='15' height='15' fill='#548B54' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='2064' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#548B54:palegreen4</text>
	<!-- rectangle -->
	<rect x='387.5' y='2072.5' width='15' height='15' fill='#BBFFFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='2084' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#BBFFFF:paleturquoise1</text>
	<!-- rectangle -->
	<rect x='387.5' y='2092.5' width='15' height='15' fill='#AEEEEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='2104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#AEEEEE:paleturquoise2</text>
	<!-- rectangle -->
	<rect x='387.5' y='2112.5' width='15' height='15' fill='#96CDCD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='405' y='2124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#96CDCD:paleturquoise3</text>
	<!-- rectangle -->
	<rect x='577.5' y='12.5' width='15' height='15' fill='#668B8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='24' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#668B8B:paleturquoise4</text>
	<!-- rectangle -->
	<rect x='577.5' y='32.5' width='15' height='15' fill='#FF82AB' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='44' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF82AB:palevioletred1</text>
	<!-- rectangle -->
	<rect x='577.5' y='52.5' width='15' height='15' fill='#EE799F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='64' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE799F:palevioletred2</text>
	<!-- rectangle -->
	<rect x='577.5' y='72.5' width='15' height='15' fill='#CD6889' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='84' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD6889:palevioletred3</text>
	<!-- rectangle -->
	<rect x='577.5' y='92.5' width='15' height='15' fill='#8B475D' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B475D:palevioletred4</text>
	<!-- rectangle -->
	<rect x='577.5' y='112.5' width='15' height='15' fill='#FFDAB9' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFDAB9:peachpuff1</text>
	<!-- rectangle -->
	<rect x='577.5' y='132.5' width='15' height='15' fill='#EECBAD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='144' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EECBAD:peachpuff2</text>
	<!-- rectangle -->
	<rect x='577.5' y='152.5' width='15' height='15' fill='#CDAF95' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='164' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDAF95:peachpuff3</text>
	<!-- rectangle -->
	<rect x='577.5' y='172.5' width='15' height='15' fill='#8B7765' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='184' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B7765:peachpuff4</text>
	<!-- rectangle -->
	<rect x='577.5' y='192.5' width='15' height='15' fill='#FFB5C5' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='204' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFB5C5:pink1</text>
	<!-- rectangle -->
	<rect x='577.5' y='212.5' width='15' height='15' fill='#EEA9B8' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='224' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEA9B8:pink2</text>
	<!-- rectangle -->
	<rect x='577.5' y='232.5' width='15' height='15' fill='#CD919E' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='244' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD919E:pink3</text>
	<!-- rectangle -->
	<rect x='577.5' y='252.5' width='15' height='15' fill='#8B636C' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='264' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B636C:pink4</text>
	<!-- rectangle -->
	<rect x='577.5' y='272.5' width='15' height='15' fill='#FFBBFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='284' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFBBFF:plum1</text>
	<!-- rectangle -->
	<rect x='577.5' y='292.5' width='15' height='15' fill='#EEAEEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='304' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEAEEE:plum2</text>
	<!-- rectangle -->
	<rect x='577.5' y='312.5' width='15' height='15' fill='#CD96CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='324' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD96CD:plum3</text>
	<!-- rectangle -->
	<rect x='577.5' y='332.5' width='15' height='15' fill='#8B668B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='344' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B668B:plum4</text>
	<!-- rectangle -->
	<rect x='577.5' y='352.5' width='15' height='15' fill='#A020F0' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='364' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#A020F0:purple</text>
	<!-- rectangle -->
	<rect x='577.5' y='372.5' width='15' height='15' fill='#9B30FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='384' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9B30FF:purple1</text>
	<!-- rectangle -->
	<rect x='577.5' y='392.5' width='15' height='15' fill='#912CEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='404' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#912CEE:purple2</text>
	<!-- rectangle -->
	<rect x='577.5' y='412.5' width='15' height='15' fill='#7D26CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='424' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7D26CD:purple3</text>
	<!-- rectangle -->
	<rect x='577.5' y='432.5' width='15' height='15' fill='#551A8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='444' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#551A8B:purple4</text>
	<!-- rectangle -->
	<rect x='577.5' y='452.5' width='15' height='15' fill='#FF0000' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='464' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF0000:red1</text>
	<!-- rectangle -->
	<rect x='577.5' y='472.5' width='15' height='15' fill='#EE0000' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='484' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE0000:red2</text>
	<!-- rectangle -->
	<rect x='577.5' y='492.5' width='15' height='15' fill='#CD0000' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='504' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD0000:red3</text>
	<!-- rectangle -->
	<rect x='577.5' y='512.5' width='15' height='15' fill='#8B0000' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='524' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B0000:red4</text>
	<!-- rectangle -->
	<rect x='577.5' y='532.5' width='15' height='15' fill='#FFC1C1' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='544' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFC1C1:rosybrown1</text>
	<!-- rectangle -->
	<rect x='577.5' y='552.5' width='15' height='15' fill='#EEB4B4' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='564' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEB4B4:rosybrown2</text>
	<!-- rectangle -->
	<rect x='577.5' y='572.5' width='15' height='15' fill='#CD9B9B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='584' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD9B9B:rosybrown3</text>
	<!-- rectangle -->
	<rect x='577.5' y='592.5' width='15' height='15' fill='#8B6969' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='604' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B6969:rosybrown4</text>
	<!-- rectangle -->
	<rect x='577.5' y='612.5' width='15' height='15' fill='#4876FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='624' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#4876FF:royalblue1</text>
	<!-- rectangle -->
	<rect x='577.5' y='632.5' width='15' height='15' fill='#436EEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='644' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#436EEE:royalblue2</text>
	<!-- rectangle -->
	<rect x='577.5' y='652.5' width='15' height='15' fill='#3A5FCD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='664' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#3A5FCD:royalblue3</text>
	<!-- rectangle -->
	<rect x='577.5' y='672.5' width='15' height='15' fill='#27408B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='684' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#27408B:royalblue4</text>
	<!-- rectangle -->
	<rect x='577.5' y='692.5' width='15' height='15' fill='#FF8C69' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='704' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF8C69:salmon1</text>
	<!-- rectangle -->
	<rect x='577.5' y='712.5' width='15' height='15' fill='#EE8262' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='724' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE8262:salmon2</text>
	<!-- rectangle -->
	<rect x='577.5' y='732.5' width='15' height='15' fill='#CD7054' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='744' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD7054:salmon3</text>
	<!-- rectangle -->
	<rect x='577.5' y='752.5' width='15' height='15' fill='#8B4C39' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='764' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B4C39:salmon4</text>
	<!-- rectangle -->
	<rect x='577.5' y='772.5' width='15' height='15' fill='#54FF9F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='784' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#54FF9F:seagreen1</text>
	<!-- rectangle -->
	<rect x='577.5' y='792.5' width='15' height='15' fill='#4EEE94' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='804' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#4EEE94:seagreen2</text>
	<!-- rectangle -->
	<rect x='577.5' y='812.5' width='15' height='15' fill='#43CD80' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='824' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#43CD80:seagreen3</text>
	<!-- rectangle -->
	<rect x='577.5' y='832.5' width='15' height='15' fill='#2E8B57' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='844' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#2E8B57:seagreen4</text>
	<!-- rectangle -->
	<rect x='577.5' y='852.5' width='15' height='15' fill='#FFF5EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='864' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFF5EE:seashell1</text>
	<!-- rectangle -->
	<rect x='577.5' y='872.5' width='15' height='15' fill='#EEE5DE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='884' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEE5DE:seashell2</text>
	<!-- rectangle -->
	<rect x='577.5' y='892.5' width='15' height='15' fill='#CDC5BF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='904' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDC5BF:seashell3</text>
	<!-- rectangle -->
	<rect x='577.5' y='912.5' width='15' height='15' fill='#8B8682' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='924' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B8682:seashell4</text>
	<!-- rectangle -->
	<rect x='577.5' y='932.5' width='15' height='15' fill='#FF8247' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='944' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF8247:sienna1</text>
	<!-- rectangle -->
	<rect x='577.5' y='952.5' width='15' height='15' fill='#EE7942' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='964' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE7942:sienna2</text>
	<!-- rectangle -->
	<rect x='577.5' y='972.5' width='15' height='15' fill='#CD6839' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='984' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD6839:sienna3</text>
	<!-- rectangle -->
	<rect x='577.5' y='992.5' width='15' height='15' fill='#8B4726' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1004' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B4726:sienna4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1012.5' width='15' height='15' fill='#87CEFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1024' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#87CEFF:skyblue1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1032.5' width='15' height='15' fill='#7EC0EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1044' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7EC0EE:skyblue2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1052.5' width='15' height='15' fill='#6CA6CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1064' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#6CA6CD:skyblue3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1072.5' width='15' height='15' fill='#4A708B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1084' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#4A708B:skyblue4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1092.5' width='15' height='15' fill='#836FFF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1104' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#836FFF:slateblue1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1112.5' width='15' height='15' fill='#7A67EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1124' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#7A67EE:slateblue2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1132.5' width='15' height='15' fill='#6959CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1144' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#6959CD:slateblue3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1152.5' width='15' height='15' fill='#473C8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1164' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#473C8B:slateblue4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1172.5' width='15' height='15' fill='#C6E2FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1184' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#C6E2FF:slategray1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1192.5' width='15' height='15' fill='#B9D3EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1204' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#B9D3EE:slategray2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1212.5' width='15' height='15' fill='#9FB6CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1224' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#9FB6CD:slategray3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1232.5' width='15' height='15' fill='#6C7B8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1244' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#6C7B8B:slategray4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1252.5' width='15' height='15' fill='#FFFAFA' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1264' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFAFA:snow1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1272.5' width='15' height='15' fill='#EEE9E9' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1284' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEE9E9:snow2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1292.5' width='15' height='15' fill='#CDC9C9' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1304' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDC9C9:snow3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1312.5' width='15' height='15' fill='#8B8989' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1324' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B8989:snow4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1332.5' width='15' height='15' fill='#00FF7F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1344' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00FF7F:springgreen1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1352.5' width='15' height='15' fill='#00EE76' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1364' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00EE76:springgreen2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1372.5' width='15' height='15' fill='#00CD66' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1384' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00CD66:springgreen3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1392.5' width='15' height='15' fill='#008B45' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1404' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#008B45:springgreen4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1412.5' width='15' height='15' fill='#63B8FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1424' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#63B8FF:steelblue1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1432.5' width='15' height='15' fill='#5CACEE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1444' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#5CACEE:steelblue2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1452.5' width='15' height='15' fill='#4F94CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1464' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#4F94CD:steelblue3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1472.5' width='15' height='15' fill='#36648B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1484' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#36648B:steelblue4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1492.5' width='15' height='15' fill='#FFA54F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1504' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFA54F:tan1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1512.5' width='15' height='15' fill='#EE9A49' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1524' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE9A49:tan2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1532.5' width='15' height='15' fill='#CD853F' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1544' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD853F:tan3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1552.5' width='15' height='15' fill='#8B5A2B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1564' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B5A2B:tan4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1572.5' width='15' height='15' fill='#FFE1FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1584' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFE1FF:thistle1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1592.5' width='15' height='15' fill='#EED2EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1604' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EED2EE:thistle2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1612.5' width='15' height='15' fill='#CDB5CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1624' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDB5CD:thistle3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1632.5' width='15' height='15' fill='#8B7B8B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1644' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B7B8B:thistle4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1652.5' width='15' height='15' fill='#FF6347' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1664' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF6347:tomato1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1672.5' width='15' height='15' fill='#EE5C42' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1684' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE5C42:tomato2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1692.5' width='15' height='15' fill='#CD4F39' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1704' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD4F39:tomato3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1712.5' width='15' height='15' fill='#8B3626' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1724' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B3626:tomato4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1732.5' width='15' height='15' fill='#00F5FF' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1744' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00F5FF:turquoise1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1752.5' width='15' height='15' fill='#00E5EE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1764' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00E5EE:turquoise2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1772.5' width='15' height='15' fill='#00C5CD' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1784' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00C5CD:turquoise3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1792.5' width='15' height='15' fill='#00868B' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1804' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#00868B:turquoise4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1812.5' width='15' height='15' fill='#D02090' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1824' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#D02090:violetred</text>
	<!-- rectangle -->
	<rect x='577.5' y='1832.5' width='15' height='15' fill='#FF3E96' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1844' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FF3E96:violetred1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1852.5' width='15' height='15' fill='#EE3A8C' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1864' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EE3A8C:violetred2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1872.5' width='15' height='15' fill='#CD3278' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1884' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CD3278:violetred3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1892.5' width='15' height='15' fill='#8B2252' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1904' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B2252:violetred4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1912.5' width='15' height='15' fill='#FFE7BA' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1924' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFE7BA:wheat1</text>
	<!-- rectangle -->
	<rect x='577.5' y='1932.5' width='15' height='15' fill='#EED8AE' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1944' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EED8AE:wheat2</text>
	<!-- rectangle -->
	<rect x='577.5' y='1952.5' width='15' height='15' fill='#CDBA96' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1964' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDBA96:wheat3</text>
	<!-- rectangle -->
	<rect x='577.5' y='1972.5' width='15' height='15' fill='#8B7E66' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='1984' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B7E66:wheat4</text>
	<!-- rectangle -->
	<rect x='577.5' y='1992.5' width='15' height='15' fill='#FFFF00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='2004' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#FFFF00:yellow1</text>
	<!-- rectangle -->
	<rect x='577.5' y='2012.5' width='15' height='15' fill='#EEEE00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='2024' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#EEEE00:yellow2</text>
	<!-- rectangle -->
	<rect x='577.5' y='2032.5' width='15' height='15' fill='#CDCD00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='2044' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#CDCD00:yellow3</text>
	<!-- rectangle -->
	<rect x='577.5' y='2052.5' width='15' height='15' fill='#8B8B00' stroke='black' stroke-width='1' />
	<!-- text -->
	<text x='595' y='2064' text-anchor='start' font-family='monospace' font-size='10pt' fill='black' >#8B8B00:yellow4</text>

</svg>
</div>

<p class='fig_title'><a name='6tYSz371NWb'></a>Figure.14-2 色の名前とサンプル - 2</p>
<h2><a name='dGdSPnvay5N'></a>15 更新履歴</h2>
<p>　更新履歴です。</p>
<ul>
<li><strong>2022/08/21 - version 0.001</strong>
<ul>
<li>とりあえず使えそうになったのでリリース</li>
</ul>
</li>
<li><strong>2022/08/31 - version 0.002</strong>
<ul>
<li>ENHANCE : <a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a>を追加</li>
<li>DOCUMENT : 「<a href='#h1RNMQY1C0b'>6  座標と位置</a>」、および「<a href='#kgs1vf3AbTN'>7  サブキャンバス</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/09/04 - version 0.003</strong>
<ul>
<li><strong>INCOMPATIBLE CHANGE : <a class='autolink' href='#juKAz8erPO0'>with-canvas マクロ</a>の第１パラメータを topleft から center に変更</strong></li>
<li>DOCUMENT : 「<a href='#hwRhCz9Gn9t'>9  定義と再使用</a>」を執筆</li>
<li>ENHANCE : 「<a href='#hja1QJC0Ivb'>4.9  キューブ</a>」を追加</li>
<li>ENHANCE : 「<a href='#4cZRWkwhYNO'>4.12  十字</a>」を追加</li>
<li>ENHANCE : 「<a href='#03WwbeGq0eH'>4.6  人物</a>」を追加</li>
</ul>
</li>
<li><strong>2022/09/11</strong>
<ul>
<li>DOCUMENT : 「<a href='#4HFjqmTuIU6'>12.2  ストローク</a>」を執筆</li>
<li>DOCUMENT : 「<a href='#dBUd7L4C3dx'>12.3  フィル</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/09/19</strong>
<ul>
<li>プロダクト名を diagram から kaavio に変更</li>
<li>DOCUMENT : 「<a href='#3kZ9FkounyK'>12.4  フォント</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/09/20</strong>
<ul>
<li>DOCUMENT : 「<a href='#cNmjD3OiTOH'>5.3  生の SVG コード片の挿入</a>」を執筆</li>
<li>ENHANCE : 「<a href='#e7hkC2YUaKe'>4.3  テキストボックス</a>」と「<a href='#hjZ26isLw42'>4.11  爆発</a>」に contents パラメータを追加</li>
</ul>
</li>
<li><strong>2022/09/22 - version 0.004</strong>
<ul>
<li><strong>INCOMPATIBLE CHANGE : defs マクロを <a class='autolink' href='#5hmH4Z1JfiN'>defgroup マクロ</a>に改名</strong></li>
<li>ENHANCE : 「<a href='#dmYFJAv81Kl'>10.1  パターン</a>」を追加</li>
<li>ENHANCE : 「<a href='#8VjSwPlDaAr'>14.1.31  function make-fill</a>」に <code>url</code> パラメータを追加</li>
</ul>
</li>
<li><strong>2022/09/25 - version 0.005</strong>
<ul>
<li>ENHANCE : 「<a href='#erFvEPTJvvx'>14.1.37  function make-stroke</a>」に <code>url</code> パラメータを追加</li>
<li>ENHANCE : 「<a href='#4p1J7EWjD3m'>10.2  グラデーション</a>」を追加</li>
</ul>
</li>
<li><strong>2022/09/27</strong>
<ul>
<li>ENHANCE : 「<a href='#4dFMjynUMYw'>3.9  ひし形</a>」を追加</li>
<li>ENHANCE : 「<a href='#8YR8CiywoW8'>3.10  平行四辺形</a>」を追加</li>
</ul>
</li>
<li><strong>2022/10/01 - version 0.006</strong>
<ul>
<li>ENHANCE : ID 指定のない要素に gensym ID を付与し、 <code>$N.id</code> で参照を可能とする修正</li>
</ul>
</li>
<li><strong>2022/10/03</strong>
<ul>
<li><strong>MINOR INCOMPATIBLE CHANGE : <a href='#dmYFJAv81Kl'>パターン</a>と<a href='#4p1J7EWjD3m'>グラデーション</a>の追加に伴い、fill 指定から別の色を導出する機能を廃止</strong></li>
<li>ENHANCE : 上記の対応として「<a href='#0AVJhEKnK1M'>4.8  メモ</a>」に <code>:fill2</code> パラメータを追加</li>
</ul>
</li>
<li><strong>2022/10/10 - version 0.007</strong>
<ul>
<li>DOCUMENT : 「<a href='#iu9Ovm00KHn'>12.5  IDと参照</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/10/11</strong>
<ul>
<li>DOCUMENT : 「<a href='#heEi5Lc5BX9'>12.6  回転</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/10/14 - version 0.008</strong>
<ul>
<li><strong>INCOMPATIBLE CHANGE : <a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>のデフォルトを line / shape で区別する仕様を廃止</strong></li>
<li>ENHANCE : with-options でデフォルト<a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a>を指定できるようにする修正</li>
<li>DOCUMENT : 「<a href='#gPGlqSbIfdL'>12.7  フィルタ</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/10/16 - version 0.009</strong>
<ul>
<li><strong>MINOR INCOMPATIBLE CHANGE : <a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>機能において<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>非所属の図形要素が描画される順序を変更</strong></li>
<li>DOCUMENT : 「<a href='#1ovJxG7Ie9O'>12.8  レイヤー</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/10/17</strong>
<ul>
<li>DOCUMENT : 「<a href='#fbLcMRTVXac'>12.9  リンク</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/10/22 - version 0.010</strong>
<ul>
<li>ENHANCE : <a href='#9MB3lirlqL9'>終端マーク</a>で stroke や fill を指定しなかった場合の挙動を改善</li>
<li>DOCUMENT : 「<a href='#9MB3lirlqL9'>12.10  終端マーク</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/10/23 - version 0.011</strong>
<ul>
<li>ENHANCE : <a href='#lpCVEZ9kMoP'>ラベル</a>に関するデフォルト設定周辺の仕様を確定</li>
<li>DOCUMENT : 「<a href='#lpCVEZ9kMoP'>12.11  ラベル</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/10/24</strong>
<ul>
<li>BUGFIX : <a href='#lpCVEZ9kMoP'>ラベル</a>描画時の文字エスケープに関するバグを修正</li>
<li>BUGFIX : <a class='autolink' href='#fv4OUML78x4'>直線</a>や<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>の端点、および中点座標に ID.end1 などの記法でアクセスできるようにする機能追加</li>
<li>ENHANCE : with-current-canvas を追加</li>
<li><strong>INCOMPATIBLE CHANGE : 上記に伴い、<a class='autolink' href='#juKAz8erPO0'>with-canvas マクロ</a>を非推奨に変更</strong></li>
</ul>
</li>
<li><strong>2022/10/25 - version 0.012</strong>
<ul>
<li>ENHANCE : <a href='#49KKf97828b'>ブロック矢印</a>で<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>同様に center, end1, end2 をサポートする機能追加</li>
</ul>
</li>
<li><strong>2022/10/26 - version 0.013</strong>
<ul>
<li>ENHANCE : <a href='#cp2F91gKG7W'>円弧</a>で<a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>同様に center, end1, end2 をサポートする機能追加</li>
<li>ENHANCE : <a href='#cp2F91gKG7W'>円弧</a>で<a href='#9MB3lirlqL9'>終端マーク</a>を指定可能にする機能追加</li>
</ul>
</li>
<li><strong>2022/11/06 - version 0.014</strong>
<ul>
<li>DOCUMENT : <a class='autolink' href='#4qgt62QVDZl'>パス</a>の undocumented な未実装部分を完成させ、「<a href='#4qgt62QVDZl'>5.1  パス</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/11/08 - version 0.015</strong>
<ul>
<li>ENHANCE : <a href='#iTkYd8KXLYO'>二次ベジェ曲線</a>を追加</li>
<li>ENHANCE : <a href='#8PFAoBpi4A9'>三次ベジェ曲線</a>を追加</li>
</ul>
</li>
<li><strong>2022/11/09</strong>
<ul>
<li>ENHANCE : <a href='#cp2F91gKG7W'>円弧</a>に debug パラメータを追加</li>
</ul>
</li>
<li><strong>2022/11/10</strong>
<ul>
<li>ENHANCE : <a class='autolink' href='#49Awu7jPI7m'>repeat 関数</a>を追加</li>
<li>BUGFIX : <a href='#cp2F91gKG7W'>円弧</a>における<a href='#9MB3lirlqL9'>終端マーク</a>のバグを改修</li>
<li>ENHANCE : <a class='autolink' href='#2UcFIIIJXWw'>with-block-arrow-options マクロ</a>に length, size, margin パラメータを追加</li>
</ul>
</li>
<li><strong>2022/11/12 - version 0.016</strong>
<ul>
<li>DOCUMENT : 「<a href='#kSyxpJZzQjY'>5.2  画像ファイルの埋め込み</a>」を執筆</li>
</ul>
</li>
<li><strong>2022/11/16</strong>
<ul>
<li>REFACTORING : 出力 SVG のサイズ低減措置</li>
</ul>
</li>
<li><strong>2022/11/17</strong>
<ul>
<li>ENHANCE : with-subcanvas に debug パラメータを追加</li>
<li>ENHANCE : use に debug パラメータを追加</li>
<li>ENHANCE : <a href='#g6xjP526KX7'>テーブル</a> の fills パラメータで <code>:r1-2</code> などの範囲指定をサポート</li>
</ul>
</li>
<li><strong>2022/11/18 - version 0.017</strong>
<ul>
<li>ENHANCE : with-table-range を追加</li>
<li>ENHANCE : 出力 SVG のサイズ低減措置における table の不具合を改修</li>
</ul>
</li>
<li><strong>2022/11/20 - version 0.018</strong>
<ul>
<li>BUGFIX : memo と cube における描画上のバグを改修</li>
</ul>
</li>
<li><strong>2022/11/27 - version 0.019</strong>
<ul>
<li>ENHANCE : <a class='autolink' href='#4z8VHZK3CSo'>テーマ</a>機能を追加</li>
</ul>
</li>
<li><strong>2022/12/11 - version 0.020</strong>
<ul>
<li>ENHANCE : UML <a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a>を追加</li>
</ul>
</li>
<li><strong>2022/12/15 - version 0.021</strong>
<ul>
<li>BUGFIX : <a class='autolink' href='#602QxE3z6rZ'>uml-flow</a> で <code>:spacing</code> パラメータを指定できない問題を改修</li>
<li>BUGFIX : <a class='autolink' href='#5kkSlhsbaIn'>uml-action</a> の <code>:rake</code> パラメータに関するバグを改修</li>
<li>ENHANCE : <a class='autolink' href='#5kkSlhsbaIn'>uml-action</a> で <code>:contents t</code> という記述をサポート</li>
<li>ENHANCE : <a class='autolink' href='#hDY1LBkmvKv'>uml-partition</a> を追加</li>
</ul>
</li>
<li><strong>2022/12/25 - version 0.022</strong>
<ul>
<li>ENHANCE : <code>obj.center</code> に対する <code>obj.cc</code> などの簡略記法を導入（<a href='#h1RNMQY1C0b'>6  章</a>参照）</li>
<li>ENHANCE : ml-note の接続先として point 値を指定可能にする機能追加</li>
</ul>
</li>
<li><strong>2023/03/12 - version 0.023</strong>
<ul>
<li>ENHANCE : <a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a>で接続先として point 値を指定可能にする機能追加</li>
<li><strong>MINOR INCOMPATIBLE CHANGE : <a class='autolink' href='#1LiwgKPPHPV'>make-font 関数</a>に単一パラメータとしてキーワードパラメータを与えた場合の扱いを（:fill に）変更</strong></li>
</ul>
</li>
<li><strong>2024/02/07 - version 0.024</strong>
<ul>
<li>ENHANCE : 多くの shape において center パラメータを position に変更し、新規追加の pivot パラメータで position に対する描画位置を調整可能とする変更</li>
<li><strong>INCOMPATIBLE CHANGE : 上記変更に伴い、 <code>cross</code> における既存の <code>pivot</code> パラメータを <code>intersection</code> に名称変更</strong></li>
</ul>
</li>
<li><strong>2024/05/11 - version 0.025</strong>
<ul>
<li>BUGFIX : version 0.024 における connector のバグを改修</li>
</ul>
</li>
<li><strong>2025/02/20 - version 0.026</strong>
<ul>
<li>ENHANCE : <a href='#6eeF43U3xPh'>正多角形</a>を追加</li>
</ul>
</li>
<li><strong>2025/03/08 - version 0.027</strong>
<ul>
<li>ENHANCE : <a href='#8VfZIeFiMsb'>クリッピング</a>機能を追加</li>
</ul>
</li>
<li><strong>2025/05/06 - version 0.028</strong>
<ul>
<li>ENHANCE : UML 周辺の実装課題を解消。</li>
</ul>
</li>
<li><strong>2025/05/27 - version 0.029</strong>
<ul>
<li>ENHANCE : UML 周辺の実装課題をさらに解消。</li>
</ul>
</li>
<li><strong>2025/06/10 - version 0.030</strong>
<ul>
<li>BUGFIX : with- 系マクロの問題を解消</li>
</ul>
</li>
</ul>
<h2><a name='1iQ3KRF8uJQ'></a>16 図表一覧</h2>
<ul>
<li><a href='#euwIyAjslFq'>Figure.2-1 簡単なサンプル</a></li>
<li><a href='#aw36ReN8sMQ'>Figure.2-2 簡単なサンプル-2</a></li>
<li><a href='#hnnMjGYKwdS'>Figure.3-1 rect のサンプル</a></li>
<li><a href='#aWrJqk5Knkk'>Figure.3-2 circle のサンプル</a></li>
<li><a href='#hO4QoInAXK4'>Figure.3-3 ellipse のサンプル</a></li>
<li><a href='#6AEEehp4CXn'>Figure.3-4 regular-polygon のサンプル</a></li>
<li><a href='#2vjK1SnIRle'>Figure.3-5 polygon のサンプル</a></li>
<li><a href='#9sslZHcYmCd'>Figure.3-6 line のサンプル</a></li>
<li><a href='#lt4PUsUrfps'>Figure.3-7 arc のサンプル</a></li>
<li><a href='#bSd48Y8N0w0'>Figure.3-8 arc のサンプル - 2</a></li>
<li><a href='#4DiBfZ1gVHn'>Figure.3-9 arc における補助線のサンプル</a></li>
<li><a href='#0gIWVS7WQn6'>Figure.3-10 arc における終端マークの例</a></li>
<li><a href='#7uvPIQqWhZy'>Figure.3-11 text のサンプル</a></li>
<li><a href='#5BXk9aTPHsl'>Figure.3-12 テキストの position とアライメント指定の関係</a></li>
<li><a href='#2sQudXmWdXy'>Figure.3-13 diamond のサンプル</a></li>
<li><a href='#by41YHJgt3q'>Figure.3-14 parallelogram のサンプル</a></li>
<li><a href='#67lJneaqrLn'>Figure.3-15 parallelogram における direction と offset</a></li>
<li><a href='#9ykZFla1Nux'>Figure.3-16 2d-curve のサンプル</a></li>
<li><a href='#56m7PNYG5Ij'>Figure.3-17 2d-curve における補助線のサンプル</a></li>
<li><a href='#ctB3IKZPSD2'>Figure.3-18 3d-curve のサンプル</a></li>
<li><a href='#eyqtgpABguK'>Figure.3-19 3d-curve における補助線の サンプル</a></li>
<li><a href='#4gGy4q3tl7a'>Figure.4-1 コネクタのサンプル</a></li>
<li><a href='#iS4fHSfl5nF'>Figure.4-2 コネクタにおける接続点の指定</a></li>
<li><a href='#5cNBVVOciY7'>Figure.4-3 コネクタによる接続経路決定</a></li>
<li><a href='#kui5wtIKl5y'>Figure.4-4 コネクタによる接続経路決定は他の要素を迂回しない</a></li>
<li><a href='#hHTLHAEc9Gs'>Figure.4-5 コネクタの接続経路における「自由な線分」</a></li>
<li><a href='#23eQZDKkLDn'>Figure.4-6 spacing パラメータによるコネクタ接続経路の調整</a></li>
<li><a href='#8WHetxNhOq8'>Figure.4-7 パラグラフのサンプル</a></li>
<li><a href='#4qhyBjYZYlG'>Figure.4-8 パラグラフの position とアライメント指定の関係</a></li>
<li><a href='#4NTtjXsX7EZ'>Figure.4-9 テキストボックスのサンプル</a></li>
<li><a href='#96V371pW4hW'>Figure.4-10 テキストボックスにおける align と valign</a></li>
<li><a href='#fIT9kBEu2gr'>Figure.4-11 with-textbox-options のサンプル</a></li>
<li><a href='#dvJBi2mFjs2'>Figure.4-12 ドキュメントのサンプル</a></li>
<li><a href='#47EMqNZNXWt'>Figure.4-13 with-document-options のサンプル</a></li>
<li><a href='#bB2F9DVM9ic'>Figure.4-14 フォルダのサンプル</a></li>
<li><a href='#0MavWGofA5A'>Figure.4-15 with-folder-options のサンプル</a></li>
<li><a href='#hhPIA8JVdPh'>Figure.4-16 人物のサンプル</a></li>
<li><a href='#lnnHMVYKIVe'>Figure.4-17 with-person-options のサンプル</a></li>
<li><a href='#bnZSVtbTzuH'>Figure.4-18 吹き出しのサンプル</a></li>
<li><a href='#loJcJRs9CQ6'>Figure.4-19 with-balloon-options のサンプル</a></li>
<li><a href='#2VCrzOuGHtM'>Figure.4-20 メモのサンプル</a></li>
<li><a href='#85PzRyM9ubb'>Figure.4-21 with-memo-options のサンプル</a></li>
<li><a href='#j4GYjsfbdqP'>Figure.4-22 キューブのサンプル</a></li>
<li><a href='#3SJFdpOYlvc'>Figure.4-23 with-cube-options のサンプル</a></li>
<li><a href='#c33W6fj0jlH'>Figure.4-24 円柱のサンプル</a></li>
<li><a href='#6qpOLVQEU9p'>Figure.4-25 with-cylinder-options のサンプル</a></li>
<li><a href='#alxN8u8h3HH'>Figure.4-26 爆発のサンプル</a></li>
<li><a href='#6vhSWl4Z51P'>Figure.4-27 with-explosion-options のサンプル</a></li>
<li><a href='#i6ogP2K90yF'>Figure.4-28 十字のサンプル</a></li>
<li><a href='#aRp5j4797s7'>Figure.4-29 with-cross-options のサンプル</a></li>
<li><a href='#eIwQ5AwuV7t'>Figure.4-30 ブロック矢印のサンプル</a></li>
<li><a href='#htsQptREwXf'>Figure.4-31 ブロック矢印のパラメータ</a></li>
<li><a href='#joIBAKcJmZU'>Figure.4-32 with-block-arrow-options のサンプル</a></li>
<li><a href='#jKClDFWGMjM'>Figure.4-33 波括弧のサンプル</a></li>
<li><a href='#eWywNaFqjwP'>Figure.4-34 波括弧のパラメータ</a></li>
<li><a href='#hnkBV0wrSv5'>Figure.4-35 with-brace-options のサンプル</a></li>
<li><a href='#4p5NTDB8bf1'>Figure.4-36 テーブルのサンプル</a></li>
<li><a href='#0EEfXZqu18P'>Figure.4-37 テーブルにおけるテキストの align と valign パラメータ</a></li>
<li><a href='#knawwdhRtbI'>Figure.4-38 with-table-cell の使用例</a></li>
<li><a href='#jRS2A9pCmbY'>Figure.4-39 with-table-range の使用例</a></li>
<li><a href='#eSvvXxmJwyH'>Figure.4-40 テーブルの罫線を描き分けるサンプル</a></li>
<li><a href='#1wjNTIzAXUb'>Figure.5-1 パスのサンプル</a></li>
<li><a href='#b5nHW1IvOL5'>Figure.5-2 :move-to ディレクティブのサンプル</a></li>
<li><a href='#i7V67Cjuavz'>Figure.5-3 :line-to ディレクティブのサンプル</a></li>
<li><a href='#hJ1SRWaSqTh'>Figure.5-4 :h-line-to ディレクティブのサンプル</a></li>
<li><a href='#aSaBFWoqy84'>Figure.5-5 :v-line-to ディレクティブのサンプル</a></li>
<li><a href='#0iNBCVKyFlO'>Figure.5-6 :arc-to ディレクティブのサンプル</a></li>
<li><a href='#aNyY2PIidIC'>Figure.5-7 :arc-to における rx, ry, x-axis-rotation</a></li>
<li><a href='#9yTsBifBw1F'>Figure.5-8 :arc-to における large-arc-flag, sweep-flag</a></li>
<li><a href='#bqBMR0NsHfw'>Figure.5-9 :2d-curve-to ディレクティブのサンプル</a></li>
<li><a href='#8mWonS8i74W'>Figure.5-10 :2d-curve-to ディレクティブのサンプル - 2</a></li>
<li><a href='#ce2nwKyFetY'>Figure.5-11 :3d-curve-to ディレクティブのサンプル</a></li>
<li><a href='#4LyqhFSeu8o'>Figure.5-12 :3d-curve-to ディレクティブのサンプル -2</a></li>
<li><a href='#lPPONTNSIlV'>Figure.5-13 :3d-curve-to ディレクティブのサンプル - 3</a></li>
<li><a href='#fh3ghDl4UuV'>Figure.5-14 :absolute ディレクティブのサンプル</a></li>
<li><a href='#2cRykcOGGkY'>Figure.5-15 :relative ディレクティブのサンプル</a></li>
<li><a href='#iPFjMa8UP1c'>Figure.5-16 :close-path ディレクティブのサンプル</a></li>
<li><a href='#f0G61WmPR5j'>Figure.5-17 raw-svg のサンプル</a></li>
<li><a href='#bdrJmRrH79B'>Figure.6-1 kaavio における座標系</a></li>
<li><a href='#7mETQwj0yso'>Figure.6-2 図形要素の座標参照 - 1</a></li>
<li><a href='#1YSNZvyxqVa'>Figure.6-3 図形要素の座標参照 - 2</a></li>
<li><a href='#a8bQ0cphetD'>Figure.6-4 pivot パラメータの利用例</a></li>
<li><a href='#3ye7tm07fAs'>Figure.6-5 図形要素の座標参照 - 3</a></li>
<li><a href='#kV8JVeAiwLR'>Figure.7-1 サブキャンバスのサンプル</a></li>
<li><a href='#5maEWPLcbWX'>Figure.7-2 contents パラメータを使ったサブキャンバス</a></li>
<li><a href='#04Bhkv1vkfw'>Figure.7-3 with-subcanvas-of を使ったサブキャンバス</a></li>
<li><a href='#fIhw6603jDc'>Figure.7-4 with-current-canvas の使用</a></li>
<li><a href='#0wFPSSB7qFm'>Figure.8-1 with-clipping-current-canvas マクロの例</a></li>
<li><a href='#cfNMG45u3Cb'>Figure.8-2 with-clipping-use マクロの例</a></li>
<li><a href='#9vhIn1PotpA'>Figure.8-3 文字を使ったクリッピングの例</a></li>
<li><a href='#eY4WMx1X8UT'>Figure.9-1 defgroup と use のサンプル</a></li>
<li><a href='#hMyYNXGygmb'>Figure.10-1 単純なパターンのサンプル</a></li>
<li><a href='#iUL0e8M4mDl'>Figure.10-2 パターンのサンプル - 2</a></li>
<li><a href='#fMuRXwcCVRN'>Figure.10-3 単純なグラデーションのサンプル</a></li>
<li><a href='#04QAFmYhXse'>Figure.10-4 グラデーションのサンプル - 2</a></li>
<li><a href='#eA7AkqA2hXb'>Figure.11-1 デフォルトテーマの使用例</a></li>
<li><a href='#ejNFOP6Lepj'>Figure.11-2 register-theme によるテーマの作成</a></li>
<li><a href='#lxaclItxO4a'>Figure.11-3 register-theme でベーステーマを指定する例</a></li>
<li><a href='#9n1DDDTm5Ta'>Figure.11-4 テーマのカスタマイズ例</a></li>
<li><a href='#g39KVcpoX7B'>Figure.12-1 with-options によるデフォルトストロークの変更</a></li>
<li><a href='#eXOpfZPd3Nn'>Figure.12-2 linecap のサンプル</a></li>
<li><a href='#hP90ozCer2U'>Figure.12-3 linejoin のサンプル</a></li>
<li><a href='#6vs2Vz9sOKj'>Figure.12-4 miterlimit のサンプル</a></li>
<li><a href='#dpbOii37pGP'>Figure.12-5 dasharray, dashoffset のサンプル</a></li>
<li><a href='#4csTWXsTuKW'>Figure.12-6 グラデーションを使ったストロークのサンプル</a></li>
<li><a href='#3bmxM1d5ylR'>Figure.12-7 with-options によるデフォルトフィルの変更</a></li>
<li><a href='#9n3NgPBJGzS'>Figure.12-8 fill における rule のサンプル</a></li>
<li><a href='#6bZICAqfljz'>Figure.12-9 パターンを使った塗り潰しのサンプル</a></li>
<li><a href='#aImv1ABfsGj'>Figure.12-10 with-options によるデフォルトフォントの変更</a></li>
<li><a href='#gbHwYj2Ai06'>Figure.12-11 font における stroke と fill</a></li>
<li><a href='#8UprDrMi9gT'>Figure.12-12 font における size と line-spacing</a></li>
<li><a href='#1Z9lqmEkvJx'>Figure.12-13 width-spice のサンプル</a></li>
<li><a href='#h7K5JgIwvZY'>Figure.12-14 回転のサンプル</a></li>
<li><a href='#9DgdURPyOHh'>Figure.12-15 回転しても図形要素の属性は変化しない</a></li>
<li><a href='#9Z8wQykrThD'>Figure.12-16 フィルタのサンプル</a></li>
<li><a href='#fVptn2Tiqv7'>Figure.12-17 フィルタのサンプル - 2</a></li>
<li><a href='#69T4cxkHZWY'>Figure.12-18 レイヤーを使用した表示順序の制御</a></li>
<li><a href='#lvFSgV5aS35'>Figure.12-19 レイヤーを非表示にする例</a></li>
<li><a href='#64zrFTxyK0i'>Figure.12-20 図形要素へのリンクの設定例</a></li>
<li><a href='#dzS2BoL9Ae0'>Figure.12-21 グループ化と use におけるリンク設定の例</a></li>
<li><a href='#dCXVPZYpqQz'>Figure.12-22 終端マークの例</a></li>
<li><a href='#4SdD3hnRhh0'>Figure.12-23 with-endmark-options によるデフォルト終端マークの変更 - 1</a></li>
<li><a href='#atVRmHYlVjQ'>Figure.12-24 with-endmark-options によるデフォルト終端マークの変更 - 2</a></li>
<li><a href='#7hvJUTgyFyn'>Figure.12-25 ラベルの例</a></li>
<li><a href='#iVJA6wcGHlP'>Figure.12-26 with-label-options によるラベル設定の変更</a></li>
<li><a href='#6nX9Svj7TD9'>Figure.12-27 二次ベジェ曲線での補助線の例</a></li>
<li><a href='#47w9hCS30sC'>Figure.13-1 UML アクティビティ図の例</a></li>
<li><a href='#2nfepGo8CeS'>Figure.13-2 UML クラス図の例</a></li>
<li><a href='#5njTon1Y568'>Figure.13-3 UML コンポーネント図の例</a></li>
<li><a href='#8LCq1lJWOf6'>Figure.13-4 UML パッケージ図の例</a></li>
<li><a href='#ethEYgcWcsm'>Figure.13-5 UML 状態マシン図の例</a></li>
<li><a href='#3fo8qztJ9j0'>Figure.13-6 UML ユースケース図の例</a></li>
<li><a href='#4PuNJlu58fE'>Figure.13-7 UML 配置図の例</a></li>
<li><a href='#jUTz0MAjqS8'>Figure.13-8 uml-action のサンプル</a></li>
<li><a href='#avZmIPquQ5d'>Figure.13-9 uml-activity-final のサンプル</a></li>
<li><a href='#fR31UaSYV5i'>Figure.13-10 uml-activity-start のサンプル</a></li>
<li><a href='#dKmzvNQH31B'>Figure.13-11 uml-actor のサンプル</a></li>
<li><a href='#3LIgWeQQNi9'>Figure.13-12 uml-aggregation のサンプル</a></li>
<li><a href='#4eHCRyuZjkq'>Figure.13-13 uml-association のサンプル</a></li>
<li><a href='#15gwZ4l2t0k'>Figure.13-14 uml-artifact のサンプル</a></li>
<li><a href='#dwJuaQgXaIx'>Figure.13-15 uml-class のサンプル</a></li>
<li><a href='#jLagPUaVQa5'>Figure.13-16 uml-class-attribute のサンプル</a></li>
<li><a href='#bRTDU2yRUHK'>Figure.13-17 uml-class-operation のサンプル</a></li>
<li><a href='#lz50RmgVDbe'>Figure.13-18 uml-class-operation-param のサンプル</a></li>
<li><a href='#lbLUrKsYU8x'>Figure.13-19 uml-component のサンプル</a></li>
<li><a href='#bym1gthn40y'>Figure.13-20 uml-composition のサンプル</a></li>
<li><a href='#9mR0oZ4J9iT'>Figure.13-21 uml-connector のサンプル</a></li>
<li><a href='#jNVPfxjHUcC'>Figure.13-22 uml-decision のサンプル</a></li>
<li><a href='#gdWF6ah8eK6'>Figure.13-23 uml-dependency のサンプル</a></li>
<li><a href='#5uEj5boHvy4'>Figure.13-24 uml-expansion-region のサンプル</a></li>
<li><a href='#hbCYwWh5EVR'>Figure.13-25 uml-flow-final のサンプル</a></li>
<li><a href='#4WwY2tJcwxx'>Figure.13-26 uml-flow のサンプル</a></li>
<li><a href='#aIqYEOfOopd'>Figure.13-27 uml-flow-spec のサンプル</a></li>
<li><a href='#2HkfRE5l33M'>Figure.13-28 uml-fork のサンプル</a></li>
<li><a href='#g4Ps2obm0X8'>Figure.13-29 uml-frame のサンプル</a></li>
<li><a href='#7E6tTd25Xwb'>Figure.13-30 fragments パラメータを使った uml-frame のサンプル</a></li>
<li><a href='#0JpthcuLAtL'>Figure.13-31 uml-generalization のサンプル</a></li>
<li><a href='#hccBhwXyWO1'>Figure.13-32 uml-icon-setting のサンプル</a></li>
<li><a href='#lNHV28za0bO'>Figure.13-33 uml-interface のサンプル</a></li>
<li><a href='#8Ppt9eXm4N2'>Figure.13-34 uml-interface-request のサンプル</a></li>
<li><a href='#ctRzvw94nYe'>Figure.13-35 uml-join のサンプル</a></li>
<li><a href='#6yptTOoW7np'>Figure.13-36 uml-merge のサンプル</a></li>
<li><a href='#kzMXfyDkRUO'>Figure.13-37 uml-multiplicity-info のサンプル</a></li>
<li><a href='#dCWihE5tKQQ'>Figure.13-38 uml-node のサンプル</a></li>
<li><a href='#i2gBN2RhnHw'>Figure.13-39 uml-note のサンプル</a></li>
<li><a href='#4tLfM2uCDx0'>Figure.13-40 uml-package のサンプル</a></li>
<li><a href='#ciTM0GPrOeW'>Figure.13-41 uml-partition のサンプル</a></li>
<li><a href='#az9Gf58gMEB'>Figure.13-42 uml-partition のサンプル - 2</a></li>
<li><a href='#52lWmm72SQc'>Figure.13-43 uml-partition における lines パラメータのサンプル</a></li>
<li><a href='#2vEaeqb4vdx'>Figure.13-44 uml-pin のサンプル</a></li>
<li><a href='#gg8F0vevaD8'>Figure.13-45 uml-port のサンプル</a></li>
<li><a href='#1ssaGju1LmT'>Figure.13-46 uml-realization のサンプル</a></li>
<li><a href='#cIrUa9Rtvoh'>Figure.13-47 uml-role-info のサンプル</a></li>
<li><a href='#eIatijW5Ws3'>Figure.13-48 uml-signal のサンプル</a></li>
<li><a href='#gFYxvYPqfFI'>Figure.13-49 uml-state-begin のサンプル</a></li>
<li><a href='#0Vovxfelmu4'>Figure.13-50 uml-state-end のサンプル</a></li>
<li><a href='#aAMCxPsrVD5'>Figure.13-51 uml-state-history のサンプル</a></li>
<li><a href='#fPYRjBngVB2'>Figure.13-52 uml-state のサンプル</a></li>
<li><a href='#cyqVvx7h6f1'>Figure.13-53 uml-stereotype-info のサンプル</a></li>
<li><a href='#fBmyddlzNhV'>Figure.13-54 uml-time-event のサンプル</a></li>
<li><a href='#1tOFL0hPsvz'>Figure.13-55 uml-transition のサンプル</a></li>
<li><a href='#gIdIDB020Dj'>Figure.13-56 uml-transition-spec のサンプル</a></li>
<li><a href='#1a6tENexGp7'>Figure.13-57 uml-usecase のサンプル</a></li>
<li><a href='#2sDmAkevog1'>Figure.14-1 色の名前とサンプル</a></li>
<li><a href='#6tYSz371NWb'>Figure.14-2 色の名前とサンプル - 2</a></li>
</ul>
<p>　　</p>
<ul>
<li><a href='#f7wEYjGUqWE'>Table.5-1 path の data で使用できるディレクティブ</a></li>
<li><a href='#ju0HQrRY8oT'>Table.12-1 ID 指定で参照できる属性の一覧</a></li>
</ul>
<p>　　</p>
<h2><a name='1ewHzjI62xn'></a>17 索引</h2>
<details class='idx_x' open>
<summary class='idx_x'>Symbols</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#00Vj4Quxjg3'>:2d-curve-to</a></li>
<li class='idx_x'><a class='autolink' href='#ewUXtISm3SD'>:3d-curve-to</a></li>
<li class='idx_x'><a class='autolink' href='#dakC66hrAaS'>:absolute</a></li>
<li class='idx_x'><a class='autolink' href='#7RszlFbOHcp'>:arc-to</a></li>
<li class='idx_x'><a class='autolink' href='#eYtPrg88Qb0'>:close-path</a></li>
<li class='idx_x'><a class='autolink' href='#4Dfw1F7JwVj'>:h-line-to</a></li>
<li class='idx_x'><a class='autolink' href='#cUdEKyCDebd'>:line-to</a></li>
<li class='idx_x'><a class='autolink' href='#g0Dr3NCI4V0'>:move-to</a></li>
<li class='idx_x'><a class='autolink' href='#9DKrZhbLEFX'>:relative</a></li>
<li class='idx_x'><a class='autolink' href='#1B0JCoNzfxs'>:v-line-to</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>Numbers</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#kdlPtqqvFfP'>2d-curve マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#96OcmgsUNzD'>3d-curve マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>A</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#7Ru23zWD1UC'>arc マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>B</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#cpOh7beESsS'>balloon マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#fPXJtSPEV1e'>block-arrow1 マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#lwcwjW0h2Fi'>block-arrow2 マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#h2iZ4O9D92X'>brace マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>C</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#bZBKta7QcXj'>circle マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#dUJMfsL520O'>connect マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#992HedzKaJH'>copy-point 関数</a></li>
<li class='idx_x'><a class='autolink' href='#3B5moS1yMrX'>cross マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#eBspaEdxwbc'>cube マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#0kdw9fTRleF'>cylinder マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>D</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#drHcyK8ztR6'>defgradient マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#5hmH4Z1JfiN'>defgroup マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#c7I5kIEPU49'>defpattern マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#3dkLpAyOj5o'>diagram マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#dhcYablOIIY'>diamond マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#8otKibFY5LC'>document マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#4L4hGTnCpBr'>drop-shadow マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>E</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#hsg6m1zvfoj'>ellipse マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#b1mSpvnCg7y'>explosion1 マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#gIBWNJYTozi'>explosion2 マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>F</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#jYqT4ybxQgU'>folder マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>G</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#9Uh7JdQfISi'>glow-shadow マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#2MPHhIhTRRr'>grid マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>I</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#8X1qKGWyF0t'>image マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>L</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#5Ymxg2NeQNs'>layer 関数</a></li>
<li class='idx_x'><a class='autolink' href='#doyrJWCDQyn'>line マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>M</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#793zIcGmzV1'>make-endmark 関数</a></li>
<li class='idx_x'><a class='autolink' href='#8VjSwPlDaAr'>make-fill 関数</a></li>
<li class='idx_x'><a class='autolink' href='#1LiwgKPPHPV'>make-font 関数</a></li>
<li class='idx_x'><a class='autolink' href='#fduKuW1erVu'>make-id 関数</a></li>
<li class='idx_x'><a class='autolink' href='#39Bn4oB2Anb'>make-label 関数</a></li>
<li class='idx_x'><a class='autolink' href='#kHFmcjbmpJJ'>make-link 関数</a></li>
<li class='idx_x'><a class='autolink' href='#2S1kQeXPgCc'>make-point 関数</a></li>
<li class='idx_x'><a class='autolink' href='#erFvEPTJvvx'>make-stroke 関数</a></li>
<li class='idx_x'><a class='autolink' href='#cOZubN9xlDA'>make-uml-class-attribute 関数</a></li>
<li class='idx_x'><a class='autolink' href='#0h6fmJhiwsl'>make-uml-class-operation 関数</a></li>
<li class='idx_x'><a class='autolink' href='#9ACetVBVOg5'>make-uml-class-operation-param 関数</a></li>
<li class='idx_x'><a class='autolink' href='#ci5LvS1eCsb'>make-uml-flow-spec 関数</a></li>
<li class='idx_x'><a class='autolink' href='#1ZEGenUynXh'>make-uml-icon-setting 関数</a></li>
<li class='idx_x'><a class='autolink' href='#8qfGG61let2'>make-uml-multiplicity 関数</a></li>
<li class='idx_x'><a class='autolink' href='#iC62f7YUIgx'>make-uml-role 関数</a></li>
<li class='idx_x'><a class='autolink' href='#gso7yLILXT1'>make-uml-stereotype 関数</a></li>
<li class='idx_x'><a class='autolink' href='#4T0ZbrMPDuy'>make-uml-transition-spec 関数</a></li>
<li class='idx_x'><a class='autolink' href='#0Bkt6LtbRAO'>memo マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>P</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#cVVbsretg1q'>paragraph マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#4ol8IRIe1gI'>parallelogram マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#akKCr0fEV12'>path マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#jsvIhwcwkMd'>person マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#57KuEXjwgOh'>point* 関数</a></li>
<li class='idx_x'><a class='autolink' href='#0vQ0ekhKwfr'>point+ 関数</a></li>
<li class='idx_x'><a class='autolink' href='#b0LbTZSVMDP'>point- 関数</a></li>
<li class='idx_x'><a class='autolink' href='#54sryPWnhiV'>point-absolute-p 関数</a></li>
<li class='idx_x'><a class='autolink' href='#iN3USlmMy0C'>point-distance 関数</a></li>
<li class='idx_x'><a class='autolink' href='#bQomeUcXeDy'>point-p 関数</a></li>
<li class='idx_x'><a class='autolink' href='#h10DBSdGdsq'>point-relative-p 関数</a></li>
<li class='idx_x'><a class='autolink' href='#bvPKeqUaY73'>point-x 関数</a></li>
<li class='idx_x'><a class='autolink' href='#fP5Ssvts2k5'>point-y 関数</a></li>
<li class='idx_x'><a class='autolink' href='#lHK7pfWE40d'>point/ 関数</a></li>
<li class='idx_x'><a class='autolink' href='#0XKkW5OfgY0'>point/x+ 関数</a></li>
<li class='idx_x'><a class='autolink' href='#8hAs0t2cS2R'>point/xy+ 関数</a></li>
<li class='idx_x'><a class='autolink' href='#fxwgCL9UAe4'>point/y+ 関数</a></li>
<li class='idx_x'><a class='autolink' href='#dyrXpT32Rg1'>polygon マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#cKLahjjavLp'>pt* 関数</a></li>
<li class='idx_x'><a class='autolink' href='#eEZRDxsQS11'>pt+ 関数</a></li>
<li class='idx_x'><a class='autolink' href='#44KEZOmjrZt'>pt- 関数</a></li>
<li class='idx_x'><a class='autolink' href='#7cLBJDb8TMb'>pt/ 関数</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>R</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#44CYyox6BTR'>raw-svg マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#hxiiGsQsLt4'>rect マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#1Icvfe8xKRE'>register-theme マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#jLTDopnLqyT'>regular-polygon マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#49Awu7jPI7m'>repeat 関数</a></li>
<li class='idx_x'><a class='autolink' href='#bxjD7EmOfDd'>rgb 関数</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>S</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#l10jSaJeUDk'>SVG本</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>T</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#hqebcMypbfk'>table マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#cSks5rQ0qHz'>text マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#hmTTSZjUX3S'>textbox マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>U</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#5kkSlhsbaIn'>uml-action</a></li>
<li class='idx_x'><a class='autolink' href='#h5Ic0bvUIs7'>uml-action マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#gfsl4uecBoY'>uml-activity-final</a></li>
<li class='idx_x'><a class='autolink' href='#fqECxhnnBJh'>uml-activity-final マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#gr8RKSxFalf'>uml-activity-start</a></li>
<li class='idx_x'><a class='autolink' href='#ff3fz3G29Ce'>uml-activity-start マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#4rUQqcq4sKb'>uml-actor</a></li>
<li class='idx_x'><a class='autolink' href='#0jrm0BGl279'>uml-actor マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#881rvOpGoim'>uml-aggregation</a></li>
<li class='idx_x'><a class='autolink' href='#ie20bBGavpf'>uml-aggregation マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#1ryiWMoWWul'>uml-artifact</a></li>
<li class='idx_x'><a class='autolink' href='#29j3NypNjE1'>uml-artifact マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#0A70k6t8D8T'>uml-association</a></li>
<li class='idx_x'><a class='autolink' href='#c2inmUVDBj2'>uml-association マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#fkYROSV9994'>uml-class</a></li>
<li class='idx_x'><a class='autolink' href='#bepvr4okFYe'>uml-class マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#ilyzpkPZT4a'>uml-class-attribute</a></li>
<li class='idx_x'><a class='autolink' href='#5PbBv7nZ2KR'>uml-class-operation</a></li>
<li class='idx_x'><a class='autolink' href='#bmlwXPORm6W'>uml-class-operation-param</a></li>
<li class='idx_x'><a class='autolink' href='#hlJEas6GjYs'>uml-component</a></li>
<li class='idx_x'><a class='autolink' href='#cC1mrTiDRg0'>uml-component マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#jswiRdMw2Be'>uml-composition</a></li>
<li class='idx_x'><a class='autolink' href='#8Xj1ijpUjgr'>uml-composition マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#lgLGZTmFJ4a'>uml-connector</a></li>
<li class='idx_x'><a class='autolink' href='#f2NYv8Z2P8m'>uml-connector マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#4gZkeXtP8bm'>uml-decision</a></li>
<li class='idx_x'><a class='autolink' href='#4OsqWlN0N0o'>uml-decision マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#f40Gf0pqB5B'>uml-dependency</a></li>
<li class='idx_x'><a class='autolink' href='#0AOc4Hz7cU9'>uml-dependency マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#gbfzFbCEQb7'>uml-expansion-region</a></li>
<li class='idx_x'><a class='autolink' href='#5Ql5zK0cMwk'>uml-expansion-region マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#602QxE3z6rZ'>uml-flow</a></li>
<li class='idx_x'><a class='autolink' href='#9i3KzQ9ScEv'>uml-flow マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#8l54mEIg2yA'>uml-flow-final</a></li>
<li class='idx_x'><a class='autolink' href='#hesl6zCtKGG'>uml-flow-final マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#jG6cW6e7gyu'>uml-flow-spec</a></li>
<li class='idx_x'><a class='autolink' href='#dI34u24Hxh3'>uml-fork</a></li>
<li class='idx_x'><a class='autolink' href='#fF3E03hjzKt'>uml-fork マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#1cJtoPoE2w0'>uml-frame</a></li>
<li class='idx_x'><a class='autolink' href='#5mxCyQhUUgs'>uml-frame マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#i8NSsns8du9'>uml-generalization</a></li>
<li class='idx_x'><a class='autolink' href='#j26H32Vq33s'>uml-generalization マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#dlZiBdOIRvM'>uml-icon-setting</a></li>
<li class='idx_x'><a class='autolink' href='#7DqwJ3CtaoY'>uml-interface</a></li>
<li class='idx_x'><a class='autolink' href='#00gSBM6e17a'>uml-interface マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#iND5crw5iJu'>uml-interface-request</a></li>
<li class='idx_x'><a class='autolink' href='#gOnL4iRiMam'>uml-interface-request マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#eTHeBBfGtFF'>uml-join</a></li>
<li class='idx_x'><a class='autolink' href='#bmxOutyzIGv'>uml-join マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#ikpYK2ZSZov'>uml-merge</a></li>
<li class='idx_x'><a class='autolink' href='#jFepxnqBIdp'>uml-merge マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#g6kEHGpHjhy'>uml-multiplicity-info</a></li>
<li class='idx_x'><a class='autolink' href='#jOvc70hxXQE'>uml-node</a></li>
<li class='idx_x'><a class='autolink' href='#hMkh04dArCc'>uml-node マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#jFViCKeUWqC'>uml-note</a></li>
<li class='idx_x'><a class='autolink' href='#hAV2OPdOjGW'>uml-note マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#algAxSoZB1Z'>uml-package</a></li>
<li class='idx_x'><a class='autolink' href='#6744Q7c1KZQ'>uml-package マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#hDY1LBkmvKv'>uml-partition</a></li>
<li class='idx_x'><a class='autolink' href='#cPEgYZoifRN'>uml-partition マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#axhW9kmgXg3'>uml-pin</a></li>
<li class='idx_x'><a class='autolink' href='#3QBsYVXqy6S'>uml-pin マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#froC5uEo6hu'>uml-port</a></li>
<li class='idx_x'><a class='autolink' href='#ddK61IWocJ6'>uml-port マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#bn5BLn6Qb3Y'>uml-realization</a></li>
<li class='idx_x'><a class='autolink' href='#1fseuHWNLXr'>uml-realization マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#9ugZNtgVL4J'>uml-role-info</a></li>
<li class='idx_x'><a class='autolink' href='#9eWb5bnq5W3'>uml-signal</a></li>
<li class='idx_x'><a class='autolink' href='#cAZB6pzi0PF'>uml-signal マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#a7K2CBytplo'>uml-state</a></li>
<li class='idx_x'><a class='autolink' href='#5YyIF89m1Hw'>uml-state マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#4Fe1V46854v'>uml-state-begin</a></li>
<li class='idx_x'><a class='autolink' href='#gcmbjMkYiQg'>uml-state-begin マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#6dfRecys5K7'>uml-state-end</a></li>
<li class='idx_x'><a class='autolink' href='#1qryRXVv4ZR'>uml-state-end マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#dZcuFEPgREn'>uml-state-history</a></li>
<li class='idx_x'><a class='autolink' href='#6IXmPCuJmAq'>uml-state-history マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#dd6qYwERoK0'>uml-stereotype-info</a></li>
<li class='idx_x'><a class='autolink' href='#dkYATTKFF3X'>uml-time-event</a></li>
<li class='idx_x'><a class='autolink' href='#4maSSQh7iVN'>uml-time-event マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#8h222SLEnVx'>uml-transition</a></li>
<li class='idx_x'><a class='autolink' href='#hlb10Xbiaq1'>uml-transition マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#aiNf7xsL8zY'>uml-transition-spec</a></li>
<li class='idx_x'><a class='autolink' href='#44mEhv2hQcS'>uml-usecase</a></li>
<li class='idx_x'><a class='autolink' href='#1nYTXUXcD8L'>uml-usecase マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#3ABOLb3a4Yl'>use マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>W</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#5wbX4fvnNyO'>with-balloon-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#2UcFIIIJXWw'>with-block-arrow-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#fZCUOAFAdSr'>with-brace-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#juKAz8erPO0'>with-canvas マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#2GafnTjbeAv'>with-clipping-current-canvas マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#gOfMxQSeeNJ'>with-clipping-use マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#cUyjBymyiAi'>with-connector-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#hUUF8VmJZqf'>with-cross-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#gj4u2NRMqLq'>with-cube-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#ibXCLOBvHnZ'>with-current-canvas マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#0EzzPQAHjpS'>with-cylinder-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#7UW0pe7NluY'>with-document-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#i3AN3FOExuU'>with-endmark-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#2N1LVsx5TAj'>with-explosion-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#hbg0Di1qYwi'>with-folder-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#3s1ciXCdtTy'>with-label-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#3Z6ItFChKPn'>with-memo-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#aLgBKwLpsap'>with-paragraph-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#kLuOHuyuzKQ'>with-person-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#lbAdsfqVtbS'>with-point マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#5cY34BaMQhr'>with-subcanvas マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#c9lZIyRpbeF'>with-subcanvas-of マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#8rELk1LL2bC'>with-table-cell マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#50lQokEAysO'>with-table-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#8n9SABCEJKZ'>with-table-range マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#5oL7bKJkowz'>with-textbox-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#24jZuSCTwIB'>with-theme マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#kqRLmxG6cu2'>with-uml-action-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#ixy0Rc930O0'>with-uml-activity-final-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#fiKYEk7l3vl'>with-uml-activity-start-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#6E6RgdGy314'>with-uml-actor-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#g2Q9l90IWR5'>with-uml-aggregation-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#lbGYWLxwRmP'>with-uml-artifact-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#76cvwodLVQW'>with-uml-association-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#8POSSKTKzFu'>with-uml-class-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#40gYpXP3NCx'>with-uml-component-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#8xVEIr1yYBY'>with-uml-composition-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#cjmXVBgVQzD'>with-uml-connector-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#izhz8eDjPe0'>with-uml-decision-merge-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#8I8CeZX7FA2'>with-uml-dependency-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#8SWwZSuNPRo'>with-uml-expansion-region-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#iBvtd62FNd1'>with-uml-flow-final-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#eSqOz44b8wF'>with-uml-flow-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#aT9JaFCRs0a'>with-uml-fork-join-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#aqZzAjhns3j'>with-uml-frame-fragment マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#bKkNt5lQdCz'>with-uml-frame-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#9voMgsjpww9'>with-uml-generalization-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#ilshLKYJM4Y'>with-uml-interface-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#cyCw9NM4rtX'>with-uml-interface-request-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#8ofUYOHf2dy'>with-uml-node-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#bKpfdfxlm28'>with-uml-note-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#5W98YlueCaH'>with-uml-package-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#gdVz9m0bWf1'>with-uml-partition-lane マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#3188U3eHIfD'>with-uml-partition-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#iKNb1fFHcnJ'>with-uml-pin-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#4gpOhhEbKrc'>with-uml-port-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#dhb9h5mcHOW'>with-uml-realization-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#kTp6nsb6qSq'>with-uml-signal-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#dhjnYKCmHBq'>with-uml-state-begin-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#egMWtW3cQM9'>with-uml-state-end-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#btmvKFXWMnJ'>with-uml-state-history-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#gm96ZIuYlAQ'>with-uml-state-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#6F3g2ZSN0ck'>with-uml-time-event-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#exkjsBfuS1B'>with-uml-transition-options マクロ</a></li>
<li class='idx_x'><a class='autolink' href='#7BxCmPuBmA9'>with-uml-usecase-options マクロ</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>X</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#kJ410pmJGOY'>x+ 関数</a></li>
<li class='idx_x'><a class='autolink' href='#9z5A8nE5AJQ'>xy+ 関数</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>Y</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#6ObRbdq5rIQ'>y+ 関数</a></li>
</blockquote>
</details>
<details class='idx_x' open>
<summary class='idx_x'>Others</summary>
<blockquote class='idx_x'>
<li class='idx_x'><a class='autolink' href='#4dFMjynUMYw'>ひし形</a></li>
<li class='idx_x'><a class='autolink' href='#8ya1jqc5cZQ'>アクティビティ図</a></li>
<li class='idx_x'><a class='autolink' href='#kgs1vf3AbTN'>キャンバス</a></li>
<li class='idx_x'><a class='autolink' href='#hja1QJC0Ivb'>キューブ</a></li>
<li class='idx_x'><a class='autolink' href='#khgkJB6xK95'>クラス図</a></li>
<li class='idx_x'><a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a></li>
<li class='idx_x'><a class='autolink' href='#4p1J7EWjD3m'>グラデーション</a></li>
<li class='idx_x'><a class='autolink' href='#eFhVs4WwYUG'>コネクタ</a></li>
<li class='idx_x'><a class='autolink' href='#evUs70Itwyp'>コンポーネント図</a></li>
<li class='idx_x'><a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a></li>
<li class='idx_x'><a class='autolink' href='#4HFjqmTuIU6'>ストローク</a></li>
<li class='idx_x'><a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a></li>
<li class='idx_x'><a class='autolink' href='#e7hkC2YUaKe'>テキストボックス</a></li>
<li class='idx_x'><a class='autolink' href='#g6xjP526KX7'>テーブル</a></li>
<li class='idx_x'><a class='autolink' href='#4z8VHZK3CSo'>テーマ</a></li>
<li class='idx_x'><a class='autolink' href='#jRjILbbJATV'>ドキュメント</a></li>
<li class='idx_x'><a class='autolink' href='#4qgt62QVDZl'>パス</a></li>
<li class='idx_x'><a class='autolink' href='#dmYFJAv81Kl'>パターン</a></li>
<li class='idx_x'><a class='autolink' href='#la7Xa1OTF3W'>パッケージ図</a></li>
<li class='idx_x'><a class='autolink' href='#4WyMTv59pvw'>パラグラフ</a></li>
<li class='idx_x'><a class='autolink' href='#dBUd7L4C3dx'>フィル</a></li>
<li class='idx_x'><a class='autolink' href='#gPGlqSbIfdL'>フィルタ</a></li>
<li class='idx_x'><a class='autolink' href='#5ZT843xJDiq'>フォルダ</a></li>
<li class='idx_x'><a class='autolink' href='#3kZ9FkounyK'>フォント</a></li>
<li class='idx_x'><a class='autolink' href='#49KKf97828b'>ブロック矢印</a></li>
<li class='idx_x'><a class='autolink' href='#0AVJhEKnK1M'>メモ</a></li>
<li class='idx_x'><a class='autolink' href='#e57rLpXY8ah'>ユースケース図</a></li>
<li class='idx_x'><a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a></li>
<li class='idx_x'><a class='autolink' href='#fbLcMRTVXac'>リンク</a></li>
<li class='idx_x'><a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a></li>
<li class='idx_x'><a class='autolink' href='#8PFAoBpi4A9'>三次ベジェ曲線</a></li>
<li class='idx_x'><a class='autolink' href='#iTkYd8KXLYO'>二次ベジェ曲線</a></li>
<li class='idx_x'><a class='autolink' href='#03WwbeGq0eH'>人物</a></li>
<li class='idx_x'><a class='autolink' href='#cp2F91gKG7W'>円弧</a></li>
<li class='idx_x'><a class='autolink' href='#5ME1Xv0K4sM'>円柱</a></li>
<li class='idx_x'><a class='autolink' href='#4cZRWkwhYNO'>十字</a></li>
<li class='idx_x'><a class='autolink' href='#5IHcv4bxjLU'>吹き出し</a></li>
<li class='idx_x'><a class='autolink' href='#kJonRG8GtHF'>四角形</a></li>
<li class='idx_x'><a class='autolink' href='#heEi5Lc5BX9'>回転</a></li>
<li class='idx_x'><a class='autolink' href='#dBUd7L4C3dx'>塗り潰し</a></li>
<li class='idx_x'><a class='autolink' href='#5vGRm9AMypB'>多角形</a></li>
<li class='idx_x'><a class='autolink' href='#8YR8CiywoW8'>平行四辺形</a></li>
<li class='idx_x'><a class='autolink' href='#7YzIcjhyGKN'>楕円</a></li>
<li class='idx_x'><a class='autolink' href='#8UQowBxrcaE'>正円</a></li>
<li class='idx_x'><a class='autolink' href='#6eeF43U3xPh'>正多角形</a></li>
<li class='idx_x'><a class='autolink' href='#lBS33hNe32a'>波括弧</a></li>
<li class='idx_x'><a class='autolink' href='#hjZ26isLw42'>爆発</a></li>
<li class='idx_x'><a class='autolink' href='#kYsauEETY6n'>状態マシン図</a></li>
<li class='idx_x'><a class='autolink' href='#cNmjD3OiTOH'>生の SVG コード片の挿入</a></li>
<li class='idx_x'><a class='autolink' href='#kSyxpJZzQjY'>画像ファイルの埋め込み</a></li>
<li class='idx_x'><a class='autolink' href='#fv4OUML78x4'>直線</a></li>
<li class='idx_x'><a class='autolink' href='#9MB3lirlqL9'>終端マーク</a></li>
<li class='idx_x'><a class='autolink' href='#1rpUB3fre67'>色の指定</a></li>
<li class='idx_x'><a class='autolink' href='#1rpUB3fre67'>色名の指定</a></li>
<li class='idx_x'><a class='autolink' href='#2tO36YvJCgK'>補助線</a></li>
<li class='idx_x'><a class='autolink' href='#6DAfYJjISDb'>配置図</a></li>
</blockquote>
</details>
<hr>
<p class='footnote'><a name='footnote1' href='#footnote_ref1'>1</a> : 正式な名称が決まる前は、diagram という名前でした。kaavio は同じ意味のフィンランドの言葉だそうです。この名前にした深い理由はなく、単純にネット検索で埋もれてしまわない名前にしたかっただけです。</p>
<p class='footnote'><a name='footnote2' href='#footnote_ref2'>2</a> : SVG は Scalable Vector Graphics の略です。</p>
<p class='footnote'><a name='footnote3' href='#footnote_ref3'>3</a> : もともと LISPer だという方で DSL の詳細を知りたい方は、申し訳ありませんがコードを直接参照してください。</p>
<p class='footnote'><a name='footnote4' href='#footnote_ref4'>4</a> : Lisper の方へ：要するにキーワードパラメータです。</p>
<p class='footnote'><a name='footnote5' href='#footnote_ref5'>5</a> : 不格好に見えるかもしれませんが、Microsoft Word の図形要素をトレースして作っています。そこそこの再現度のはず。</p>
<p class='footnote'><a name='footnote6' href='#footnote_ref6'>6</a> : 生の SVG コードを挿入したとして、そしてそれが SVG 規格に完璧に適合していたとしても、お使いの（ブラウザなどの）SVG ビューワーで「正しく」表示できるかどうかは別問題だということを常に念頭に置いて作業してください。kaavio の開発では「メジャーなブラウザでサポートされていない SVG の機能を避ける」ことに大きな注意と努力が払われています。</p>
<p class='footnote'><a name='footnote7' href='#footnote_ref7'>7</a> : このことは、kaavio が動作する時点で指定された画像ファイルが「そこにある」必要がある、ということを意味します。 <code>width, height</code> の両方が明示的に指定された場合に限り、kaavio は実際の画像サイズを調べません。</p>
<p class='footnote'><a name='footnote8' href='#footnote_ref8'>8</a> : Lisper の方へ：ご想像通り、 <code>(list x y)</code> でもいいですし、バッククォートを使ってもかまいません。</p>
<p class='footnote'><a name='footnote9' href='#footnote_ref9'>9</a> : この他に <code>width, height</code> があって、その図形要素の幅と高さを取得することもできますが、あまり使用しません。</p>
<p class='footnote'><a name='footnote10' href='#footnote_ref10'>10</a> : Lisper の方へ： <code>app.center</code> という記法は動的に生成する symbol-macrolet によって、また <code>(attr :app :center)</code> については macrolet によって実現しています。attr は局所関数を使って同じ<a class='autolink' href='#dmYFJAv81Kl'>パターン</a>の繰り返しを共通化する場合などに便利でしょう。</p>
<p class='footnote'><a name='footnote11' href='#footnote_ref11'>11</a> : <a class='autolink' href='#kgs1vf3AbTN'>サブキャンバス</a>が自動的な<a class='autolink' href='#8VfZIeFiMsb'>クリッピング</a>をしないのは、kaavio が作図指向で絵画的な効果を重視していないという理由があります。</p>
<p class='footnote'><a name='footnote12' href='#footnote_ref12'>12</a> : これはあまり使わない方が良いテクニックかもしれません。図形要素別の「デフォルト設定」とは無関係に動作するので、慣れないと混乱するかもしれないからです。</p>
<p class='footnote'><a name='footnote13' href='#footnote_ref13'>13</a> : Lisper の方へ。<a class='autolink' href='#cTbK0huuMTl'>with-options マクロ</a>は <code>*default-stroke*</code> や <code>*default-fill*</code> といったスペシャル変数を束縛するものです。非 Lisper のユーザーへの説明をわかりやすくする上でこの方法をとっています。</p>
<p class='footnote'><a name='footnote14' href='#footnote_ref14'>14</a> : これはあまり使わない方が良いテクニックかもしれません。図形要素別の「デフォルト設定」とは無関係に動作するので、慣れないと混乱するかもしれないからです。</p>
<p class='footnote'><a name='footnote15' href='#footnote_ref15'>15</a> : 正確には <code>:size 12 :fill :black :width-spice 0.65 :line-spacing 2</code> です。</p>
<p class='footnote'><a name='footnote16' href='#footnote_ref16'>16</a> : SVG 規格には <code>textLength</code> 属性というものがあって、指定されたスペースに<a class='autolink' href='#cTdCvBeU6ZJ'>テキスト</a>を収めることができるそうです。これを今後導入するかもしれません。しかし、重箱の隅っこ的な機能は SVG レンダリングエンジン（多くの場合はブラウザのことですが）がサポートしていない可能性があるので、今後の検討次第です。</p>
<p class='footnote'><a name='footnote17' href='#footnote_ref17'>17</a> : Lisper の方へ：要するに <code>gensym</code> を使っています。</p>
<p class='footnote'><a name='footnote18' href='#footnote_ref18'>18</a> : ブラウザなどの SVG ビューワー上で動的に<a class='autolink' href='#1ovJxG7Ie9O'>レイヤー</a>の表示／非表示を切り替えることは可能ですが、kaavio としては現状サポートしていません。</p>
<p class='footnote'><a name='footnote19' href='#footnote_ref19'>19</a> : <code>:position</code> も<a class='autolink' href='#lpCVEZ9kMoP'>ラベル</a>毎に異なる場合が多いですが、きれいに整列した作図だと同じになる場合もあるので <a class='autolink' href='#3s1ciXCdtTy'>with-label-options マクロ</a>でサポートしています。</p>
<p class='footnote'><a name='footnote20' href='#footnote_ref20'>20</a> :  これは、省略時に自動的に付与される ID は SVG コード上には現れないからです。しかし、この挙動は将来変更される可能性があります。</p>
<p class='footnote'><a name='footnote21' href='#footnote_ref21'>21</a> : SVG 2 の規格において色名に関する節は削除され、CSS 規格を参照することになりました。</p>
<p class='footnote'><a name='footnote22' href='#footnote_ref22'>22</a> : <a href='#6tYSz371NWb'>Figure.14-2</a> に記載されているのは、Emacs エディタで定義されている色名のうち、規格に含まれないものの一覧です。このうち、green(#00FF00), grey(#BEBEBE), maroon(#B03060), purple(#A020F0) については規格側にも同じ名前があるものの異なる値です。これらは「規格優先」としているため、たとえば <code>:green</code> を指定した場合は規格の #008000 が使用され、#00FF00 は使用されません。</p>
</body>
</html>
